(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))y(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&y(f)}).observe(document,{childList:!0,subtree:!0});function w(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function y(u){if(u.ep)return;u.ep=!0;const c=w(u);fetch(u.href,c)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e){const t=Object.create(null);for(const w of e.split(","))t[w]=1;return w=>w in t}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const w=e.indexOf(t);w>-1&&e.splice(w,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return w=>t[w]||(t[w]=e(w))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,w)=>w?w.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let w=0;w<e.length;w++)e[w](...t)},def=(e,t,w,y=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:y,value:w})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray(e)){const t={};for(let w=0;w<e.length;w++){const y=e[w],u=isString(y)?parseStringStyle(y):normalizeStyle(y);if(u)for(const c in u)t[c]=u[c]}return t}else if(isString(e)||isObject(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(w=>{if(w){const y=w.split(propertyDelimiterRE);y.length>1&&(t[y[0].trim()]=y[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray(e))for(let w=0;w<e.length;w++){const y=normalizeClass(e[w]);y&&(t+=y+" ")}else if(isObject(e))for(const w in e)e[w]&&(t+=w+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,w;if(this.scopes)for(t=0,w=this.scopes.length;t<w;t++)this.scopes[t].pause();for(t=0,w=this.effects.length;t<w;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,w;if(this.scopes)for(t=0,w=this.scopes.length;t<w;t++)this.scopes[t].resume();for(t=0,w=this.effects.length;t<w;t++)this.effects[t].resume()}}run(t){if(this._active){const w=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=w}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let w,y;for(w=0,y=this.effects.length;w<y;w++)this.effects[w].stop();for(this.effects.length=0,w=0,y=this.cleanups.length;w<y;w++)this.cleanups[w]();if(this.cleanups.length=0,this.scopes){for(w=0,y=this.scopes.length;w<y;w++)this.scopes[w].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const t=activeSub,w=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=t,shouldTrack=w,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)removeSub(t);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,t=!1){if(e.flags|=8,t){e.next=batchedComputed,batchedComputed=e;return}e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let t=batchedComputed;for(batchedComputed=void 0;t;){const w=t.next;t.next=void 0,t.flags&=-9,t=w}}let e;for(;batchedSub;){let t=batchedSub;for(batchedSub=void 0;t;){const w=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(y){e||(e=y)}t=w}}if(e)throw e}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cleanupDeps(e){let t,w=e.depsTail,y=w;for(;y;){const u=y.prevDep;y.version===-1?(y===w&&(w=u),removeSub(y),removeDep(y)):t=y,y.dep.activeLink=y.prevActiveLink,y.prevActiveLink=void 0,y=u}e.deps=t,e.depsTail=w}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===globalVersion)||(e.globalVersion=globalVersion,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!isDirty(e))))return;e.flags|=2;const t=e.dep,w=activeSub,y=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const u=e.fn(e._value);(t.version===0||hasChanged(u,e._value))&&(e.flags|=128,e._value=u,t.version++)}catch(u){throw t.version++,u}finally{activeSub=w,shouldTrack=y,cleanupDeps(e),e.flags&=-3}}function removeSub(e,t=!1){const{dep:w,prevSub:y,nextSub:u}=e;if(y&&(y.nextSub=u,e.prevSub=void 0),u&&(u.prevSub=y,e.nextSub=void 0),w.subs===e&&(w.subs=y,!y&&w.computed)){w.computed.flags&=-5;for(let c=w.computed.deps;c;c=c.nextDep)removeSub(c,!0)}!t&&!--w.sc&&w.map&&w.map.delete(w.key)}function removeDep(e){const{prevDep:t,nextDep:w}=e;t&&(t.nextDep=w,e.prevDep=void 0),w&&(w.prevDep=t,e.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function cleanupEffect(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const w=activeSub;activeSub=void 0;try{t()}finally{activeSub=w}}}let globalVersion=0;class Link{constructor(t,w){this.sub=t,this.dep=w,this.version=w.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let w=this.activeLink;if(w===void 0||w.sub!==activeSub)w=this.activeLink=new Link(activeSub,this),activeSub.deps?(w.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=w,activeSub.depsTail=w):activeSub.deps=activeSub.depsTail=w,addSub(w);else if(w.version===-1&&(w.version=this.version,w.nextDep)){const y=w.nextDep;y.prevDep=w.prevDep,w.prevDep&&(w.prevDep.nextDep=y),w.prevDep=activeSub.depsTail,w.nextDep=void 0,activeSub.depsTail.nextDep=w,activeSub.depsTail=w,activeSub.deps===w&&(activeSub.deps=y)}return w}trigger(t){this.version++,globalVersion++,this.notify(t)}notify(t){startBatch();try{for(let w=this.subs;w;w=w.prevSub)w.sub.notify()&&w.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let y=t.deps;y;y=y.nextDep)addSub(y)}const w=e.dep.subs;w!==e&&(e.prevSub=w,w&&(w.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,t,w){if(shouldTrack&&activeSub){let y=targetMap.get(e);y||targetMap.set(e,y=new Map);let u=y.get(w);u||(y.set(w,u=new Dep),u.map=y,u.key=w),u.track()}}function trigger(e,t,w,y,u,c){const f=targetMap.get(e);if(!f){globalVersion++;return}const h=n=>{n&&n.trigger()};if(startBatch(),t==="clear")f.forEach(h);else{const n=isArray(e),l=n&&isIntegerKey(w);if(n&&w==="length"){const a=Number(y);f.forEach((s,_)=>{(_==="length"||_===ARRAY_ITERATE_KEY||!isSymbol(_)&&_>=a)&&h(s)})}else switch((w!==void 0||f.has(void 0))&&h(f.get(w)),l&&h(f.get(ARRAY_ITERATE_KEY)),t){case"add":n?l&&h(f.get("length")):(h(f.get(ITERATE_KEY)),isMap(e)&&h(f.get(MAP_KEY_ITERATE_KEY)));break;case"delete":n||(h(f.get(ITERATE_KEY)),isMap(e)&&h(f.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&h(f.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(e){const t=toRaw(e);return t===e?t:(track(t,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(t=>isArray(t)?reactiveReadArray(t):t))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,t){return apply(this,"every",e,t,void 0,arguments)},filter(e,t){return apply(this,"filter",e,t,w=>w.map(toReactive),arguments)},find(e,t){return apply(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,t,w){const y=shallowReadArray(e),u=y[t]();return y!==e&&!isShallow(e)&&(u._next=u.next,u.next=()=>{const c=u._next();return c.value&&(c.value=w(c.value)),c}),u}const arrayProto=Array.prototype;function apply(e,t,w,y,u,c){const f=shallowReadArray(e),h=f!==e&&!isShallow(e),n=f[t];if(n!==arrayProto[t]){const s=n.apply(e,c);return h?toReactive(s):s}let l=w;f!==e&&(h?l=function(s,_){return w.call(this,toReactive(s),_,e)}:w.length>2&&(l=function(s,_){return w.call(this,s,_,e)}));const a=n.call(f,l,y);return h&&u?u(a):a}function reduce(e,t,w,y){const u=shallowReadArray(e);let c=w;return u!==e&&(isShallow(e)?w.length>3&&(c=function(f,h,n){return w.call(this,f,h,n,e)}):c=function(f,h,n){return w.call(this,f,toReactive(h),n,e)}),u[t](c,...y)}function searchProxy(e,t,w){const y=toRaw(e);track(y,"iterate",ARRAY_ITERATE_KEY);const u=y[t](...w);return(u===-1||u===!1)&&isProxy(w[0])?(w[0]=toRaw(w[0]),y[t](...w)):u}function noTracking(e,t,w=[]){pauseTracking(),startBatch();const y=toRaw(e)[t].apply(e,w);return endBatch(),resetTracking(),y}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol));function hasOwnProperty(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,w=!1){this._isReadonly=t,this._isShallow=w}get(t,w,y){if(w==="__v_skip")return t.__v_skip;const u=this._isReadonly,c=this._isShallow;if(w==="__v_isReactive")return!u;if(w==="__v_isReadonly")return u;if(w==="__v_isShallow")return c;if(w==="__v_raw")return y===(u?c?shallowReadonlyMap:readonlyMap:c?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(y)?t:void 0;const f=isArray(t);if(!u){let n;if(f&&(n=arrayInstrumentations[w]))return n;if(w==="hasOwnProperty")return hasOwnProperty}const h=Reflect.get(t,w,isRef(t)?t:y);return(isSymbol(w)?builtInSymbols.has(w):isNonTrackableKeys(w))||(u||track(t,"get",w),c)?h:isRef(h)?f&&isIntegerKey(w)?h:h.value:isObject(h)?u?readonly(h):reactive(h):h}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,w,y,u){let c=t[w];if(!this._isShallow){const n=isReadonly(c);if(!isShallow(y)&&!isReadonly(y)&&(c=toRaw(c),y=toRaw(y)),!isArray(t)&&isRef(c)&&!isRef(y))return n?!1:(c.value=y,!0)}const f=isArray(t)&&isIntegerKey(w)?Number(w)<t.length:hasOwn(t,w),h=Reflect.set(t,w,y,isRef(t)?t:u);return t===toRaw(u)&&(f?hasChanged(y,c)&&trigger(t,"set",w,y):trigger(t,"add",w,y)),h}deleteProperty(t,w){const y=hasOwn(t,w);t[w];const u=Reflect.deleteProperty(t,w);return u&&y&&trigger(t,"delete",w,void 0),u}has(t,w){const y=Reflect.has(t,w);return(!isSymbol(w)||!builtInSymbols.has(w))&&track(t,"has",w),y}ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,w){return!0}deleteProperty(t,w){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,t,w){return function(...y){const u=this.__v_raw,c=toRaw(u),f=isMap(c),h=e==="entries"||e===Symbol.iterator&&f,n=e==="keys"&&f,l=u[e](...y),a=w?toShallow:t?toReadonly:toReactive;return!t&&track(c,"iterate",n?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:s,done:_}=l.next();return _?{value:s,done:_}:{value:h?[a(s[0]),a(s[1])]:a(s),done:_}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(e,t){const w={get(u){const c=this.__v_raw,f=toRaw(c),h=toRaw(u);e||(hasChanged(u,h)&&track(f,"get",u),track(f,"get",h));const{has:n}=getProto(f),l=t?toShallow:e?toReadonly:toReactive;if(n.call(f,u))return l(c.get(u));if(n.call(f,h))return l(c.get(h));c!==f&&c.get(u)},get size(){const u=this.__v_raw;return!e&&track(toRaw(u),"iterate",ITERATE_KEY),Reflect.get(u,"size",u)},has(u){const c=this.__v_raw,f=toRaw(c),h=toRaw(u);return e||(hasChanged(u,h)&&track(f,"has",u),track(f,"has",h)),u===h?c.has(u):c.has(u)||c.has(h)},forEach(u,c){const f=this,h=f.__v_raw,n=toRaw(h),l=t?toShallow:e?toReadonly:toReactive;return!e&&track(n,"iterate",ITERATE_KEY),h.forEach((a,s)=>u.call(c,l(a),l(s),f))}};return extend(w,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(u){!t&&!isShallow(u)&&!isReadonly(u)&&(u=toRaw(u));const c=toRaw(this);return getProto(c).has.call(c,u)||(c.add(u),trigger(c,"add",u,u)),this},set(u,c){!t&&!isShallow(c)&&!isReadonly(c)&&(c=toRaw(c));const f=toRaw(this),{has:h,get:n}=getProto(f);let l=h.call(f,u);l||(u=toRaw(u),l=h.call(f,u));const a=n.call(f,u);return f.set(u,c),l?hasChanged(c,a)&&trigger(f,"set",u,c):trigger(f,"add",u,c),this},delete(u){const c=toRaw(this),{has:f,get:h}=getProto(c);let n=f.call(c,u);n||(u=toRaw(u),n=f.call(c,u)),h&&h.call(c,u);const l=c.delete(u);return n&&trigger(c,"delete",u,void 0),l},clear(){const u=toRaw(this),c=u.size!==0,f=u.clear();return c&&trigger(u,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(u=>{w[u]=createIterableMethod(u,e,t)}),w}function createInstrumentationGetter(e,t){const w=createInstrumentations(e,t);return(y,u,c)=>u==="__v_isReactive"?!e:u==="__v_isReadonly"?e:u==="__v_raw"?y:Reflect.get(hasOwn(w,u)&&u in y?w:y,u,c)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,w,y,u){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const c=getTargetType(e);if(c===0)return e;const f=u.get(e);if(f)return f;const h=new Proxy(e,c===2?y:w);return u.set(e,h),h}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!hasOwn(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function isRef(e){return e?e.__v_isRef===!0:!1}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,w){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=w?t:toRaw(t),this._value=w?t:toReactive(t),this.__v_isShallow=w}get value(){return this.dep.track(),this._value}set value(t){const w=this._rawValue,y=this.__v_isShallow||isShallow(t)||isReadonly(t);t=y?t:toRaw(t),hasChanged(t,w)&&(this._rawValue=t,this._value=y?t:toReactive(t),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,w)=>t==="__v_raw"?e:unref(Reflect.get(e,t,w)),set:(e,t,w,y)=>{const u=e[t];return isRef(u)&&!isRef(w)?(u.value=w,!0):Reflect.set(e,t,w,y)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,w,y){this.fn=t,this.setter=w,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!w,this.isSSR=y}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const t=this.dep.track();return refreshComputed(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function computed$1(e,t,w=!1){let y,u;return isFunction(e)?y=e:(y=e.get,u=e.set),new ComputedRefImpl(y,u,w)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,t=!1,w=activeWatcher){if(w){let y=cleanupMap.get(w);y||cleanupMap.set(w,y=[]),y.push(e)}}function watch$1(e,t,w=EMPTY_OBJ){const{immediate:y,deep:u,once:c,scheduler:f,augmentJob:h,call:n}=w,l=E=>u?E:isShallow(E)||u===!1||u===0?traverse(E,1):traverse(E);let a,s,_,T,m=!1,v=!1;if(isRef(e)?(s=()=>e.value,m=isShallow(e)):isReactive(e)?(s=()=>l(e),m=!0):isArray(e)?(v=!0,m=e.some(E=>isReactive(E)||isShallow(E)),s=()=>e.map(E=>{if(isRef(E))return E.value;if(isReactive(E))return l(E);if(isFunction(E))return n?n(E,2):E()})):isFunction(e)?t?s=n?()=>n(e,2):e:s=()=>{if(_){pauseTracking();try{_()}finally{resetTracking()}}const E=activeWatcher;activeWatcher=a;try{return n?n(e,3,[T]):e(T)}finally{activeWatcher=E}}:s=NOOP,t&&u){const E=s,C=u===!0?1/0:u;s=()=>traverse(E(),C)}const S=getCurrentScope(),x=()=>{a.stop(),S&&S.active&&remove(S.effects,a)};if(c&&t){const E=t;t=(...C)=>{E(...C),x()}}let P=v?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const g=E=>{if(!(!(a.flags&1)||!a.dirty&&!E))if(t){const C=a.run();if(u||m||(v?C.some((R,A)=>hasChanged(R,P[A])):hasChanged(C,P))){_&&_();const R=activeWatcher;activeWatcher=a;try{const A=[C,P===INITIAL_WATCHER_VALUE?void 0:v&&P[0]===INITIAL_WATCHER_VALUE?[]:P,T];P=C,n?n(t,3,A):t(...A)}finally{activeWatcher=R}}}else a.run()};return h&&h(g),a=new ReactiveEffect(s),a.scheduler=f?()=>f(g,!1):g,T=E=>onWatcherCleanup(E,!1,a),_=a.onStop=()=>{const E=cleanupMap.get(a);if(E){if(n)n(E,4);else for(const C of E)C();cleanupMap.delete(a)}},t?y?g(!0):P=a.run():f?f(g.bind(null,!0),!0):a.run(),x.pause=a.pause.bind(a),x.resume=a.resume.bind(a),x.stop=x,x}function traverse(e,t=1/0,w){if(t<=0||!isObject(e)||e.__v_skip||(w=w||new Set,w.has(e)))return e;if(w.add(e),t--,isRef(e))traverse(e.value,t,w);else if(isArray(e))for(let y=0;y<e.length;y++)traverse(e[y],t,w);else if(isSet(e)||isMap(e))e.forEach(y=>{traverse(y,t,w)});else if(isPlainObject(e)){for(const y in e)traverse(e[y],t,w);for(const y of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,y)&&traverse(e[y],t,w)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const w=stack.length?stack[stack.length-1].component:null,y=w&&w.appContext.config.warnHandler,u=getComponentTrace();if(y)callWithErrorHandling(y,w,11,[e+t.map(c=>{var f,h;return(h=(f=c.toString)==null?void 0:f.call(c))!=null?h:JSON.stringify(c)}).join(""),w&&w.proxy,u.map(({vnode:c})=>`at <${formatComponentName(w,c.type)}>`).join(`
`),u]);else{const c=[`[Vue warn]: ${e}`,...t];u.length&&c.push(`
`,...formatTrace(u)),console.warn(...c)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const w=t[0];w&&w.vnode===e?w.recurseCount++:t.push({vnode:e,recurseCount:0});const y=e.component&&e.component.parent;e=y&&y.vnode}return t}function formatTrace(e){const t=[];return e.forEach((w,y)=>{t.push(...y===0?[]:[`
`],...formatTraceEntry(w))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const w=t>0?`... (${t} recursive calls)`:"",y=e.component?e.component.parent==null:!1,u=` at <${formatComponentName(e.component,e.type,y)}`,c=">"+w;return e.props?[u,...formatProps(e.props),c]:[u+c]}function formatProps(e){const t=[],w=Object.keys(e);return w.slice(0,3).forEach(y=>{t.push(...formatProp(y,e[y]))}),w.length>3&&t.push(" ..."),t}function formatProp(e,t,w){return isString(t)?(t=JSON.stringify(t),w?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?w?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),w?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),w?t:[`${e}=`,t])}function callWithErrorHandling(e,t,w,y){try{return y?e(...y):e()}catch(u){handleError(u,t,w)}}function callWithAsyncErrorHandling(e,t,w,y){if(isFunction(e)){const u=callWithErrorHandling(e,t,w,y);return u&&isPromise(u)&&u.catch(c=>{handleError(c,t,w)}),u}if(isArray(e)){const u=[];for(let c=0;c<e.length;c++)u.push(callWithAsyncErrorHandling(e[c],t,w,y));return u}}function handleError(e,t,w,y=!0){const u=t?t.vnode:null,{errorHandler:c,throwUnhandledErrorInProduction:f}=t&&t.appContext.config||EMPTY_OBJ;if(t){let h=t.parent;const n=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${w}`;for(;h;){const a=h.ec;if(a){for(let s=0;s<a.length;s++)if(a[s](e,n,l)===!1)return}h=h.parent}if(c){pauseTracking(),callWithErrorHandling(c,null,10,[e,n,l]),resetTracking();return}}logError(e,w,u,y,f)}function logError(e,t,w,y=!0,u=!1){if(u)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,w=queue.length;for(;t<w;){const y=t+w>>>1,u=queue[y],c=getId(u);c<e||c===e&&u.flags&2?t=y+1:w=y}return t}function queueJob(e){if(!(e.flags&1)){const t=getId(e),w=queue[queue.length-1];!w||!(e.flags&2)&&t>=getId(w)?queue.push(e):queue.splice(findInsertionIndex(t),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&e.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,e):e.flags&1||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,t,w=flushIndex+1){for(;w<queue.length;w++){const y=queue[w];if(y&&y.flags&2){if(e&&y.id!==e.uid)continue;queue.splice(w,1),w--,y.flags&4&&(y.flags&=-2),y(),y.flags&4||(y.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((w,y)=>getId(w)-getId(y));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const w=activePostFlushCbs[postFlushIndex];w.flags&4&&(w.flags&=-2),w.flags&8||w(),w.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?e.flags&2?-1:1/0:e.id;function flushJobs(e){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),callWithErrorHandling(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&(t.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,w){if(!t||e._n)return e;const y=(...u)=>{y._d&&setBlockTracking(-1);const c=setCurrentRenderingInstance(t);let f;try{f=e(...u)}finally{setCurrentRenderingInstance(c),y._d&&setBlockTracking(1)}return f};return y._n=!0,y._c=!0,y._d=!0,y}function withDirectives(e,t){if(currentRenderingInstance===null)return e;const w=getComponentPublicInstance(currentRenderingInstance),y=e.dirs||(e.dirs=[]);for(let u=0;u<t.length;u++){let[c,f,h,n=EMPTY_OBJ]=t[u];c&&(isFunction(c)&&(c={mounted:c,updated:c}),c.deep&&traverse(f),y.push({dir:c,instance:w,value:f,oldValue:void 0,arg:h,modifiers:n}))}return e}function invokeDirectiveHook(e,t,w,y){const u=e.dirs,c=t&&t.dirs;for(let f=0;f<u.length;f++){const h=u[f];c&&(h.oldValue=c[f].value);let n=h.dir[y];n&&(pauseTracking(),callWithAsyncErrorHandling(n,w,8,[e.el,h,e,t]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport;function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?(e.transition=t,setTransitionHooks(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,t){return isFunction(e)?extend({name:e.name},t,{setup:e}):e}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function setRef(e,t,w,y,u=!1){if(isArray(e)){e.forEach((m,v)=>setRef(m,t&&(isArray(t)?t[v]:t),w,y,u));return}if(isAsyncWrapper(y)&&!u){y.shapeFlag&512&&y.type.__asyncResolved&&y.component.subTree.component&&setRef(e,t,w,y.component.subTree);return}const c=y.shapeFlag&4?getComponentPublicInstance(y.component):y.el,f=u?null:c,{i:h,r:n}=e,l=t&&t.r,a=h.refs===EMPTY_OBJ?h.refs={}:h.refs,s=h.setupState,_=toRaw(s),T=s===EMPTY_OBJ?()=>!1:m=>hasOwn(_,m);if(l!=null&&l!==n&&(isString(l)?(a[l]=null,T(l)&&(s[l]=null)):isRef(l)&&(l.value=null)),isFunction(n))callWithErrorHandling(n,h,12,[f,a]);else{const m=isString(n),v=isRef(n);if(m||v){const S=()=>{if(e.f){const x=m?T(n)?s[n]:a[n]:n.value;u?isArray(x)&&remove(x,c):isArray(x)?x.includes(c)||x.push(c):m?(a[n]=[c],T(n)&&(s[n]=a[n])):(n.value=[c],e.k&&(a[e.k]=n.value))}else m?(a[n]=f,T(n)&&(s[n]=f)):v&&(n.value=f,e.k&&(a[e.k]=f))};f?(S.id=-1,queuePostRenderEffect(S,w)):S()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,w=currentInstance){const y=e.__wdc||(e.__wdc=()=>{let u=w;for(;u;){if(u.isDeactivated)return;u=u.parent}return e()});if(injectHook(t,y,w),w){let u=w.parent;for(;u&&u.parent;)isKeepAlive(u.parent.vnode)&&injectToKeepAliveRoot(y,t,w,u),u=u.parent}}function injectToKeepAliveRoot(e,t,w,y){const u=injectHook(t,e,y,!0);onUnmounted(()=>{remove(y[t],u)},w)}function injectHook(e,t,w=currentInstance,y=!1){if(w){const u=w[e]||(w[e]=[]),c=t.__weh||(t.__weh=(...f)=>{pauseTracking();const h=setCurrentInstance(w),n=callWithAsyncErrorHandling(t,w,e,f);return h(),resetTracking(),n});return y?u.unshift(c):u.push(c),c}}const createHook=e=>(t,w=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...y)=>t(...y),w)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:w,setupState:y,data:u,props:c,accessCache:f,type:h,appContext:n}=e;let l;if(t[0]!=="$"){const T=f[t];if(T!==void 0)switch(T){case 1:return y[t];case 2:return u[t];case 4:return w[t];case 3:return c[t]}else{if(hasSetupBinding(y,t))return f[t]=1,y[t];if(u!==EMPTY_OBJ&&hasOwn(u,t))return f[t]=2,u[t];if((l=e.propsOptions[0])&&hasOwn(l,t))return f[t]=3,c[t];if(w!==EMPTY_OBJ&&hasOwn(w,t))return f[t]=4,w[t];shouldCacheAccess&&(f[t]=0)}}const a=publicPropertiesMap[t];let s,_;if(a)return t==="$attrs"&&track(e.attrs,"get",""),a(e);if((s=h.__cssModules)&&(s=s[t]))return s;if(w!==EMPTY_OBJ&&hasOwn(w,t))return f[t]=4,w[t];if(_=n.config.globalProperties,hasOwn(_,t))return _[t]},set({_:e},t,w){const{data:y,setupState:u,ctx:c}=e;return hasSetupBinding(u,t)?(u[t]=w,!0):y!==EMPTY_OBJ&&hasOwn(y,t)?(y[t]=w,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(c[t]=w,!0)},has({_:{data:e,setupState:t,accessCache:w,ctx:y,appContext:u,propsOptions:c}},f){let h;return!!w[f]||e!==EMPTY_OBJ&&hasOwn(e,f)||hasSetupBinding(t,f)||(h=c[0])&&hasOwn(h,f)||hasOwn(y,f)||hasOwn(publicPropertiesMap,f)||hasOwn(u.config.globalProperties,f)},defineProperty(e,t,w){return w.get!=null?e._.accessCache[t]=0:hasOwn(w,"value")&&this.set(e,t,w.value,null),Reflect.defineProperty(e,t,w)}};function normalizePropsOrEmits(e){return isArray(e)?e.reduce((t,w)=>(t[w]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),w=e.proxy,y=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:u,computed:c,methods:f,watch:h,provide:n,inject:l,created:a,beforeMount:s,mounted:_,beforeUpdate:T,updated:m,activated:v,deactivated:S,beforeDestroy:x,beforeUnmount:P,destroyed:g,unmounted:E,render:C,renderTracked:R,renderTriggered:A,errorCaptured:L,serverPrefetch:N,expose:I,inheritAttrs:M,components:H,directives:O,filters:z}=t;if(l&&resolveInjections(l,y,null),f)for(const q in f){const V=f[q];isFunction(V)&&(y[q]=V.bind(w))}if(u){const q=u.call(w,w);isObject(q)&&(e.data=reactive(q))}if(shouldCacheAccess=!0,c)for(const q in c){const V=c[q],X=isFunction(V)?V.bind(w,w):isFunction(V.get)?V.get.bind(w,w):NOOP,B=!isFunction(V)&&isFunction(V.set)?V.set.bind(w):NOOP,ee=computed({get:X,set:B});Object.defineProperty(y,q,{enumerable:!0,configurable:!0,get:()=>ee.value,set:G=>ee.value=G})}if(h)for(const q in h)createWatcher(h[q],y,w,q);if(n){const q=isFunction(n)?n.call(w):n;Reflect.ownKeys(q).forEach(V=>{provide(V,q[V])})}a&&callHook(a,e,"c");function U(q,V){isArray(V)?V.forEach(X=>q(X.bind(w))):V&&q(V.bind(w))}if(U(onBeforeMount,s),U(onMounted,_),U(onBeforeUpdate,T),U(onUpdated,m),U(onActivated,v),U(onDeactivated,S),U(onErrorCaptured,L),U(onRenderTracked,R),U(onRenderTriggered,A),U(onBeforeUnmount,P),U(onUnmounted,E),U(onServerPrefetch,N),isArray(I))if(I.length){const q=e.exposed||(e.exposed={});I.forEach(V=>{Object.defineProperty(q,V,{get:()=>w[V],set:X=>w[V]=X,enumerable:!0})})}else e.exposed||(e.exposed={});C&&e.render===NOOP&&(e.render=C),M!=null&&(e.inheritAttrs=M),H&&(e.components=H),O&&(e.directives=O),N&&markAsyncBoundary(e)}function resolveInjections(e,t,w=NOOP){isArray(e)&&(e=normalizeInject(e));for(const y in e){const u=e[y];let c;isObject(u)?"default"in u?c=inject(u.from||y,u.default,!0):c=inject(u.from||y):c=inject(u),isRef(c)?Object.defineProperty(t,y,{enumerable:!0,configurable:!0,get:()=>c.value,set:f=>c.value=f}):t[y]=c}}function callHook(e,t,w){callWithAsyncErrorHandling(isArray(e)?e.map(y=>y.bind(t.proxy)):e.bind(t.proxy),t,w)}function createWatcher(e,t,w,y){let u=y.includes(".")?createPathGetter(w,y):()=>w[y];if(isString(e)){const c=t[e];isFunction(c)&&watch(u,c)}else if(isFunction(e))watch(u,e.bind(w));else if(isObject(e))if(isArray(e))e.forEach(c=>createWatcher(c,t,w,y));else{const c=isFunction(e.handler)?e.handler.bind(w):t[e.handler];isFunction(c)&&watch(u,c,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:w,extends:y}=t,{mixins:u,optionsCache:c,config:{optionMergeStrategies:f}}=e.appContext,h=c.get(t);let n;return h?n=h:!u.length&&!w&&!y?n=t:(n={},u.length&&u.forEach(l=>mergeOptions(n,l,f,!0)),mergeOptions(n,t,f)),isObject(t)&&c.set(t,n),n}function mergeOptions(e,t,w,y=!1){const{mixins:u,extends:c}=t;c&&mergeOptions(e,c,w,!0),u&&u.forEach(f=>mergeOptions(e,f,w,!0));for(const f in t)if(!(y&&f==="expose")){const h=internalOptionMergeStrats[f]||w&&w[f];e[f]=h?h(e[f],t[f]):t[f]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let w=0;w<e.length;w++)t[e[w]]=e[w];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray(e)&&isArray(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const w=extend(Object.create(null),e);for(const y in t)w[y]=mergeAsArray(e[y],t[y]);return w}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(y,u=null){isFunction(y)||(y=extend({},y)),u!=null&&!isObject(u)&&(u=null);const c=createAppContext(),f=new WeakSet,h=[];let n=!1;const l=c.app={_uid:uid$1++,_component:y,_props:u,_container:null,_context:c,_instance:null,version,get config(){return c.config},set config(a){},use(a,...s){return f.has(a)||(a&&isFunction(a.install)?(f.add(a),a.install(l,...s)):isFunction(a)&&(f.add(a),a(l,...s))),l},mixin(a){return c.mixins.includes(a)||c.mixins.push(a),l},component(a,s){return s?(c.components[a]=s,l):c.components[a]},directive(a,s){return s?(c.directives[a]=s,l):c.directives[a]},mount(a,s,_){if(!n){const T=l._ceVNode||createVNode(y,u);return T.appContext=c,_===!0?_="svg":_===!1&&(_=void 0),e(T,a,_),n=!0,l._container=a,a.__vue_app__=l,getComponentPublicInstance(T.component)}},onUnmount(a){h.push(a)},unmount(){n&&(callWithAsyncErrorHandling(h,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(a,s){return c.provides[a]=s,l},runWithContext(a){const s=currentApp;currentApp=l;try{return a()}finally{currentApp=s}}};return l}}let currentApp=null;function provide(e,t){if(currentInstance){let w=currentInstance.provides;const y=currentInstance.parent&&currentInstance.parent.provides;y===w&&(w=currentInstance.provides=Object.create(y)),w[e]=t}}function inject(e,t,w=!1){const y=getCurrentInstance();if(y||currentApp){let u=currentApp?currentApp._context.provides:y?y.parent==null||y.ce?y.vnode.appContext&&y.vnode.appContext.provides:y.parent.provides:void 0;if(u&&e in u)return u[e];if(arguments.length>1)return w&&isFunction(t)?t.call(y&&y.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,w,y=!1){const u={},c=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,u,c);for(const f in e.propsOptions[0])f in u||(u[f]=void 0);w?e.props=y?u:shallowReactive(u):e.type.props?e.props=u:e.props=c,e.attrs=c}function updateProps(e,t,w,y){const{props:u,attrs:c,vnode:{patchFlag:f}}=e,h=toRaw(u),[n]=e.propsOptions;let l=!1;if((y||f>0)&&!(f&16)){if(f&8){const a=e.vnode.dynamicProps;for(let s=0;s<a.length;s++){let _=a[s];if(isEmitListener(e.emitsOptions,_))continue;const T=t[_];if(n)if(hasOwn(c,_))T!==c[_]&&(c[_]=T,l=!0);else{const m=camelize(_);u[m]=resolvePropValue(n,h,m,T,e,!1)}else T!==c[_]&&(c[_]=T,l=!0)}}}else{setFullProps(e,t,u,c)&&(l=!0);let a;for(const s in h)(!t||!hasOwn(t,s)&&((a=hyphenate(s))===s||!hasOwn(t,a)))&&(n?w&&(w[s]!==void 0||w[a]!==void 0)&&(u[s]=resolvePropValue(n,h,s,void 0,e,!0)):delete u[s]);if(c!==h)for(const s in c)(!t||!hasOwn(t,s))&&(delete c[s],l=!0)}l&&trigger(e.attrs,"set","")}function setFullProps(e,t,w,y){const[u,c]=e.propsOptions;let f=!1,h;if(t)for(let n in t){if(isReservedProp(n))continue;const l=t[n];let a;u&&hasOwn(u,a=camelize(n))?!c||!c.includes(a)?w[a]=l:(h||(h={}))[a]=l:isEmitListener(e.emitsOptions,n)||(!(n in y)||l!==y[n])&&(y[n]=l,f=!0)}if(c){const n=toRaw(w),l=h||EMPTY_OBJ;for(let a=0;a<c.length;a++){const s=c[a];w[s]=resolvePropValue(u,n,s,l[s],e,!hasOwn(l,s))}}return f}function resolvePropValue(e,t,w,y,u,c){const f=e[w];if(f!=null){const h=hasOwn(f,"default");if(h&&y===void 0){const n=f.default;if(f.type!==Function&&!f.skipFactory&&isFunction(n)){const{propsDefaults:l}=u;if(w in l)y=l[w];else{const a=setCurrentInstance(u);y=l[w]=n.call(null,t),a()}}else y=n;u.ce&&u.ce._setProp(w,y)}f[0]&&(c&&!h?y=!1:f[1]&&(y===""||y===hyphenate(w))&&(y=!0))}return y}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,w=!1){const y=w?mixinPropsCache:t.propsCache,u=y.get(e);if(u)return u;const c=e.props,f={},h=[];let n=!1;if(!isFunction(e)){const a=s=>{n=!0;const[_,T]=normalizePropsOptions(s,t,!0);extend(f,_),T&&h.push(...T)};!w&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}if(!c&&!n)return isObject(e)&&y.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(c))for(let a=0;a<c.length;a++){const s=camelize(c[a]);validatePropName(s)&&(f[s]=EMPTY_OBJ)}else if(c)for(const a in c){const s=camelize(a);if(validatePropName(s)){const _=c[a],T=f[s]=isArray(_)||isFunction(_)?{type:_}:extend({},_),m=T.type;let v=!1,S=!0;if(isArray(m))for(let x=0;x<m.length;++x){const P=m[x],g=isFunction(P)&&P.name;if(g==="Boolean"){v=!0;break}else g==="String"&&(S=!1)}else v=isFunction(m)&&m.name==="Boolean";T[0]=v,T[1]=S,(v||hasOwn(T,"default"))&&h.push(s)}}const l=[f,h];return isObject(e)&&y.set(e,l),l}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,w)=>{if(t._n)return t;const y=withCtx((...u)=>normalizeSlotValue(t(...u)),w);return y._c=!1,y},normalizeObjectSlots=(e,t,w)=>{const y=e._ctx;for(const u in e){if(isInternalKey(u))continue;const c=e[u];if(isFunction(c))t[u]=normalizeSlot(u,c,y);else if(c!=null){const f=normalizeSlotValue(c);t[u]=()=>f}}},normalizeVNodeSlots=(e,t)=>{const w=normalizeSlotValue(t);e.slots.default=()=>w},assignSlots=(e,t,w)=>{for(const y in t)(w||!isInternalKey(y))&&(e[y]=t[y])},initSlots=(e,t,w)=>{const y=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const u=t.__;u&&def(y,"__",u,!0);const c=t._;c?(assignSlots(y,t,w),w&&def(y,"_",c,!0)):normalizeObjectSlots(t,y)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,w)=>{const{vnode:y,slots:u}=e;let c=!0,f=EMPTY_OBJ;if(y.shapeFlag&32){const h=t._;h?w&&h===1?c=!1:assignSlots(u,t,w):(c=!t.$stable,normalizeObjectSlots(t,u)),f=t}else t&&(normalizeVNodeSlots(e,t),f={default:1});if(c)for(const h in u)!isInternalKey(h)&&f[h]==null&&delete u[h]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const w=getGlobalThis();w.__VUE__=!0;const{insert:y,remove:u,patchProp:c,createElement:f,createText:h,createComment:n,setText:l,setElementText:a,parentNode:s,nextSibling:_,setScopeId:T=NOOP,insertStaticContent:m}=e,v=(D,Q,ne,pe=null,ce=null,fe=null,xe=void 0,Ee=null,ve=!!Q.dynamicChildren)=>{if(D===Q)return;D&&!isSameVNodeType(D,Q)&&(pe=_e(D),G(D,ce,fe,!0),D=null),Q.patchFlag===-2&&(ve=!1,Q.dynamicChildren=null);const{type:Te,ref:Ie,shapeFlag:ke}=Q;switch(Te){case Text:S(D,Q,ne,pe);break;case Comment:x(D,Q,ne,pe);break;case Static:D==null&&P(Q,ne,pe,xe);break;case Fragment:H(D,Q,ne,pe,ce,fe,xe,Ee,ve);break;default:ke&1?C(D,Q,ne,pe,ce,fe,xe,Ee,ve):ke&6?O(D,Q,ne,pe,ce,fe,xe,Ee,ve):(ke&64||ke&128)&&Te.process(D,Q,ne,pe,ce,fe,xe,Ee,ve,be)}Ie!=null&&ce?setRef(Ie,D&&D.ref,fe,Q||D,!Q):Ie==null&&D&&D.ref!=null&&setRef(D.ref,null,fe,D,!0)},S=(D,Q,ne,pe)=>{if(D==null)y(Q.el=h(Q.children),ne,pe);else{const ce=Q.el=D.el;Q.children!==D.children&&l(ce,Q.children)}},x=(D,Q,ne,pe)=>{D==null?y(Q.el=n(Q.children||""),ne,pe):Q.el=D.el},P=(D,Q,ne,pe)=>{[D.el,D.anchor]=m(D.children,Q,ne,pe,D.el,D.anchor)},g=({el:D,anchor:Q},ne,pe)=>{let ce;for(;D&&D!==Q;)ce=_(D),y(D,ne,pe),D=ce;y(Q,ne,pe)},E=({el:D,anchor:Q})=>{let ne;for(;D&&D!==Q;)ne=_(D),u(D),D=ne;u(Q)},C=(D,Q,ne,pe,ce,fe,xe,Ee,ve)=>{Q.type==="svg"?xe="svg":Q.type==="math"&&(xe="mathml"),D==null?R(Q,ne,pe,ce,fe,xe,Ee,ve):N(D,Q,ce,fe,xe,Ee,ve)},R=(D,Q,ne,pe,ce,fe,xe,Ee)=>{let ve,Te;const{props:Ie,shapeFlag:ke,transition:Ae,dirs:Ne}=D;if(ve=D.el=f(D.type,fe,Ie&&Ie.is,Ie),ke&8?a(ve,D.children):ke&16&&L(D.children,ve,null,pe,ce,resolveChildrenNamespace(D,fe),xe,Ee),Ne&&invokeDirectiveHook(D,null,pe,"created"),A(ve,D,D.scopeId,xe,pe),Ie){for(const it in Ie)it!=="value"&&!isReservedProp(it)&&c(ve,it,null,Ie[it],fe,pe);"value"in Ie&&c(ve,"value",null,Ie.value,fe),(Te=Ie.onVnodeBeforeMount)&&invokeVNodeHook(Te,pe,D)}Ne&&invokeDirectiveHook(D,null,pe,"beforeMount");const qe=needTransition(ce,Ae);qe&&Ae.beforeEnter(ve),y(ve,Q,ne),((Te=Ie&&Ie.onVnodeMounted)||qe||Ne)&&queuePostRenderEffect(()=>{Te&&invokeVNodeHook(Te,pe,D),qe&&Ae.enter(ve),Ne&&invokeDirectiveHook(D,null,pe,"mounted")},ce)},A=(D,Q,ne,pe,ce)=>{if(ne&&T(D,ne),pe)for(let fe=0;fe<pe.length;fe++)T(D,pe[fe]);if(ce){let fe=ce.subTree;if(Q===fe||isSuspense(fe.type)&&(fe.ssContent===Q||fe.ssFallback===Q)){const xe=ce.vnode;A(D,xe,xe.scopeId,xe.slotScopeIds,ce.parent)}}},L=(D,Q,ne,pe,ce,fe,xe,Ee,ve=0)=>{for(let Te=ve;Te<D.length;Te++){const Ie=D[Te]=Ee?cloneIfMounted(D[Te]):normalizeVNode(D[Te]);v(null,Ie,Q,ne,pe,ce,fe,xe,Ee)}},N=(D,Q,ne,pe,ce,fe,xe)=>{const Ee=Q.el=D.el;let{patchFlag:ve,dynamicChildren:Te,dirs:Ie}=Q;ve|=D.patchFlag&16;const ke=D.props||EMPTY_OBJ,Ae=Q.props||EMPTY_OBJ;let Ne;if(ne&&toggleRecurse(ne,!1),(Ne=Ae.onVnodeBeforeUpdate)&&invokeVNodeHook(Ne,ne,Q,D),Ie&&invokeDirectiveHook(Q,D,ne,"beforeUpdate"),ne&&toggleRecurse(ne,!0),(ke.innerHTML&&Ae.innerHTML==null||ke.textContent&&Ae.textContent==null)&&a(Ee,""),Te?I(D.dynamicChildren,Te,Ee,ne,pe,resolveChildrenNamespace(Q,ce),fe):xe||V(D,Q,Ee,null,ne,pe,resolveChildrenNamespace(Q,ce),fe,!1),ve>0){if(ve&16)M(Ee,ke,Ae,ne,ce);else if(ve&2&&ke.class!==Ae.class&&c(Ee,"class",null,Ae.class,ce),ve&4&&c(Ee,"style",ke.style,Ae.style,ce),ve&8){const qe=Q.dynamicProps;for(let it=0;it<qe.length;it++){const Qe=qe[it],ht=ke[Qe],Et=Ae[Qe];(Et!==ht||Qe==="value")&&c(Ee,Qe,ht,Et,ce,ne)}}ve&1&&D.children!==Q.children&&a(Ee,Q.children)}else!xe&&Te==null&&M(Ee,ke,Ae,ne,ce);((Ne=Ae.onVnodeUpdated)||Ie)&&queuePostRenderEffect(()=>{Ne&&invokeVNodeHook(Ne,ne,Q,D),Ie&&invokeDirectiveHook(Q,D,ne,"updated")},pe)},I=(D,Q,ne,pe,ce,fe,xe)=>{for(let Ee=0;Ee<Q.length;Ee++){const ve=D[Ee],Te=Q[Ee],Ie=ve.el&&(ve.type===Fragment||!isSameVNodeType(ve,Te)||ve.shapeFlag&198)?s(ve.el):ne;v(ve,Te,Ie,null,pe,ce,fe,xe,!0)}},M=(D,Q,ne,pe,ce)=>{if(Q!==ne){if(Q!==EMPTY_OBJ)for(const fe in Q)!isReservedProp(fe)&&!(fe in ne)&&c(D,fe,Q[fe],null,ce,pe);for(const fe in ne){if(isReservedProp(fe))continue;const xe=ne[fe],Ee=Q[fe];xe!==Ee&&fe!=="value"&&c(D,fe,Ee,xe,ce,pe)}"value"in ne&&c(D,"value",Q.value,ne.value,ce)}},H=(D,Q,ne,pe,ce,fe,xe,Ee,ve)=>{const Te=Q.el=D?D.el:h(""),Ie=Q.anchor=D?D.anchor:h("");let{patchFlag:ke,dynamicChildren:Ae,slotScopeIds:Ne}=Q;Ne&&(Ee=Ee?Ee.concat(Ne):Ne),D==null?(y(Te,ne,pe),y(Ie,ne,pe),L(Q.children||[],ne,Ie,ce,fe,xe,Ee,ve)):ke>0&&ke&64&&Ae&&D.dynamicChildren?(I(D.dynamicChildren,Ae,ne,ce,fe,xe,Ee),(Q.key!=null||ce&&Q===ce.subTree)&&traverseStaticChildren(D,Q,!0)):V(D,Q,ne,Ie,ce,fe,xe,Ee,ve)},O=(D,Q,ne,pe,ce,fe,xe,Ee,ve)=>{Q.slotScopeIds=Ee,D==null?Q.shapeFlag&512?ce.ctx.activate(Q,ne,pe,xe,ve):z(Q,ne,pe,ce,fe,xe,ve):J(D,Q,ve)},z=(D,Q,ne,pe,ce,fe,xe)=>{const Ee=D.component=createComponentInstance(D,pe,ce);if(isKeepAlive(D)&&(Ee.ctx.renderer=be),setupComponent(Ee,!1,xe),Ee.asyncDep){if(ce&&ce.registerDep(Ee,U,xe),!D.el){const ve=Ee.subTree=createVNode(Comment);x(null,ve,Q,ne),D.placeholder=ve.el}}else U(Ee,D,Q,ne,ce,fe,xe)},J=(D,Q,ne)=>{const pe=Q.component=D.component;if(shouldUpdateComponent(D,Q,ne))if(pe.asyncDep&&!pe.asyncResolved){q(pe,Q,ne);return}else pe.next=Q,pe.update();else Q.el=D.el,pe.vnode=Q},U=(D,Q,ne,pe,ce,fe,xe)=>{const Ee=()=>{if(D.isMounted){let{next:ke,bu:Ae,u:Ne,parent:qe,vnode:it}=D;{const Pt=locateNonHydratedAsyncRoot(D);if(Pt){ke&&(ke.el=it.el,q(D,ke,xe)),Pt.asyncDep.then(()=>{D.isUnmounted||Ee()});return}}let Qe=ke,ht;toggleRecurse(D,!1),ke?(ke.el=it.el,q(D,ke,xe)):ke=it,Ae&&invokeArrayFns(Ae),(ht=ke.props&&ke.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ht,qe,ke,it),toggleRecurse(D,!0);const Et=renderComponentRoot(D),ft=D.subTree;D.subTree=Et,v(ft,Et,s(ft.el),_e(ft),D,ce,fe),ke.el=Et.el,Qe===null&&updateHOCHostEl(D,Et.el),Ne&&queuePostRenderEffect(Ne,ce),(ht=ke.props&&ke.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ht,qe,ke,it),ce)}else{let ke;const{el:Ae,props:Ne}=Q,{bm:qe,m:it,parent:Qe,root:ht,type:Et}=D,ft=isAsyncWrapper(Q);toggleRecurse(D,!1),qe&&invokeArrayFns(qe),!ft&&(ke=Ne&&Ne.onVnodeBeforeMount)&&invokeVNodeHook(ke,Qe,Q),toggleRecurse(D,!0);{ht.ce&&ht.ce._def.shadowRoot!==!1&&ht.ce._injectChildStyle(Et);const Pt=D.subTree=renderComponentRoot(D);v(null,Pt,ne,pe,D,ce,fe),Q.el=Pt.el}if(it&&queuePostRenderEffect(it,ce),!ft&&(ke=Ne&&Ne.onVnodeMounted)){const Pt=Q;queuePostRenderEffect(()=>invokeVNodeHook(ke,Qe,Pt),ce)}(Q.shapeFlag&256||Qe&&isAsyncWrapper(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&D.a&&queuePostRenderEffect(D.a,ce),D.isMounted=!0,Q=ne=pe=null}};D.scope.on();const ve=D.effect=new ReactiveEffect(Ee);D.scope.off();const Te=D.update=ve.run.bind(ve),Ie=D.job=ve.runIfDirty.bind(ve);Ie.i=D,Ie.id=D.uid,ve.scheduler=()=>queueJob(Ie),toggleRecurse(D,!0),Te()},q=(D,Q,ne)=>{Q.component=D;const pe=D.vnode.props;D.vnode=Q,D.next=null,updateProps(D,Q.props,pe,ne),updateSlots(D,Q.children,ne),pauseTracking(),flushPreFlushCbs(D),resetTracking()},V=(D,Q,ne,pe,ce,fe,xe,Ee,ve=!1)=>{const Te=D&&D.children,Ie=D?D.shapeFlag:0,ke=Q.children,{patchFlag:Ae,shapeFlag:Ne}=Q;if(Ae>0){if(Ae&128){B(Te,ke,ne,pe,ce,fe,xe,Ee,ve);return}else if(Ae&256){X(Te,ke,ne,pe,ce,fe,xe,Ee,ve);return}}Ne&8?(Ie&16&&ae(Te,ce,fe),ke!==Te&&a(ne,ke)):Ie&16?Ne&16?B(Te,ke,ne,pe,ce,fe,xe,Ee,ve):ae(Te,ce,fe,!0):(Ie&8&&a(ne,""),Ne&16&&L(ke,ne,pe,ce,fe,xe,Ee,ve))},X=(D,Q,ne,pe,ce,fe,xe,Ee,ve)=>{D=D||EMPTY_ARR,Q=Q||EMPTY_ARR;const Te=D.length,Ie=Q.length,ke=Math.min(Te,Ie);let Ae;for(Ae=0;Ae<ke;Ae++){const Ne=Q[Ae]=ve?cloneIfMounted(Q[Ae]):normalizeVNode(Q[Ae]);v(D[Ae],Ne,ne,null,ce,fe,xe,Ee,ve)}Te>Ie?ae(D,ce,fe,!0,!1,ke):L(Q,ne,pe,ce,fe,xe,Ee,ve,ke)},B=(D,Q,ne,pe,ce,fe,xe,Ee,ve)=>{let Te=0;const Ie=Q.length;let ke=D.length-1,Ae=Ie-1;for(;Te<=ke&&Te<=Ae;){const Ne=D[Te],qe=Q[Te]=ve?cloneIfMounted(Q[Te]):normalizeVNode(Q[Te]);if(isSameVNodeType(Ne,qe))v(Ne,qe,ne,null,ce,fe,xe,Ee,ve);else break;Te++}for(;Te<=ke&&Te<=Ae;){const Ne=D[ke],qe=Q[Ae]=ve?cloneIfMounted(Q[Ae]):normalizeVNode(Q[Ae]);if(isSameVNodeType(Ne,qe))v(Ne,qe,ne,null,ce,fe,xe,Ee,ve);else break;ke--,Ae--}if(Te>ke){if(Te<=Ae){const Ne=Ae+1,qe=Ne<Ie?Q[Ne].el:pe;for(;Te<=Ae;)v(null,Q[Te]=ve?cloneIfMounted(Q[Te]):normalizeVNode(Q[Te]),ne,qe,ce,fe,xe,Ee,ve),Te++}}else if(Te>Ae)for(;Te<=ke;)G(D[Te],ce,fe,!0),Te++;else{const Ne=Te,qe=Te,it=new Map;for(Te=qe;Te<=Ae;Te++){const ct=Q[Te]=ve?cloneIfMounted(Q[Te]):normalizeVNode(Q[Te]);ct.key!=null&&it.set(ct.key,Te)}let Qe,ht=0;const Et=Ae-qe+1;let ft=!1,Pt=0;const lt=new Array(Et);for(Te=0;Te<Et;Te++)lt[Te]=0;for(Te=Ne;Te<=ke;Te++){const ct=D[Te];if(ht>=Et){G(ct,ce,fe,!0);continue}let dt;if(ct.key!=null)dt=it.get(ct.key);else for(Qe=qe;Qe<=Ae;Qe++)if(lt[Qe-qe]===0&&isSameVNodeType(ct,Q[Qe])){dt=Qe;break}dt===void 0?G(ct,ce,fe,!0):(lt[dt-qe]=Te+1,dt>=Pt?Pt=dt:ft=!0,v(ct,Q[dt],ne,null,ce,fe,xe,Ee,ve),ht++)}const vt=ft?getSequence(lt):EMPTY_ARR;for(Qe=vt.length-1,Te=Et-1;Te>=0;Te--){const ct=qe+Te,dt=Q[ct],At=Q[ct+1],Jt=ct+1<Ie?At.el||At.placeholder:pe;lt[Te]===0?v(null,dt,ne,Jt,ce,fe,xe,Ee,ve):ft&&(Qe<0||Te!==vt[Qe]?ee(dt,ne,Jt,2):Qe--)}}},ee=(D,Q,ne,pe,ce=null)=>{const{el:fe,type:xe,transition:Ee,children:ve,shapeFlag:Te}=D;if(Te&6){ee(D.component.subTree,Q,ne,pe);return}if(Te&128){D.suspense.move(Q,ne,pe);return}if(Te&64){xe.move(D,Q,ne,be);return}if(xe===Fragment){y(fe,Q,ne);for(let ke=0;ke<ve.length;ke++)ee(ve[ke],Q,ne,pe);y(D.anchor,Q,ne);return}if(xe===Static){g(D,Q,ne);return}if(pe!==2&&Te&1&&Ee)if(pe===0)Ee.beforeEnter(fe),y(fe,Q,ne),queuePostRenderEffect(()=>Ee.enter(fe),ce);else{const{leave:ke,delayLeave:Ae,afterLeave:Ne}=Ee,qe=()=>{D.ctx.isUnmounted?u(fe):y(fe,Q,ne)},it=()=>{ke(fe,()=>{qe(),Ne&&Ne()})};Ae?Ae(fe,qe,it):it()}else y(fe,Q,ne)},G=(D,Q,ne,pe=!1,ce=!1)=>{const{type:fe,props:xe,ref:Ee,children:ve,dynamicChildren:Te,shapeFlag:Ie,patchFlag:ke,dirs:Ae,cacheIndex:Ne}=D;if(ke===-2&&(ce=!1),Ee!=null&&(pauseTracking(),setRef(Ee,null,ne,D,!0),resetTracking()),Ne!=null&&(Q.renderCache[Ne]=void 0),Ie&256){Q.ctx.deactivate(D);return}const qe=Ie&1&&Ae,it=!isAsyncWrapper(D);let Qe;if(it&&(Qe=xe&&xe.onVnodeBeforeUnmount)&&invokeVNodeHook(Qe,Q,D),Ie&6)Z(D.component,ne,pe);else{if(Ie&128){D.suspense.unmount(ne,pe);return}qe&&invokeDirectiveHook(D,null,Q,"beforeUnmount"),Ie&64?D.type.remove(D,Q,ne,be,pe):Te&&!Te.hasOnce&&(fe!==Fragment||ke>0&&ke&64)?ae(Te,Q,ne,!1,!0):(fe===Fragment&&ke&384||!ce&&Ie&16)&&ae(ve,Q,ne),pe&&F(D)}(it&&(Qe=xe&&xe.onVnodeUnmounted)||qe)&&queuePostRenderEffect(()=>{Qe&&invokeVNodeHook(Qe,Q,D),qe&&invokeDirectiveHook(D,null,Q,"unmounted")},ne)},F=D=>{const{type:Q,el:ne,anchor:pe,transition:ce}=D;if(Q===Fragment){W(ne,pe);return}if(Q===Static){E(D);return}const fe=()=>{u(ne),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(D.shapeFlag&1&&ce&&!ce.persisted){const{leave:xe,delayLeave:Ee}=ce,ve=()=>xe(ne,fe);Ee?Ee(D.el,fe,ve):ve()}else fe()},W=(D,Q)=>{let ne;for(;D!==Q;)ne=_(D),u(D),D=ne;u(Q)},Z=(D,Q,ne)=>{const{bum:pe,scope:ce,job:fe,subTree:xe,um:Ee,m:ve,a:Te,parent:Ie,slots:{__:ke}}=D;invalidateMount(ve),invalidateMount(Te),pe&&invokeArrayFns(pe),Ie&&isArray(ke)&&ke.forEach(Ae=>{Ie.renderCache[Ae]=void 0}),ce.stop(),fe&&(fe.flags|=8,G(xe,D,Q,ne)),Ee&&queuePostRenderEffect(Ee,Q),queuePostRenderEffect(()=>{D.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},ae=(D,Q,ne,pe=!1,ce=!1,fe=0)=>{for(let xe=fe;xe<D.length;xe++)G(D[xe],Q,ne,pe,ce)},_e=D=>{if(D.shapeFlag&6)return _e(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const Q=_(D.anchor||D.el),ne=Q&&Q[TeleportEndKey];return ne?_(ne):Q};let le=!1;const he=(D,Q,ne)=>{D==null?Q._vnode&&G(Q._vnode,null,null,!0):v(Q._vnode||null,D,Q,null,null,null,ne),Q._vnode=D,le||(le=!0,flushPreFlushCbs(),flushPostFlushCbs(),le=!1)},be={p:v,um:G,m:ee,r:F,mt:z,mc:L,pc:V,pbc:I,n:_e,o:e};return{render:he,hydrate:void 0,createApp:createAppAPI(he)}}function resolveChildrenNamespace({type:e,props:t},w){return w==="svg"&&e==="foreignObject"||w==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:w}function toggleRecurse({effect:e,job:t},w){w?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,w=!1){const y=e.children,u=t.children;if(isArray(y)&&isArray(u))for(let c=0;c<y.length;c++){const f=y[c];let h=u[c];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=u[c]=cloneIfMounted(u[c]),h.el=f.el),!w&&h.patchFlag!==-2&&traverseStaticChildren(f,h)),h.type===Text&&(h.el=f.el),h.type===Comment&&!h.el&&(h.el=f.el)}}function getSequence(e){const t=e.slice(),w=[0];let y,u,c,f,h;const n=e.length;for(y=0;y<n;y++){const l=e[y];if(l!==0){if(u=w[w.length-1],e[u]<l){t[y]=u,w.push(y);continue}for(c=0,f=w.length-1;c<f;)h=c+f>>1,e[w[h]]<l?c=h+1:f=h;l<e[w[c]]&&(c>0&&(t[y]=w[c-1]),w[c]=y)}}for(c=w.length,f=w[c-1];c-- >0;)w[c]=f,f=t[f];return w}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(e,t,w){return doWatch(e,t,w)}function doWatch(e,t,w=EMPTY_OBJ){const{immediate:y,deep:u,flush:c,once:f}=w,h=extend({},w),n=t&&y||!t&&c!=="post";let l;if(isInSSRComponentSetup){if(c==="sync"){const T=useSSRContext();l=T.__watcherHandles||(T.__watcherHandles=[])}else if(!n){const T=()=>{};return T.stop=NOOP,T.resume=NOOP,T.pause=NOOP,T}}const a=currentInstance;h.call=(T,m,v)=>callWithAsyncErrorHandling(T,a,m,v);let s=!1;c==="post"?h.scheduler=T=>{queuePostRenderEffect(T,a&&a.suspense)}:c!=="sync"&&(s=!0,h.scheduler=(T,m)=>{m?T():queueJob(T)}),h.augmentJob=T=>{t&&(T.flags|=4),s&&(T.flags|=2,a&&(T.id=a.uid,T.i=a))};const _=watch$1(e,t,h);return isInSSRComponentSetup&&(l?l.push(_):n&&_()),_}function instanceWatch(e,t,w){const y=this.proxy,u=isString(e)?e.includes(".")?createPathGetter(y,e):()=>y[e]:e.bind(y,y);let c;isFunction(t)?c=t:(c=t.handler,w=t);const f=setCurrentInstance(this),h=doWatch(u,c.bind(y),w);return f(),h}function createPathGetter(e,t){const w=t.split(".");return()=>{let y=e;for(let u=0;u<w.length&&y;u++)y=y[w[u]];return y}}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...w){if(e.isUnmounted)return;const y=e.vnode.props||EMPTY_OBJ;let u=w;const c=t.startsWith("update:"),f=c&&getModelModifiers(y,t.slice(7));f&&(f.trim&&(u=w.map(a=>isString(a)?a.trim():a)),f.number&&(u=w.map(looseToNumber)));let h,n=y[h=toHandlerKey(t)]||y[h=toHandlerKey(camelize(t))];!n&&c&&(n=y[h=toHandlerKey(hyphenate(t))]),n&&callWithAsyncErrorHandling(n,e,6,u);const l=y[h+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[h])return;e.emitted[h]=!0,callWithAsyncErrorHandling(l,e,6,u)}}function normalizeEmitsOptions(e,t,w=!1){const y=t.emitsCache,u=y.get(e);if(u!==void 0)return u;const c=e.emits;let f={},h=!1;if(!isFunction(e)){const n=l=>{const a=normalizeEmitsOptions(l,t,!0);a&&(h=!0,extend(f,a))};!w&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return!c&&!h?(isObject(e)&&y.set(e,null),null):(isArray(c)?c.forEach(n=>f[n]=null):extend(f,c),isObject(e)&&y.set(e,f),f)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:w,proxy:y,withProxy:u,propsOptions:[c],slots:f,attrs:h,emit:n,render:l,renderCache:a,props:s,data:_,setupState:T,ctx:m,inheritAttrs:v}=e,S=setCurrentRenderingInstance(e);let x,P;try{if(w.shapeFlag&4){const E=u||y,C=E;x=normalizeVNode(l.call(C,E,a,s,T,_,m)),P=h}else{const E=t;x=normalizeVNode(E.length>1?E(s,{attrs:h,slots:f,emit:n}):E(s,null)),P=t.props?h:getFunctionalFallthrough(h)}}catch(E){blockStack.length=0,handleError(E,e,1),x=createVNode(Comment)}let g=x;if(P&&v!==!1){const E=Object.keys(P),{shapeFlag:C}=g;E.length&&C&7&&(c&&E.some(isModelListener)&&(P=filterModelListeners(P,c)),g=cloneVNode(g,P,!1,!0))}return w.dirs&&(g=cloneVNode(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(w.dirs):w.dirs),w.transition&&setTransitionHooks(g,w.transition),x=g,setCurrentRenderingInstance(S),x}const getFunctionalFallthrough=e=>{let t;for(const w in e)(w==="class"||w==="style"||isOn(w))&&((t||(t={}))[w]=e[w]);return t},filterModelListeners=(e,t)=>{const w={};for(const y in e)(!isModelListener(y)||!(y.slice(9)in t))&&(w[y]=e[y]);return w};function shouldUpdateComponent(e,t,w){const{props:y,children:u,component:c}=e,{props:f,children:h,patchFlag:n}=t,l=c.emitsOptions;if(t.dirs||t.transition)return!0;if(w&&n>=0){if(n&1024)return!0;if(n&16)return y?hasPropsChanged(y,f,l):!!f;if(n&8){const a=t.dynamicProps;for(let s=0;s<a.length;s++){const _=a[s];if(f[_]!==y[_]&&!isEmitListener(l,_))return!0}}}else return(u||h)&&(!h||!h.$stable)?!0:y===f?!1:y?f?hasPropsChanged(y,f,l):!0:!!f;return!1}function hasPropsChanged(e,t,w){const y=Object.keys(t);if(y.length!==Object.keys(e).length)return!0;for(let u=0;u<y.length;u++){const c=y[u];if(t[c]!==e[c]&&!isEmitListener(w,c))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},w){for(;t;){const y=t.subTree;if(y.suspense&&y.suspense.activeBranch===e&&(y.el=e.el),y===e)(e=t.vnode).el=w,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e,t=!1){isBlockTreeEnabled+=e,e<0&&currentBlock&&t&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,w,y,u,c){return setupBlock(createBaseVNode(e,t,w,y,u,c,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:w})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!w}:e:null);function createBaseVNode(e,t=null,w=null,y=0,u=null,c=e===Fragment?0:1,f=!1,h=!1){const n={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:w,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:y,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return h?(normalizeChildren(n,w),c&128&&e.normalize(n)):w&&(n.shapeFlag|=isString(w)?8:16),isBlockTreeEnabled>0&&!f&&currentBlock&&(n.patchFlag>0||c&6)&&n.patchFlag!==32&&currentBlock.push(n),n}const createVNode=_createVNode;function _createVNode(e,t=null,w=null,y=0,u=null,c=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const h=cloneVNode(e,t,!0);return w&&normalizeChildren(h,w),isBlockTreeEnabled>0&&!c&&currentBlock&&(h.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=h:currentBlock.push(h)),h.patchFlag=-2,h}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:h,style:n}=t;h&&!isString(h)&&(t.class=normalizeClass(h)),isObject(n)&&(isProxy(n)&&!isArray(n)&&(n=extend({},n)),t.style=normalizeStyle(n))}const f=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,w,y,u,f,c,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend({},e):e:null}function cloneVNode(e,t,w=!1,y=!1){const{props:u,ref:c,patchFlag:f,children:h,transition:n}=e,l=t?mergeProps(u||{},t):u,a={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&normalizeKey(l),ref:t&&t.ref?w&&c?isArray(c)?c.concat(normalizeRef(t)):[c,normalizeRef(t)]:normalizeRef(t):c,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?f===-1?16:f|16:f,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:n,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return n&&y&&setTransitionHooks(a,n.clone(a)),a}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):isVNode(e)?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let w=0;const{shapeFlag:y}=e;if(t==null)t=null;else if(isArray(t))w=16;else if(typeof t=="object")if(y&65){const u=t.default;u&&(u._c&&(u._d=!1),normalizeChildren(e,u()),u._c&&(u._d=!0));return}else{w=32;const u=t._;!u&&!isInternalObject(t)?t._ctx=currentRenderingInstance:u===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},w=32):(t=String(t),y&64?(w=16,t=[createTextVNode(t)]):w=8);e.children=t,e.shapeFlag|=w}function mergeProps(...e){const t={};for(let w=0;w<e.length;w++){const y=e[w];for(const u in y)if(u==="class")t.class!==y.class&&(t.class=normalizeClass([t.class,y.class]));else if(u==="style")t.style=normalizeStyle([t.style,y.style]);else if(isOn(u)){const c=t[u],f=y[u];f&&c!==f&&!(isArray(c)&&c.includes(f))&&(t[u]=c?[].concat(c,f):f)}else u!==""&&(t[u]=y[u])}return t}function invokeVNodeHook(e,t,w,y=null){callWithAsyncErrorHandling(e,t,7,[w,y])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,w){const y=e.type,u=(t?t.appContext:e.appContext)||emptyAppContext,c={uid:uid++,vnode:e,type:y,parent:t,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(u.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(y,u),emitsOptions:normalizeEmitsOptions(y,u),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:y.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:w,suspenseId:w?w.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=t?t.root:c,c.emit=emit.bind(null,c),e.ce&&e.ce(c),c}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(w,y)=>{let u;return(u=e[w])||(u=e[w]=[]),u.push(y),c=>{u.length>1?u.forEach(f=>f(c)):u[0](c)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",w=>currentInstance=w),setInSSRSetupState=t("__VUE_SSR_SETTERS__",w=>isInSSRComponentSetup=w)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,w=!1){t&&setInSSRSetupState(t);const{props:y,children:u}=e.vnode,c=isStatefulComponent(e);initProps(e,y,c,t),initSlots(e,u,w||t);const f=c?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),f}function setupStatefulComponent(e,t){const w=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:y}=w;if(y){pauseTracking();const u=e.setupContext=y.length>1?createSetupContext(e):null,c=setCurrentInstance(e),f=callWithErrorHandling(y,e,0,[e.props,u]),h=isPromise(f);if(resetTracking(),c(),(h||e.sp)&&!isAsyncWrapper(e)&&markAsyncBoundary(e),h){if(f.then(unsetCurrentInstance,unsetCurrentInstance),t)return f.then(n=>{handleSetupResult(e,n)}).catch(n=>{handleError(n,e,0)});e.asyncDep=f}else handleSetupResult(e,f)}else finishComponentSetup(e)}function handleSetupResult(e,t,w){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,w){const y=e.type;e.render||(e.render=y.render||NOOP);{const u=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),u()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=w=>{e.exposed=w||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,w){if(w in t)return t[w];if(w in publicPropertiesMap)return publicPropertiesMap[w](e)},has(t,w){return w in t||w in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,w=!1){let y=getComponentName(t);if(!y&&t.__file){const u=t.__file.match(/([^/\\]+)\.\w+$/);u&&(y=u[1])}if(!y&&e&&e.parent){const u=c=>{for(const f in c)if(c[f]===t)return f};y=u(e.components||e.parent.type.components)||u(e.appContext.components)}return y?classify(y):w?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),version="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch{}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,w)=>{t.insertBefore(e,w||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,w,y)=>{const u=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):w?doc.createElement(e,{is:w}):doc.createElement(e);return e==="select"&&y&&y.multiple!=null&&u.setAttribute("multiple",y.multiple),u},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,w,y,u,c){const f=w?w.previousSibling:t.lastChild;if(u&&(u===c||u.nextSibling))for(;t.insertBefore(u.cloneNode(!0),w),!(u===c||!(u=u.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(y==="svg"?`<svg>${e}</svg>`:y==="mathml"?`<math>${e}</math>`:e);const h=templateContainer.content;if(y==="svg"||y==="mathml"){const n=h.firstChild;for(;n.firstChild;)h.appendChild(n.firstChild);h.removeChild(n)}t.insertBefore(h,w)}return[f?f.nextSibling:t.firstChild,w?w.previousSibling:t.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(e,t,w){const y=e[vtcKey];y&&(t=(t?[t,...y]:[...y]).join(" ")),t==null?e.removeAttribute("class"):w?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,w){const y=e.style,u=isString(w);let c=!1;if(w&&!u){if(t)if(isString(t))for(const f of t.split(";")){const h=f.slice(0,f.indexOf(":")).trim();w[h]==null&&setStyle(y,h,"")}else for(const f in t)w[f]==null&&setStyle(y,f,"");for(const f in w)f==="display"&&(c=!0),setStyle(y,f,w[f])}else if(u){if(t!==w){const f=y[CSS_VAR_TEXT];f&&(w+=";"+f),y.cssText=w,c=displayRE.test(w)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=c?y.display:"",e[vShowHidden]&&(y.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,w){if(isArray(w))w.forEach(y=>setStyle(e,t,y));else if(w==null&&(w=""),t.startsWith("--"))e.setProperty(t,w);else{const y=autoPrefix(e,t);importantRE.test(w)?e.setProperty(hyphenate(y),w.replace(importantRE,""),"important"):e[y]=w}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const w=prefixCache[t];if(w)return w;let y=camelize(t);if(y!=="filter"&&y in e)return prefixCache[t]=y;y=capitalize(y);for(let u=0;u<prefixes.length;u++){const c=prefixes[u]+y;if(c in e)return prefixCache[t]=c}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,w,y,u,c=isSpecialBooleanAttr(t)){y&&t.startsWith("xlink:")?w==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,w):w==null||c&&!includeBooleanAttr(w)?e.removeAttribute(t):e.setAttribute(t,c?"":isSymbol(w)?String(w):w)}function patchDOMProp(e,t,w,y,u){if(t==="innerHTML"||t==="textContent"){w!=null&&(e[t]=t==="innerHTML"?unsafeToTrustedHTML(w):w);return}const c=e.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){const h=c==="OPTION"?e.getAttribute("value")||"":e.value,n=w==null?e.type==="checkbox"?"on":"":String(w);(h!==n||!("_value"in e))&&(e.value=n),w==null&&e.removeAttribute(t),e._value=w;return}let f=!1;if(w===""||w==null){const h=typeof e[t];h==="boolean"?w=includeBooleanAttr(w):w==null&&h==="string"?(w="",f=!0):h==="number"&&(w=0,f=!0)}try{e[t]=w}catch{}f&&e.removeAttribute(u||t)}function addEventListener(e,t,w,y){e.addEventListener(t,w,y)}function removeEventListener(e,t,w,y){e.removeEventListener(t,w,y)}const veiKey=Symbol("_vei");function patchEvent(e,t,w,y,u=null){const c=e[veiKey]||(e[veiKey]={}),f=c[t];if(y&&f)f.value=y;else{const[h,n]=parseName(t);if(y){const l=c[t]=createInvoker(y,u);addEventListener(e,h,l,n)}else f&&(removeEventListener(e,h,f,n),c[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let y;for(;y=e.match(optionsModifierRE);)e=e.slice(0,e.length-y[0].length),t[y[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const w=y=>{if(!y._vts)y._vts=Date.now();else if(y._vts<=w.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(y,w.value),t,5,[y])};return w.value=e,w.attached=getNow(),w}function patchStopImmediatePropagation(e,t){if(isArray(t)){const w=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{w.call(e),e._stopped=!0},t.map(y=>u=>!u._stopped&&y&&y(u))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,w,y,u,c)=>{const f=u==="svg";t==="class"?patchClass(e,y,f):t==="style"?patchStyle(e,w,y):isOn(t)?isModelListener(t)||patchEvent(e,t,w,y,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,y,f))?(patchDOMProp(e,t,y),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,y,f,c,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!isString(y))?patchDOMProp(e,camelize(t),y,c,t):(t==="true-value"?e._trueValue=y:t==="false-value"&&(e._falseValue=y),patchAttr(e,t,y,f))};function shouldSetAsProp(e,t,w,y){if(y)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction(w));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const u=e.tagName;if(u==="IMG"||u==="VIDEO"||u==="CANVAS"||u==="SOURCE")return!1}return isNativeOn(t)&&isString(w)?!1:t in e}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray(t)?w=>invokeArrayFns(t,w):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:t,trim:w,number:y}},u){e[assignKey]=getModelAssigner(u);const c=y||u.props&&u.props.type==="number";addEventListener(e,t?"change":"input",f=>{if(f.target.composing)return;let h=e.value;w&&(h=h.trim()),c&&(h=looseToNumber(h)),e[assignKey](h)}),w&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:w,modifiers:{lazy:y,trim:u,number:c}},f){if(e[assignKey]=getModelAssigner(f),e.composing)return;const h=(c||e.type==="number")&&!/^0\d/.test(e.value)?looseToNumber(e.value):e.value,n=t??"";h!==n&&(document.activeElement===e&&e.type!=="range"&&(y&&t===w||u&&e.value.trim()===n)||(e.value=n))}},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:w}=t;return t.mount=y=>{const u=normalizeContainer(y);if(!u)return;const c=t._component;!isFunction(c)&&!c.render&&!c.template&&(c.template=u.innerHTML),u.nodeType===1&&(u.textContent="");const f=w(u,!1,resolveRootNamespace(u));return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),f},t};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const _hoisted_1$2={id:"container"},_sfc_main$2=defineComponent({__name:"ThePlayer",props:{playingVideo:{}},setup(e){return(t,w)=>(openBlock(),createElementBlock("div",_hoisted_1$2))}}),_export_sfc=(e,t)=>{const w=e.__vccOpts||e;for(const[y,u]of t)w[y]=u;return w},ThePlayer=_export_sfc(_sfc_main$2,[["__scopeId","data-v-2aaf69d2"]]),videoList=[{VideoId:0,Source:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8",CoverURL:"",Title:"示例",Duration:"04:22",Description:"移动互联网时代，视频应用已经成为每家企业的标配，可对技术团队来说，选择自己开发，还是直接使用云计算平台的视频解决方案，如何确保视频交付使用后的效果，以及视频内容安全、性价比等问题，是不是正一个个的困扰着您？"}],_hoisted_1$1={class:"video-player-input"},_sfc_main$1=defineComponent({__name:"VideoPlayerInput",emits:["update"],setup(e,{emit:t}){const w=t,y=ref(""),u=()=>{const f={VideoId:0,Source:y.value.replace("preview.m3u8","index.m3u8"),CoverURL:"",Title:"视频介绍",Duration:"04:22",Description:""};w("update",f)};return(c,f)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>y.value=h),placeholder:"Enter a video URL here"},null,512),[[vModelText,y.value]]),createBaseVNode("button",{onClick:u},"Play")]))}}),VideoPlayerInput=_export_sfc(_sfc_main$1,[["__scopeId","data-v-8ee597ff"]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aliplayerMin={exports:{}};/*! aliyun-aliplayer - v2.27.1 - 2024-11-12 10.54.38 */(function(module,exports){(function(e){module.exports=e()})(function(){return function e(t,w,y){function u(h,n){if(!w[h]){if(!t[h]){var l=typeof commonjsRequire=="function"&&commonjsRequire;if(!n&&l)return l(h,!0);if(c)return c(h,!0);throw(n=new Error("Cannot find module '"+h+"'")).code="MODULE_NOT_FOUND",n}l=w[h]={exports:{}},t[h][0].call(l.exports,function(a){return u(t[h][1][a]||a)},l,l.exports,e,t,w,y)}return w[h].exports}for(var c=typeof commonjsRequire=="function"&&commonjsRequire,f=0;f<y.length;f++)u(y[f]);return u}({1:[function(e,t,w){},{}],2:[function(e,t,w){(function(y){(function(){var u,c;u=this,c=function(){var f,h=Math;if(typeof window<"u"&&window.crypto&&(f=window.crypto),typeof self<"u"&&self.crypto&&(f=self.crypto),!(f=!(f=!(f=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:f)&&typeof window<"u"&&window.msCrypto?window.msCrypto:f)&&y!==void 0&&y.crypto?y.crypto:f)&&typeof e=="function")try{f=e("crypto")}catch{}var n=Object.create||function(E){return l.prototype=E,E=new l,l.prototype=null,E};function l(){}var a={},s=a.lib={},_=s.Base={extend:function(E){var C=n(this);return E&&C.mixIn(E),C.hasOwnProperty("init")&&this.init!==C.init||(C.init=function(){C.$super.init.apply(this,arguments)}),(C.init.prototype=C).$super=this,C},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var C in E)E.hasOwnProperty(C)&&(this[C]=E[C]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}},T=s.WordArray=_.extend({init:function(E,C){E=this.words=E||[],this.sigBytes=C??4*E.length},toString:function(E){return(E||v).stringify(this)},concat:function(E){var C=this.words,R=E.words,A=this.sigBytes,L=E.sigBytes;if(this.clamp(),A%4)for(var N=0;N<L;N++){var I=R[N>>>2]>>>24-N%4*8&255;C[A+N>>>2]|=I<<24-(A+N)%4*8}else for(var M=0;M<L;M+=4)C[A+M>>>2]=R[M>>>2];return this.sigBytes+=L,this},clamp:function(){var E=this.words,C=this.sigBytes;E[C>>>2]&=4294967295<<32-C%4*8,E.length=h.ceil(C/4)},clone:function(){var E=_.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var C=[],R=0;R<E;R+=4)C.push(function(){if(f){if(typeof f.getRandomValues=="function")try{return f.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof f.randomBytes=="function")try{return f.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new T.init(C,E)}}),m=a.enc={},v=m.Hex={stringify:function(E){for(var C=E.words,R=E.sigBytes,A=[],L=0;L<R;L++){var N=C[L>>>2]>>>24-L%4*8&255;A.push((N>>>4).toString(16)),A.push((15&N).toString(16))}return A.join("")},parse:function(E){for(var C=E.length,R=[],A=0;A<C;A+=2)R[A>>>3]|=parseInt(E.substr(A,2),16)<<24-A%8*4;return new T.init(R,C/2)}},S=m.Latin1={stringify:function(E){for(var C=E.words,R=E.sigBytes,A=[],L=0;L<R;L++){var N=C[L>>>2]>>>24-L%4*8&255;A.push(String.fromCharCode(N))}return A.join("")},parse:function(E){for(var C=E.length,R=[],A=0;A<C;A++)R[A>>>2]|=(255&E.charCodeAt(A))<<24-A%4*8;return new T.init(R,C)}},x=m.Utf8={stringify:function(E){try{return decodeURIComponent(escape(S.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return S.parse(unescape(encodeURIComponent(E)))}},P=s.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new T.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=x.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(H){var C,R=this._data,A=R.words,L=R.sigBytes,N=this.blockSize,I=L/(4*N),M=(I=H?h.ceil(I):h.max((0|I)-this._minBufferSize,0))*N,H=h.min(4*M,L);if(M){for(var O=0;O<M;O+=N)this._doProcessBlock(A,O);C=A.splice(0,M),R.sigBytes-=H}return new T.init(C,H)},clone:function(){var E=_.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0}),g=(s.Hasher=P.extend({cfg:_.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){P.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){return E&&this._append(E),this._doFinalize()},blockSize:16,_createHelper:function(E){return function(C,R){return new E.init(R).finalize(C)}},_createHmacHelper:function(E){return function(C,R){return new g.HMAC.init(E,R).finalize(C)}}}),a.algo={});return a},typeof w=="object"?t.exports=w=c():u.CryptoJS=c()}).call(this)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{crypto:1}],3:[function(e,t,w){var y,u;y=this,u=function(c){var f;return f=c.lib.WordArray,c.enc.Base64={stringify:function(h){for(var n=h.words,l=h.sigBytes,a=this._map,s=(h.clamp(),[]),_=0;_<l;_+=3)for(var T=(n[_>>>2]>>>24-_%4*8&255)<<16|(n[_+1>>>2]>>>24-(_+1)%4*8&255)<<8|n[_+2>>>2]>>>24-(_+2)%4*8&255,m=0;m<4&&_+.75*m<l;m++)s.push(a.charAt(T>>>6*(3-m)&63));var v=a.charAt(64);if(v)for(;s.length%4;)s.push(v);return s.join("")},parse:function(h){var n=h.length,l=this._map;if(!(a=this._reverseMap))for(var a=this._reverseMap=[],s=0;s<l.length;s++)a[l.charCodeAt(s)]=s;for(var _,T,m=l.charAt(64),v=(m&&(m=h.indexOf(m))!==-1&&(n=m),h),S=n,x=a,P=[],g=0,E=0;E<S;E++)E%4&&(_=x[v.charCodeAt(E-1)]<<E%4*2,T=x[v.charCodeAt(E)]>>>6-E%4*2,P[g>>>2]|=(_|T)<<24-g%4*8,g++);return f.create(P,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},c.enc.Base64},typeof w=="object"?t.exports=w=u(e("crypto-js/core")):u(y.CryptoJS)},{"crypto-js/core":2}],4:[function(e,t,w){var y,u;y=this,u=function(c){return c.enc.Utf8},typeof w=="object"?t.exports=w=u(e("crypto-js/core")):u(y.CryptoJS)},{"crypto-js/core":2}],5:[function(e,t,w){var y,u;y=this,u=function(c){return c.HmacSHA1},typeof w=="object"?t.exports=w=u(e("crypto-js/core"),e("crypto-js/sha1"),e("crypto-js/hmac")):u(y.CryptoJS)},{"crypto-js/core":2,"crypto-js/hmac":6,"crypto-js/sha1":7}],6:[function(e,t,w){var y,u;y=this,u=function(c){var f,h;f=c.lib.Base,h=c.enc.Utf8,c.algo.HMAC=f.extend({init:function(n,l){n=this._hasher=new n.init,typeof l=="string"&&(l=h.parse(l));for(var a=n.blockSize,s=4*a,n=((l=l.sigBytes>s?n.finalize(l):l).clamp(),this._oKey=l.clone()),l=this._iKey=l.clone(),_=n.words,T=l.words,m=0;m<a;m++)_[m]^=1549556828,T[m]^=909522486;n.sigBytes=l.sigBytes=s,this.reset()},reset:function(){var n=this._hasher;n.reset(),n.update(this._iKey)},update:function(n){return this._hasher.update(n),this},finalize:function(a){var l=this._hasher,a=l.finalize(a);return l.reset(),l.finalize(this._oKey.clone().concat(a))}})},typeof w=="object"?t.exports=w=u(e("crypto-js/core")):u(y.CryptoJS)},{"crypto-js/core":2}],7:[function(e,t,w){var y,u;y=this,u=function(c){var f,h,n,l,a;return h=(f=c).lib,n=h.WordArray,l=h.Hasher,h=f.algo,a=[],h=h.SHA1=l.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(s,_){for(var T=this._hash.words,m=T[0],v=T[1],S=T[2],x=T[3],P=T[4],g=0;g<80;g++){a[g]=g<16?0|s[_+g]:(E=a[g-3]^a[g-8]^a[g-14]^a[g-16])<<1|E>>>31;var E=(m<<5|m>>>27)+P+a[g];E+=g<20?1518500249+(v&S|~v&x):g<40?1859775393+(v^S^x):g<60?(v&S|v&x|S&x)-1894007588:(v^S^x)-899497514,P=x,x=S,S=v<<30|v>>>2,v=m,m=E}T[0]=T[0]+m|0,T[1]=T[1]+v|0,T[2]=T[2]+S|0,T[3]=T[3]+x|0,T[4]=T[4]+P|0},_doFinalize:function(){var s=this._data,_=s.words,T=8*this._nDataBytes,m=8*s.sigBytes;return _[m>>>5]|=128<<24-m%32,_[14+(64+m>>>9<<4)]=Math.floor(T/4294967296),_[15+(64+m>>>9<<4)]=T,s.sigBytes=4*_.length,this._process(),this._hash},clone:function(){var s=l.clone.call(this);return s._hash=this._hash.clone(),s}}),f.SHA1=l._createHelper(h),f.HmacSHA1=l._createHmacHelper(h),c.SHA1},typeof w=="object"?t.exports=w=u(e("crypto-js/core")):u(y.CryptoJS)},{"crypto-js/core":2}],8:[function(e,t,w){(function(y,u){(function(){var c,f;c=this,f=function(){function h(te){return typeof te=="function"}var n=Array.isArray||function(te){return Object.prototype.toString.call(te)==="[object Array]"},l=0,a=void 0,s=void 0,_=function(te,D){P[l]=te,P[l+1]=D,(l+=2)===2&&(s?s(g):I())},T=typeof window<"u"?window:void 0,m=T||{},m=m.MutationObserver||m.WebKitMutationObserver,v=typeof self>"u"&&y!==void 0&&{}.toString.call(y)==="[object process]",S=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var te=setTimeout;return function(){return te(g,1)}}var P=new Array(1e3);function g(){for(var te=0;te<l;te+=2)(0,P[te])(P[te+1]),P[te]=void 0,P[te+1]=void 0;l=0}function E(){try{var te=Function("return this")().require("vertx");return(a=te.runOnLoop||te.runOnContext)!==void 0?function(){a(g)}:x()}catch{return x()}}var C,R,A,I=void 0;function L(te,D){var Q,ne=this,pe=new this.constructor(H),ce=(pe[M]===void 0&&ae(pe),ne._state);return ce?(Q=arguments[ce-1],_(function(){return W(ce,pe,Q,ne._result)})):G(ne,pe,te,D),pe}function N(te){var D;return te&&typeof te=="object"&&te.constructor===this?te:(V(D=new this(H),te),D)}var I=v?function(){return y.nextTick(g)}:m?(R=0,v=new m(g),A=document.createTextNode(""),v.observe(A,{characterData:!0}),function(){A.data=R=++R%2}):S?((C=new MessageChannel).port1.onmessage=g,function(){return C.port2.postMessage(0)}):(T===void 0&&typeof e=="function"?E:x)(),M=Math.random().toString(36).substring(2);function H(){}var O=void 0,z=1,J=2;function U(te,D,Q){_(function(ne){var pe=!1,ce=function(fe,xe,Ee,ve){try{fe.call(xe,Ee,ve)}catch(Te){return Te}}(Q,D,function(fe){pe||(pe=!0,(D!==fe?V:B)(ne,fe))},function(fe){pe||(pe=!0,ee(ne,fe))},ne._label);!pe&&ce&&(pe=!0,ee(ne,ce))},te)}function q(te,D,Q){var ne,pe;D.constructor===te.constructor&&Q===L&&D.constructor.resolve===N?(ne=te,(pe=D)._state===z?B(ne,pe._result):pe._state===J?ee(ne,pe._result):G(pe,void 0,function(ce){return V(ne,ce)},function(ce){return ee(ne,ce)})):Q!==void 0&&h(Q)?U(te,D,Q):B(te,D)}function V(te,D){if(te===D)ee(te,new TypeError("You cannot resolve a promise with itself"));else if(Q=typeof D,D===null||Q!="object"&&Q!="function")B(te,D);else{Q=void 0;try{Q=D.then}catch(ne){return void ee(te,ne)}q(te,D,Q)}var Q}function X(te){te._onerror&&te._onerror(te._result),F(te)}function B(te,D){te._state===O&&(te._result=D,te._state=z,te._subscribers.length!==0)&&_(F,te)}function ee(te,D){te._state===O&&(te._state=J,te._result=D,_(X,te))}function G(te,D,Q,ne){var pe=te._subscribers,ce=pe.length;te._onerror=null,pe[ce]=D,pe[ce+z]=Q,pe[ce+J]=ne,ce===0&&te._state&&_(F,te)}function F(te){var D=te._subscribers,Q=te._state;if(D.length!==0){for(var ne,pe=void 0,ce=te._result,fe=0;fe<D.length;fe+=3)ne=D[fe],pe=D[fe+Q],ne?W(Q,ne,pe,ce):pe(ce);te._subscribers.length=0}}function W(te,D,Q,ne){var pe=h(Q),ce=void 0,fe=void 0,xe=!0;if(pe){try{ce=Q(ne)}catch(Ee){xe=!1,fe=Ee}if(D===ce)return void ee(D,new TypeError("A promises callback cannot return that same promise."))}else ce=ne;D._state===O&&(pe&&xe?V(D,ce):xe===!1?ee(D,fe):te===z?B(D,ce):te===J&&ee(D,ce))}var Z=0;function ae(te){te[M]=Z++,te._state=void 0,te._result=void 0,te._subscribers=[]}le.prototype._enumerate=function(te){for(var D=0;this._state===O&&D<te.length;D++)this._eachEntry(te[D],D)},le.prototype._eachEntry=function(te,D){var Q=this._instanceConstructor,ne=Q.resolve;if(ne===N){var pe,ce=void 0,fe=void 0,xe=!1;try{ce=te.then}catch(Ee){xe=!0,fe=Ee}ce===L&&te._state!==O?this._settledAt(te._state,D,te._result):typeof ce!="function"?(this._remaining--,this._result[D]=te):Q===he?(pe=new Q(H),xe?ee(pe,fe):q(pe,te,ce),this._willSettleAt(pe,D)):this._willSettleAt(new Q(function(Ee){return Ee(te)}),D)}else this._willSettleAt(ne(te),D)},le.prototype._settledAt=function(te,D,Q){var ne=this.promise;ne._state===O&&(this._remaining--,te===J?ee(ne,Q):this._result[D]=Q),this._remaining===0&&B(ne,this._result)},le.prototype._willSettleAt=function(te,D){var Q=this;G(te,void 0,function(ne){return Q._settledAt(z,D,ne)},function(ne){return Q._settledAt(J,D,ne)})};var _e=le;function le(te,D){this._instanceConstructor=te,this.promise=new te(H),this.promise[M]||ae(this.promise),n(D)?(this.length=D.length,this._remaining=D.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(D),this._remaining!==0)||B(this.promise,this._result)):ee(this.promise,new Error("Array Methods must be provided an Array"))}be.prototype.catch=function(te){return this.then(null,te)},be.prototype.finally=function(te){var D=this.constructor;return h(te)?this.then(function(Q){return D.resolve(te()).then(function(){return Q})},function(Q){return D.resolve(te()).then(function(){throw Q})}):this.then(te,te)};var he=be;function be(te){if(this[M]=Z++,this._result=this._state=void 0,this._subscribers=[],H!==te){if(typeof te!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof be))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var D=this;try{te(function(Q){V(D,Q)},function(Q){ee(D,Q)})}catch(Q){ee(D,Q)}}}return he.prototype.then=L,he.all=function(te){return new _e(this,te).promise},he.race=function(te){var D=this;return n(te)?new D(function(Q,ne){for(var pe=te.length,ce=0;ce<pe;ce++)D.resolve(te[ce]).then(Q,ne)}):new D(function(Q,ne){return ne(new TypeError("You must pass an array to race."))})},he.resolve=N,he.reject=function(te){var D=new this(H);return ee(D,te),D},he._setScheduler=function(te){s=te},he._setAsap=function(te){_=te},he._asap=_,he.polyfill=function(){var te=void 0;if(u!==void 0)te=u;else if(typeof self<"u")te=self;else try{te=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var D=te.Promise;if(D){var Q=null;try{Q=Object.prototype.toString.call(D.resolve())}catch{}if(Q==="[object Promise]"&&!D.cast)return}te.Promise=he},he.Promise=he},typeof w=="object"&&t!==void 0?t.exports=f():c.ES6Promise=f()}).call(this)}).call(this,e("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:9}],9:[function(e,c,w){var y,u,c=c.exports={};function f(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}try{y=typeof setTimeout=="function"?setTimeout:f}catch{y=f}try{u=typeof clearTimeout=="function"?clearTimeout:h}catch{u=h}function n(x){if(y===setTimeout)return setTimeout(x,0);if((y===f||!y)&&setTimeout)return(y=setTimeout)(x,0);try{return y(x,0)}catch{try{return y.call(null,x,0)}catch{return y.call(this,x,0)}}}var l,a=[],s=!1,_=-1;function T(){s&&l&&(s=!1,l.length?a=l.concat(a):_=-1,a.length)&&m()}function m(){if(!s){for(var x=n(T),P=(s=!0,a.length);P;){for(l=a,a=[];++_<P;)l&&l[_].run();_=-1,P=a.length}l=null,s=!1,function(g){if(u===clearTimeout)return clearTimeout(g);if((u===h||!u)&&clearTimeout)return(u=clearTimeout)(g);try{u(g)}catch{try{return u.call(null,g)}catch{return u.call(this,g)}}}(x)}}function v(x,P){this.fun=x,this.array=P}function S(){}c.nextTick=function(x){var P=new Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)P[g-1]=arguments[g];a.push(new v(x,P)),a.length!==1||s||n(m)},v.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=S,c.addListener=S,c.once=S,c.off=S,c.removeListener=S,c.removeAllListeners=S,c.emit=S,c.prependListener=S,c.prependOnceListener=S,c.listeners=function(x){return[]},c.binding=function(x){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(x){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],10:[function(e,t,w){t.exports={name:"aliyun-aliplayer",version:"2.27.1",description:"阿里云 Web 播放器",main:"./build/aliplayer-min",style:"./build/skins/default/aliplayer-min.css",files:["build"],repository:{type:"git",url:""},keywords:["aliyun","aliplayer"],scripts:{start:"npx grunt live",build:"npx grunt build",release:"commit-and-tag-version",prepublishOnly:"npm run build"},devDependencies:{"@babel/core":"^7.15.0","@babel/preset-env":"^7.15.0","babel-plugin-es6-promise":"^1.1.1",babelify:"^10.0.0","commit-and-tag-version":"^11.2.1","es6-promise":"^4.2.8",grunt:"^1.0.4","grunt-autoprefixer":"^3.0.4","grunt-babel":"^8.0.0","grunt-browserify":"^5.3.0","grunt-contrib-clean":"^2.0.0","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^3.0.0","grunt-contrib-less":"^2.0.0","grunt-contrib-uglify":"^4.0.1","grunt-contrib-watch":"^1.1.0","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0"},dependencies:{"crypto-js":"^4.1.1"}}},{}],11:[function(n,t,w){var y=n("../ui/component"),u=(n("../lib/util"),n("../lib/dom")),c=n("../lib/event"),f=(n("../lib/ua"),n("../lang/index")),h=n("../player/base/event/eventtype"),n=y.extend({init:function(l,a){y.call(this,l,a),this.className=a.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var l=y.prototype.createEl.call(this,"div");return l.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+f.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+f.get("Cancel_Text")+"</a></div>",l},bindEvent:function(){var l=this,a=(l._player.on(h.Private.AutoStreamShow,function(s){var _,T=document.querySelector("#"+l.getId()+" .tip-text");l._player._getLowerQualityLevel&&(_=l._player._getLowerQualityLevel())&&(l._switchUrl=_,T.innerText=f.get("Auto_Stream_Tip_Text").replace("$$",_.item.desc),u.css(l.el(),"display","block"))}),l._player.on(h.Private.AutoStreamHide,function(s){document.querySelector("#"+l.getId()+" .tip-text"),u.css(l.el(),"display","none")}),document.querySelector("#"+l.getId()+" .prism-button-ok")),a=(c.on(a,"click",function(){l._player._changeStream&&l._switchUrl&&(l._player._changeStream(l._switchUrl.index,f.get("Quality_Change_Text")),l._player.trigger(h.Private.SettingListHide)),u.css(l.el(),"display","none")}),document.querySelector("#"+l.getId()+" .prism-button-cancel"));c.on(a,"click",function(){u.css(l.el(),"display","none"),l._player.trigger(h.Private.SettingListHide)})}});t.exports=n},{"../lang/index":25,"../lib/dom":34,"../lib/event":35,"../lib/ua":50,"../lib/util":52,"../player/base/event/eventtype":70,"../ui/component":135}],12:[function(_,t,w){var y=_("../ui/component"),u=_("../lib/dom"),c=_("../lib/event"),f=_("../lib/ua"),h=_("../lib/function"),n=(_("../lang/index"),_("../lib/util")),l=_("../config"),a=_("../lib/playerutil"),s=_("../player/base/event/eventtype"),_=y.extend({init:function(T,m){y.call(this,T,m),this.className=m.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=T._liveshiftService},createEl:function(){var T=y.prototype.createEl.call(this);return T.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',T},bindEvent:function(){function T(x){m._progressDown=x}var m=this,v=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),S="//"+l.domain+l.path+l.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,this._player._options.skinsDomain?S=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":l.domain?-1<l.domain.indexOf("localhost")&&(S="//"+l.domain+"/build/skins/default/img/dragcursor.png"):S=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+l.path+l.h5Version+"/skins/default/img/dragcursor.png":(l.path||"").substring(1)+l.h5Version+"/skins/default/img/dragcursor.png",v.src=S,c.on(this.cursorNode,"mousedown",function(x){m._onMouseDown(x)}),c.on(this.cursorNode,"touchstart",function(x){m._onMouseDown(x)}),c.on(this.progressNode,"mousemove",function(x){m._progressMove(x)}),c.on(this.progressNode,"touchmove",function(x){m._progressMove(x)}),c.on(this.progressNode,"mousedown",function(x){T(!0)}),c.on(this.progressNode,"touchstart",function(x){T(!0)}),c.on(this.progressNode,"mouseup",function(x){T(!1)}),c.on(this.progressNode,"touchend",function(x){T(!1)}),c.on(this._el,"click",function(x){m._onMouseClick(x)}),this._player.on(s.Private.HideProgress,function(x){m._hideProgress(x)}),this._player.on(s.Private.CancelHideProgress,function(x){m._cancelHideProgress(x)}),this._player.on(s.Private.ShowBar,function(){m._updateLayout()}),c.on(this.progressNode,s.Private.MouseOver,function(x){m._onMouseOver(x)}),c.on(this.progressNode,s.Private.MouseOut,function(x){m._onMouseOut(x)}),this.bindTimeupdate=h.bind(this,this._onTimeupdate),this._player.on(s.Player.TimeUpdate,this.bindTimeupdate),a.isLiveShift(this._player._options)&&m._liveshiftService.start(6e4,function(x){x={mediaId:m._player._options.vid||"",error_code:x.Code,error_msg:x.Message},m._player.logError(x),m._player.trigger(s.Player.Error,x)}),this._player.on(s.Private.LiveShiftQueryCompleted,function(){m._updateSeperator(),m._updateLayout()}),this._player.on(s.Private.LiveShiftSwitchToLive,function(){m._updateCursorPosition()}),this._player.on(s.Player.Pause,function(){m._liveshiftService.stop()}),f.IS_IPAD?this.interval=setInterval(function(){m._onProgress()},500):this._player.on(s.Video.Progress,function(){m._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var T=this.seperatorNode.offsetWidth,m=this.el().offsetWidth,v=m-T;T!=0&&v!=0&&(u.css(this.progressNode,"width",100*(v-10)/m+"%"),u.css(this.seperatorNode,"right",-1*(T+10)+"px"))},_progressMove:function(T){var m=this._getSeconds(T),v=this._liveshiftService.availableLiveShiftTime,m=(this.timeNode.innerText="-"+n.formatTime(v-m),v?m/v:0),v=1-this.timeNode.clientWidth/this.el().clientWidth,S=(v<m&&(m=v),this.timeNode&&(u.css(this.timeNode,"display","block"),u.css(this.timeNode,"left",100*m+"%")),this);!f.IS_PC&&S._progressDown&&(S.progressSeekTimer&&clearTimeout(S.progressSeekTimer),S.progressSeekTimer=setTimeout(function(){S._progressDown||S._onMouseClick(T)},200))},_hideProgress:function(T){c.off(this.cursorNode,"mousedown"),c.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(T){var m=this;c.on(this.cursorNode,"mousedown",function(v){m._onMouseDown(v)}),c.on(this.cursorNode,"touchstart",function(v){m._onMouseDown(v)})},_canSeekable:function(T){var m=!0;return m=typeof this._player.canSeekable=="function"?this._player.canSeekable(T):m},_onMouseOver:function(T){this._updateCursorPosition(this._getCurrentTime()),u.css(this.timeNode,"display","block")},_onMouseOut:function(T){u.css(this.timeNode,"display","none")},_getSeconds:function(P){if(P.touches&&P.touches[0]){for(var m,v=this.el().offsetLeft,S=this.el();S.offsetParent;){var S=S.offsetParent,x=u.getTranslateX(S);v+=S.offsetLeft+x}S.tagName&&S.tagName.toLowerCase()==="body"&&(v+=document.getElementsByTagName("html")[0].offsetLeft),(m=(P.touches?P.touches[0]:P).pageX-v)<0&&(m=0)}else m=P.offsetX,P.target!==this.cursorNode&&P.target.offsetParent!==this.cursorNode||(m+=this.cursorNode.offsetLeft),P.target!==this._el&&(P.target.offsetParent,this._el);var P=this.progressNode.offsetWidth,g=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=g?m/P*g:0)<0?0:sec)>g?g:sec},_onMouseClick:function(v){var m=this,v=this._getSeconds(v),x=this._liveshiftService.availableLiveShiftTime,S=x-v,P=this._player._options,x=(S<=P.liveShiftMinOffset&&(v=x-(S=P.liveShiftMinOffset)),this._player.trigger(s.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(S)),P=a.isHls(m._player._options.source);m._player._loadByUrlInner(x,v,!0),m._player.trigger(s.Private.Play_Btn_Hide),m._liveshiftService.seekTime=v,m._player.trigger(s.Private.EndStart,{toTime:v}),m._updateProgressBar(this.playedNode,v),m._updateCursorPosition(v),setTimeout(function(){m._progressDown||m._onMouseOut()},500),P&&setTimeout(function(){m._player.play()})},_onMouseDown:function(T){var m=this;T.preventDefault(),this._player.trigger(s.Private.SeekStart,{fromTime:this._getCurrentTime()}),c.on(this.controlNode,"mousemove",function(v){m._onMouseMove(v)}),c.on(this.controlNode,"touchmove",function(v){m._onMouseMove(v)}),c.on(this.controlNode,"mouseup",function(v){m._onMouseUp(v)}),c.on(this.controlNode,"touchend",function(v){m._onMouseUp(v)})},_onMouseUp:function(T){T.preventDefault(),c.off(this.controlNode,"mousemove"),c.off(this.controlNode,"touchmove"),c.off(this._player.tag,"mouseup"),c.off(this._player.tag,"touchend"),c.off(this.controlNode,"mouseup"),c.off(this.controlNode,"touchend"),this._onMouseClick(T)},_onMouseMove:function(T){T.preventDefault()},_onTimeupdate:function(T){this._player._seeking||(f.IS_ANDROID&&f.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(s.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var T=this._liveshiftService.seekTime,T=(T==-1&&(T=0),this._player.getCurrentTime()+T);return f.IS_ANDROID&&f.IS_UC&&(T-=this._basePtsUC||0),T},_onProgress:function(T){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(T,m){var v,S;this._player._switchSourcing!=1&&(S=0,this._liveshiftService.seekTime==-1?S=1:1<(S=(v=this._liveshiftService.availableLiveShiftTime)?m/v:0)&&(this._liveshiftService.seekTime=-(S=1)),this.liveShiftStartDisplay,T)&&u.css(T,"width",100*S+"%")},_updateCursorPosition:function(T){var m,v,S,x;this._player.el()&&this._player._switchSourcing!=1&&(S=0,x=1,m=this._player.el().clientWidth,this._liveshiftService.seekTime==-1?S=1:1<(S=(v=this._liveshiftService.availableLiveShiftTime)?T/v:0)&&(this._liveshiftService.seekTime=-1),m!=0&&(x=1-(T=10/m),S-=T),S=S<0?0:S,this.cursorNode)&&(x<S?(u.css(this.cursorNode,"right","0px"),u.css(this.cursorNode,"left","auto")):(u.css(this.cursorNode,"right","auto"),u.css(this.cursorNode,"left",100*S+"%")))}});t.exports=_},{"../config":14,"../lang/index":25,"../lib/dom":34,"../lib/event":35,"../lib/function":37,"../lib/playerutil":47,"../lib/ua":50,"../lib/util":52,"../player/base/event/eventtype":70,"../ui/component":135}],13:[function(f,t,w){var y=f("../ui/component"),u=f("../lib/util"),c=f("../player/base/event/eventtype"),f=y.extend({init:function(h,n){y.call(this,h,n),this.className=n.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=h._liveshiftService},createEl:function(){var h=y.prototype.createEl.call(this,"div");return h.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',h},bindEvent:function(){var h=this;this._player.on(c.Video.TimeUpdate,function(){var n,l=h._liveshiftService,a=document.querySelector("#"+h.id()+" .current-time");l.liveShiftStartDisplay&&l.availableLiveShiftTime>l.seekTime&&l.seekTime!=-1?(n=h._liveshiftService.getBaseTime(),n=u.formatTime(n+h._player.getCurrentTime()),a.innerText=n):l.currentTimeDisplay&&(a.innerText=l.currentTimeDisplay)}),this._player.on(c.Private.LiveShiftQueryCompleted,function(){h.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});t.exports=f},{"../lib/util":52,"../player/base/event/eventtype":70,"../ui/component":135}],14:[function(e,t,w){e=e("../package.json"),t.exports={domain:"g.alicdn.com",path:"/apsara-media-box/imp-web-player/",flashVersion:"2.8.2",h5Version:e.version.split("-")[0],rtsVersion:"2.9.1",cityBrain:!0,logDuration:3,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track",dumpLogReportTo:"https://web-video.cn-hangzhou.log.aliyuncs.com/logstores/player-dump/track"}},{"../package.json":10}],15:[function(e,t,w){var y,u,c,f;e("./lib/patch-ssr").isSSR||(e("./lang/index").load(),y=e("./player/adaptiveplayer"),u=e("./lib/reloadInstanceUtil"),c=e("./lib/componentutil"),f=e("./config"),(e=function(h,n){return h=y.create(h,n),u.storeUserEvents(h),h}).getVersion=function(){return f.h5Version},c.register(e),(c=window.Aliplayer=e).players={},e.reloadInstance=u.reloadInstance,typeof Uint8Array>"u")||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),t.exports=c},{"./config":14,"./lang/index":25,"./lib/componentutil":29,"./lib/patch-ssr":46,"./lib/reloadInstanceUtil":48,"./player/adaptiveplayer":67}],16:[function(e,t,w){var y=e("../player/base/event/eventtype"),u=e("../lib/constants"),c=e("../lang/index");t.exports=function(){function f(n){var l=this;n===void 0&&(n={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=n.player,this.player.on(y.Player.Init,function(){l.playerInitDone=!0})}var h=f.prototype;return h.start=function(){var n=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){n.playerInitDone&&n.check()},this.interval))},h.stop=function(){this.clearTimer()},h.check=function(){var n=!1,l=this.detectPrototype()||this.detectNativeFn();return(l||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",l),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),n=!0),n},h.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},h.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},h.displayError=function(){var n=this.player,l={mediaId:n._options&&n._options.vid?n._options.vid:"",error_code:u.ErrorCode.RecordNotAllowed,error_msg:c.get("Record_Not_Allowed")};n.logError(l),n.trigger(y.Player.Error,l)},h.setupErrorStyle=function(){this.hideRetry();var n=document.querySelector(".prism-ErrorMessage");n&&(n.style.opacity="1",n.style.visibility="visible")},h.hideRetry=function(){var n=document.querySelector("#"+this.player.id()+" .prism-button-retry");n&&(n.style.display="none")},h.destroyVideo=function(){this.player._drm&&this.player.destroy();var n=this.player.tag;n&&n.parentNode&&n.parentNode.removeChild(n)},h.detectPrototype=function(){var n=window,l=n.MediaSource;return l&&n.EventTarget&&l.__proto__.__proto__===n.EventTarget},h.detectNativeFn=function(){var n=window.MediaSource;return n&&!this.isNativeFn(n.prototype.addSourceBuffer)},h.isNativeFn=function(n){var l=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),a=typeof n;return n!==null&&(a=="object"||a=="function")&&l.test(n)},h.detectDeperateVideo=function(){var n=this.player.tag;if(n)return(n.getAttribute("id")||"").indexOf("360")!==-1},f}()},{"../lang/index":25,"../lib/constants":30,"../player/base/event/eventtype":70}],17:[function(c,t,w){var y=c("../lib/oo"),u=c("../lang/index"),c=y.extend({init:function(h,n){this._player=h,this._options=h.options()}}),f=(c.prototype.handle=function(h){var n,l;this._options.autoPlayDelay&&(n=(n=this._options.autoPlayDelayDisplayText)||u.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",n),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(l=this)._timeHandler=setTimeout(function(){l._player.trigger("info_hide"),l._options.autoPlayDelay=0,h&&h()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){f(l)}),this._player.on("pause",function(){f(l)}))},c.prototype.dispose=function(){f(this),this._player=null},function(h){h._timeHandler&&(clearTimeout(h._timeHandler),h._timeHandler=null)});t.exports=c},{"../lang/index":25,"../lib/oo":45}],18:[function(h,t,w){var y=h("../lib/event"),u=h("../lib/data"),c=h("../player/base/event/eventtype"),f=u.guid(),h={};function n(s){var _,T,m=this._options.keyFastForwardStep,v=this._options.isLive;switch(s&&s.keyCode){case 39:v||(s.preventDefault(),_=this.getDuration(),T=this.getCurrentTime()+m,this.seek(T=_<T?_:T),l.call(this,T),a.call(this,T));break;case 37:v||(s.preventDefault(),T=this.getCurrentTime()-m,this.seek(T=T<0?0:T),l.call(this,T),a.call(this,T));break;case 38:s.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:s.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(v)return;s.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function l(s){this.trigger(c.Private.UpdateProgress,{targetTime:s})}function a(s){this.trigger(c.Private.UpdateCursorPosition,{targetTime:s})}h.init=function(){var s;this._options.keyShortCuts&&((s=n.bind(this)).guid=f,y.on(window.document,"keydown",s))},h.dispose=function(){var s;this._options.keyShortCuts&&((s=n.bind(this)).guid=f,y.off(window.document,"keydown",s))},t.exports=h},{"../lib/data":32,"../lib/event":35,"../player/base/event/eventtype":70}],19:[function(h,t,w){var y=typeof Promise>"u"?h("es6-promise").Promise:Promise,u=h("../lib/constants").LicenseResultCode,c=h("../lib/io"),f=((h={})[u.ResourceIncorrect]="license resource init error",h[u.LicenseKeyInvalid]="invalid license key",h[u.DomainInvalid]="invalid domain",h[u.CertInvalid]="invalid cert content",h[u.NotFound]="license not found",h[u.Expired]="license expired",h),h=function(){function n(){}return n.getLicense=function(l,a,s){var _=this;return this.isWasmSupported()?a?l?this.instance?y.resolve(this.instance):new y(function(T,m){_.resolvers.push(T),_.rejecters.push(m),_.resolvers.length===1&&c.loadJS("https://g.alicdn.com/apsara-media-components/amcom-web-license/0.4.0/index.js",function(){window.loadLicenseSource().then(function(v){var S=new v({business_id:2,domain_identity:l,license_key:a,region:s});return S.update().then(function(){_.instance=S,_.resolvers.forEach(function(x){x(S)})}).catch(function(x){console.error(x),_.rejecters.forEach(function(P){P(u.CertInvalid)})})}).catch(function(){_.rejecters.forEach(function(v){v(u.ResourceIncorrect)})}).finally(function(){_.resolvers=[],_.rejecters=[]})},function(){_.rejecters.forEach(function(v){v(u.ResourceIncorrect)})})}):y.reject(u.DomainInvalid):y.reject(u.LicenseKeyInvalid):y.reject(u.WasmNotSupported)},n.isWasmSupported=function(){return typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"},n.logError=function(l){f[l]&&console.error(f[l])},n}();h.instance=void 0,h.resolvers=[],h.rejecters=[],t.exports=h},{"../lib/constants":30,"../lib/io":42,"es6-promise":8}],20:[function(T,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var x,P=arguments[S];for(x in P)Object.prototype.hasOwnProperty.call(P,x)&&(v[x]=P[x])}return v}).apply(this,arguments)}function u(v,S){for(var x=0;x<S.length;x++){var P=S[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(v,P.key,P)}}var c=T("../lib/event"),f="box",h="content",n="top-left",l="top-right",a="bottom-left",s="bottom-right",_="percentage",T=function(){function v(P){this._container=void 0,this._video=void 0,this._logoList=[],this._resizeDone=!0,this._observer=void 0,this._observer=new m,this._handleVideoResize=this._handleVideoResize.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this),this._setLogo(P.logo),this._setElements(P.container,P.video)}var S,x=v.prototype;return x.dispose=function(){this._observer.dispose(),this._observer=void 0,c.off(this._video,"resize",this._handleVideoResize),c.off(document,"fullscreenchange",this._handleWindowResize),this._logoList.forEach(function(P){P.logo&&P.logo.remove()}),this._logoList=[],this._container=void 0,this._video=void 0,this._resizeDone=!0},x._setElements=function(P,g){this._container=P,this._video=g,this.loadedMeta?this._logoList.forEach(this._setupLogo.bind(this)):c.on(g,"resize",this._handleVideoResize),this._observer.observe(this._container,this._handleWindowResize),c.on(document,"fullscreenchange",this._handleWindowResize)},x._handleVideoResize=function(){!this._video.videoWidth||this._logoList.some(function(P){return P.logo})||this._logoList.forEach(this._setupLogo.bind(this))},x._handleWindowResize=function(){var P=this;this._container&&this._resizeDone&&this.loadedMeta&&(this._resizeDone=!1,window.requestAnimationFrame(function(){P._resizeDone=!0,P._logoList.forEach(P._placeLogo.bind(P))}))},x._setLogo=function(P){this._logoList=P.map(this._defauleValue)},x._setupLogo=function(P){var g=this,E=this._createLogo(P);(P.logo=E).onload=function(){g._placeLogo(P)}},x._createLogo=function(P){var g=document.createElement("img");return g.setAttribute("class","prism-logo"),g.src=P.src,g},x._placeLogo=function(P){var g=P.logo,E=this._calcSize(P),C=(E.width&&g.setAttribute("width",E.width+"px"),E.height&&g.setAttribute("height",E.height+"px"),this._calcMatrix(P));g.style.position="absolute",Object.keys(C).forEach(function(R){g.style[R]=C[R]+"px"}),this._container.appendChild(P.logo)},x._calcSize=function(P){return this._getPixel(P)},x._calcMatrix=function(P){var g=this._getPosition(P),E=this._getPixel(P,{width:P.offsetX,height:P.offsetY});return Object.keys(g).forEach(function(C){switch(C){case"top":g[C]+=E.height;break;case"bottom":g[C]-=E.height;break;case"left":g[C]+=E.width;break;case"right":g[C]-=E.width}}),g},x._getPosition=function(E){var g=E.origin,E=E.position,C=0,R=0;switch(g===h&&(C=Math.abs(this.videoSize.height-this.contentSize.height)/2,R=Math.abs(this.videoSize.width-this.contentSize.width)/2),E){case n:return{top:0+C,left:0+R};case l:return{top:0+C,right:0+R};case a:return{bottom:0+C,left:0+R};case s:return{bottom:0+C,right:0+R};default:return{top:0,left:0}}},x._formalize=function(P,g){var E=1,E=P.width/P.height>g.width/g.height?g.width/P.width:g.height/P.height;return{width:P.width*E,height:P.height*E}},x._getPixel=function(P,C){var C=C===void 0?{}:C,E=C.width,C=C.height,R=P.unit,A=P.origin;return isNaN(E)&&(E=P.width),isNaN(C)&&(C=P.height),R===_?{width:(P=A===f?this.videoSize:this.contentSize).width*E/100,height:P.height*C/100}:{width:E,height:C}},x._defauleValue=function(P){return y({},P,{position:P.position||n,offsetX:P.offsetX||0,offsetY:P.offsetY||0,origin:P.origin||f,unit:P.unit||_})},x=v,(S=[{key:"videoSize",get:function(){return this._video?{width:this._video.offsetWidth,height:this._video.offsetHeight}:{}}},{key:"contentSize",get:function(){var P;return this._video?(P={width:this._video.videoWidth,height:this._video.videoHeight},{width:(P=this._formalize(P,this.videoSize)).width,height:P.height}):{}}},{key:"loadedMeta",get:function(){return!!this._video.videoWidth}}])&&u(x.prototype,S),Object.defineProperty(x,"prototype",{writable:!1}),v}(),m=(t.exports=T,function(){function v(){this._frame=void 0}var S=v.prototype;return S.observe=function(x,P){var g=document.createElement("iframe");return g.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;",g.onload=function(){g.contentWindow.onresize=function(){P(x)}},x.appendChild(g),this._frame=g},S.dispose=function(){this._frame&&(this._frame.contentWindow.onresize=null,this._frame.remove(),this._frame=void 0)},v}())},{"../lib/event":35}],21:[function(e,t,w){var y=e("../lib/event"),u=e("../player/base/event/eventtype");t.exports=function(){function c(){this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0,this.resize=this._resize.bind(this)}var f=c.prototype;return f.autoResize=function(h,n,l){l===void 0&&(l="height"),typeof h!="number"?console.warn("Parameter [ratio] should be a number, like 16/9"):(this.target=l,this.ratio=h,this.player=n,y.on(window,"resize",this.resize),this.resize())},f._resize=function(){var h,n,l;(h=this.player.fullscreenService)!=null&&h.isFullScreen||(h=(h=this.player)==null?void 0:h.el())&&(this.target==="height"?(l=(n=h.offsetWidth)/this.ratio,h.style.height=l+"px"):(n=(l=h.offsetHeight)*this.ratio,h.style.width=n+"px"),(h=this.player)!=null)&&h.trigger(u.Player.AutoResize,{width:n,height:l})},f.dispose=function(){y.off(window,"resize",this.resize),this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0},c}()},{"../lib/event":35,"../player/base/event/eventtype":70}],22:[function(e,t,w){t.exports=t.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Click_To_Unmute:"Click to unmute",Snapshot:"Snapshot",Detection_Text:"Diagnose",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switch to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_No_Decoder_Text:"Unsupported codec",Error_Server_Network_NotSupport_Text:"Network error or  the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format/codec of video is not supported",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4 is not supported by this explorer",Error_Not_Support_encrypt_Text:"To play the encrypted video,please set encryptType to 1",Error_Encrypt_Fetch_Failed_Text:"Failed to fetch the encrypted video",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls from vod service，please close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed,possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Error_Load_M3U8_Timeout_Text:"Timeout error occored when the m3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Manifest_Decode_Text:"Failed to parse manifest",Error_Waiting_Timeout_Text:"Buffering timeout, please close or refresh",Error_Invalidate_Source:"Video shoud be mp4、mp3、m3u8、mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Drm_No_Sts:"STS(accessKeyId/accessKeySecret/securityToken) is required for DRM playback",Error_Region_Block_Text:"This video is not available in your region",Error_SW_Conflict:"Service Worker conflict. Please try disabling browser extensions, restarting the browser, and closing other tabs.",Error_SW_Register_Failed:"Service Worker registration failed.",Error_SW_ScriptURL_Empty:"Please provide the swScriptURL parameter.",Error_SW_ScriptURL_Https:"The swScriptURL parameter must use an absolute address with https:// protocol.",Error_SW_ScriptURL_Scope:"The swScriptURL (subpath: @scope1@) and the current webpage (subpath: @scope2@) must be under the same subpath.",Error_SW_Version_Not_Match:"The version number of swScriptURL (@swVersion@) must match the player version (@playerVersion@).",Error_SW_ScriptURL_ILlegal:"Please provide a valid swScriptURL(@detail@).",Error_SW_Https_required:"Https is required when playing Vod's encription video",Tip_Err_Common:"please contact us for support, the error detail is:<br />",Tip_Err_Common_Short:"the error detail is:<br />",Tip_Drm_Request_Err:"The request failed with an error, please check the browser console to check whether it is caused by DNS, HTTPS certificates, or network problems. <br/> If the above tests are fine,",Tip_Drm_Secure_Context:"DRM can only be accessed under https, localhost, 127.0.0.1 web pages, and m3u8 and media segments must also use https.",Tip_Drm_Key_System_Unavailable:"1. This browser does not support Widevine or the current Widevine configuration<br/>2. The request that pops up in the browser was rejected by the user<br/>3. Please open the browser settings, look for the [Protected Content] setting and allow",Tip_Drm_File_Not_Allowed:"Do not use the file:// to open the file directly, you need to use a https:// to access the file",Tip_Drm_Playlist_Hierarchy:"HLS playlist level error, the main list needs to be master playlist",Tip_Drm_Unsupported:"Your browser does not currently support Widevine. If you are using Chrome, you can visit the URL chrome://components/ to locate the 'Widevine Content Decryption Module' and click on 'Update'. If this module is not present, the browser will be unable to play DRM-protected videos.",Tip_Err_Decode:"The decoding error refers to the current audio/video frame is not compatible with the browser, you can try the following methods: <br />1.chrome/edge browser open the chrome://flags, search for Hardware-accelerated video decode, select disabled<br />2.If the decoding error persists, please transcode the video to fix the problem frame",Tip_Err_Rts_Http_Failed:"The error indicates that the RTS streaming request encountered an HTTP error, which is usually related to HTTPS certificate, DNS resolution, or network connectivity issues. Due to browser restrictions on JavaScript, the player cannot obtain detailed error information. If you need further information, you can follow these steps:<br>Right-click on a blank area of the browser and select 'Inspect'.<br>2.In the newly opened interface, select 'Console'.<br>3.Check for any red error messages:<br>If you see 'SSL', it means that you have not correctly configured the HTTPS certificate for the streaming domain.<br>If you see 'NOT RESOLVED', it means that the DNS resolution for your domain has failed.<br>You can also use the <a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>ApsaraVideo Live Diagnostic Tool</a> for self-diagnosis.",Tip_Err_Not_found:"For live streams, this might be due to the broadcast not starting yet, having ended, or being disrupted. For on-demand videos, it could indicate the video is unavailable.",Tip_Err_Blocked:"If you have a network proxy enabled, please try disabling it and then retrying.",Tip_Err_Splayer:"For best practices regarding playback of H.265/H.266 encoded videos, please refer to",Tip_Err_Splayer_Doc:" this document.",Tip_SW_Register:"1.Please access the webpage using HTTPS<br>2.Please ensure that the provided swScriptURL is a complete address starting with https:// and is accessible.",Tip_License_Required:"Starting 2024-12-01, the new version of the player must be configured with a license to use. The license for the basic functions of the player can be applied for free and is valid for 1 year. Please apply in advance to avoid any disruption in usage ",Tip_License_Params:"After completing the application, please refer to this document to pass the license information into the SDK ",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"there is a network error, possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv、rmtp can't be supported on mobile，please use m3u8",Error_Not_Support_Mse_Flv:"Flv is not supported by this browser.",Error_Not_Support_Mse_Dash:"Dash is not supported by this browser.",Error_Not_Support_RTMP:"RTMP is not supported by this browser.",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switching to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"Versions of iOS below 17.1 doesn't support Vod's private encription video",iOSVodEncriptionBlacklist:"Please use Safari/Chrome browser to play Vod's private encription video",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome/Edge",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_No_Authorization:"Aliplayer without Authorization",License_Click_To_Apply:"Click to apply",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"s received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],23:[function(e,t,w){t.exports=t.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"Titles and Credits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error, please try to refresh",Decode_Error:"Data decoding error",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading, please try to refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted, please try to refresh",Corss_Domain_Error:`Please ensure your domain has obtained IPC license and combined CNAME, \r
 or to set  cross-domain accessing available`,Url_Timeout_Error:"The video url is timeout, please try to refresh",Connetction_Error:"Sorry，the video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Open_Html_By_File:"Html page should be on the server",Cant_Use_Flash_On_Mobile:"Mobile doesn't support flash player，please use h5 player",Flash_Not_Ready:"Flash Player plugin hasn't been installed <a href='https://www.flash.cn/' target='_blank'>install plugin</a>, or check if disable Flash plugin"}},{}],24:[function(e,t,w){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",SQ:"普通音质",HQ:"高音质",Forbidden_Text:"内部信息，严禁外传",Refresh:"刷新",Diagnosis:"诊断",Live_Finished:"直播已结束,谢谢观看",Play:"播放",Pause:"暂停",Snapshot:"截图",Replay:"重播",Live:"直播",Encrypt:"加密",Sound:"声音",Fullscreen:"全屏",Exist_Fullscreen:"退出全屏",Resolution:"清晰度",Next:"下一集",Brightness:"亮度",Default:"默认",Contrast:"对比度",Titles_Credits:"片头片尾",Skip_Titles:"跳过片头",Skip_Credits:"跳过片尾",Not_Support_Out_Site:"该视频暂不支持站外播放，请到淘TV观看",Watch_Now:"立即观看",Network_Error:"网络无法连接，请尝试检查网络后刷新试试",Video_Error:"视频播放异常，请刷新试试",Decode_Error:"播放数据解码错误",Live_Not_Start:"亲，直播还未开始哦，敬请期待",Live_Loading:"直播信息加载中，请刷新试试",Live_End:"亲，直播已结束",Live_Abrot:"当前直播信号中断，请刷新后重试",Corss_Domain_Error:`请确认您的域名已完成备案和CNAME绑定，\r
并处于启用状态，或资源允许跨越访问`,Url_Timeout_Error:"您所观看的视频地址连接超时，请刷新后重试",Connetction_Error:"抱歉,该视频由于连接错误暂时不能播放,请观看其它视频",Fetch_MTS_Error:"获取视频列表失败，请确认",Token_Expired_Error:"请求接口失败，请确认Token是否过期",Video_Lists_Empty_Error:"获取视频列表为空，请确认播放数据与格式",Encrypted_Failed_Error:"获取视频加密秘钥错误，请确认播放权限",Fetch_Failed_Permission_Error:"获取视频列表失败，请确认播放权限",Invalidate_Param_Error:"无输入视频，请确认输入参数",AutoPlayDelayDisplayText:"$$秒以后开始播放",Fetch_MTS_NOT_NotStream_Error:"此vid没有可播放视频",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Cant_Use_Flash_On_Mobile:"移动端不支持Flash播放器，请使用h5播放器",Flash_Not_Ready:"Flash Player插件未安装<a href='https://www.flash.cn/' target='_blank'>安装插件</a>，如果已经安装请检查是否被禁用"}},{}],25:[function(e,t,w){function y(){var _;return window[n]!==void 0&&window[n]||(_=(_=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<_.indexOf("zh")?"zh-cn":"en-us",window[n]=_),window[n]}function u(_,T,m){var v=s(_),x="",S=a(),x=_=="flash"?S=="en-us"?e("./flash/en-us"):S=="zh-cn"?e("./flash/zh-cn"):T[S]:S=="en-us"?e("./en-us"):S=="zh-cn"?e("./zh-cn"):T[S];m&&(x=Object.assign({},x,m[S])),f.set(v,JSON.stringify(x)),l(_,x),m&&e("../lib/constants").updateByLanguage()}var c=e("../config"),f=e("../lib/storage"),h=(e("../lib/io"),"aliplayer_lang_data"),n="aliplayer_lang",l=function(_,T){_=s(_),window[_]=T},a=function(){return y()},s=function(_){var T=a();return h+"_"+(_=_||"h5")+"_"+c.h5Version.replace(/\./g,"_")+"_"+T};t.exports.setCurrentLanguage=function(_,T,m,v){var S=window[n];if(!((_=_!==void 0&&_?_:y())=="en-us"||_=="zh-cn"||m&&m[_]))throw new Error("There is not language resource for "+_+", please specify the language resource by languageTexts property");window[n]=_,u(T,m,v),_!=S&&e("../lib/constants").updateByLanguage()},t.exports.getCurrentLanguage=y,t.exports.getLanguageData=function(_,T){return _=s(_),window[_]},t.exports.load=u,t.exports.get=function(_,T,m){if(T=s(T=T||"h5"),T=window[T],T){var v=T[_];if(m)for(var S in m)v=v.replace(new RegExp("@"+S+"@","g"),m[S]);return v}}},{"../config":14,"../lib/constants":30,"../lib/io":42,"../lib/storage":49,"./en-us":22,"./flash/en-us":23,"./flash/zh-cn":24,"./zh-cn":26}],26:[function(e,t,w){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",SQ:"普通音质",HQ:"高音质",Speed:"倍速",Speed_05X_Text:"0.5X",Speed_1X_Text:"正常",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Quality_Change_Fail_Switch_Text:"不能播放，切换为",Quality_Change_Text:"正在为您切换到 ",Quality_The_Url:"此地址",Refresh_Text:"刷新",Detection_Text:"查看建议",Cancel:"取消",Mute:"静音",Click_To_Unmute:"点击取消静音",Snapshot:"截图",Play_DateTime:"播放时间",AutoPlayDelayDisplayText:"$$秒以后开始播放",Error_Load_Abort_Text:"获取数据过程被中止",Error_Network_Text:"网络错误加载数据失败",Error_Decode_Text:"解码错误",Error_No_Decoder_Text:"不支持此编码格式",Error_Server_Network_NotSupport_Text:"服务器、网络错误或格式不支持",Error_Offline_Text:"网络不可用，请确定",Error_Play_Text:"播放出错啦",Error_Retry_Text:"请尝试退出重试或刷新",Error_AuthKey_Text:"可能鉴权过期、域名不在白名单或请求被拦截",Error_H5_Not_Support_Text:"不支持此格式的视频",Error_Not_Support_M3U8_Text:"浏览器不支持m3u8视频播放",Error_Not_Support_MP4_Text:"浏览器不支持mp4视频播放",Error_Not_Support_encrypt_Text:"播放私有加密视频，请设置属性encryptType为1",Error_Encrypt_Fetch_Failed_Text:"请求加密地址失败",Error_Vod_URL_Is_Empty_Text:"获取播放地址为空",Error_Vod_Fetch_Urls_Text:"点播接口异常，请尝试退出重试或刷新",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Error_Playauth_Decode_Text:"playauth解析错误",Error_Vid_Not_Same_Text:"不能更新地址，vid和播放中的不一致",Error_Playauth_Expired_Text:"凭证已过期，请尝试退出重试或刷新",Error_MTS_Fetch_Urls_Text:"MTS获取取数失败",Error_Load_M3U8_Failed_Text:"获取m3u8文件失败,可能是https证书、跨域问题或DNS解析失败",Error_Load_M3U8_Timeout_Text:"获取m3u8文件超时",Error_Liveshift_M3U8_Not_Found_Text:"没有更多时移视频了",Error_M3U8_Decode_Text:"获取m3u8文件解析失败",Error_TX_Decode_Text:"解析数据出错",Error_Manifest_Decode_Text:"Manifest解析出错",Error_Waiting_Timeout_Text:"缓冲数据超时，请尝试退出重试或刷新",Error_Invalidate_Source:"播放地址格式需要为mp4、mp3、m3u8、mpd或flv",Error_Empty_Source:"播放地址不能为空",Error_Vid_Empty_Source:"vid对应的视频地址还未获取到",Error_Mediaauth_Empty_Source:"mediaAuth对应的视频地址还未获取到",Error_Fetch_NotStream:"此vid没有可播放视频",Error_Fetch_Media_Not_Found:"数据不存在或已被删除",Error_Not_Found:"播放地址不存在",Error_Drm_License_Request_Failed:"DRM License 请求失败",Error_Drm_Not_Supported:"当前浏览器不支持 DRM 播放",Error_Drm_Load:"DRM 播放错误",Error_Drm_No_Sts:"DRM 播放需要使用STS(accessKeyId/accessKeySecret/securityToken)",Error_Region_Block_Text:"您所在的地区无法观看该视频",Error_SW_Conflict:"ServiceWorker冲突，请尝试禁用浏览器插件、重启浏览器并关闭其他网页",Error_SW_Register_Failed:"Service Worker注册失败",Error_SW_ScriptURL_Empty:"请传入 swScriptURL 参数",Error_SW_ScriptURL_Https:"swScriptURL参数请使用 https:// 协议的绝对地址",Error_SW_ScriptURL_Scope:"swScriptURL(子路径:@scope1@)和当前网页(子路径:@scope2@)必须在同一个子路径下",Error_SW_Version_Not_Match:"swScriptURL的版本号(@swVersion@)必须和播放器版本(@playerVersion@)号一致",Error_SW_ScriptURL_ILlegal:"请传入合法的swScriptURL(@detail@)",Error_SW_Https_required:"私有加密播放需要使用 https 环境",Tip_Err_Common:"您可联系售后支持，错误详情:<br />",Tip_Err_Common_Short:"错误详情:<br />",Tip_Drm_Request_Err:"请求出错，请先查看浏览器控制台，检查是否由域名解析、https证书、或网络问题引起。<br />若以上检查没问题，",Tip_Drm_Secure_Context:"DRM仅可以在https、localhost、127.0.0.1网页下访问，同时m3u8和切片也必须使用https。",Tip_Drm_Key_System_Unavailable:"1.此浏览器不支持Widevine或者当前的Widevine配置<br />2.浏览器弹出的请求被用户拒绝了<br />3.请打开浏览器设置，查找关于【受保护的内容】设置并允许",Tip_Drm_File_Not_Allowed:"请不要使用file://直接打开文件，需要使用https://访问文件",Tip_Drm_Playlist_Hierarchy:"HLS播放列表层级错误，主列表需要是 master playlist",Tip_Drm_Unsupported:"您的浏览器不支持 Widevine，如果是 Chrome，可以访问 chrome://components/，查找 Widevine Content Decryption Module，并点击更新。如果没有此模块，则该浏览器无法播放 DRM 视频。",Tip_Err_Decode:"解码错误指的是当前音/视频帧与浏览器不兼容，可以尝试以下方式：<br />1.chrome/edge 浏览器打开chrome://flags，搜索 Hardware-accelerated video decode，选择 disabled<br />2.如果解码错误仍然存在，请对视频进行转码处理，以修复问题帧<br />3.firefox浏览器请打开about:support，下拉找到【解码器支持信息】，如果没有AAC字样，代表不支持音频解码，请更换浏览器",Tip_Err_Rts_Http_Failed:"该错误指的是RTS拉流请求遇到了一个http错误，一般来说是https证书、DNS解析或者网络连通性问题，由于浏览器对JS的限制，播放器无法取得详细的错误信息，需要进一步排查，您可按照以下操作：<br>1.右键浏览器空白处，选择【检查】2.在新打开的界面中选择【控制台】3.查看红色报错：<br>如果有SSL字样，则代表您没有为拉流域名正确地配置https证书<br>如果有NOT RESOLVED字样，则代表您的域名DNS解析失败<br>您也使用<a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>阿里云直播诊断工具</a>进行自助排查",Tip_Err_Not_found:"如果是直播，可能是直播未开始/已停止/已断流；如果是点播，可能是视频不存在。",Tip_Err_Blocked:"如果您开启了网络代理，请关闭后重试。",Tip_Err_Splayer:"关于 H.265/H.266 播放的最佳实践，请参考",Tip_Err_Splayer_Doc:"此文档。",Tip_SW_Register:"1.请使用https访问网页<br>2.请确保传入的swScriptURL是以https://开头的完整地址，且可以正常访问",Tip_License_Required:"2024年12月1日起，新版本播放器需要配置License才可以使用，播放器基础功能License免费申请，有效期 1 年，请提前申请以避免无法使用",Tip_License_Params:"申请完成后，请参考此文档将License信息传入SDK",Live_End:"亲，直播已结束",Play_Before_Fullscreen:"播放后再全屏",Can_Not_Seekable:"不能seek到这里",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Request_Block_Text:"浏览器安全策略视频地址不能为http协议，与网站https协议不一致",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Maybe_Cors_Error:"网络请求失败，可能是https证书、跨域问题或DNS解析失败",Speed_Switch_To:"倍速切换到 ",Curent_Volume:"当前音量：",Volume_Mute:"设置为静音",Volume_UnMute:"设置为非静音",ShiftLiveTime_Error:"直播开始时间不能大于直播结束时间",Error_Not_Support_Format_On_Mobile:"移动端不支持flv、rmtp视频，请使用m3u8",Error_Not_Support_Mse_Flv:"当前浏览器不支持 flv 视频",Error_Not_Support_Mse_Dash:"当前浏览器不支持 dash 视频",Error_Not_Support_RTMP:"浏览器不支持 rtmp 视频",SessionId_Ticket_Invalid:"DRM视频播放，sessionId和ticket属性不能为空",Http_Error:"Http网络请求失败",Http_Timeout:"http请求超时",DRM_License_Expired:"DRM license超时，请刷新",Not_Support_DRM:"浏览器不支持DRM视频的播放或未受到用户许可",CC_Switch_To:"字幕切换到 ",AudioTrack_Switch_To:"音轨切换到 ",Subtitle:"字幕",AudioTrack:"音轨",Quality:"清晰度",Auto:"自动",Quality_Switch_To:"正在切换清晰度至 ",Fullscreen:"全屏",Setting:"设置",Volume:"音量",Play:"播放",Pause:"暂停",CloseSubtitle:"关闭字幕",OpenSubtitle:"打开字幕",ExistFullScreen:"退出全屏",Muted:"静音",Retry:"重试",SwitchToLive:"返回直播",iOSNotSupportVodEncription:"iOS17.1以下不支持阿里云视频私有加密播放",iOSVodEncriptionBlacklist:"请使用Safari/Chrome浏览器播放加密视频",UseChromeForVodEncription:"浏览器不支持点播加密播放，请使用最新Chrome/Edge浏览器",Record_Not_Allowed:"禁止录屏或小窗口播放，请关闭插件或更换浏览器",License_No_Authorization:"播放器SDK未激活",License_Click_To_Apply:"点击申请License",Rts_Err_Http_Signal_Error:"(RTS)信令请求失败",Rts_Err_Play_Failed:"(RTS)播放失败",Rts_Err_No_Data_For:"秒没有数据",Rts_Err_Browser_Not_Support:"(RTS)不支持此浏览器",Rts_Err_Not_Support_Webrtc:"(RTS)不支持webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)浏览器版本过低",Rts_Err_Not_Support_H264:"(RTS)不支持H264",Rts_Err_Create_Offer_Error:"(RTS)create offer失败",Rts_Err_Play_Url_Error:"(RTS)播放url协议错误",Rts_Err_Subscribe_Nonthing:"(RTS)参数设置错误",Rts_Err_Http_Request_Failed:"(RTS)HTTP请求失败",Rts_Err_Http_Answer_Failed:"(RTS)answer失败",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection异常",Splayer_Err_Env_Check:"(SP)当前环境不支持播放该视频",Splayer_Err_Coroutine:"(SP)Coroutine 错误",Splayer_Err_Decode:"(SP)解码错误",Splayer_Err_Buffering:"(SP)缓冲区错误",Splayer_Err_Parser_Not_Found:"(SP)不支持的媒体容器"}},{}],27:[function(e,t,w){var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var u=new Uint8Array(256),c=0;c<y.length;c++)u[y.charCodeAt(c)]=c;var f=function(h){for(var n="",l=0;l<h.length;l+=16e3){var a=h.subarray(l,l+16e3);n+=String.fromCharCode.apply(null,a)}return n};t.exports={decode:function(h){for(var n,l,a,s,m=.75*h.length,_=h.length,T=0,m=(h[h.length-1]==="="&&(m--,h[h.length-2]==="=")&&m--,new ArrayBuffer(m)),v=new Uint8Array(m),S=0;S<_;S+=4)n=u[h.charCodeAt(S)],l=u[h.charCodeAt(S+1)],a=u[h.charCodeAt(S+2)],s=u[h.charCodeAt(S+3)],v[T++]=n<<2|l>>4,v[T++]=(15&l)<<4|a>>2,v[T++]=(3&a)<<6|63&s;return m},encode:function(h){for(var n=new Uint8Array(h),l=n.length,a="",s=0;s<l;s+=3)a=(a=(a=(a+=y[n[s]>>2])+y[(3&n[s])<<4|n[s+1]>>4])+y[(15&n[s+1])<<2|n[s+2]>>6])+y[63&n[s+2]];return l%3==2?a=a.substring(0,a.length-1)+"=":l%3==1&&(a=a.substring(0,a.length-2)+"=="),a},unpackPlayReady:function(h){if(h=function(T,m,v){if(!T)return"";v||T.byteLength%2==0||console.log("Data has an incorrect length, must be even."),v=T instanceof ArrayBuffer?T:((v=new Uint8Array(T.byteLength)).set(new Uint8Array(T)),v.buffer);for(var S=Math.floor(T.byteLength/2),x=new Uint16Array(S),P=new DataView(v),g=0;g<S;g++)x[g]=P.getUint16(2*g,m);return f(x)}(h,!0,!0),h.indexOf("PlayReadyKeyMessage")!=-1){for(var h=new DOMParser().parseFromString(h,"application/xml"),n=h.getElementsByTagName("HttpHeader"),l={},a=0;a<n.length;++a){var s=n[a].querySelector("name"),_=n[a].querySelector("value");l[s.textContent]=_.textContent}return{header:l,changange:h.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],28:[function(e,t,w){var y=e("./videox-muxer.min");function u(){}t.exports=function(c,f,h){f===void 0&&(f=u),h===void 0&&(h=u);var n=new y.Demuxer({progressive:!0});n.on("loadedmetadata",function(l){l===void 0&&(l={}),n.suspend(),n.destroy(),n=null,f(l)}),n.on("error",function(l){h(l),n.suspend(),n.destroy(),n=null}),n.load(c)}},{"./videox-muxer.min":53}],29:[function(e,t,w){var y=e("./oo"),u=e("../player/base/event/eventtype");t.exports.stopPropagation=function(c){window.event?window.event.cancelBubble=!0:c.stopPropagation()},t.exports.register=function(c){c.util={stopPropagation:t.exports.stopPropagation},c.Component=y.extend,c.EventType=u.Player}},{"../player/base/event/eventtype":70,"./oo":45}],30:[function(e,t,w){function y(){t.exports.VideoErrorCodeText={1:u.get("Error_Load_Abort_Text"),2:u.get("Error_Network_Text"),3:u.get("Error_Decode_Text"),4:u.get("Error_Server_Network_NotSupport_Text")},t.exports.VideoLevels={0:u.get("OD"),640:u.get("FD"),960:u.get("LD"),1280:u.get("SD"),1920:u.get("HD"),2580:u.get("2K"),3840:u.get("4K")},t.exports.QualityLevels={OD:u.get("OD"),LD:u.get("LD"),FD:u.get("FD"),SD:u.get("SD"),HD:u.get("HD"),"2K":u.get("2K"),"4K":u.get("4K"),XLD:u.get("XLD"),FHD:u.get("FHD"),SQ:u.get("SQ"),HQ:u.get("HQ")},t.exports.SpeedLevels=[{key:.5,text:u.get("Speed_05X_Text")},{key:1,text:u.get("Speed_1X_Text")},{key:1.25,text:u.get("Speed_125X_Text")},{key:1.5,text:u.get("Speed_15X_Text")},{key:2,text:u.get("Speed_2X_Text")}]}var u=e("../lang/index");t.exports.LOAD_START="loadstart",t.exports.LOADED_METADATA="loadedmetadata",t.exports.LOADED_DATA="loadeddata",t.exports.PROGRESS="progress",t.exports.CAN_PLAY="canplay",t.exports.CAN_PLYA_THROUGH="canplaythrough",t.exports.PLAY="play",t.exports.PAUSE="pause",t.exports.ENDED="ended",t.exports.PLAYING="playing",t.exports.WAITING="waiting",t.exports.ERROR="error",t.exports.SUSPEND="suspend",t.exports.STALLED="stalled",t.exports.DASH_QUALITY_PROTOCOL="quality_index://",t.exports.AuthKeyExpiredEvent="authkeyexpired",t.exports.USER_EVENT_NAME="__user_events__",t.exports.PLAYER_SCOPE="__aliplayerMessage__",t.exports.SW_MSG_EVT={SETUP:"setup",SETUP_ACK:"setupAck",DISPOSE:"dispose",ENC_SEGMENT:"encSegment",DEC_SEGMENT:"decSegment",ABORT_SEGMENT:"abortSegment"},t.exports.DM_MSG_EVT={SETUP:"setup",DEMUX:"demux",RESULT:"result",FLUSH:"flush",DISPOSE:"dispose",DISPOSED:"disposed",ERROR:"error"},t.exports.PLAYER_SDK_CODE=9201,t.exports.FEATURE_ID_H265=30001,t.exports.FEATURE_ID_H266=30002,t.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},t.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},t.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},t.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},t.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,ModuleLoadError:4034,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},t.exports.AuthKeyExpired=7200,t.exports.AuthKeyRefreshExpired=7e3,t.exports.AuthInfoExpired=100,t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},t.exports.RegionBlockMessages=["black location","denied by region block"],t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},t.exports.SelectedStreamLevel="selectedStreamLevel",t.exports.SelectedCC="selectedCC",t.exports.HWDetectHvc1="HWDetectHvc1",t.exports.HWDetectHvc1Hls="HWDetectHvc1Hls",t.exports.HWDetectHev1="HWDetectHev1",t.exports.HWDetectHev1Hls="HWDetectHev1Hls",t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"},y(),t.exports.updateByLanguage=y},{"../lang/index":25}],31:[function(e,t,w){t.exports.get=function(y){for(var u=y+"",c=document.cookie.split(";"),f=0;f<c.length;f++){var h=c[f].trim();if(h.indexOf(u)==0)return unescape(h.substring(u.length+1,h.length))}return""},t.exports.set=function(y,u,h){var f=new Date,h=(f.setTime(f.getTime()+24*h*60*60*1e3),"expires="+f.toGMTString());document.cookie=y+"="+escape(u)+"; "+h}},{}],32:[function(e,t,w){var y=e("./object");t.exports.cache={},t.exports.guid=function(u,c){var f,h,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(c=c||n.length,u)for(f=0;f<u;f++)l[f]=n[0|Math.random()*c];else for(l[8]=l[13]=l[18]=l[23]="-",l[14]="4",f=0;f<36;f++)l[f]||(h=0|16*Math.random(),l[f]=n[f==19?3&h|8:h]);return l.join("")},t.exports.expando="vdata"+new Date().getTime(),t.exports.getData=function(u){var c=u[t.exports.expando];return c||(c=u[t.exports.expando]=t.exports.guid(),t.exports.cache[c]={}),t.exports.cache[c]},t.exports.hasData=function(u){var c="";return!(!(c=u?u[t.exports.expando]:c)||y.isEmpty(t.exports.cache[c]))},t.exports.removeData=function(u){var c="";if(c=u?u[t.exports.expando]:c){delete t.exports.cache[c];try{delete u[t.exports.expando]}catch{u.removeAttribute?u.removeAttribute(t.exports.expando):u[t.exports.expando]=null}}}},{"./object":44}],33:[function(e,t,w){var y,u=typeof Promise>"u"?e("es6-promise").Promise:Promise;e=typeof self<"u"?self:this,y=function(){return f=[function(n,l,a){(function(s){l.b=function(m){for(var v=(m=m===void 0?{}:m).includes,m=m.excludes,m=m===void 0?[]:m,S=!1,x=!1,P=0,g=v===void 0?[]:v;P<g.length;P++)if(g[P]===!0){S=!0;break}for(var E=0,C=m;E<C.length;E++)if(C[E]===!0){x=!0;break}return S&&!x},l.c=function(m,v,S){return m=T.a[m],m!==void 0&&Object(_.compare)(m,v,S)},l.a=function(){return typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:this};var _=a(11),T=(a.n(_),a(4))}).call(l,a(10))},function(n,_,T){T.d(_,"c",function(){return m}),T.d(_,"d",function(){return v}),T.d(_,"b",function(){return S}),T.d(_,"f",function(){return x}),T.d(_,"a",function(){return P}),T.d(_,"e",function(){return g});var s,_=T(3),T=T(0),T=Object(T.a)(),m="InstallTrigger"in((T==null?void 0:T.window)||{})||/firefox/i.test(_.b),v=/trident/i.test(_.b)||/msie/i.test(_.b),S=/edge/i.test(_.b),x=/webkit/i.test(_.b)&&!S,P=((s=T==null?void 0:T.window)==null?void 0:s.chrome)!==void 0||/chrome/i.test(_.b),g=(((T=(s=T==null?void 0:T.window)==null?void 0:s.safari)==null?void 0:T.pushNotification)||!1).toString()==="[object SafariRemoteNotification]"||/safari/i.test(_.b)&&!P},function(n,l,a){a.d(l,"b",function(){return T}),a.d(l,"c",function(){return m}),a.d(l,"a",function(){return v});var s=a(1);function _(S){if(console){if(!s.d&&!s.b)return console[S];if(S==="log"||S==="clear")return function(){for(var x=[],P=0;P<arguments.length;P++)x[P]=arguments[P];console[S].apply(console,x)}}return function(){}}var T=_("log"),m=_("table"),v=_("clear")},function(n,s,a){s.a=function(){for(var m,v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];return _!=null&&_.document?(m=_.document).createElement.apply(m,v):{}},a.d(s,"b",function(){return T});var s=a(0),_=Object(s.a)(),T=((a=_==null?void 0:_.navigator)==null?void 0:a.userAgent)||"xxxxx"},function(n,l,a){a.d(l,"a",function(){return s});for(var s={},_=0,T=(a(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];_<T.length;_++){var v=T[_].split("/"),m=v[0],v=v[1];s[m]=v}},function(n,s,a){a.d(s,"b",function(){return _}),a.d(s,"d",function(){return T}),a.d(s,"c",function(){return m}),a.d(s,"a",function(){return v}),a.d(s,"e",function(){return S});var s=a(3),_=/ipad/i.test(s.b),T=/macintosh/i.test(s.b),m=/iphone/i.test(s.b),v=/android/i.test(s.b),S=/windows/i.test(s.b)},function(n,l,a){Object.defineProperty(l,"__esModule",{value:!0}),l.addListener=function(E){g.addListener(E)},l.removeListener=function(E){g.removeListener(E)},l.isLaunch=function(){return g.isLaunch()},l.launch=function(){g.launch()},l.stop=function(){g.stop()},l.setDetectDelay=function(E){g.setDetectDelay(E)};var s=a(7),_=a(8),T=(a.d(l,"DevtoolsDetector",function(){return s.a}),a.d(l,"checkers",function(){return _}),a(0)),m=(a.d(l,"match",function(){return T.b}),a.d(l,"specificVersionMatch",function(){return T.c}),a(1)),v=(a.d(l,"isFirefox",function(){return m.c}),a.d(l,"isIE",function(){return m.d}),a.d(l,"isEdge",function(){return m.b}),a.d(l,"isWebkit",function(){return m.f}),a.d(l,"isChrome",function(){return m.a}),a.d(l,"isSafari",function(){return m.e}),a(2)),S=(a.d(l,"log",function(){return v.b}),a.d(l,"table",function(){return v.c}),a.d(l,"clear",function(){return v.a}),a(17)),x=(a.d(l,"isMobile",function(){return S.a}),a(4)),P=(a.d(l,"versionMap",function(){return x.a}),a(5)),g=(a.d(l,"isIpad",function(){return P.b}),a.d(l,"isMac",function(){return P.d}),a.d(l,"isIphone",function(){return P.c}),a.d(l,"isAndroid",function(){return P.a}),a.d(l,"isWindows",function(){return P.e}),new s.a({checkers:[_.elementIdChecker,_.regToStringChecker,_.functionToStringChecker,_.depRegToStringChecker,_.dateToStringChecker,_.debuggerChecker]}));l.default=g},function(n,l,a){a.d(l,"a",function(){return T});var s=this&&this.__awaiter||function(v,S,x,P){return new(x=x||u)(function(g,E){function C(L){try{A(P.next(L))}catch(N){E(N)}}function R(L){try{A(P.throw(L))}catch(N){E(N)}}function A(L){var N;L.done?g(L.value):((N=L.value)instanceof x?N:new x(function(I){I(N)})).then(C,R)}A((P=P.apply(v,S||[])).next())})},_=this&&this.__generator||function(v,S){var x,P,g,E={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]},C={next:R(0),throw:R(1),return:R(2)};return typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function R(A){return function(L){var N=[A,L];if(x)throw new TypeError("Generator is already executing.");for(;E;)try{if(x=1,P&&(g=2&N[0]?P.return:N[0]?P.throw||((g=P.return)&&g.call(P),0):P.next)&&!(g=g.call(P,N[1])).done)return g;switch(P=0,(N=g?[2&N[0],g.value]:N)[0]){case 0:case 1:g=N;break;case 4:return E.label++,{value:N[1],done:!1};case 5:E.label++,P=N[1],N=[0];continue;case 7:N=E.ops.pop(),E.trys.pop();continue;default:if(!(g=0<(g=E.trys).length&&g[g.length-1])&&(N[0]===6||N[0]===2)){E=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3]))E.label=N[1];else if(N[0]===6&&E.label<g[1])E.label=g[1],g=N;else{if(!(g&&E.label<g[2])){g[2]&&E.ops.pop(),E.trys.pop();continue}E.label=g[2],E.ops.push(N)}}N=S.call(v,E)}catch(I){N=[6,I],P=0}finally{x=g=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}},T=(m.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},m.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},m.prototype.isLaunch=function(){return!this._detectLoopStopped},m.prototype.setDetectDelay=function(v){this._detectLoopDelay=v},m.prototype.addListener=function(v){this._listeners.push(v)},m.prototype.removeListener=function(v){this._listeners=this._listeners.filter(function(S){return S!==v})},m.prototype._broadcast=function(v){for(var S=0,x=this._listeners;S<x.length;S++){var P=x[S];try{P(v.isOpen,v)}catch{}}},m.prototype._detectLoop=function(){return s(this,void 0,void 0,function(){var v,S,x,P,g,E=this;return _(this,function(C){switch(C.label){case 0:v=!1,S="",x=0,P=this._checkers,C.label=1;case 1:return x<P.length?[4,(g=P[x]).isEnable()]:[3,6];case 2:return C.sent()?(S=g.name,[4,g.isOpen()]):[3,4];case 3:v=C.sent(),C.label=4;case 4:if(v)return[3,6];C.label=5;case 5:return x++,[3,1];case 6:return v!=this._isOpen&&(this._isOpen=v,this._broadcast({isOpen:v,checkerName:S})),0<this._detectLoopDelay?this._timer=setTimeout(function(){return E._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},m);function m(v){v=v.checkers,this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=v.slice()}},function(n,l,a){Object.defineProperty(l,"__esModule",{value:!0});var s=a(9),_=(a.d(l,"depRegToStringChecker",function(){return s.a}),a(12)),T=(a.d(l,"elementIdChecker",function(){return _.a}),a(13)),m=(a.d(l,"functionToStringChecker",function(){return T.a}),a(14)),v=(a.d(l,"regToStringChecker",function(){return m.a}),a(15)),S=(a.d(l,"debuggerChecker",function(){return v.a}),a(16));a.d(l,"dateToStringChecker",function(){return S.a})},function(n,l,a){a.d(l,"a",function(){return P});var s=a(1),_=a(2),T=a(0),m=this&&this.__awaiter||function(g,E,C,R){return new(C=C||u)(function(A,L){function N(H){try{M(R.next(H))}catch(O){L(O)}}function I(H){try{M(R.throw(H))}catch(O){L(O)}}function M(H){var O;H.done?A(H.value):((O=H.value)instanceof C?O:new C(function(z){z(O)})).then(N,I)}M((R=R.apply(g,E||[])).next())})},v=this&&this.__generator||function(g,E){var C,R,A,L={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]},N={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function I(M){return function(H){var O=[M,H];if(C)throw new TypeError("Generator is already executing.");for(;L;)try{if(C=1,R&&(A=2&O[0]?R.return:O[0]?R.throw||((A=R.return)&&A.call(R),0):R.next)&&!(A=A.call(R,O[1])).done)return A;switch(R=0,(O=A?[2&O[0],A.value]:O)[0]){case 0:case 1:A=O;break;case 4:return L.label++,{value:O[1],done:!1};case 5:L.label++,R=O[1],O=[0];continue;case 7:O=L.ops.pop(),L.trys.pop();continue;default:if(!(A=0<(A=L.trys).length&&A[A.length-1])&&(O[0]===6||O[0]===2)){L=0;continue}if(O[0]===3&&(!A||O[1]>A[0]&&O[1]<A[3]))L.label=O[1];else if(O[0]===6&&L.label<A[1])L.label=A[1],A=O;else{if(!(A&&L.label<A[2])){A[2]&&L.ops.pop(),L.trys.pop();continue}L.label=A[2],L.ops.push(O)}}O=E.call(g,L)}catch(z){O=[6,z],R=0}finally{C=A=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}},S=/ /,x=!1,P=(S.toString=function(){return x=!0,P.name},{name:"dep-reg-to-string",isOpen:function(){return m(this,void 0,void 0,function(){return v(this,function(g){return x=!1,Object(_.c)({dep:S}),Object(_.a)(),[2,x]})})},isEnable:function(){return m(this,void 0,void 0,function(){return v(this,function(g){return[2,Object(T.b)({includes:[!0],excludes:[s.c,s.d]})]})})}})},function(n,l){var a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(a=window)}n.exports=a},function(n,l,a){var s;(l=typeof(s=function(){var _=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function T(g){var E=g.replace(/^v/,"").replace(/\+.*$/,""),C=function(A,L){return A.indexOf(L)===-1?A.length:A.indexOf(L)}(E,"-"),R=E.substring(0,C).split(".");return R.push(E.substring(C+1)),R}function m(g){return isNaN(Number(g))?g:Number(g)}function v(g){if(typeof g!="string")throw new TypeError("Invalid argument expected string");if(!_.test(g))throw new Error("Invalid argument not valid semver ('"+g+"' received)")}function S(g,E){[g,E].forEach(v);for(var C=T(g),R=T(E),A=0;A<Math.max(C.length-1,R.length-1);A++){var L=parseInt(C[A]||0,10),N=parseInt(R[A]||0,10);if(L>N)return 1;if(N>L)return-1}var I=C[C.length-1],M=R[R.length-1];if(I&&M){var H=I.split(".").map(m),O=M.split(".").map(m);for(A=0;A<Math.max(H.length,O.length);A++){if(H[A]===void 0||typeof O[A]=="string"&&typeof H[A]=="number")return-1;if(O[A]===void 0||typeof H[A]=="string"&&typeof O[A]=="number"||H[A]>O[A])return 1;if(O[A]>H[A])return-1}}else if(I||M)return I?-1:1;return 0}var x=[">",">=","=","<","<="],P={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return S.validate=function(g){return typeof g=="string"&&_.test(g)},S.compare=function(g,E,C){(function(A){if(typeof A!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof A);if(x.indexOf(A)===-1)throw new TypeError("Invalid operator, expected one of "+x.join("|"))})(C);var R=S(g,E);return P[C].indexOf(R)>-1},S})=="function"?s.apply(l,[]):s)!==void 0&&(n.exports=l)},function(n,m,a){a.d(m,"a",function(){return g});var s=a(1),_=a(2),T=a(0),m=a(3),v=this&&this.__awaiter||function(E,C,R,A){return new(R=R||u)(function(L,N){function I(O){try{H(A.next(O))}catch(z){N(z)}}function M(O){try{H(A.throw(O))}catch(z){N(z)}}function H(O){var z;O.done?L(O.value):((z=O.value)instanceof R?z:new R(function(J){J(z)})).then(I,M)}H((A=A.apply(E,C||[])).next())})},S=this&&this.__generator||function(E,C){var R,A,L,N={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]},I={next:M(0),throw:M(1),return:M(2)};return typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(H){return function(O){var z=[H,O];if(R)throw new TypeError("Generator is already executing.");for(;N;)try{if(R=1,A&&(L=2&z[0]?A.return:z[0]?A.throw||((L=A.return)&&L.call(A),0):A.next)&&!(L=L.call(A,z[1])).done)return L;switch(A=0,(z=L?[2&z[0],L.value]:z)[0]){case 0:case 1:L=z;break;case 4:return N.label++,{value:z[1],done:!1};case 5:N.label++,A=z[1],z=[0];continue;case 7:z=N.ops.pop(),N.trys.pop();continue;default:if(!(L=0<(L=N.trys).length&&L[L.length-1])&&(z[0]===6||z[0]===2)){N=0;continue}if(z[0]===3&&(!L||z[1]>L[0]&&z[1]<L[3]))N.label=z[1];else if(z[0]===6&&N.label<L[1])N.label=L[1],L=z;else{if(!(L&&N.label<L[2])){L[2]&&N.ops.pop(),N.trys.pop();continue}N.label=L[2],N.ops.push(z)}}z=C.call(E,N)}catch(J){z=[6,J],A=0}finally{R=L=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}}},x=Object(m.a)("div"),P=!1,g=(Object.defineProperty(x,"id",{get:function(){return P=!0,g.name},configurable:!0}),{name:"element-id",isOpen:function(){return v(this,void 0,void 0,function(){return S(this,function(E){return P=!1,Object(_.b)(x),Object(_.a)(),[2,P]})})},isEnable:function(){return v(this,void 0,void 0,function(){return S(this,function(E){return[2,Object(T.b)({includes:[!0],excludes:[s.d,s.b,s.c]})]})})}})},function(n,l,a){a.d(l,"a",function(){return g});var s=a(1),_=a(2),T=a(5),m=a(0),v=this&&this.__awaiter||function(E,C,R,A){return new(R=R||u)(function(L,N){function I(O){try{H(A.next(O))}catch(z){N(z)}}function M(O){try{H(A.throw(O))}catch(z){N(z)}}function H(O){var z;O.done?L(O.value):((z=O.value)instanceof R?z:new R(function(J){J(z)})).then(I,M)}H((A=A.apply(E,C||[])).next())})},S=this&&this.__generator||function(E,C){var R,A,L,N={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]},I={next:M(0),throw:M(1),return:M(2)};return typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(H){return function(O){var z=[H,O];if(R)throw new TypeError("Generator is already executing.");for(;N;)try{if(R=1,A&&(L=2&z[0]?A.return:z[0]?A.throw||((L=A.return)&&L.call(A),0):A.next)&&!(L=L.call(A,z[1])).done)return L;switch(A=0,(z=L?[2&z[0],L.value]:z)[0]){case 0:case 1:L=z;break;case 4:return N.label++,{value:z[1],done:!1};case 5:N.label++,A=z[1],z=[0];continue;case 7:z=N.ops.pop(),N.trys.pop();continue;default:if(!(L=0<(L=N.trys).length&&L[L.length-1])&&(z[0]===6||z[0]===2)){N=0;continue}if(z[0]===3&&(!L||z[1]>L[0]&&z[1]<L[3]))N.label=z[1];else if(z[0]===6&&N.label<L[1])N.label=L[1],L=z;else{if(!(L&&N.label<L[2])){L[2]&&N.ops.pop(),N.trys.pop();continue}N.label=L[2],N.ops.push(z)}}z=C.call(E,N)}catch(J){z=[6,J],A=0}finally{R=L=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}}};function x(){}var P=0,g=(x.toString=function(){return P++,""},{name:"function-to-string",isOpen:function(){return v(this,void 0,void 0,function(){return S(this,function(E){return P=0,Object(_.b)(x),Object(_.a)(),[2,P===2]})})},isEnable:function(){return v(this,void 0,void 0,function(){return S(this,function(E){return[2,Object(m.b)({includes:[!0],excludes:[s.c,(T.b||T.c)&&s.a]})]})})}})},function(n,l,a){a.d(l,"a",function(){return P});var s=a(2),_=a(1),T=a(0),m=this&&this.__awaiter||function(g,E,C,R){return new(C=C||u)(function(A,L){function N(H){try{M(R.next(H))}catch(O){L(O)}}function I(H){try{M(R.throw(H))}catch(O){L(O)}}function M(H){var O;H.done?A(H.value):((O=H.value)instanceof C?O:new C(function(z){z(O)})).then(N,I)}M((R=R.apply(g,E||[])).next())})},v=this&&this.__generator||function(g,E){var C,R,A,L={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]},N={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function I(M){return function(H){var O=[M,H];if(C)throw new TypeError("Generator is already executing.");for(;L;)try{if(C=1,R&&(A=2&O[0]?R.return:O[0]?R.throw||((A=R.return)&&A.call(R),0):R.next)&&!(A=A.call(R,O[1])).done)return A;switch(R=0,(O=A?[2&O[0],A.value]:O)[0]){case 0:case 1:A=O;break;case 4:return L.label++,{value:O[1],done:!1};case 5:L.label++,R=O[1],O=[0];continue;case 7:O=L.ops.pop(),L.trys.pop();continue;default:if(!(A=0<(A=L.trys).length&&A[A.length-1])&&(O[0]===6||O[0]===2)){L=0;continue}if(O[0]===3&&(!A||O[1]>A[0]&&O[1]<A[3]))L.label=O[1];else if(O[0]===6&&L.label<A[1])L.label=A[1],A=O;else{if(!(A&&L.label<A[2])){A[2]&&L.ops.pop(),L.trys.pop();continue}L.label=A[2],L.ops.push(O)}}O=E.call(g,L)}catch(z){O=[6,z],R=0}finally{C=A=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}},S=/ /,x=!1,P=(S.toString=function(){return x=!0,P.name},{name:"reg-to-string",isOpen:function(){return m(this,void 0,void 0,function(){return v(this,function(g){return x=!1,Object(s.b)(S),Object(s.a)(),[2,x]})})},isEnable:function(){return m(this,void 0,void 0,function(){return v(this,function(g){return[2,Object(T.b)({includes:[!0],excludes:[_.f]})]})})}})},function(n,l,a){a.d(l,"a",function(){return m});var s=this&&this.__awaiter||function(v,S,x,P){return new(x=x||u)(function(g,E){function C(L){try{A(P.next(L))}catch(N){E(N)}}function R(L){try{A(P.throw(L))}catch(N){E(N)}}function A(L){var N;L.done?g(L.value):((N=L.value)instanceof x?N:new x(function(I){I(N)})).then(C,R)}A((P=P.apply(v,S||[])).next())})},_=this&&this.__generator||function(v,S){var x,P,g,E={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]},C={next:R(0),throw:R(1),return:R(2)};return typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function R(A){return function(L){var N=[A,L];if(x)throw new TypeError("Generator is already executing.");for(;E;)try{if(x=1,P&&(g=2&N[0]?P.return:N[0]?P.throw||((g=P.return)&&g.call(P),0):P.next)&&!(g=g.call(P,N[1])).done)return g;switch(P=0,(N=g?[2&N[0],g.value]:N)[0]){case 0:case 1:g=N;break;case 4:return E.label++,{value:N[1],done:!1};case 5:E.label++,P=N[1],N=[0];continue;case 7:N=E.ops.pop(),E.trys.pop();continue;default:if(!(g=0<(g=E.trys).length&&g[g.length-1])&&(N[0]===6||N[0]===2)){E=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3]))E.label=N[1];else if(N[0]===6&&E.label<g[1])E.label=g[1],g=N;else{if(!(g&&E.label<g[2])){g[2]&&E.ops.pop(),E.trys.pop();continue}E.label=g[2],E.ops.push(N)}}N=S.call(v,E)}catch(I){N=[6,I],P=0}finally{x=g=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}};function T(){return(performance||Date).now()}var m={name:"debugger-checker",isOpen:function(){return s(this,void 0,void 0,function(){var v;return _(this,function(S){return v=T(),(function(){}).constructor("debugger")(),[2,100<T()-v]})})},isEnable:function(){return s(this,void 0,void 0,function(){return _(this,function(v){return[2,!0]})})}}},function(n,l,a){a.d(l,"a",function(){return P});var s=a(1),_=a(2),T=a(0),m=this&&this.__awaiter||function(g,E,C,R){return new(C=C||u)(function(A,L){function N(H){try{M(R.next(H))}catch(O){L(O)}}function I(H){try{M(R.throw(H))}catch(O){L(O)}}function M(H){var O;H.done?A(H.value):((O=H.value)instanceof C?O:new C(function(z){z(O)})).then(N,I)}M((R=R.apply(g,E||[])).next())})},v=this&&this.__generator||function(g,E){var C,R,A,L={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]},N={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function I(M){return function(H){var O=[M,H];if(C)throw new TypeError("Generator is already executing.");for(;L;)try{if(C=1,R&&(A=2&O[0]?R.return:O[0]?R.throw||((A=R.return)&&A.call(R),0):R.next)&&!(A=A.call(R,O[1])).done)return A;switch(R=0,(O=A?[2&O[0],A.value]:O)[0]){case 0:case 1:A=O;break;case 4:return L.label++,{value:O[1],done:!1};case 5:L.label++,R=O[1],O=[0];continue;case 7:O=L.ops.pop(),L.trys.pop();continue;default:if(!(A=0<(A=L.trys).length&&A[A.length-1])&&(O[0]===6||O[0]===2)){L=0;continue}if(O[0]===3&&(!A||O[1]>A[0]&&O[1]<A[3]))L.label=O[1];else if(O[0]===6&&L.label<A[1])L.label=A[1],A=O;else{if(!(A&&L.label<A[2])){A[2]&&L.ops.pop(),L.trys.pop();continue}L.label=A[2],L.ops.push(O)}}O=E.call(g,L)}catch(z){O=[6,z],R=0}finally{C=A=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}},S=new Date,x=0,P=(S.toString=function(){return x++,""},{name:"date-to-string",isOpen:function(){return m(this,void 0,void 0,function(){return v(this,function(g){return x=0,Object(_.b)(S),Object(_.a)(),[2,x===2]})})},isEnable:function(){return m(this,void 0,void 0,function(){return v(this,function(g){return[2,Object(T.b)({includes:[s.a],excludes:[]})]})})}})},function(n,s,a){a.d(s,"a",function(){return _});var s=a(3),_=/mobile/i.test(s.b)}],h={},c.m=f,c.c=h,c.d=function(n,l,a){c.o(n,l)||Object.defineProperty(n,l,{configurable:!1,enumerable:!0,get:a})},c.n=function(n){var l=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(l,"a",l),l},c.o=function(n,l){return Object.prototype.hasOwnProperty.call(n,l)},c.p="",c(c.s=6);function c(n){var l;return(h[n]||(l=h[n]={i:n,l:!1,exports:{}},f[n].call(l.exports,l,l.exports,c),l.l=!0,l)).exports}var f,h},typeof w=="object"&&typeof t=="object"?t.exports=y():typeof w=="object"?w.devtoolsDetector=y():e.devtoolsDetector=y()},{"es6-promise":8}],34:[function(e,t,w){var y=e("./object");t.exports.el=function(u){return document.getElementById(u)},t.exports.createEl=function(u,c){var f;return u=u||"div",c=c||{},f=document.createElement(u),y.each(c,function(h,n){h.indexOf("aria-")!==-1||h=="role"?f.setAttribute(h,n):f[h]=n}),f},t.exports.addClass=function(u,c){(" "+u.className+" ").indexOf(" "+c+" ")==-1&&(u.className=u.className===""?c:u.className+" "+c)},t.exports.removeClass=function(u,c){var f,h;if(u.className.indexOf(c)!=-1){for(h=(f=u.className.split(" ")).length-1;0<=h;h--)f[h]===c&&f.splice(h,1);u.className=f.join(" ")}},t.exports.hasClass=function(u,c){return u.className.indexOf(c)!=-1},t.exports.getClasses=function(u){return u.className?u.className.split(" "):[]},t.exports.getElementAttributes=function(u){var c,f,h={};if(u&&u.attributes&&0<u.attributes.length)for(var n,l=(n=u.attributes).length-1;0<=l;l--)c=n[l].name,f=n[l].value,typeof u[c]!="boolean"&&",autoplay,controls,loop,muted,default,".indexOf(","+c+",")===-1||(f=f!==null),h[c]=f;return h},t.exports.insertFirst=function(u,c){c.firstChild?c.insertBefore(u,c.firstChild):c.appendChild(u)},t.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},t.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},t.exports.css=function(u,c,f){return!(!u||!u.style)&&(c&&f?(u.style[c]=f,!0):f||typeof c!="string"?!f&&typeof c=="object"&&(y.each(c,function(h,n){u.style[h]=n}),!0):u.style[c])},t.exports.getTransformName=function(u){for(var c=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],f=c[0],h=0,n=c.length;h<n;h++)if(u.style[c[h]]!==void 0){f=c[h];break}return f},t.exports.getTransformEventName=function(u,c){for(var f=["","Webkit","Moz","ms","O"],h=c.toLowerCase(),n=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],l=0,a=n.length;l<a;l++)if(u.style[n[l]]!==void 0){l!=0&&(h=f[l]+c);break}return h},t.exports.addCssByStyle=function(h){var c=document,f=c.createElement("style"),h=(f.setAttribute("type","text/css"),f.styleSheet?f.styleSheet.cssText=h:(h=c.createTextNode(h),f.appendChild(h)),c.getElementsByTagName("head"));(h.length?h[0]:c.documentElement).appendChild(f)},t.exports.getTranslateX=function(u){var c=0;if(u)try{var f=window.getComputedStyle(u),h=t.exports.getTransformName(u),c=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(f[h]).m41}catch(n){console.log(n)}return c},t.exports.getPointerPosition=function(n,c){var f={},a=t.exports.findPosition(n),h=n.offsetWidth,n=n.offsetHeight,l=a.top,a=a.left,s=c.pageY,_=c.pageX;return c.changedTouches&&(_=c.changedTouches[0].pageX,s=c.changedTouches[0].pageY),f.y=Math.max(0,Math.min(1,(l-s+n)/n)),f.x=Math.max(0,Math.min(1,(_-a)/h)),f},t.exports.findPosition=function(u){var c,f,h,n;return(c=u.getBoundingClientRect&&u.parentNode?u.getBoundingClientRect():c)?(u=document.documentElement,n=document.body,h=u.clientLeft||n.clientLeft||0,f=window.pageXOffset||n.scrollLeft,f=c.left+f-h,h=u.clientTop||n.clientTop||0,u=window.pageYOffset||n.scrollTop,n=c.top+u-h,{left:Math.round(f),top:Math.round(n)}):{left:0,top:0}}},{"./object":44}],35:[function(e,t,w){var y=e("./object"),u=e("./data"),c=e("./ua"),f=e("./fastclick");function h(n,l,a,s){y.each(a,function(_){n(l,_,s)})}t.exports.on=function(n,l,a){if(n){if(y.isArray(l))return h(t.exports.on,n,l,a);c.IS_MOBILE&&l=="click"&&f.attach(n);var s=u.getData(n);s.handlers||(s.handlers={}),s.handlers[l]||(s.handlers[l]=[]),a.guid||(a.guid=u.guid()),s.handlers[l].push(a),s.dispatcher||(s.disabled=!1,s.dispatcher=function(_){if(!s.disabled){_=t.exports.fixEvent(_);var T=s.handlers[_.type];if(T)for(var m=T.slice(0),v=0,S=m.length;v<S&&!_.isImmediatePropagationStopped();v++)m[v].call(n,_)}}),s.handlers[l].length==1&&(n.addEventListener?n.addEventListener(l,s.dispatcher,!1):n.attachEvent&&n.attachEvent("on"+l,s.dispatcher))}},t.exports.off=function(n,l,a){if(n&&u.hasData(n)){var s=u.getData(n);if(s.handlers){let S=function(x){s.handlers[x]=[],t.exports.cleanUpEvents(n,x)};var v=S;if(y.isArray(l))return h(t.exports.off,n,l,a);if(l){var _=s.handlers[l];if(_)if(a){if(a.guid)for(var T=0;T<_.length;T++)_[T].guid===a.guid&&_.splice(T--,1);t.exports.cleanUpEvents(n,l)}else S(l)}else for(var m in s.handlers)S(m)}}},t.exports.cleanUpEvents=function(n,l){var a=u.getData(n);a.handlers[l].length===0&&(delete a.handlers[l],n.removeEventListener?n.removeEventListener(l,a.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+l,a.dispatcher)),y.isEmpty(a.handlers)&&(delete a.handlers,delete a.dispatcher,delete a.disabled),y.isEmpty(a)&&u.removeData(n)},t.exports.fixEvent=function(n){function l(){return!0}function a(){return!1}if(!n||!n.isPropagationStopped){var s,_,T,m=n||window.event;for(s in n={},m)s==="layerX"||s==="layerY"||s==="keyboardEvent.keyLocation"||s=="returnValue"&&m.preventDefault||(n[s]=m[s]);n.target||(n.target=n.srcElement||document),n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement,n.preventDefault=function(){m.preventDefault&&m.preventDefault(),n.returnValue=!1,n.isDefaultPrevented=l,n.defaultPrevented=!0},n.isDefaultPrevented=a,n.defaultPrevented=!1,n.stopPropagation=function(){m.stopPropagation&&m.stopPropagation(),n.cancelBubble=!0,n.isPropagationStopped=l},n.isPropagationStopped=a,n.stopImmediatePropagation=function(){m.stopImmediatePropagation&&m.stopImmediatePropagation(),n.isImmediatePropagationStopped=l,n.stopPropagation()},n.isImmediatePropagationStopped=a,n.clientX!=null&&(_=document.documentElement,T=document.body,n.pageX=n.clientX+(_&&_.scrollLeft||T&&T.scrollLeft||0)-(_&&_.clientLeft||T&&T.clientLeft||0),n.pageY=n.clientY+(_&&_.scrollTop||T&&T.scrollTop||0)-(_&&_.clientTop||T&&T.clientTop||0)),n.which=n.charCode||n.keyCode,n.button!=null&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n},t.exports.trigger=function(n,l){var a,s,_;if(n)return a=u.hasData(n)?u.getData(n):{},s=n.parentNode||n.ownerDocument,typeof l=="string"&&(_=null,!n.paramData&&n.paramData!=0||(_=n.paramData,n.paramData=null,n.removeAttribute(_)),l={type:l,target:n,paramData:_}),l=t.exports.fixEvent(l),a.dispatcher&&a.dispatcher.call(n,l),s&&!l.isPropagationStopped()&&l.bubbles!==!1?t.exports.trigger(s,l):s||l.defaultPrevented||(_=u.getData(l.target),l.target[l.type]&&(_.disabled=!0,typeof l.target[l.type]=="function"&&l.target[l.type](),_.disabled=!1)),!l.defaultPrevented},t.exports.one=function(n,l,a){if(n){let _=function(){t.exports.off(n,l,_),a.apply(this,arguments)};var s=_;if(y.isArray(l))return h(t.exports.one,n,l,a);_.guid=a.guid=a.guid||u.guid(),t.exports.on(n,l,_)}}},{"./data":32,"./fastclick":36,"./object":44,"./ua":50}],36:[function(e,t,w){function y(a,s){var _;if(s=s||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=s.touchBoundary||10,this.layer=a,this.tapDelay=s.tapDelay||200,this.tapTimeout=s.tapTimeout||700,!y.notNeeded(a)){for(var T=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],m=0,v=T.length;m<v;m++)this[T[m]]=function(S,x){return function(){return S.apply(x,arguments)}}(this[T[m]],this);c&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(S,x,P){var g=Node.prototype.removeEventListener;S==="click"?g.call(a,S,x.hijacked||x,P):g.call(a,S,x,P)},a.addEventListener=function(S,x,P){var g=Node.prototype.addEventListener;S==="click"?g.call(a,S,x.hijacked||(x.hijacked=function(E){E.propagationStopped||x(E)}),P):g.call(a,S,x,P)}),typeof a.onclick=="function"&&(_=a.onclick,a.addEventListener("click",function(S){_(S)},!1),a.onclick=null)}}var u=0<=navigator.userAgent.indexOf("Windows Phone"),c=0<navigator.userAgent.indexOf("Android")&&!u,f=/iP(ad|hone|od)/.test(navigator.userAgent)&&!u,h=f&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n=f&&/OS [6-7]_\d/.test(navigator.userAgent),l=0<navigator.userAgent.indexOf("BB10");y.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(f&&a.type==="file"||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},y.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},y.prototype.sendClick=function(a,s){var _;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),s=s.changedTouches[0],(_=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(a),!0,!0,window,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),_.forwardedTouchEvent=!0,a.dispatchEvent(_)},y.prototype.determineEventType=function(a){return c&&a.tagName.toLowerCase()==="select"?"mousedown":"click"},y.prototype.focus=function(a){var s;f&&a.setSelectionRange&&a.type.indexOf("date")!==0&&a.type!=="time"&&a.type!=="month"&&a.type!=="email"?(s=a.value.length,a.setSelectionRange(s,s)):a.focus()},y.prototype.updateScrollParent=function(a){var s,_=a.fastClickScrollParent;if(!_||!_.contains(a)){s=a;do if(s.scrollHeight>s.offsetHeight){_=s,a.fastClickScrollParent=s;break}while(s=s.parentElement)}_&&(_.fastClickLastScrollTop=_.scrollTop)},y.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},y.prototype.onTouchStart=function(a){var s,_,T;if(!(1<a.targetTouches.length)){if(s=this.getTargetElementFromEventTarget(a.target),_=a.targetTouches[0],f){if((T=window.getSelection()).rangeCount&&!T.isCollapsed)return!0;if(!h){if(_.identifier&&_.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=_.identifier,this.updateScrollParent(s)}}this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=s,this.touchStartX=_.pageX,this.touchStartY=_.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault()}return!0},y.prototype.touchHasMoved=function(s){var s=s.changedTouches[0],_=this.touchBoundary;return Math.abs(s.pageX-this.touchStartX)>_||Math.abs(s.pageY-this.touchStartY)>_},y.prototype.onTouchMove=function(a){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0},y.prototype.findControl=function(a){return a.control!==void 0?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},y.prototype.onTouchEnd=function(a){var s,_,T,m=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,n&&(T=a.changedTouches[0],(m=document.elementFromPoint(T.pageX-window.pageXOffset,T.pageY-window.pageYOffset)||m).fastClickScrollParent=this.targetElement.fastClickScrollParent),(T=m.tagName.toLowerCase())==="label"){if(_=this.findControl(m)){if(this.focus(m),c)return!1;m=_}}else if(this.needsFocus(m))return 100<a.timeStamp-s||f&&window.top!==window&&T==="input"?this.targetElement=null:(this.focus(m),this.sendClick(m,a),f&&T==="select"||(this.targetElement=null,a.preventDefault())),!1;return!(!f||h||!(_=m.fastClickScrollParent)||_.fastClickLastScrollTop===_.scrollTop)||(this.needsClick(m)||(a.preventDefault(),this.sendClick(m,a)),!1)},y.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},y.prototype.onMouse=function(a){return!this.targetElement||!(!a.forwardedTouchEvent&&a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),1))},y.prototype.onClick=function(a){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):a.target.type==="submit"&&a.detail===0||((a=this.onMouse(a))||(this.targetElement=null),a)},y.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},y.notNeeded=function(a){var s,_;return window.ontouchstart===void 0||(_=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])&&(!c||(s=document.querySelector("meta[name=viewport]"))&&(s.content.indexOf("user-scalable=no")!==-1||31<_&&document.documentElement.scrollWidth<=window.outerWidth))||l&&10<=(_=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=_[2]&&(s=document.querySelector("meta[name=viewport]"))&&(s.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)?!0:a.style.msTouchAction==="none"||a.style.touchAction==="manipulation"||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(s=document.querySelector("meta[name=viewport]"))&&(s.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))||a.style.touchAction==="none"||a.style.touchAction==="manipulation"},y.attach=function(a,s){return new y(a,s)},t.exports=y},{}],37:[function(e,t,w){var y=e("./data");t.exports.bind=function(u,c,f){c.guid||(c.guid=y.guid());function h(){return c.apply(u,arguments)}return h.guid=f?f+"_"+c.guid:c.guid,h}},{"./data":32}],38:[function(e,t,w){function y(){y=function(){return n};var n={},l=Object.prototype,a=l.hasOwnProperty,s=Object.defineProperty||function(U,q,V){U[q]=V.value},R=typeof Symbol=="function"?Symbol:{},_=R.iterator||"@@iterator",T=R.asyncIterator||"@@asyncIterator",m=R.toStringTag||"@@toStringTag";function v(U,q,V){return Object.defineProperty(U,q,{value:V,enumerable:!0,configurable:!0,writable:!0}),U[q]}try{v({},"")}catch{v=function(q,V,X){return q[V]=X}}function S(U,W,V,Z){var B,ee,G,F,W=W&&W.prototype instanceof g?W:g,W=Object.create(W.prototype),Z=new O(Z||[]);return s(W,"_invoke",{value:(B=U,ee=V,G=Z,F="suspendedStart",function(ae,_e){if(F==="executing")throw new Error("Generator is already running");if(F==="completed"){if(ae==="throw")throw _e;return J()}for(G.method=ae,G.arg=_e;;){var le=G.delegate;if(le&&(le=function he(be,te){var D=be.iterator[te.method];if(D===void 0){if(te.delegate=null,te.method==="throw"){if(be.iterator.return&&(te.method="return",te.arg=void 0,he(be,te),te.method==="throw"))return P;te.method="throw",te.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}return D=x(D,be.iterator,te.arg),D.type==="throw"?(te.method="throw",te.arg=D.arg,te.delegate=null,P):(D=D.arg,D?D.done?(te[be.resultName]=D.value,te.next=be.nextLoc,te.method!=="return"&&(te.method="next",te.arg=void 0),te.delegate=null,P):D:(te.method="throw",te.arg=new TypeError("iterator result is not an object"),te.delegate=null,P))}(le,G),le)){if(le===P)continue;return le}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(F==="suspendedStart")throw F="completed",G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);if(F="executing",le=x(B,ee,G),le.type==="normal"){if(F=G.done?"completed":"suspendedYield",le.arg===P)continue;return{value:le.arg,done:G.done}}le.type==="throw"&&(F="completed",G.method="throw",G.arg=le.arg)}})}),W}function x(U,q,V){try{return{type:"normal",arg:U.call(q,V)}}catch(X){return{type:"throw",arg:X}}}n.wrap=S;var P={};function g(){}function E(){}function C(){}var R={},A=(v(R,_,function(){return this}),Object.getPrototypeOf),A=A&&A(A(z([]))),L=(A&&A!==l&&a.call(A,_)&&(R=A),C.prototype=g.prototype=Object.create(R));function N(U){["next","throw","return"].forEach(function(q){v(U,q,function(V){return this._invoke(q,V)})})}function I(U,q){var V;s(this,"_invoke",{value:function(X,B){function ee(){return new q(function(G,F){(function W(be,ae,_e,le){var he,be=x(U[be],U,ae);if(be.type!=="throw")return(ae=(he=be.arg).value)&&typeof ae=="object"&&a.call(ae,"__await")?q.resolve(ae.__await).then(function(te){W("next",te,_e,le)},function(te){W("throw",te,_e,le)}):q.resolve(ae).then(function(te){he.value=te,_e(he)},function(te){return W("throw",te,_e,le)});le(be.arg)})(X,B,G,F)})}return V=V?V.then(ee,ee):ee()}})}function M(U){var q={tryLoc:U[0]};1 in U&&(q.catchLoc=U[1]),2 in U&&(q.finallyLoc=U[2],q.afterLoc=U[3]),this.tryEntries.push(q)}function H(U){var q=U.completion||{};q.type="normal",delete q.arg,U.completion=q}function O(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(M,this),this.reset(!0)}function z(U){if(U){var q,V=U[_];if(V)return V.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length))return q=-1,(V=function X(){for(;++q<U.length;)if(a.call(U,q))return X.value=U[q],X.done=!1,X;return X.value=void 0,X.done=!0,X}).next=V}return{next:J}}function J(){return{value:void 0,done:!0}}return s(L,"constructor",{value:E.prototype=C,configurable:!0}),s(C,"constructor",{value:E,configurable:!0}),E.displayName=v(C,m,"GeneratorFunction"),n.isGeneratorFunction=function(U){return U=typeof U=="function"&&U.constructor,!!U&&(U===E||(U.displayName||U.name)==="GeneratorFunction")},n.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,C):(U.__proto__=C,v(U,m,"GeneratorFunction")),U.prototype=Object.create(L),U},n.awrap=function(U){return{__await:U}},N(I.prototype),v(I.prototype,T,function(){return this}),n.AsyncIterator=I,n.async=function(U,q,V,X,B){B===void 0&&(B=Promise);var ee=new I(S(U,q,V,X),B);return n.isGeneratorFunction(q)?ee:ee.next().then(function(G){return G.done?G.value:ee.next()})},N(L),v(L,m,"Generator"),v(L,_,function(){return this}),v(L,"toString",function(){return"[object Generator]"}),n.keys=function(U){var q,V=Object(U),X=[];for(q in V)X.push(q);return X.reverse(),function B(){for(;X.length;){var ee=X.pop();if(ee in V)return B.value=ee,B.done=!1,B}return B.done=!0,B}},n.values=z,O.prototype={constructor:O,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(H),!U)for(var q in this)q.charAt(0)==="t"&&a.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=void 0)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var q=this;function V(W,Z){return ee.type="throw",ee.arg=U,q.next=W,Z&&(q.method="next",q.arg=void 0),!!Z}for(var X=this.tryEntries.length-1;0<=X;--X){var B=this.tryEntries[X],ee=B.completion;if(B.tryLoc==="root")return V("end");if(B.tryLoc<=this.prev){var G=a.call(B,"catchLoc"),F=a.call(B,"finallyLoc");if(G&&F){if(this.prev<B.catchLoc)return V(B.catchLoc,!0);if(this.prev<B.finallyLoc)return V(B.finallyLoc)}else if(G){if(this.prev<B.catchLoc)return V(B.catchLoc,!0)}else{if(!F)throw new Error("try statement without catch or finally");if(this.prev<B.finallyLoc)return V(B.finallyLoc)}}}},abrupt:function(U,q){for(var V=this.tryEntries.length-1;0<=V;--V){var X=this.tryEntries[V];if(X.tryLoc<=this.prev&&a.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var B=X;break}}var ee=(B=B&&(U==="break"||U==="continue")&&B.tryLoc<=q&&q<=B.finallyLoc?null:B)?B.completion:{};return ee.type=U,ee.arg=q,B?(this.method="next",this.next=B.finallyLoc,P):this.complete(ee)},complete:function(U,q){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&q&&(this.next=q),P},finish:function(U){for(var q=this.tryEntries.length-1;0<=q;--q){var V=this.tryEntries[q];if(V.finallyLoc===U)return this.complete(V.completion,V.afterLoc),H(V),P}},catch:function(U){for(var q=this.tryEntries.length-1;0<=q;--q){var V,X,B=this.tryEntries[q];if(B.tryLoc===U)return(V=B.completion).type==="throw"&&(X=V.arg,H(B)),X}throw new Error("illegal catch attempt")},delegateYield:function(U,q,V){return this.delegate={iterator:z(U),resultName:q,nextLoc:V},this.method==="next"&&(this.arg=void 0),P}},n}function u(n,l,a,s,_,T,m){try{var v=n[T](m),S=v.value}catch(x){return void a(x)}v.done?l(S):Promise.resolve(S).then(s,_)}function c(n){return function(){var l=this,a=arguments;return new Promise(function(s,_){var T=n.apply(l,a);function m(S){u(T,s,_,m,v,"next",S)}function v(S){u(T,s,_,m,v,"throw",S)}m(void 0)})}}var f,h=typeof Promise>"u"?e("es6-promise").Promise:Promise;e=self,f=function(){function n(E,C){var R=(C=C===void 0?"mp4":C)==="hls",A="";switch(E=E===void 0?"":E){case"hvc1":A=R?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hvc1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4";break;case"hev1":A=R?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hev1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4";break;default:A=""}return A}function l(E,C,R,A){C===void 0&&(C=!1),R===void 0&&(R="");var L=performance.now(),N=A;return new h(function(I){M=E,(H=C?100:0)===void 0&&(H=100),(O=document.createElement("video")).setAttribute("width",""+H),O.setAttribute("height",""+H),O.setAttribute("muted","muted"),O.setAttribute("crossorigin","anonymous"),O.setAttribute("preload","preload"),O.setAttribute("autoplay","autoplay"),O.setAttribute("webkit-playsinline","webkit-playsinline"),O.setAttribute("playsinline","playsinline"),O.setAttribute("x-webkit-airplay","x-webkit-airplay"),O.setAttribute("playsinline","playsinline"),O.src=M;var M,H,O,z=O,J=setInterval(function(){var U,q,V,X,B;(performance.now()-L>N||z.videoWidth!==0)&&(clearInterval(J),U=z.videoWidth!==0,C?(z.setAttribute("controls","controls"),q=z,(V=R)===void 0&&(V=""),X=document.createElement("dv"),(B=document.createElement("h3")).innerText=V,X.appendChild(q),X.appendChild(B),document.body.appendChild(X)):(z.pause(),z=null),I(U))})})}var a={d:function(E,C){for(var R in C)a.o(C,R)&&!a.o(E,R)&&Object.defineProperty(E,R,{enumerable:!0,get:C[R]})},o:function(E,C){return Object.prototype.hasOwnProperty.call(E,C)}},s={},_=(a.d(s,{default:function(){return g}}),navigator.userAgent),m=/qqbrowser/i.test(_.toLowerCase()),v=/Edge/i.test(_),v=/Chrome/i.test(_)&&!v&&!m,T=/Safari/i.test(_)&&!v,m=_.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),v=m&&m[1],S=v&&Number(v.split(".")[0]),x=function(){var E=c(y().mark(function C(R){var A;return y().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,fetch(R);case 2:return A=L.sent,L.next=5,A.blob();case 5:return A=L.sent,L.abrupt("return",URL.createObjectURL(A));case 7:case"end":return L.stop()}},C)}));return function(C){return E.apply(this,arguments)}}(),P={includeSystemHijack:!0,showVideo:!1,format:"mp4",codecTags:["hev1","hvc1"],timeout:2e3},g=function(E){return E===void 0&&(E={}),new h(function(){var C=c(y().mark(function R(A){var L,N,I,M,H,O,z,J,U,q,V,X,B;return y().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(M=Object.assign({},P,E),L=M.includeSystemHijack,N=M.showVideo,z=M.codecTags,I=M.format,M=M.timeout,H=performance.now(),O=-1<z.indexOf("hvc1"),z=-1<z.indexOf("hev1"),U=J=!1,!(T&&S&&11<=S)){ee.next=14;break}if(q=n("hvc1",I),ee.t0=L,ee.t0){ee.next=9;break}return ee.next=8,x(q);case 8:q=ee.sent;case 9:return ee.next=11,l(q,N,"hvc1",M);case 11:J=ee.sent,ee.next=34;break;case 14:if(!O){ee.next=24;break}if(V=n("hvc1",I),ee.t1=L,ee.t1){ee.next=21;break}return ee.next=20,x(V);case 20:V=ee.sent;case 21:return ee.next=23,l(V,N,"hvc1",M);case 23:J=ee.sent;case 24:if(!z){ee.next=34;break}if(X=n("hev1",I),ee.t2=L,ee.t2){ee.next=31;break}return ee.next=30,x(X);case 30:X=ee.sent;case 31:return ee.next=33,l(X,N,"hev1",M);case 33:U=ee.sent;case 34:B=performance.now(),A({isHvc1Supported:J,isHev1Supported:U,time:Math.ceil(B-H)});case 36:case"end":return ee.stop()}},R)}));return function(R){return C.apply(this,arguments)}}())};return s.default},typeof w=="object"&&typeof t=="object"?t.exports=f():typeof w=="object"?w.hevcDetector=f():e.hevcDetector=f()},{"es6-promise":8}],39:[function(e,t,w){function y(f){for(var h in f=typeof f=="string"?this.parseAttrList(f):f)f.hasOwnProperty(h)&&(this[h]=f[h])}var u=/^(\d+)x(\d+)$/,c=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;y.prototype={decimalInteger:function(f){return f=parseInt(this[f],10),f>Number.MAX_SAFE_INTEGER?1/0:f},hexadecimalInteger:function(f){if(this[f]){for(var h=(1&(h=(this[f]||"0x").slice(2)).length?"0":"")+h,n=new Uint8Array(h.length/2),l=0;l<h.length/2;l++)n[l]=parseInt(h.slice(2*l,2*l+2),16);return n}return null},hexadecimalIntegerAsNumber:function(f){return f=parseInt(this[f],16),f>Number.MAX_SAFE_INTEGER?1/0:f},decimalFloatingPoint:function(f){return parseFloat(this[f])},enumeratedString:function(f){return this[f]},decimalResolution:function(f){if(f=u.exec(this[f]),f!==null)return{width:parseInt(f[1],10),height:parseInt(f[2],10)}},parseAttrList:function(f){var h,n={};for(c.lastIndex=0;(h=c.exec(f))!==null;){var l=h[2];l.indexOf('"')===0&&l.lastIndexOf('"')===l.length-1&&(l=l.slice(1,-1)),n[h[1]]=l}return n}},t.exports=y},{}],40:[function(e,t,w){function y(){this.method=null,this.key=null,this.iv=null,this._uri=null}function u(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function c(){this.loaders={}}var f=e("../constants"),h=e("../playerutil"),n=e("./attrlist"),l=e("../io"),a=e("./urltoolkit"),s=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,_=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),m=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,v="RegionBlock";u.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},u.prototype.Seturl=function(S){this._url=S},u.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},u.prototype.GetbyteRange=function(){var S,x,P;return this._byteRange||(S=this._byteRange=[],this.rawByteRange&&((x=this.rawByteRange.split("@",2)).length===1?(P=this.lastByteRangeEndOffset,S[0]=P||0):S[0]=parseInt(x[1]),S[1]=parseInt(x[0])+S[0])),this._byteRange},u.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},u.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},u.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},c.prototype=((e={parseMasterPlaylist:function(S,x){var P=[];for(s.lastIndex=0;(C=s.exec(S))!=null;){var g={},E=g.attrs=new n(C[1]),C=(g.url=this.resolve(C[2],x),E.decimalResolution("RESOLUTION"));if(C&&(g.width=C.width,g.height=C.height),g.bitrate=E.decimalInteger("AVERAGE-BANDWIDTH")||E.decimalInteger("BANDWIDTH"),g.name=E.NAME,R=E.CODECS)for(var R=R.split(/[ ,]+/),A=0;A<R.length;A++){var L=R[A];L.indexOf("avc1")!==-1?g.videoCodec=this.avc1toavcoti(L):L.indexOf("hvc1")!==-1?g.videoCodec=L:g.audioCodec=L}P.push(g)}return P},parseMasterPlaylistMedia:function(S,x,P,g){var E=[],C=0;for(_.lastIndex=0;(A=_.exec(S))!=null;){var R={},A=new n(A[1]);A.TYPE===P&&(R.groupId=A["GROUP-ID"],R.name=A.NAME,R.type=P,R.default=A.DEFAULT==="YES",R.autoselect=A.AUTOSELECT==="YES",R.forced=A.FORCED==="YES",A.URI&&(R.url=this.resolve(A.URI,x)),R.lang=A.LANGUAGE,R.name||(R.name=R.lang),g&&(R.audioCodec=g),R.id=C++,E.push(R))}return E},avc1toavcoti:function(S){var x=S.split("."),P=2<x.length?(P=x.shift()+".",(P+=parseInt(x.shift()).toString(16))+("000"+parseInt(x.shift()).toString(16)).substr(-4)):S;return P},load:function(S,x,P){var g=this;l.get(S,function(E){var C,R,A,L=g.parseMasterPlaylist(E,S);L.length&&(C=g.parseMasterPlaylistMedia(E,S,"AUDIO",L[0].audioCodec),R=g.parseMasterPlaylistMedia(E,S,"SUBTITLES"),C.length)&&(A=!1,C.forEach(function(N){N.url||(A=!0)}),A===!1)&&L[0].audioCodec&&!L[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),C.unshift({type:"main",name:"main"})),x({levels:L,audioTracks:C,subtitles:R,url:S,string:E})},function(E,C,R){P&&((R=h.parseHttpHeaders(R)["x-tengine-error"])&&-1<f.RegionBlockMessages.indexOf(R)&&(E=v),P(E,C))})},loadMediaPlaylist:function(S,x,P){var g=this,E=(S=S||{}).string,C=S.url;E?(S=g.parseLevelPlaylist(E,C),x(S)):l.get(C,function(R){R=g.parseLevelPlaylist(R,C),x(R)},function(R){P&&P(R)})},resolve:function(S,x){return a.buildAbsoluteURL(x,S,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(S,x){var P=[];for(s.lastIndex=0;(C=s.exec(S))!=null;){var g={},E=g.attrs=new n(C[1]),C=(g.url=this.resolve(C[2],x),E.decimalResolution("RESOLUTION"));if(C&&(g.width=C.width,g.height=C.height),g.bitrate=E.decimalInteger("AVERAGE-BANDWIDTH")||E.decimalInteger("BANDWIDTH"),g.name=E.NAME,R=E.CODECS)for(var R=R.split(/[ ,]+/),A=0;A<R.length;A++){var L=R[A];L.indexOf("avc1")!==-1?g.videoCodec=this.avc1toavcoti(L):L.indexOf("hvc1")!==-1?g.videoCodec=L:g.audioCodec=L}P.push(g)}return P},e.parseMasterPlaylistMedia=function(S,x,P,g){var E=[],C=0;for(_.lastIndex=0;(A=_.exec(S))!=null;){var R={},A=new n(A[1]);A.TYPE===P&&(R.groupId=A["GROUP-ID"],R.name=A.NAME,R.type=P,R.default=A.DEFAULT==="YES",R.autoselect=A.AUTOSELECT==="YES",R.forced=A.FORCED==="YES",A.URI&&(R.url=this.resolve(A.URI,x)),R.lang=A.LANGUAGE,R.name||(R.name=R.lang),g&&(R.audioCodec=g),R.id=C++,E.push(R))}return E},e.avc1toavcoti=function(S){var x=S.split("."),P=2<x.length?(P=x.shift()+".",(P+=parseInt(x.shift()).toString(16))+("000"+parseInt(x.shift()).toString(16)).substr(-4)):S;return P},e.parseLevelPlaylist=function(S,x,P,g){var E,C,R=0,A=0,L={type:null,version:null,url:x,fragments:[],live:!0,startSN:0},N=new y,I=0,M=null,H=new u;for(T.lastIndex=0;(E=T.exec(S))!==null;){var O=E[1];if(O){H.duration=parseFloat(O);var z=(" "+E[2]).slice(1);H.title=z||null,H.tagList.push(z?["INF",O,z]:["INF",O])}else if(E[3])isNaN(H.duration)||(z=R++,H.type=g,H.start=A,H.levelkey=N,H.sn=z,H.level=P,H.cc=I,H.baseurl=x,H.relurl=(" "+E[3]).slice(1),L.fragments.push(H),A+=(M=H).duration,H=new u);else if(E[4])H.rawByteRange=(" "+E[4]).slice(1),M&&(O=M.byteRangeEndOffset)&&(H.lastByteRangeEndOffset=O);else if(E[5])H.rawProgramDateTime=(" "+E[5]).slice(1),H.tagList.push(["PROGRAM-DATE-TIME",H.rawProgramDateTime]),L.programDateTime===void 0&&(L.programDateTime=new Date(new Date(Date.parse(E[5]))-1e3*A));else{for(E=E[0].match(m),C=1;C<E.length&&E[C]===void 0;C++);var J=(" "+E[C+1]).slice(1),U=(" "+E[C+2]).slice(1);switch(E[C]){case"#":H.tagList.push(U?[J,U]:[J]);break;case"PLAYLIST-TYPE":L.type=J.toUpperCase();break;case"MEDIA-SEQUENCE":R=L.startSN=parseInt(J);break;case"TARGETDURATION":L.targetduration=parseFloat(J);break;case"VERSION":L.version=parseInt(J);break;case"EXTM3U":break;case"ENDLIST":L.live=!1;break;case"DIS":I++,H.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":I=parseInt(J);break;case"KEY":var X=new n(J),q=X.enumeratedString("METHOD"),V=X.URI,X=X.hexadecimalInteger("IV");q&&(N=new y,V)&&0<=["AES-128","SAMPLE-AES"].indexOf(q)&&(N.method=q,N.baseuri=x,N.reluri=V,N.key=null,N.iv=X);break;case"START":q=new n(J).decimalFloatingPoint("TIME-OFFSET"),isNaN(q)||(L.startTimeOffset=q);break;case"MAP":V=new n(J),H.relurl=V.URI,H.rawByteRange=V.BYTERANGE,H.baseurl=x,H.level=P,H.type=g,H.sn="initSegment",L.initSegment=H,H=new u;break;case"PART-INF":X=new n(J),L.partTarget=X.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+E)}}}return(H=M)&&!H.relurl&&(L.fragments.pop(),A-=H.duration),L.totalduration=A,L.averagetargetduration=A/L.fragments.length,L.endSN=R-1,L},e),c.ERROR_REGION_BLOCK=v,t.exports=c},{"../constants":30,"../io":42,"../playerutil":47,"./attrlist":39,"./urltoolkit":41}],41:[function(e,t,w){var y=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,u=/^([^\/;?#]*)(.*)$/,c=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,h={buildAbsoluteURL:function(T,l,a){if(a=a||{},T=T.trim(),!(l=l.trim())){if(!a.alwaysNormalize)return T;var s=h.parseURL(T);if(s)return s.path=h.normalizePath(s.path),h.buildURLFromParts(s);throw new Error("Error trying to parse base URL.")}if(s=h.parseURL(l),!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return a.alwaysNormalize?(s.path=h.normalizePath(s.path),h.buildURLFromParts(s)):l;if(l=h.parseURL(T),!l)throw new Error("Error trying to parse base URL.");!l.netLoc&&l.path&&l.path[0]!=="/"&&(T=u.exec(l.path),l.netLoc=T[1],l.path=T[2]),l.netLoc&&!l.path&&(l.path="/");var _,T={scheme:l.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};return s.netLoc||(T.netLoc=l.netLoc,s.path[0]!=="/"&&(s.path?(_=(_=l.path).substring(0,_.lastIndexOf("/")+1)+s.path,T.path=h.normalizePath(_)):(T.path=l.path,s.params||(T.params=l.params,s.query)||(T.query=l.query)))),T.path===null&&(T.path=a.alwaysNormalize?h.normalizePath(s.path):s.path),h.buildURLFromParts(T)},parseURL:function(n){return n=y.exec(n),n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(n){for(n=n.split("").reverse().join("").replace(c,"");n.length!==(n=n.replace(f,"")).length;);return n.split("").reverse().join("")},buildURLFromParts:function(n){return n.scheme+n.netLoc+n.path+n.params+n.query+n.fragment}};t.exports=h},{}],42:[function(e,t,w){function y(l){try{var a=/vod(?:-product)?\.(\S+)\.aliyuncs\.com/.exec(l);return{value:!!a,region:a?a[1]:""}}catch{return{value:!1,region:""}}}function u(l){return(l||"").split("?")[0]}var c=e("../player/base/event/eventtype"),f=e("./url"),h="main",n="backup";t.exports.get=function(l,a,s,_,T){t.exports.ajax.call(this,"GET",l,{},a,s,_,T)},t.exports.post=function(l,a,s,_,T,m){var v={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};t.exports.ajax("POST",l,a,s,_,T,m,v)},t.exports.postWithHeader=function(l,a,s,_,T){t.exports.ajax("POST",l,a,_,T,!0,!1,s)},t.exports.ajax=function(l,a,s,_,T,m,v,S,x){var P,g,E,C,R=this,L=(x=x||{type:h,time:0},T=T||function(){},y(a)),A=L.value,L=L.region,N=a.replace("vod."+L+".aliyuncs.com","vod-product."+L+".aliyuncs.com");A&&R&&R._useBackupVodDomain&&(a=N),typeof XMLHttpRequest>"u"&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("This browser does not support XMLHttpRequest.")}),g=new XMLHttpRequest,L=f.parseUrl(a),E=window.location,L.protocol+L.host===E.protocol+E.host||!window.XDomainRequest||"withCredentials"in g?(P=L.protocol=="file:"||E.protocol=="file:",g.onreadystatechange=function(){if(g.readyState===4)if(H=(M=g).status,M=M.responseText,H=H===0||500<=H&&H<=599&&(M||"").indexOf("RequestId")===-1,C&&(clearTimeout(C),C=void 0),H||x.time!==0&&R&&typeof R.trigger=="function"&&(R._useBackupVodDomain=!0,R.trigger(c.Private.VodRequestExceptionResume,{url:u(a),status:g.status,response:g.status!==200?g.responseText:"",retryType:x.type,retryTime:x.time})),g.status===200||P&&g.status===0)_(g.responseText);else{if(H&&A&&x){if(R&&typeof R.trigger=="function"&&R.trigger(c.Private.VodRequestException,{url:u(a),status:g.status,response:g.responseText,retryType:x.type,retryTime:x.time}),x.type===h)return x.time<1?(x.time++,void setTimeout(function(){t.exports.ajax.call(R,l,a,s,_,T,m,v,S,x)},200)):(x.type=n,x.time=1,void setTimeout(function(){t.exports.ajax.call(R,l,N,s,_,T,m,v,S,x)},200));if(x.type===n){if(x.time<2)return x.time++,void setTimeout(function(){t.exports.ajax.call(R,l,N,s,_,T,m,v,S,x)},200);R&&(R._useBackupVodDomain=!1)}}T(g.responseText,g.status,g)}var M,H}):((g=new window.XDomainRequest).onload=function(){_(g.responseText)},g.onerror=T,g.onprogress=function(){},g.ontimeout=T);try{if(m===void 0&&(m=!0),g.open(l,a,m),v&&(g.withCredentials=!0),S)for(var I in S)S.hasOwnProperty(I)&&g.setRequestHeader(I,S[I])}catch(M){return void T(M)}try{y(a).value&&(C=setTimeout(function(){x.type===h?x.time=1:x.type===n&&(x.time=2),g.abort()},5e3)),g.send(s)}catch(M){T(M)}},t.exports.jsonp=function(l,a,s){var _="jsonp_callback_"+Math.round(1e5*Math.random()),T=document.createElement("script");l&&(T.src=l+(0<=l.indexOf("?")?"&":"?")+"callback="+_+"&cb="+_,T.onerror=function(){delete window[_],document.body.removeChild(T),s()},T.onload=function(){setTimeout(function(){window[_]&&(delete window[_],document.body.removeChild(T))},0)},window[_]=function(m){delete window[_],document.body.removeChild(T),a(m)},document.body.appendChild(T))},t.exports.loadJS=function(l,a,s){var _=document.getElementsByTagName("HEAD").item(0),T=document.createElement("script");T.setAttribute("crossorigin","anonymous"),l&&l.toLowerCase().indexOf("https://")<0&&l.toLowerCase().indexOf("http://")<0&&(l=document.URL.replace(/(\/[^\/]*?)$/i,"")+l),T.type="text/javascript",T.src=l,T.onload=function(){a&&a()},T.onerror=function(){s&&s()},_.appendChild(T)}},{"../player/base/event/eventtype":70,"./url":51}],43:[function(e,t,w){var y=e("./dom");t.exports.render=function(u,n){var f=n.align||(n.className?"":"tl"),h=n.x||0,n=n.y||0,l=h.indexOf&&0<h.indexOf("%")?"":"px",a=n.indexOf&&0<n.indexOf("%")?"":"px";f==="tl"?y.css(u,{float:"left","margin-left":h+l,"margin-top":n+a}):f==="tr"?y.css(u,{float:"right","margin-right":h+l,"margin-top":n+a}):f==="tlabs"?y.css(u,{position:"absolute",left:h+l,top:n+a}):f==="trabs"?y.css(u,{position:"absolute",right:h+l,top:n+a}):f==="blabs"?y.css(u,{position:"absolute",left:h+l,bottom:n+a}):f==="brabs"?y.css(u,{position:"absolute",right:h+l,bottom:n+a}):f==="cc"&&y.addClass(u,"loading-center")}},{"./dom":34}],44:[function(e,t,w){var y=Object.prototype.hasOwnProperty;t.exports.create=Object.create||function(u){function c(){}return c.prototype=u,new c},t.exports.isArray=function(u){return Object.prototype.toString.call(arg)==="[object Array]"},t.exports.isEmpty=function(u){for(var c in u)if(u[c]!==null)return!1;return!0},t.exports.each=function(u,c,f){if(t.exports.isArray(u))for(var h=0,n=u.length;h<n&&c.call(f||this,u[h],h)!==!1;++h);else for(var l in u)if(y.call(u,l)&&c.call(f||this,l,u[l])===!1)break;return u},t.exports.merge=function(u,c){if(c)for(var f in c)y.call(c,f)&&(u[f]=c[f]);return u},t.exports.deepMerge=function(u,c){var f,h,n;for(f in u=t.exports.copy(u),c)y.call(c,f)&&(h=u[f],n=c[f],t.exports.isPlain(h)&&t.exports.isPlain(n)?u[f]=t.exports.deepMerge(h,n):u[f]=c[f]);return u},t.exports.copy=function(u){return t.exports.merge({},u)},t.exports.isPlain=function(u){return!!u&&typeof u=="object"&&u.toString()==="[object Object]"&&u.constructor===Object},t.exports.isArray=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"},t.exports.unescape=function(u){return u.replace(/&([^;]+);/g,function(c,f){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[f.toLowerCase()]||c})}},{}],45:[function(e,t,w){var y,u=e("./object");(y=function(){}).extend=function(c){var f,h,n=(c=c||{}).init||c.init||this.prototype.init||this.prototype.init||function(){};for(h in(((f=function(){n.apply(this,arguments)}).prototype=u.create(this.prototype)).constructor=f).extend=y.extend,f.create=y.create,c)c.hasOwnProperty(h)&&(f.prototype[h]=c[h]);return f},y.create=function(){var c=u.create(this.prototype);return this.apply(c,arguments),c},t.exports=y},{"./object":44}],46:[function(e,t,w){var y=!new Function("try {return this===window;}catch(e){ return false;}")();t.exports.isSSR=y},{}],47:[function(e,t,w){var y=e("./object"),u=e("../config"),c=e("./dom"),f=e("./cookie"),h=e("./constants"),n=e("../lang/index"),l=e("./ua"),a=e("./io"),s=e("../player/base/plugin/defaultemptycomponent"),_=e("./hardware-decoding-detector"),T={preload:!0,autoplay:!0,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,logReportTo:void 0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,mute:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,disableVodHalfRetry:!1,disableLiveHalfRetry:!1,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},extLanguageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],ratio:void 0,snapshotWatermark:{left:"500",top:"100",text:"",font:"16px 宋体",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!1,flvOption:{},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,useFlvPlugOnMobile:!0,lowLatencyMode:!1,useHls2:!0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsOption:{},rtsFallback:!0,rtsFallbackSource:void 0,rtsFallbackType:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,enableH266:!1,forceH266:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+u.domain+"/de/prismplayer-flash/"+u.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null,logo:[],disablePip:!1,assetPrefix:null,clickPause:l.IS_PC,statisticsReportInterval:5e3,skinLayoutIgnore:[],disableSeek:!1,dashjsUrl:null,dashOption:{},disableDumpBuffer:!1,useSW:!1,swScriptURL:void 0,env:"",autoSize:"",watchStartTime:void 0,watchEndTime:void 0,start:void 0,end:void 0},m=(t.exports.getDefaultH5Layout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}]},t.exports.getDefaultAudioLayout=function(){return[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}]},t.exports.getDefaultFlashLayout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]},t.exports.canPlayType=function(v){var S=document.createElement("video");return S.canPlayType?S.canPlayType(v):""},t.exports.canPlayHls=function(){return t.exports.canPlayType("application/x-mpegURL")!=""},t.exports.isUsedHlsPluginOnMobile=function(v){return!!(l.IS_MOBILE&&(l.IS_CHROME||l.IS_FIREFOX||l.IS_X5||l.IS_EDGE_NEW)&&t.exports.isSupportHls())},t.exports.isSafariUsedHlsPlugin=function(v){return!!(l.os.pc&&l.browser.safari&&v)},t.exports.validateSource=function(v){return!0},t.exports.supportH5Video=function(){return document.createElement("video").canPlayType!==void 0},t.exports.createWrapper=function(v){var S=v.id,S=typeof S=="string"?(S.indexOf("#")===0&&(S=S.slice(1)),c.el(S)):S;if(S&&S.nodeName)return t.exports.adjustContainerLayout(S,v),S;throw new TypeError("没有为播放器指定容器")},t.exports.adjustContainerLayout=function(v,S){S.width&&!v.style.width&&(v.style.width=S.width),S.height&&!v.style.height&&(v.style.height=S.height)},t.exports.isSupportHls=function(){var v=window.MediaSource=window.MediaSource||window.WebKitMediaSource,S=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,v=v&&typeof v.isTypeSupported=="function"&&v.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),S=(l.IS_ANDROID&&l.is_X5&&(v=!0),!S||S.prototype&&typeof S.prototype.appendBuffer=="function"&&typeof S.prototype.remove=="function");return v&&S},t.exports.isSupportMMS=function(){return!!window.ManagedMediaSource},t.exports.isSupportFlv=function(){return t.exports.isSupportHls()},t.exports.isSupportMSE=function(){return t.exports.isSupportHls()||t.exports.isSupportMMS()},t.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},t.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&t.exports.isSupportMSE()},t.exports.isAudio=function(v,S){if(S)return t.exports.isMp3Format(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="mp3"}catch{return v&&0<v.toLowerCase().indexOf(".mp3")}return S},t.exports.isLiveShift=function(v){return v.isLive&&v.liveStartTime&&v.liveOverTime},t.exports.isHls=function(v,S){if(S)return t.exports.isHlsFormat(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="m3u8"}catch{return v&&0<v.toLowerCase().indexOf(".m3u8")}return S},t.exports.isDash=function(v,S){if(S)return t.exports.isDashFormat(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="mpd"}catch{return v&&0<v.toLowerCase().indexOf(".mpd")}return S},t.exports.isFlv=function(v,S){if(S)return t.exports.isFlvFormat(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="flv"}catch{return v&&0<v.toLowerCase().indexOf(".flv")}return S},t.exports.isRTMP=function(v){return v&&-1<v.toLowerCase().indexOf("rtmp:")},t.exports.isRts=function(v){return v&&-1<v.toLowerCase().indexOf("artc:")},t.exports.isMp4=function(v,S){if(S)return t.exports.isMp4Format(S);S=!1;try{S=v&&new URL("http:"+v).pathname.split(".").pop().toLowerCase()==="mp4"}catch{return v&&-1<v.toLowerCase().indexOf(".mp4")}return S},t.exports.isSupportedFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mp3","mp4","mpd","hls","m3u8","flv"].indexOf(S)}catch{return!1}},t.exports.isMp3Format=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mp3"].indexOf(S)}catch{return!1}},t.exports.isMp4Format=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mp4"].indexOf(S)}catch{return!1}},t.exports.isFlvFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["flv"].indexOf(S)}catch{return!1}},t.exports.isHlsFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["hls","m3u8"].indexOf(S)}catch{return!1}},t.exports.isDashFormat=function(v){if(!v)return!1;try{var S=v.toLowerCase();return~["mpd"].indexOf(S)}catch{return!1}},t.exports.getFormat=function(x){var S={artc:"rts",m3u8:"hls"},x=(x=/\.(mp4)|\.(mp3)|\.(m3u8)|\.(flv)|(artc):/.exec(x))==null?void 0:x[0];return x=x&&x.replace(/\.|:|artc|m3u8/gi,function(P){return S[P]||""})},t.exports.checkSecuritSupport=function(){return t.exports.isSupportMSE()?l.IS_IOS&&(l.IS_UC||l.IS_QUARK||l.IS_BAIDU)?n.get("iOSVodEncriptionBlacklist"):"":"serviceWorker"in navigator?void 0:location.protocol==="http:"?n.get("Error_SW_Https_required"):n.get("UseChromeForVodEncription")+"(SW not found)"},t.exports.nativeSupportH265=function(){return l.IS_IOS||l.IS_MAC_SAFARI},t.exports.findSelectedStreamLevel=function(v,S){var x=S;if(x||(x=f.get(h.SelectedStreamLevel))){for(var P=0;P<v.length;P++)if(v[P].definition==x)return P}else f.set(h.SelectedStreamLevel,v[0].definition,365);return 0},t.exports.getHistoryDetectResult=function(v,S){if(v)return S=S==="hls",v==="hvc1"?S?f.get(h.HWDetectHvc1Hls):f.get(h.HWDetectHvc1):v==="hev1"?S?f.get(h.HWDetectHev1Hls):f.get(h.HWDetectHev1):void 0},t.exports.setHistoryDetectResult=function(v,g,x){var P="unknownCodec",g=g==="hls";v==="hvc1"?P=g?h.HWDetectHvc1Hls:h.HWDetectHvc1:v==="hev1"&&(P=g?h.HWDetectHev1Hls:h.HWDetectHev1),f.set(P,x)},t.exports.handleOption=function(v,S){t.exports.isRts(v.source)&&(v.isLive=!0);var x,P=y.merge(y.copy(T),v),g=(v.autoplayPolicy&&(P.autoplayPolicy=y.merge(T.autoplayPolicy,v.autoplayPolicy)),[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]),E=!1;if(v.useFlashPrism||t.exports.isRTMP(v.source)?(E=!0,g=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(x=t.exports.isLiveShift(P))?(g.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),g.push({name:"playButton",align:"tl",x:15,y:12}),g.push({name:"liveDisplay",align:"tl",x:15,y:6})):g.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),v.isLive){if(v.skinLayout===void 0)P.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:t.exports.isRts(v.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:g}];else if(v.skinLayout!=0){for(var C=v.skinLayout.length,R=[],A=-1,L=0;L<C;L++)if(P.skinLayout[L].name=="controlBar"){for(var A=L,N=P.skinLayout[L].children.length,I=0;I<N;I++){var M,H=P.skinLayout[L].children[I].name;H!="liveDisplay"&&H!="liveIco"&&H!="fullScreenButton"&&H!="volume"&&H!="snapshot"&&H!="setting"&&H!="subtitle"&&(!x||H!="progress"&&H!="playButton"&&H!="timeDisplay")||(M=P.skinLayout[L].children[I],H=="progress"?M.name="liveShiftProgress":H=="timeDisplay"?M.name="liveShiftTimeDisplay":E&&H=="liveDisplay"&&(M.name="liveIco"),R.push(M))}break}A!=-1&&(P.skinLayout[A].children=R)}}return(v.components===void 0||!v.components||y.isArray(v.components)&&v.components.length==0)&&v.components!="false"&&(P.components=[s]),P},t.exports.ignoreSkinLayouts=function(v,S){var x;if(S!=null&&S.length&&v!=null&&v.length)return x=v,S.forEach(function(P){var g,E,C;-1<P.indexOf(".")?(C=P.split("."),g=C[0],E=C[1],(C=x.find(function(R){return R.name===g}))&&(C.children=C.children.filter(function(R){return R.name!==E}))):x=x.filter(function(R){return R.name!==P})}),x},t.exports.getLiveHostByRegion=function(v){var S="live.aliyuncs.com";return v&&-1<["ap-southeast-1","eu-central-1"].indexOf(v)?"live."+v+".aliyuncs.com":S},t.exports.isVideoTag=function(v){return v&&typeof v.nodeName=="string"&&v.nodeName.toLowerCase()==="video"},t.exports.unqiueTextTracks=function(v){var S=[],S=(v=v===void 0?[]:v).reduce(function(P,g){var E;return P.some(function(C){return C.srclang===g.srclang})?P:((E=g).label=g.label||g.srclang,[].concat(P,[E]))},[]),x={};return S.forEach(function(P,g){x[P.label]?x[P.label].push(g):x[P.label]=[g]}),Object.keys(x).forEach(function(P){P=x[P]||[],1<P.length&&P.forEach(function(g){S[g].label=S[g].label+"("+S[g].srclang+")"})}),S},t.exports.isHvc1Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("hvc1")},t.exports.isHev1Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("hev1")},t.exports.isVvccCodec=function(v){return-1<(v=v===void 0?"":v).indexOf("vvcC")},t.exports.isVvc1Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("vvc1")},t.exports.isH265Codec=function(v){return t.exports.isHvc1Codec(v=v===void 0?"":v)||t.exports.isHev1Codec(v)},t.exports.isH266Codec=function(v){return t.exports.isVvccCodec(v=v===void 0?"":v)||t.exports.isVvc1Codec(v)},t.exports.isH264Codec=function(v){return-1<(v=v===void 0?"":v).indexOf("avc1")},t.exports.getVideoTrack=function(v){var S;return(v=v===void 0?[]:v).forEach(function(x){Number(x.type)===1&&(S=x)}),S},l.IS_ANDROID&&(l.dingTalk()||l.IS_UC||l.is_X5||l.IS_HUAWEI||l.IS_XIAOMI||l.IS_OPPO||l.IS_VIVO||l.IS_MEIZU||l.IS_SAMSUNG||l.IS_WEBVIEW)||l.os&&l.os.name==="windows"&&l.IS_UC);t.exports.shouldUseBasePlayer=function(C,S){var x,P,g,E=C.codecTag,C=C.url,R="supported",A="unsupported";return!E||(g=t.exports.isHvc1Codec(E),x=t.exports.isMp4(C),C=t.exports.isHls(C),x&&t.exports.nativeSupportH265()&&g)||x&&function(){if(!(!m&&(l.IS_CHROME||l.IS_EDGE_NEW)))return!1;var L=0;try{L=l.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch{L=0}return!(parseInt(L)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))}()?S(!0):m?(g=t.exports.getHistoryDetectResult(E,P=C?"hls":"mp4"))===R?S(!0):g===A?S(!1):void _({codecTags:[E],format:P,timeout:2e3}).then(function(L){if(L=L.isHev1Supported||L.isHvc1Supported,t.exports.setHistoryDetectResult(E,P,L?R:A),L)return S(!0);S(!1)}).catch(function(L){console.log("hevcDetector ERROR",L),S(!1)}):S(!1)},t.exports.parseHttpHeaders=function(v){if(v){var S={};try{v instanceof Response?v.headers.forEach(function(x,P){S[P]=x}):v.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(g){var g=g.split(": "),P=g.shift(),g=g.join(": ");S[P]=g})}catch{}return S}},t.exports.detectRegionBlock=function(v,S){a.get(v,function(){S(!1)},function(x,P,g){g=t.exports.parseHttpHeaders(g)["x-tengine-error"],P===403&&g&&-1<h.RegionBlockMessages.indexOf(g)?S(!0):S(!1)})},t.exports.drawSnapshotText=function(v,S){S=S.snapshotWatermark,S&&S.text&&(v.font=S.font,S.fillColor&&(v.fillStyle=S.fillColor,v.fillText(S.text,S.left,S.top)),S.strokeColor&&(v.strokeStyle=S.strokeColor,v.strokeText(S.text,S.left,S.top)),v.stroke())},t.exports.hasValue=function(v){return v!=null&&v!==""}},{"../config":14,"../lang/index":25,"../player/base/plugin/defaultemptycomponent":94,"./constants":30,"./cookie":31,"./dom":34,"./hardware-decoding-detector":38,"./io":42,"./object":44,"./ua":50}],48:[function(e,t,w){var y=e("./object"),u=e("../player/adaptiveplayer"),c=e("./constants").USER_EVENT_NAME;t.exports.reloadInstance=function(_,h,n){var l=n,a=(l.dispose(),_.readyCallback),s=_._readyCallbackCalled,_=u.create(_,function(T){h(T),s||a(T)});t.exports.restoreUserEvents(n,_),t.exports.removeAllProps(l),(l.__proto__=_)[c]=l[c]},t.exports.storeUserEvents=function(f){var h=f,n=h.__proto__.on,l={};h.on=function(a,s){typeof s=="function"&&(l[a]?l[a].push(s):l[a]=[s],this._el)&&(s.binded=!0,n.call(h,a,s))},h[c]=l},t.exports.restoreUserEvents=function(f,h){var n=f[c];n&&y.each(n,function(l){n[l].forEach(function(a){h.on(l,a)})})},t.exports.removeAllProps=function(f,h){for(var n in h=[].concat(h=h||[],[c]),f)f.hasOwnProperty(n)&&h.indexOf(n)===-1&&delete f[n]}},{"../player/adaptiveplayer":67,"./constants":30,"./object":44}],49:[function(e,t,w){t.exports.set=function(y,u){try{window.localStorage&&localStorage.setItem(y,u)}catch{window[y+"_localStorage"]=u}},t.exports.get=function(y){try{if(window.localStorage)return localStorage.getItem(y)}catch{return window[y+"_localStorage"]}return""}},{}],50:[function(e,t,w){var y,u,c,f;if(t.exports.USER_AGENT=navigator.userAgent,t.exports.IS_IPHONE=/iPhone/i.test(t.exports.USER_AGENT),t.exports.IS_IPAD=/iPad/i.test(t.exports.USER_AGENT),t.exports.IS_IPOD=/iPod/i.test(t.exports.USER_AGENT),t.exports.IS_MAC=/mac/i.test(t.exports.USER_AGENT),t.exports.IS_EDGE=/Edge/i.test(t.exports.USER_AGENT),t.exports.IS_EDGE_NEW=/Edg/i.test(t.exports.USER_AGENT)&&!t.exports.IS_EDGE,t.exports.IS_IE11=/Trident\/7.0/i.test(t.exports.USER_AGENT),t.exports.IS_X5=/qqbrowser/i.test(t.exports.USER_AGENT.toLowerCase()),t.exports.IS_CHROME=/Chrome/i.test(t.exports.USER_AGENT)&&!t.exports.IS_EDGE&&!t.exports.IS_EDGE_NEW&&!t.exports.IS_X5,t.exports.IS_SAFARI=/Safari/i.test(t.exports.USER_AGENT)&&!t.exports.IS_CHROME&&!t.exports.IS_EDGE_NEW,t.exports.IS_FIREFOX=/Firefox/i.test(t.exports.USER_AGENT),t.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_QUARK=/Quark/i.test(t.exports.USER_AGENT),t.exports.IS_HUAWEI=/HuaweiBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_XIAOMI=/MiuiBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_OPPO=/HeyTapBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_VIVO=/VivoBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_MEIZU=/MZBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_SAMSUNG=/samsungbrowser/i.test(t.exports.USER_AGENT),t.exports.IS_BAIDU=/baiduboxapp/i.test(t.exports.USER_AGENT),document.all)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t.exports.HAS_FLASH=!!h}catch{t.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(h=navigator.plugins["Shockwave Flash"],t.exports.HAS_FLASH=!!h):t.exports.HAS_FLASH=!1;t.exports.IS_MAC_SAFARI=t.exports.IS_MAC&&t.exports.IS_SAFARI&&!t.exports.IS_CHROME&&!t.exports.HAS_FLASH,t.exports.IS_IOS=t.exports.IS_IPHONE||t.exports.IS_IPAD||t.exports.IS_IPOD,t.exports.IOS_VERSION=function(){var n=t.exports.USER_AGENT.match(/OS (\d+)_/i);if(n&&n[1])return n[1]}(),t.exports.IOS_FULL_VERSION=function(){var n=t.exports.USER_AGENT.match(/OS (\d+)_(\d+)_?/i);if(n&&n[1]&&n[2])return n[1]+"."+n[2]}(),t.exports.IS_HARMONY=/OpenHarmony/i.test(t.exports.USER_AGENT),t.exports.IS_ANDROID=/Android/i.test(t.exports.USER_AGENT)||t.exports.IS_HARMONY,t.exports.ANDROID_VERSION=(h=t.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(u=h[1]&&parseFloat(h[1]),y=h[2]&&parseFloat(h[2]),u&&y?parseFloat(h[1]+"."+h[2]):u||null):null,t.exports.IS_OLD_ANDROID=t.exports.IS_ANDROID&&/webkit/i.test(t.exports.USER_AGENT)&&t.exports.ANDROID_VERSION<2.3,t.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),t.exports.IS_MOBILE=t.exports.IS_IOS||t.exports.IS_ANDROID,t.exports.IS_H5=t.exports.IS_MOBILE||!t.exports.HAS_FLASH,t.exports.IS_PC=!t.exports.IS_MOBILE,t.exports.is_X5=/micromessenger/i.test(t.exports.USER_AGENT)||/qqbrowser/i.test(t.exports.USER_AGENT),t.exports.IS_ANDROID_FIREFOX=t.exports.IS_ANDROID&&t.exports.IS_FIREFOX,t.exports.CHROME_VERSION=t.exports.IS_CHROME&&t.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],t.exports.getHost=function(n){var l,a,s="";return n===void 0||n==null||n==""?"":(l=n.indexOf("//"),a=n,s=a=-1<l?n.substring(l+2):a,(n=(s=(n=a.split("/"))&&0<n.length?n[0]:s).split(":"))&&0<n.length?n[0]:s)},t.exports.dingTalk=function(){var n=t.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(n)},t.exports.IS_DINGTALK=t.exports.dingTalk(),t.exports.wechat=function(){var n=t.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(n)},t.exports.inIFrame=function(){return self!=top},t.exports.getReferer=function(){var n=document.referrer;if(t.exports.inIFrame())try{n=top.document.referrer}catch{n=document.referrer}return n},t.exports.getHref=function(){if(t.exports.inIFrame())try{top.location.href}catch{}return location.href},t.exports.check360=function(){return navigator.userAgent.indexOf("Safari")!=-1?function(){var n=navigator.userAgent.split(" ");if(n[n.length-1].indexOf("Safari")!=-1){for(var l in navigator.plugins)if(navigator.plugins[l].filename=="np-mswmp.dll")return!0}return!1}():(navigator.msPointerEnabled==null||navigator.msPointerEnabled)&&(navigator.msDoNotTrack==1||window.doNotTrack==1)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(navigator.userAgent.indexOf("MSIE 7.0")!=-1||navigator.userAgent.indexOf("MSIE 8.0")!=-1)&&console.count==null)},y=t.exports,(function(n,g){var a=this.os={},s=this.browser={},_=n.match(/Web[kK]it[\/]{0,1}([\d.]+)/),T=n.match(/(Android);?[\s\/]+([\d.]+)?/),m=!!n.match(/\(Macintosh\; Intel /),v=n.match(/(iPad).*OS\s([\d_]+)/),S=n.match(/(iPod)(.*OS\s([\d_]+))?/),x=!v&&n.match(/(iPhone\sOS)\s([\d_]+)/),P=n.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),g=/Win\d{2}|Windows/.test(g),E=n.match(/Windows Phone ([\d.]+)/),C=P&&n.match(/TouchPad/),R=n.match(/Kindle\/([\d.]+)/),A=n.match(/Silk\/([\d._]+)/),L=n.match(/(BlackBerry).*Version\/([\d.]+)/),N=n.match(/(BB10).*Version\/([\d.]+)/),I=n.match(/(RIM\sTablet\sOS)\s([\d.]+)/),M=n.match(/PlayBook/),H=n.match(/Chrome\/([\d.]+)/)||n.match(/CriOS\/([\d.]+)/),O=n.match(/Firefox\/([\d.]+)/),z=n.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),J=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),U=!H&&n.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),q=U||n.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(s.webkit=!!_)&&(s.version=_[1]),T&&(a.android=!0,a.version=T[2]),x&&!S&&(a.ios=a.iphone=!0,a.version=x[2].replace(/_/g,".")),v&&(a.ios=a.ipad=!0,a.version=v[2].replace(/_/g,".")),S&&(a.ios=a.ipod=!0,a.version=S[3]?S[3].replace(/_/g,"."):null),E&&(a.wp=!0,a.version=E[1]),P&&(a.webos=!0,a.version=P[2]),C&&(a.touchpad=!0),L&&(a.blackberry=!0,a.version=L[2]),N&&(a.bb10=!0,a.version=N[2]),I&&(a.rimtabletos=!0,a.version=I[2]),M&&(s.playbook=!0),R&&(a.kindle=!0,a.version=R[1]),A&&(s.silk=!0,s.version=A[1]),!A&&a.android&&n.match(/Kindle Fire/)&&(s.silk=!0),H&&(s.chrome=!0,s.version=H[1]),O&&(s.firefox=!0,s.version=O[1]),z&&(a.firefoxos=!0,a.version=z[1]),J&&(s.ie=!0,s.version=J[1]),q&&(m||a.ios||g||T)&&(s.safari=!0,a.ios||a.android||(s.version=q[1])),a.ios&&(s.version=a.version),U&&(s.webview=!0),m&&((_=n.match(/[\d]*_[\d]*_[\d]*/))&&0<_.length&&_[0]&&(a.version=_[0].replace(/_/g,".")),/MQBHD/.test(n))&&(s.version=((n.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),a.tablet=!!(v||M||T&&!n.match(/Mobile/)||O&&n.match(/Tablet/)||J&&!n.match(/Phone/)&&n.match(/Touch/)),a.phone=!(a.tablet||a.ipod||!(T||x||P||L||N||H&&n.match(/Android/)||H&&n.match(/CriOS\/([\d.]+)/)||O&&n.match(/Mobile/)||J&&n.match(/Touch/))),a.pc=!a.tablet&&!a.phone,m?a.name="macOS":g?(a.name="windows",a.version=function(){var V=navigator.userAgent,X="";return(-1<V.indexOf("Windows NT 5.0")||-1<V.indexOf("Windows 2000"))&&(X="2000"),(-1<V.indexOf("Windows NT 5.1")||-1<V.indexOf("Windows XP"))&&(X="XP"),(-1<V.indexOf("Windows NT 5.2")||-1<V.indexOf("Windows 2003"))&&(X="2003"),(-1<V.indexOf("Windows NT 6.0")||-1<V.indexOf("Windows Vista"))&&(X="Vista"),(-1<V.indexOf("Windows NT 6.1")||-1<V.indexOf("Windows 7"))&&(X="7"),(-1<V.indexOf("Windows NT 6.2")||-1<V.indexOf("Windows 8"))&&(X="8"),(-1<V.indexOf("Windows NT 6.3")||-1<V.indexOf("Windows 8.1"))&&(X="8.1"),(-1<V.indexOf("Windows NT 10")||-1<V.indexOf("Windows 10"))&&(X="10"),X}()):a.name=function(){var V=navigator.userAgent,X="other",B=t.exports.os;return B.ios?"iOS":B.android?"android":-1<V.indexOf("Baiduspider")?"Baiduspider":-1<V.indexOf("PlayStation")?"PS4":(B=navigator.platform=="Win32"||navigator.platform=="Windows"||-1<V.indexOf("Windows"),V=navigator.platform=="Mac68K"||navigator.platform=="MacPPC"||navigator.platform=="Macintosh"||navigator.platform=="MacIntel",V&&(X="macOS"),navigator.platform!="X11"||B||V||(X="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(X="Linux"),B?"windows":X)}(),s.name=(S=navigator.userAgent.toLowerCase(),(E=t.exports.browser).firefox?"Firefox":E.ie?/edge/.test(S)?"Edge":"IE":t.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(S)?"微信内置浏览器":/qqbrowser/.test(S)?"QQ浏览器":t.exports.IS_UC?"UC":t.exports.IS_QUARK?"Quark":t.exports.IS_DINGTALK?"Dingtalk":t.exports.IS_HUAWEI?"HuaweiBrowser":t.exports.IS_XIAOMI?"MiBrowser":t.exports.IS_OPPO?"OppoBrowser":t.exports.IS_VIVO?"VivoBrowser":t.exports.IS_MEIZU?"MeizuBrowser":t.exports.IS_SAMSUNG?"SamsungBrowser":t.exports.IS_WEBVIEW||/MQBHD/.test(S)?"webview":E.chrome?"Chrome":E.safari?"Safari":/baiduspider/.test(S)?"Baiduspider":/opera/.test(S)?"Opera":/360se/.test(S)?"360浏览器":/bidubrowser/.test(S)?"百度浏览器":/metasr/.test(S)?"搜狗浏览器":/lbbrowser/.test(S)?"猎豹浏览器":/playstation/.test(S)?"PS4浏览器":void 0)}).call(y,navigator.userAgent,navigator.platform),t.exports.IS_WEBVIEW=(u=t.exports.USER_AGENT,c=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(Version).*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),f=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!u.match(c)&&!u.match(f))},{}],51:[function(e,t,w){var y=e("./dom");t.exports.getAbsoluteURL=function(u){return u=u.match(/^https?:\/\//)?u:y.createEl("div",{innerHTML:'<a href="'+u+'">x</a>'}).firstChild.href},t.exports.parseUrl=function(u){var c,f=["protocol","hostname","port","pathname","search","hash","host"],h=y.createEl("a",{href:u}),n=h.host===""&&h.protocol!=="file:";n&&((c=y.createEl("div")).innerHTML='<a href="'+u+'"></a>',h=c.firstChild,c.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(c));for(var l={},a=0;a<f.length;a++)l[f[a]]=h[f[a]];return l.segments=h.pathname.replace(/^\//,"").split("/"),n&&document.body.removeChild(c),l}},{"./dom":34}],52:[function(e,t,w){var y=e("./dom"),u=e("./ua"),c=e("./playerutil");t.exports.formatTime=function(n){n=Math.max(0,n||0);var h,n=Math.floor(n),l=Math.floor(n/3600);return n%=3600,h=Math.floor(n/60),n=n%60,!(l===1/0||isNaN(l)||h===1/0||isNaN(h)||n==1/0||isNaN(n))&&((l=10<=l?l:"0"+l)==="00"?"":l+":")+(10<=h?h:"0"+h)+":"+(10<=n?n:"0"+n)},t.exports.extractTime=function(f){var h;return f?((h=10<=(h=parseInt(f.getHours()))?h:"0"+h)==="00"?"":h+":")+(h=10<=(h=parseInt(f.getMinutes()))?h:"0"+h)+":"+(h=10<=(h=parseInt(f.getSeconds()))?h:"0"+h):""},t.exports.convertToTimestamp=function(f,h){var n="";return f&&(h?n=f.gettime():(n=Date.parse(f),n/=1e3)),n},t.exports.convertToDate=function(f,h){var n="";return f&&(n=new Date).setTime(1e3*f),n},t.exports.parseTime=function(f){var h,n,l;return f?(l=n=h=0,(f=f.split(":")).length===3?(h=f[0],n=f[1],l=f[2]):f.length===2?(n=f[0],l=f[1]):f.length===1&&(l=f[0]),3600*(h=parseInt(h,10))+60*(n=parseInt(n,10))+(l=Math.ceil(parseFloat(l)))):"00:00:00"},t.exports.formatDate=function(f,h){var n,l={"M+":f.getMonth()+1,"d+":f.getDate(),"H+":f.getHours(),"m+":f.getMinutes(),"s+":f.getSeconds(),"q+":Math.floor((f.getMonth()+3)/3),S:f.getMilliseconds()};for(n in/(y+)/.test(h)&&(h=h.replace(RegExp.$1,(f.getFullYear()+"").substr(4-RegExp.$1.length))),l)new RegExp("("+n+")").test(h)&&(h=h.replace(RegExp.$1,RegExp.$1.length==1?l[n]:("00"+l[n]).substr((""+l[n]).length)));return h},t.exports.sleep=function(f){},t.exports.htmlEncodeAll=function(f){return f==null?"":f.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t.exports.toBinary=function(f){if(!window.atob)return"";for(var h=atob(f),n=h.length,l=new Uint8Array(n),a=0;a<n;a++)l[a]=h.charCodeAt(a);return l},t.exports.readyBinary=function(f){for(var h=new Uint8Array(f),n=h.length,l="",a=0;a<n;a++)l+=h[a];return l},t.exports.delayHide=function(f,h){f&&(h===void 0&&(h=1e3),f.delayHanlder&&clearTimeout(f.delayHanlder),f.delayHanlder=setTimeout(function(){y.css(f,"display","none")},h))},t.exports.openInFile=function(){return window.location.protocol.toLowerCase().indexOf("file")!=-1},t.exports.contentProtocolMixed=function(f,h,n){return!!((u.os.pc&&(c.isHls(f,n)&&!u.browser.safari||c.isFlv(f,n))||h)&&window.location.protocol.toLowerCase()=="https:"&&f&&-1<f.toLowerCase().indexOf("http://"))},t.exports.queryString=function(f){var h,n,l;return(f=(f=decodeURIComponent(f)).split("?")).length===2&&(f=f[1],h=f.split("&"))?(n={},l=0,$(h).each(function(){var a=h[l].split("=");a.length===2&&(n[a[0]]=a[1].replace(/\+/g," ")),l++}),n):{}},t.exports.log=function(f){var h=window.location.href,h=t.exports.queryString(h);h&&h.debug==1&&console.log(f)},t.exports.arrayBufferToB64=function(f){for(var h="",n=new Uint8Array(f),l=n.byteLength,a=0;a<l;a++)h+=String.fromCharCode(n[a]);return window.btoa(h)},t.exports.b64ToArrayBuffer=function(f){for(var h=atob(f),n=new Uint8Array(h.length),l=0;l<h.length;l++)n[l]=h.charCodeAt(l);return n.buffer},t.exports.throttle=function(f,h){var n=null,l=0;return function(){for(var a=this,s=arguments.length,_=new Array(s),T=0;T<s;T++)_[T]=arguments[T];var m=Date.now(),v=h-(m-l);v<=0?(f.apply(this,_),l=m):(clearTimeout(n),n=setTimeout(function(){f.apply(a,_),l=Date.now()},v))}}},{"./dom":34,"./playerutil":47,"./ua":50}],53:[function(e,t,w){var y,u=typeof Promise>"u"?e("es6-promise").Promise:Promise;e=this,y=function(){return f={307:function(l,ve,F){l=F.nmd(l);var _="__lodash_hash_undefined__",T=1,m=2,v=9007199254740991,S="[object Arguments]",x="[object Array]",P="[object AsyncFunction]",g="[object Boolean]",E="[object Date]",C="[object Error]",R="[object Function]",A="[object GeneratorFunction]",L="[object Map]",N="[object Number]",I="[object Object]",M="[object Promise]",H="[object Proxy]",O="[object RegExp]",z="[object Set]",J="[object String]",U="[object WeakMap]",q="[object ArrayBuffer]",V="[object DataView]",X=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,ee={},F=(ee["[object Float32Array]"]=ee["[object Float64Array]"]=ee["[object Int8Array]"]=ee["[object Int16Array]"]=ee["[object Int32Array]"]=ee["[object Uint8Array]"]=ee["[object Uint8ClampedArray]"]=ee["[object Uint16Array]"]=ee["[object Uint32Array]"]=!0,ee[S]=ee[x]=ee[q]=ee[g]=ee[V]=ee[E]=ee[C]=ee[R]=ee[L]=ee[N]=ee[I]=ee[O]=ee[z]=ee[J]=ee[U]=!1,typeof F.g=="object"&&F.g&&F.g.Object===Object&&F.g),Ae=typeof self=="object"&&self&&self.Object===Object&&self,Ae=F||Ae||Function("return this")(),ve=ve&&!ve.nodeType&&ve,Ee=ve&&l&&!l.nodeType&&l,Ee=Ee&&Ee.exports===ve,G=Ee&&F.process,ve=function(){try{return G&&G.binding&&G.binding("util")}catch{}}(),F=ve&&ve.isTypedArray;function W(ie){var ye=-1,me=Array(ie.size);return ie.forEach(function(Oe,nt){me[++ye]=[nt,Oe]}),me}function Z(ie){var ye=-1,me=Array(ie.size);return ie.forEach(function(Oe){me[++ye]=Oe}),me}var ae,_e,ve=Array.prototype,ft=Function.prototype,le=Object.prototype,Ie=Ae["__core-js_shared__"],he=ft.toString,be=le.hasOwnProperty,te=(ft=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+ft:"",D=le.toString,Q=RegExp("^"+he.call(be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=Ee?Ae.Buffer:void 0,ft=Ae.Symbol,ne=Ae.Uint8Array,pe=le.propertyIsEnumerable,ce=ve.splice,fe=ft?ft.toStringTag:void 0,xe=Object.getOwnPropertySymbols,Ee=Ie?Ie.isBuffer:void 0,ve=(ae=Object.keys,_e=Object,Wt(Ae,"DataView")),Te=Wt(Ae,"Map"),Ie=Wt(Ae,"Promise"),ke=Wt(Ae,"Set"),Ae=Wt(Ae,"WeakMap"),Ne=Wt(Object,"create"),qe=Ht(ve),it=Ht(Te),Qe=Ht(Ie),ht=Ht(ke),Et=Ht(Ae),ft=ft?ft.prototype:void 0,Pt=ft?ft.valueOf:void 0;function lt(ie){var ye=-1,me=ie==null?0:ie.length;for(this.clear();++ye<me;){var Oe=ie[ye];this.set(Oe[0],Oe[1])}}function vt(ie){var ye=-1,me=ie==null?0:ie.length;for(this.clear();++ye<me;){var Oe=ie[ye];this.set(Oe[0],Oe[1])}}function ct(ie){var ye=-1,me=ie==null?0:ie.length;for(this.clear();++ye<me;){var Oe=ie[ye];this.set(Oe[0],Oe[1])}}function dt(ie){var ye=-1,me=ie==null?0:ie.length;for(this.__data__=new ct;++ye<me;)this.add(ie[ye])}function At(ie){ie=this.__data__=new vt(ie),this.size=ie.size}function Jt(ie,ye){var me,Oe,nt,Be=Lt(ie),rt=!Be&&br(ie),ot=!Be&&!rt&&Zt(ie),St=!Be&&!rt&&!ot&&et(ie),yt=Be||rt||ot||St,Ze=yt?function(at,ze){for(var Ke=-1,st=Array(at);++Ke<at;)st[Ke]=ze(Ke);return st}(ie.length,String):[],ue=Ze.length;for(me in ie)!ye&&!be.call(ie,me)||yt&&(me=="length"||ot&&(me=="offset"||me=="parent")||St&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||(Oe=me,(nt=(nt=ue)==null?v:nt)&&(typeof Oe=="number"||B.test(Oe))&&-1<Oe&&Oe%1==0&&Oe<nt))||Ze.push(me);return Ze}function ir(ie,ye){for(var me=ie.length;me--;)if(Xt(ie[me][0],ye))return me;return-1}function Je(ie){{if(ie==null)return ie===void 0?"[object Undefined]":"[object Null]";if(fe&&fe in Object(ie)){var ye=ie,me=be.call(ye,fe),Oe=ye[fe];try{var nt=!(ye[fe]=void 0)}catch{}var Be=D.call(ye);return nt&&(me?ye[fe]=Oe:delete ye[fe]),Be}return D.call(ie)}}function Ut(ie){return je(ie)&&Je(ie)==S}function sr(ie,ye,me,Oe,nt){return ie===ye||(ie==null||ye==null||!je(ie)&&!je(ye)?ie!=ie&&ye!=ye:function(Be,rt,ot,St,yt,Ze){var ue=Lt(Be),st=Lt(rt),at=ue?x:Ot(Be),st=st?x:Ot(rt),ze=(at=at==S?I:at)==I,Ke=(st=st==S?I:st)==I,st=at==st;if(st&&Zt(Be)){if(!Zt(rt))return!1;ze=!(ue=!0)}if(st&&!ze)return Ze=Ze||new At,(ue||et(Be)?Vt:function(mt,wt,_r,Ur,tr,Er){switch(at){case V:if(mt.byteLength!=wt.byteLength||mt.byteOffset!=wt.byteOffset)return!1;mt=mt.buffer,wt=wt.buffer;case q:return!(mt.byteLength!=wt.byteLength||!tr(new ne(mt),new ne(wt)));case g:case E:case N:return Xt(+mt,+wt);case C:return mt.name==wt.name&&mt.message==wt.message;case O:case J:return mt==wt+"";case L:var Rt=W;case z:if(Rt=Rt||Z,mt.size!=wt.size&&!(_r&T))return!1;var wr=Er.get(mt);return wr?wr==wt:(_r|=m,Er.set(mt,wt),wr=Vt(Rt(mt),Rt(wt),_r,Ur,tr,Er),Er.delete(mt),wr);case"[object Symbol]":if(Pt)return Pt.call(mt)==Pt.call(wt)}return!1})(Be,rt,ot,St,yt,Ze);if(!(ot&T)&&(ue=ze&&be.call(Be,"__wrapped__"),ze=Ke&&be.call(rt,"__wrapped__"),ue||ze))return yt(ue?Be.value():Be,ze?rt.value():rt,ot,St,Ze=Ze||new At);if(st){Ze=Ze||new At;var Tt=Be,gt=rt,er=ot,or=St,Sr=yt,kt=Ze,Dt=er&T,kr=Gt(Tt),Ft=kr.length;if(Ft!=Gt(gt).length&&!Dt)return!1;for(var fr=Ft;fr--;){var ar=kr[fr];if(!(Dt?ar in gt:be.call(gt,ar)))return!1}if(Ke=kt.get(Tt),Ke&&kt.get(gt))return Ke==gt;for(var Tr=!0,Cr=(kt.set(Tt,gt),kt.set(gt,Tt),Dt);++fr<Ft;){var hr,Yt=Tt[ar=kr[fr]],ur=gt[ar];if(!((hr=or?Dt?or(ur,Yt,ar,gt,Tt,kt):or(Yt,ur,ar,Tt,gt,kt):hr)===void 0?Yt===ur||Sr(Yt,ur,er,or,kt):hr)){Tr=!1;break}Cr=Cr||ar=="constructor"}return Tr&&!Cr&&(Ke=Tt.constructor)!=(ue=gt.constructor)&&"constructor"in Tt&&"constructor"in gt&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof ue=="function"&&ue instanceof ue)&&(Tr=!1),kt.delete(Tt),kt.delete(gt),Tr}return!1}(ie,ye,me,Oe,sr,nt))}function jt(ie){if(ye=ie&&ie.constructor,ie!==(typeof ye=="function"&&ye.prototype||le))return ae(_e(ie));var ye,me,Oe=[];for(me in Object(ie))be.call(ie,me)&&me!="constructor"&&Oe.push(me);return Oe}function Vt(ie,ye,me,Oe,nt,Be){var rt=me&T,ot=ie.length,St=ye.length;if(ot!=St&&!(rt&&ot<St))return!1;if(St=Be.get(ie),St&&Be.get(ye))return St==ye;var yt=-1,Ze=!0,ue=me&m?new dt:void 0;for(Be.set(ie,ye),Be.set(ye,ie);++yt<ot;){var at,ze=ie[yt],Ke=ye[yt];if((at=Oe?rt?Oe(Ke,ze,yt,ye,ie,Be):Oe(ze,Ke,yt,ie,ye,Be):at)!==void 0){if(at)continue;Ze=!1;break}if(ue){if(!function(st,Tt){for(var gt=-1,er=st==null?0:st.length;++gt<er;)if(Tt(st[gt],gt,st))return 1}(ye,function(st,Tt){return!ue.has(Tt)&&(ze===st||nt(ze,st,me,Oe,Be))&&ue.push(Tt)})){Ze=!1;break}}else if(ze!==Ke&&!nt(ze,Ke,me,Oe,Be)){Ze=!1;break}}return Be.delete(ie),Be.delete(ye),Ze}function Gt(ie){var ye=mr,me=bt(ie);if(Lt(ie))return me;for(var Oe=me,nt=ye(ie),Be=-1,rt=nt.length,ot=Oe.length;++Be<rt;)Oe[ot+Be]=nt[Be];return Oe}function nr(Oe,ye){var me,Oe=Oe.__data__;return((me=typeof ye)=="string"||me=="number"||me=="symbol"||me=="boolean"?ye!=="__proto__":ye===null)?Oe[typeof ye=="string"?"string":"hash"]:Oe.map}function Wt(ie,ye){return ie=ie==null?void 0:ie[ye],!Pe(ye=ie)||te&&te in ye||!(oe(ye)?Q:X).test(Ht(ye))?void 0:ie}lt.prototype.clear=function(){this.__data__=Ne?Ne(null):{},this.size=0},lt.prototype.delete=function(ie){return ie=this.has(ie)&&delete this.__data__[ie],this.size-=ie?1:0,ie},lt.prototype.get=function(ie){var ye,me=this.__data__;return Ne?(ye=me[ie])===_?void 0:ye:be.call(me,ie)?me[ie]:void 0},lt.prototype.has=function(ie){var ye=this.__data__;return Ne?ye[ie]!==void 0:be.call(ye,ie)},lt.prototype.set=function(ie,ye){var me=this.__data__;return this.size+=this.has(ie)?0:1,me[ie]=Ne&&ye===void 0?_:ye,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(me){var ye=this.__data__,me=ir(ye,me);return!(me<0||(me==ye.length-1?ye.pop():ce.call(ye,me,1),--this.size,0))},vt.prototype.get=function(me){var ye=this.__data__,me=ir(ye,me);return me<0?void 0:ye[me][1]},vt.prototype.has=function(ie){return-1<ir(this.__data__,ie)},vt.prototype.set=function(ie,ye){var me=this.__data__,Oe=ir(me,ie);return Oe<0?(++this.size,me.push([ie,ye])):me[Oe][1]=ye,this},ct.prototype.clear=function(){this.size=0,this.__data__={hash:new lt,map:new(Te||vt),string:new lt}},ct.prototype.delete=function(ie){return ie=nr(this,ie).delete(ie),this.size-=ie?1:0,ie},ct.prototype.get=function(ie){return nr(this,ie).get(ie)},ct.prototype.has=function(ie){return nr(this,ie).has(ie)},ct.prototype.set=function(ie,ye){var me=nr(this,ie),Oe=me.size;return me.set(ie,ye),this.size+=me.size==Oe?0:1,this},dt.prototype.add=dt.prototype.push=function(ie){return this.__data__.set(ie,_),this},dt.prototype.has=function(ie){return this.__data__.has(ie)},At.prototype.clear=function(){this.__data__=new vt,this.size=0},At.prototype.delete=function(me){var ye=this.__data__,me=ye.delete(me);return this.size=ye.size,me},At.prototype.get=function(ie){return this.__data__.get(ie)},At.prototype.has=function(ie){return this.__data__.has(ie)},At.prototype.set=function(ie,ye){var me=this.__data__;if(me instanceof vt){var Oe=me.__data__;if(!Te||Oe.length<199)return Oe.push([ie,ye]),this.size=++me.size,this;me=this.__data__=new ct(Oe)}return me.set(ie,ye),this.size=me.size,this};var mr=xe?function(ie){if(ie==null)return[];ie=Object(ie);for(var ye=xe(ie),me=-1,Oe=ye==null?0:ye.length,nt=0,Be=[];++me<Oe;){var rt=ye[me];pe.call(ie,rt)&&(Be[nt++]=rt)}return Be}:function(){return[]},Ot=Je;function Ht(ie){if(ie!=null){try{return he.call(ie)}catch{}try{return ie+""}catch{}}return""}function Xt(ie,ye){return ie===ye||ie!=ie&&ye!=ye}(ve&&Ot(new ve(new ArrayBuffer(1)))!=V||Te&&Ot(new Te)!=L||Ie&&Ot(Ie.resolve())!=M||ke&&Ot(new ke)!=z||Ae&&Ot(new Ae)!=U)&&(Ot=function(me){var ye=Je(me),me=ye==I?me.constructor:void 0,me=me?Ht(me):"";if(me)switch(me){case qe:return V;case it:return L;case Qe:return M;case ht:return z;case Et:return U}return ye});var br=Ut(function(){return arguments}())?Ut:function(ie){return je(ie)&&be.call(ie,"callee")&&!pe.call(ie,"callee")},Lt=Array.isArray,Zt=Ee||function(){return!1};function oe(ie){if(Pe(ie))return(ie=Je(ie))==R||ie==A||ie==P||ie==H}function se(ie){return typeof ie=="number"&&-1<ie&&ie%1==0&&ie<=v}function Pe(ie){var ye=typeof ie;return ie!=null&&(ye=="object"||ye=="function")}function je(ie){return ie!=null&&typeof ie=="object"}var _t,et=F?(_t=F,function(ie){return _t(ie)}):function(ie){return je(ie)&&se(ie.length)&&!!ee[Je(ie)]};function bt(ie){return(ie!=null&&se(ie.length)&&!oe(ie)?Jt:jt)(ie)}l.exports=function(ie,ye){return sr(ie,ye)}},801:function(l){l.exports=function(a){return a===void 0}},378:function(l,be,z){l=z.nmd(l);var _,T,m="__lodash_hash_undefined__",v=9007199254740991,S="[object Arguments]",x="[object AsyncFunction]",P="[object Function]",g="[object GeneratorFunction]",E="[object Null]",C="[object Object]",R="[object Proxy]",A="[object Undefined]",L=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,I={},z=(I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[S]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I["[object Error]"]=I[P]=I["[object Map]"]=I["[object Number]"]=I[C]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1,typeof z.g=="object"&&z.g&&z.g.Object===Object&&z.g),M=typeof self=="object"&&self&&self.Object===Object&&self,M=z||M||Function("return this")(),be=be&&!be.nodeType&&be,H=be&&l&&!l.nodeType&&l,be=H&&H.exports===be,O=be&&z.process,z=function(){try{return H&&H.require&&H.require("util").types||O&&O.binding&&O.binding("util")}catch{}}(),z=z&&z.isTypedArray,dt=Array.prototype,G=Function.prototype,J=Object.prototype,Lt=M["__core-js_shared__"],U=G.toString,q=J.hasOwnProperty,V=(G=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",X=J.toString,B=U.call(Object),ee=RegExp("^"+U.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=be?M.Buffer:void 0,G=M.Symbol,F=M.Uint8Array,W=(Lt&&Lt.allocUnsafe,_=Object.getPrototypeOf,T=Object,function(oe){return _(T(oe))}),Z=Object.create,ae=J.propertyIsEnumerable,_e=dt.splice,le=G?G.toStringTag:void 0,he=function(){try{var oe=ht(Object,"defineProperty");return oe({},"",{}),oe}catch{}}(),be=Lt?Lt.isBuffer:void 0,te=Math.max,D=Date.now,Q=ht(M,"Map"),ne=ht(Object,"create"),pe=function(oe){return Vt(oe)?Z?Z(oe):(ce.prototype=oe,oe=new ce,ce.prototype=void 0,oe):{}};function ce(){}function fe(oe){var se=-1,Pe=oe==null?0:oe.length;for(this.clear();++se<Pe;){var je=oe[se];this.set(je[0],je[1])}}function xe(oe){var se=-1,Pe=oe==null?0:oe.length;for(this.clear();++se<Pe;){var je=oe[se];this.set(je[0],je[1])}}function Ee(oe){var se=-1,Pe=oe==null?0:oe.length;for(this.clear();++se<Pe;){var je=oe[se];this.set(je[0],je[1])}}function ve(oe){oe=this.__data__=new xe(oe),this.size=oe.size}function Te(oe,se,Pe){(Pe===void 0||At(oe[se],Pe))&&(Pe!==void 0||se in oe)||ke(oe,se,Pe)}function Ie(oe,se){for(var Pe=oe.length;Pe--;)if(At(oe[Pe][0],se))return Pe;return-1}function ke(oe,se,Pe){se=="__proto__"&&he?he(oe,se,{configurable:!0,enumerable:!0,value:Pe,writable:!0}):oe[se]=Pe}fe.prototype.clear=function(){this.__data__=ne?ne(null):{},this.size=0},fe.prototype.delete=function(oe){return oe=this.has(oe)&&delete this.__data__[oe],this.size-=oe?1:0,oe},fe.prototype.get=function(oe){var se,Pe=this.__data__;return ne?(se=Pe[oe])===m?void 0:se:q.call(Pe,oe)?Pe[oe]:void 0},fe.prototype.has=function(oe){var se=this.__data__;return ne?se[oe]!==void 0:q.call(se,oe)},fe.prototype.set=function(oe,se){var Pe=this.__data__;return this.size+=this.has(oe)?0:1,Pe[oe]=ne&&se===void 0?m:se,this},xe.prototype.clear=function(){this.__data__=[],this.size=0},xe.prototype.delete=function(Pe){var se=this.__data__,Pe=Ie(se,Pe);return!(Pe<0||(Pe==se.length-1?se.pop():_e.call(se,Pe,1),--this.size,0))},xe.prototype.get=function(Pe){var se=this.__data__,Pe=Ie(se,Pe);return Pe<0?void 0:se[Pe][1]},xe.prototype.has=function(oe){return-1<Ie(this.__data__,oe)},xe.prototype.set=function(oe,se){var Pe=this.__data__,je=Ie(Pe,oe);return je<0?(++this.size,Pe.push([oe,se])):Pe[je][1]=se,this},Ee.prototype.clear=function(){this.size=0,this.__data__={hash:new fe,map:new(Q||xe),string:new fe}},Ee.prototype.delete=function(oe){return oe=Qe(this,oe).delete(oe),this.size-=oe?1:0,oe},Ee.prototype.get=function(oe){return Qe(this,oe).get(oe)},Ee.prototype.has=function(oe){return Qe(this,oe).has(oe)},Ee.prototype.set=function(oe,se){var Pe=Qe(this,oe),je=Pe.size;return Pe.set(oe,se),this.size+=Pe.size==je?0:1,this},ve.prototype.clear=function(){this.__data__=new xe,this.size=0},ve.prototype.delete=function(Pe){var se=this.__data__,Pe=se.delete(Pe);return this.size=se.size,Pe},ve.prototype.get=function(oe){return this.__data__.get(oe)},ve.prototype.has=function(oe){return this.__data__.has(oe)},ve.prototype.set=function(oe,se){var Pe=this.__data__;if(Pe instanceof xe){var je=Pe.__data__;if(!Q||je.length<199)return je.push([oe,se]),this.size=++Pe.size,this;Pe=this.__data__=new Ee(je)}return Pe.set(oe,se),this.size=Pe.size,this};var Ae=function(oe,se,Pe){for(var je=-1,_t=Object(oe),et=Pe(oe),bt=et.length;bt--;){var ie=et[++je];if(se(_t[ie],ie,_t)===!1)break}return oe};function Ne(oe){{if(oe==null)return oe===void 0?A:E;if(le&&le in Object(oe)){var se=oe,Pe=q.call(se,le),je=se[le];try{var _t=!(se[le]=void 0)}catch{}var et=X.call(se);return _t&&(Pe?se[le]=je:delete se[le]),et}return X.call(oe)}}function qe(oe){return Gt(oe)&&Ne(oe)==S}function it(oe,se,Pe,je,_t){oe!==se&&Ae(se,function(et,bt){var ie,ye,me,Oe,nt,Be,rt,ot,St,yt,Ze,ue,at;_t=_t||new ve,Vt(et)?(ye=se,Oe=Pe,nt=it,Be=je,rt=_t,Ze=Pt(ie=oe,me=bt),ue=Pt(ye,me),(at=rt.get(ue))||((ye=(at=Be?Be(Ze,ue,me+"",ie,ye,rt):void 0)===void 0)&&(ot=!(yt=ir(ue))&&Ut(ue),St=!yt&&!ot&&Wt(ue),at=ue,yt||ot||St?at=ir(Ze)?Ze:Gt(yt=Ze)&&Je(yt)?function(ze,Ke){var st=-1,Tt=ze.length;for(Ke=Ke||Array(Tt);++st<Tt;)Ke[st]=ze[st];return Ke}(Ze):ot?(ye=!1,ue.slice()):St?(ye=!1,St=new(ot=(yt=ue).buffer).constructor(ot.byteLength),new F(St).set(new F(ot)),new yt.constructor(St,yt.byteOffset,yt.length)):[]:function(ze){if(Gt(ze)&&Ne(ze)==C)return(ze=W(ze))===null||typeof(ze=q.call(ze,"constructor")&&ze.constructor)=="function"&&ze instanceof ze&&U.call(ze)==B}(ue)||Jt(ue)?Jt(at=Ze)?at=function(){for(var ze,Ke,st=Ze,Tt=mr(Ze),gt=void 0,er=!gt,or=(gt=gt||{},-1),Sr=Tt.length;++or<Sr;){var kt=Tt[or],Dt=void 0;Dt===void 0&&(Dt=st[kt]),er?ke(gt,kt,Dt):(Dt=Dt,Ke=void 0,Ke=(ze=gt)[kt=kt],q.call(ze,kt)&&At(Ke,Dt)&&(Dt!==void 0||kt in ze)||ke(ze,kt,Dt))}return gt}():Vt(Ze)&&!sr(Ze)||(at=typeof ue.constructor!="function"||ft(ue)?{}:pe(W(ue))):ye=!1),ye&&(rt.set(ue,at),nt(at,ue,Oe,Be,rt),rt.delete(ue))),Te(ie,me,at)):(ot=je?je(Pt(oe,bt),et,bt+"",oe,se,_t):void 0,Te(oe,bt,ot=ot===void 0?et:ot))},mr)}function Qe(je,se){var Pe,je=je.__data__;return((Pe=typeof se)=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?se!=="__proto__":se===null)?je[typeof se=="string"?"string":"hash"]:je.map}function ht(oe,se){return oe=oe==null?void 0:oe[se],!Vt(se=oe)||V&&V in se||!(sr(se)?ee:L).test(function(Pe){if(Pe!=null){try{return U.call(Pe)}catch{}try{return Pe+""}catch{}}return""}(se))?void 0:oe}function Et(oe,se){var Pe=typeof oe;return(se=se??v)&&(Pe=="number"||Pe!="symbol"&&N.test(oe))&&-1<oe&&oe%1==0&&oe<se}function ft(oe){var se=oe&&oe.constructor;return oe===(typeof se=="function"&&se.prototype||J)}function Pt(oe,se){if((se!=="constructor"||typeof oe[se]!="function")&&se!="__proto__")return oe[se]}lt=he?function(oe,se){return he(oe,"toString",{configurable:!0,enumerable:!1,value:(Pe=se,function(){return Pe}),writable:!0});var Pe}:Zt,ct=vt=0;var lt,vt,ct,dt=function(){var oe=D(),se=16-(oe-ct);if(ct=oe,0<se){if(800<=++vt)return arguments[0]}else vt=0;return lt.apply(void 0,arguments)};function At(oe,se){return oe===se||oe!=oe&&se!=se}var Jt=qe(function(){return arguments}())?qe:function(oe){return Gt(oe)&&q.call(oe,"callee")&&!ae.call(oe,"callee")},ir=Array.isArray;function Je(oe){return oe!=null&&jt(oe.length)&&!sr(oe)}var Ut=be||function(){return!1};function sr(oe){if(Vt(oe))return(oe=Ne(oe))==P||oe==g||oe==x||oe==R}function jt(oe){return typeof oe=="number"&&-1<oe&&oe%1==0&&oe<=v}function Vt(oe){var se=typeof oe;return oe!=null&&(se=="object"||se=="function")}function Gt(oe){return oe!=null&&typeof oe=="object"}var nr,Wt=z?(nr=z,function(oe){return nr(oe)}):function(oe){return Gt(oe)&&jt(oe.length)&&!!I[Ne(oe)]};function mr(oe){if(Je(oe)){var se,Pe=oe,je=!0,_t=ir(Pe),et=!_t&&Jt(Pe),bt=!_t&&!et&&Ut(Pe),ie=!_t&&!et&&!bt&&Wt(Pe),ye=_t||et||bt||ie,me=ye?function(Ze,ue){for(var at=-1,ze=Array(Ze);++at<Ze;)ze[at]=ue(at);return ze}(Pe.length,String):[],Oe=me.length;for(se in Pe)!je&&!q.call(Pe,se)||ye&&(se=="length"||bt&&(se=="offset"||se=="parent")||ie&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||Et(se,Oe))||me.push(se);return me}var nt=oe;if(Vt(nt)){var Be,rt=ft(nt),ot=[];for(Be in nt)(Be!="constructor"||!rt&&q.call(nt,Be))&&ot.push(Be);return ot}var St=[];if(nt!=null)for(var yt in Object(nt))St.push(yt);return St}Ot=function(oe,se,Pe){it(oe,se,Pe)};var Ot,Ht,Xt,br,Lt=dt((Ht=G=function(oe,se){var Pe=-1,je=se.length,et=1<je?se[je-1]:void 0,_t=2<je?se[2]:void 0,et=3<Ot.length&&typeof et=="function"?(je--,et):void 0;for(_t&&function(ie,ye,me){var Oe;if(Vt(me))return((Oe=typeof ye)=="number"?Je(me)&&Et(ye,me.length):Oe=="string"&&ye in me)&&At(me[ye],ie)}(se[0],se[1],_t)&&(et=je<3?void 0:et,je=1),oe=Object(oe);++Pe<je;){var bt=se[Pe];bt&&Ot(oe,bt,Pe)}return oe},br=Zt,Xt=te(Ht.length-1,0),function(){for(var oe=arguments,se=-1,Pe=te(oe.length-Xt,0),je=Array(Pe);++se<Pe;)je[se]=oe[Xt+se];for(var se=-1,_t=Array(Xt+1);++se<Xt;)_t[se]=oe[se];_t[Xt]=br(je);var et=Ht,bt=this,ie=_t;switch(ie.length){case 0:return et.call(bt);case 1:return et.call(bt,ie[0]);case 2:return et.call(bt,ie[0],ie[1]);case 3:return et.call(bt,ie[0],ie[1],ie[2])}return et.apply(bt,ie)}),G+"");function Zt(oe){return oe}l.exports=Lt},775:function(l){var a=Object.prototype.hasOwnProperty;function s(T){return"[Throws: "+(T?T.message:"?")+"]"}function _(T){var m=[];return function v(S){if(S===null||typeof S!="object")return S;if(m.indexOf(S)!==-1)return"[Circular]";if(m.push(S),typeof S.toJSON=="function")try{var x=v(S.toJSON());return m.pop(),x}catch(P){return s(P)}return x=Array.isArray(S)?S.map(v):Object.keys(S).reduce(function(P,g){return P[g]=v(function(E,C){return a.call(E,C),E[C]}(S,g)),P},{}),m.pop(),x}(T)}l.exports=function(T,m,v){return JSON.stringify(_(T),m,v)},l.exports.ensureProperties=_}},h={},c.n=function(l){var a=l&&l.__esModule?function(){return l.default}:function(){return l};return c.d(a,{a}),a},c.d=function(l,a){for(var s in a)c.o(a,s)&&!c.o(l,s)&&Object.defineProperty(l,s,{enumerable:!0,get:a[s]})},c.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),c.o=function(l,a){return Object.prototype.hasOwnProperty.call(l,a)},c.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},c.nmd=function(l){return l.paths=[],l.children||(l.children=[]),l},n={},function(){c.r(n),c.d(n,{AACParser:function(){return l},AudioBody:function(){return fr},AvMultitrackType:function(){return _r},AvcSPS:function(){return Ae},BasicLoader:function(){return ie},BitBuffer:function(){return g},Box:function(){return Je},ByteBuffer:function(){return s},CTrackTypeMap:function(){return At},Demuxer:function(){return Da},DiscardType:function(){return le},EAudioCodecID:function(){return gt},EAudioPacketType:function(){return kt},EFormatType:function(){return te},EFrameType:function(){return Yt},EH264NALType:function(){return N},EH265NALType:function(){return I},EH266NALType:function(){return O},EHandlerType:function(){return be},ELoaderStatus:function(){return se},EPID:function(){return Br},ESampleFlag:function(){return dt},ESoundType:function(){return Sr},EStreamType:function(){return lr},ETSPacketType:function(){return gr},ETagType:function(){return et},ETrackType:function(){return D},EVideoCodecID:function(){return mt},EVideoCommand:function(){return ur},EVideoPacketType:function(){return wt},ErrorCode:function(){return he},FLVParser:function(){return on},FullBox:function(){return Ut},H264NAL:function(){return H},H265NAL:function(){return U},H266NAL:function(){return X},HLSParser:function(){return Uo},HevcSPS:function(){return ht},Loader:function(){return nt},LoaderError:function(){return bt},MP4Parser:function(){return So},MP4RemuxStream:function(){return Ma},MPEGTSParser:function(){return zi},PAT:function(){return Lo},PES:function(){return Oo},PMT:function(){return Do},Remuxer:function(){return Ji},SOUND_RATE:function(){return Dt},SOUND_SIZE:function(){return kr},ScriptBody:function(){return Ur},TSHeader:function(){return Or},TagHeader:function(){return er},VideoBody:function(){return Er},VvcSPS:function(){return Et},esTypeMap:function(){return Io}});var l={},a=(c.r(l),c.d(l,{AAC_DURATION:function(){return T},AAC_SAMPLING_FREQUENCIES:function(){return _},addADTSHeader:function(){return m},getADTSHeaderLength:function(){return S},getADTSLength:function(){return x},isADTS:function(){return v},readAACSamples:function(){return P}}),{}),s=(c.r(a),c.d(a,{Box:function(){return Je},avc1:function(){return Kr},avcC:function(){return sr},btrt:function(){return Ho},co64:function(){return va},ctts:function(){return ya},dinf:function(){return Nt},dref:function(){return Bo},edts:function(){return Nt},elst:function(){return Vo},esds:function(){return Go},ftyp:function(){return Xo},hdlr:function(){return Qo},hev1:function(){return an},hvc1:function(){return an},hvcC:function(){return Ht},mdat:function(){return Jo},mdhd:function(){return Zo},mdia:function(){return Nt},mfhd:function(){return ua},mfra:function(){return Nt},minf:function(){return Nt},moof:function(){return aa},moov:function(){return Nt},mp4a:function(){return ea},mvex:function(){return la},mvhd:function(){return ta},pasp:function(){return ra},sdtp:function(){return ca},sidx:function(){return da},stbl:function(){return Nt},stco:function(){return ga},stsc:function(){return ma},stsd:function(){return ba},stss:function(){return Sa},stsz:function(){return Ta},stts:function(){return Ea},tfdt:function(){return pa},tfhd:function(){return fa},tkhd:function(){return ia},traf:function(){return sa},trak:function(){return Nt},trex:function(){return ha},trun:function(){return _a},url:function(){return na},vmhd:function(){return oa},vvc1:function(){return Yo},vvcC:function(){return wr}}),C.fromUint8=function(o){return new C(o.buffer,o.byteOffset,o.byteLength)},C.concatUint8s=function(o){return this.concatUint8.apply(this,o)},C.concatUint8=function(){for(var o,r,d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return d.length<=1?d[0]||new Uint8Array(0):(o=new Uint8Array(d.reduce(function(k,j){return k+j.byteLength},0)),r=0,d.forEach(function(k){o.set(k,r),r+=k.byteLength}),o)},C.concat=function(o,r){return C.concatUint8(new Uint8Array(o),new Uint8Array(r)).buffer},Object.defineProperty(C.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),C.prototype.readFloat=function(o){var r=0;switch(o){case 4:r=this.dv.getFloat32(this.offset);break;case 8:r=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+o)}return this.offset+=o,r},C.prototype.back=function(o){this.offset-=o},C.prototype.skip=function(o){this.offset+=o},C.prototype.readInt=function(o){var r=this.offset;switch(this.offset+=o,o){case 1:return this.dv.getInt8(r);case 2:return this.dv.getInt16(r);case 4:return this.dv.getInt32(r);default:throw new Error("not supported for read byte with "+o)}},C.prototype.read=function(o){var r=this.offset;switch(this.offset+=o,o){case 1:return this.dv.getUint8(r);case 2:return this.dv.getUint16(r);case 3:return(this.dv.getUint16(r)<<8)+this.dv.getUint8(r+2);case 4:return this.dv.getUint32(r);default:return this.back(o-4),this.read(o-4)+this.dv.getUint32(r)*Math.pow(256,o-4)}},C.prototype.writeInt=function(o,r){var d=this.offset;switch(this.offset+=o,o){case 1:return this.dv.setInt8(d,r);case 2:return this.dv.setInt16(d,r);case 3:return this.dv.setInt8(d,r>>16),this.dv.setInt16(d+1,65535&r);case 4:return this.dv.setInt32(d,r);default:throw new Error("不支持Byte write "+o)}},C.prototype.write=function(o,r){var d=this.offset;switch(this.offset+=o,o){case 1:return this.dv.setUint8(d,r);case 2:return this.dv.setUint16(d,r);case 3:return this.dv.setUint8(d,r>>>16),this.dv.setUint16(d+1,65535&r);case 4:return this.dv.setUint32(d,r);default:throw new Error("不支持Byte write "+o)}},C.prototype.readToUint8=function(o){return o=new Uint8Array(this.dv.buffer,this.offset,o||this.unreadLength),this.offset+=o.byteLength,o},C.prototype.readToBuffer=function(o){return o=this.offset||o?this.dv.buffer.slice(this.offset,o?this.offset+o:void 0):this.dv.buffer,this.offset+=o.byteLength,o},C),_=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],T=1024,m=function(o,k){var d=k.audioObjectType,re=k.sampleRate,Y=k.samplingFrequencyIndex,b=k.channelCount,k=k.numberOfRawDataBlocksInFrame,k=k===void 0?0:k,j=Y,Y=(Y===0&&0<re&&(j=_.indexOf(re)),o.byteLength+7),re=new Uint8Array(7);return re[0]=255,re[1]=241,re[2]=d-1<<6,re[2]|=j<<2,re[2]|=(4&b)>>2,re[3]=(3&b)<<6,re[3]|=(6144&Y)>>11,re[4]=(2047&Y)>>3,re[5]=(7&Y)<<5,re[5]|=31,re[6]=252,re[6]|=3&k,s.concatUint8(re,o)},v=function(o,r){return r<o.byteLength-1&&o[r]===255&&(246&o[r+1])==240},S=function(o,r){return 1&o[r+1]?7:9},x=function(o,r){return(3&o[r+3])<<11|o[r+4]<<3|(224&o[r+5])>>>5},P=function(o){for(var r,d,b=[],k=0,j=o.byteLength;k+6<j;)v(o,k)?(r=S(o,k),d=x(o,k),b.push({audioObjectType:1+(o[2]>>>6),sampleRate:_[o[2]>>>2&15],samplingFrequencyIndex:o[2]>>>2&15,channelCount:(1&o[2])<<2|o[3]>>>6,numberOfRawDataBlocksInFrame:0,data:o.subarray(k+r,k+d)}),k+=d):k++;return b},g=(E.fromByte=function(o,r){return new E(o.read(r),r<<3)},E.prototype.skip=function(o){this.offset+=o},E.prototype.read=function(o){var r=this.len-this.offset-o;if(0<=r){for(var d=0,b=0;b<o;b++)d+=1<<b;return this.offset+=o,this.num>>>r&d}return console.warn("bit 读取位数超过限制"),0},E);function E(o,r){this.num=o,this.len=r,this.offset=0}function C(o,r,d){this.dv=new DataView(o),this.offset=r||this.dv.byteOffset,this.start=this.offset,this.end=d?this.start+d:this.dv.byteLength}A.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},A.createVVCAnnexbStartCode=function(){return new Uint8Array([0,0,1])},A.createAVCCStartCode=function(o){return new Uint8Array([o>>24&255,o>>16&255,o>>8&255,255&o])},A.extractAVCCNAL=function(o,r){for(var d,b=[],k=new s(o.buffer,o.byteOffset,o.byteLength);k.unreadLength>r;){if((d=k.read(r+1))<=0||d>k.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",r,"size:",d);break}var j=k.offset-k.start;b.push(o.subarray(j,j+d)),k.skip(d)}return b},A.extractAnnexbNAL=function(o){for(var r=o.byteLength,d=[],b=0;b<r-3;)o[b]===0?o[b+1]===0?o[b+2]===0?o[b+3]===0?b++:(o[b+3]===1&&b+4<r&&d.push({prefixStart:b,start:b+4}),b+=4):(o[b+2]===1&&d.push({prefixStart:b,start:b+3}),b+=3):b+=2:b++;return d.length?d.map(function(k,j){return j=d[j+1],j?o.subarray(k.start,j.prefixStart):o.subarray(k.start)}):[]};var R=A;function A(){}var L,N;L=function(o,r){return(L=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},(K=N=N||{})[K.UNUSED=0]="UNUSED",K[K.NON_IDR_SLICE=1]="NON_IDR_SLICE",K[K.DP_A=2]="DP_A",K[K.DP_B=3]="DP_B",K[K.DP_C=4]="DP_C",K[K.IDR=5]="IDR",K[K.SEI=6]="SEI",K[K.SPS=7]="SPS",K[K.PPS=8]="PPS",K[K.DIVIDER=9]="DIVIDER",K[K.SEQUENCE_END=10]="SEQUENCE_END",K[K.STREAM_END=11]="STREAM_END",K[K.FILL=12]="FILL";var I,M,H=function(o){function r(re){var Y=o.call(this)||this,re=new g(re.read(1),8);return Y.forbiddenZeroBit=re.read(1),Y.nalRefIdc=re.read(2),Y.nalType=re.read(5),Y}var d=r,b=o;if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function k(){this.constructor=d}return L(d,b),d.prototype=b===null?Object.create(b):(k.prototype=b.prototype,new k),r.extractNALType=function(j){return 31&j[0]},r.isSlice=function(j){return j=this.extractNALType(j),j>=N.NON_IDR_SLICE&&j<=N.IDR},r}(R),K=(M=function(o,r){return(M=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}M(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)});(ue=I=I||{})[ue.TRAIL_N=0]="TRAIL_N",ue[ue.TRAIL_R=1]="TRAIL_R",ue[ue.TSA_N=2]="TSA_N",ue[ue.TSA_R=3]="TSA_R",ue[ue.STSA_N=4]="STSA_N",ue[ue.STSA_R=5]="STSA_R",ue[ue.RADL_N=6]="RADL_N",ue[ue.RADL_R=7]="RADL_R",ue[ue.RASL_N=8]="RASL_N",ue[ue.RASL_R=9]="RASL_R",ue[ue.VCL_N10=10]="VCL_N10",ue[ue.VCL_R11=11]="VCL_R11",ue[ue.VCL_N12=12]="VCL_N12",ue[ue.VCL_R13=13]="VCL_R13",ue[ue.VCL_N14=14]="VCL_N14",ue[ue.VCL_R15=15]="VCL_R15",ue[ue.BLA_W_LP=16]="BLA_W_LP",ue[ue.BLA_W_RADL=17]="BLA_W_RADL",ue[ue.BLA_N_LP=18]="BLA_N_LP",ue[ue.IDR_W_RADL=19]="IDR_W_RADL",ue[ue.IDR_N_LP=20]="IDR_N_LP",ue[ue.CRA=21]="CRA",ue[ue.VPS=32]="VPS",ue[ue.SPS=33]="SPS",ue[ue.PPS=34]="PPS",ue[ue.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",ue[ue.EOS=36]="EOS",ue[ue.EOB=37]="EOB",ue[ue.FILLER_DATA=38]="FILLER_DATA",ue[ue.SEI=39]="SEI",ue[ue.SEI_SUFFIX=40]="SEI_SUFFIX",ue[ue.INVALID=64]="INVALID",K(q,J=R),q.extractNALType=function(o,r){return(126&o[r=r===void 0?0:r])>>1},q.isNonRefNALType=function(o){switch(o){case I.TRAIL_N:case I.STSA_N:case I.RADL_N:case I.RASL_N:case I.VCL_N10:case I.VCL_N12:case I.VCL_N14:return!0;default:return!1}},q.isNonRef=function(o){return this.isNonRefNALType(this.extractNALType(o))},q.isSlice=function(o){return o=this.extractNALType(o),o>=I.TRAIL_N&&o<=I.CRA},q.littleEndian=function(){var o=new ArrayBuffer(2);return new DataView(o).setInt16(0,256,!0),new Int16Array(o)[0]===256},q.parseHVCVideoData=function(o,r){for(var d=o.byteLength,b=new DataView(o.buffer,o.byteOffset,o.byteLength),k=[],j=0,Y=0+r,re=this.littleEndian,de=!1;j<d;){if(d<=j+4){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+Y+", offset = "+j+", dataSize = "+d);break}var ge=b.getUint32(j,!re);if(d-4<ge)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+Y+", NaluSize > DataSize!");var Se=b.getUint8(j+4)>>1&63,we=(16<=Se&&Se<=23&&(de=!0),0+j+4),Se={type:Se,data:o.subarray(we,we+ge)};k.push(Se),j+=4+ge}return{keyframe:de,units:k}};var O,z,J,U=q,ue=(z=function(o,r){return(z=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}z(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)});function q(d){var r=J.call(this)||this,d=new g(d.read(2),16);return r.forbiddenZeroBit=d.read(1),r.nalType=d.read(6),r.nhLayerId=d.read(6),r.nhTimeId=d.read(3),r}(K=O=O||{})[K.VVC_TRAIL_NUT=0]="VVC_TRAIL_NUT",K[K.VVC_STSA_NUT=1]="VVC_STSA_NUT",K[K.VVC_RADL_NUT=2]="VVC_RADL_NUT",K[K.VVC_RASL_NUT=3]="VVC_RASL_NUT",K[K.VVC_RSV_VCL_4=4]="VVC_RSV_VCL_4",K[K.VVC_RSV_VCL_5=5]="VVC_RSV_VCL_5",K[K.VVC_RSV_VCL_6=6]="VVC_RSV_VCL_6",K[K.VVC_IDR_W_RADL=7]="VVC_IDR_W_RADL",K[K.VVC_IDR_N_LP=8]="VVC_IDR_N_LP",K[K.VVC_CRA_NUT=9]="VVC_CRA_NUT",K[K.VVC_GDR_NUT=10]="VVC_GDR_NUT",K[K.VVC_RSV_IRAP_11=11]="VVC_RSV_IRAP_11",K[K.VVC_OPI_NUT=12]="VVC_OPI_NUT",K[K.VVC_DCI_NUT=13]="VVC_DCI_NUT",K[K.VVC_VPS_NUT=14]="VVC_VPS_NUT",K[K.VVC_SPS_NUT=15]="VVC_SPS_NUT",K[K.VVC_PPS_NUT=16]="VVC_PPS_NUT",K[K.VVC_PREFIX_APS_NUT=17]="VVC_PREFIX_APS_NUT",K[K.VVC_SUFFIX_APS_NUT=18]="VVC_SUFFIX_APS_NUT",K[K.VVC_PH_NUT=19]="VVC_PH_NUT",K[K.VVC_AUD_NUT=20]="VVC_AUD_NUT",K[K.VVC_EOS_NUT=21]="VVC_EOS_NUT",K[K.VVC_EOB_NUT=22]="VVC_EOB_NUT",K[K.VVC_PREFIX_SEI_NUT=23]="VVC_PREFIX_SEI_NUT",K[K.VVC_SUFFIX_SEI_NUT=24]="VVC_SUFFIX_SEI_NUT",K[K.VVC_FD_NUT=25]="VVC_FD_NUT",K[K.VVC_RSV_NVCL_26=26]="VVC_RSV_NVCL_26",K[K.VVC_RSV_NVCL_27=27]="VVC_RSV_NVCL_27",K[K.VVC_UNSPEC_28=28]="VVC_UNSPEC_28",K[K.VVC_UNSPEC_29=29]="VVC_UNSPEC_29",K[K.VVC_UNSPEC_30=30]="VVC_UNSPEC_30",K[K.VVC_UNSPEC_31=31]="VVC_UNSPEC_31",ue(ee,V=R),ee.parseNaluHeader=function(o){return{nuh_layer_id:63&o[0],nal_unit_type:o[1]>>3&31,nuh_temporal_id_plus1:7&o[1]}},ee.extractNALType=function(o){return this.parseNaluHeader(o).nal_unit_type},ee.isNonRefNALType=function(o){switch(o){case O.VVC_IDR_W_RADL:case O.VVC_IDR_N_LP:return!0;default:return!1}},ee.isNonRef=function(o){return this.isNonRefNALType(this.extractNALType(o))},ee.isSlice=function(o){return o=this.extractNALType(o),o<=O.VVC_RASL_NUT||o>=O.VVC_IDR_W_RADL&&o<=O.VVC_GDR_NUT},ee.littleEndian=function(){var o=new ArrayBuffer(2);return new DataView(o).setInt16(0,256,!0),new Int16Array(o)[0]===256},ee.parseHVCVideoData=function(o,r){for(var d=o.byteLength,b=new DataView(o.buffer,o.byteOffset,o.byteLength),k=[],j=0,Y=0+r,re=this.littleEndian,de=!1;j<d;){if(d<=j+4){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+Y+", offset = "+j+", dataSize = "+d);break}var ge=b.getUint32(j,!re);if(d-4<ge)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+Y+", NaluSize > DataSize!");var Se=b.getUint8(j+4)>>1&63,we=(16<=Se&&Se<=23&&(de=!0),0+j+4),Se={type:Se,data:o.subarray(we,we+ge)};k.push(Se),j+=4+ge}return{keyframe:de,units:k}};var V,X=ee,K=c(307),B=c.n(K);function ee(d){var r=V.call(this)||this,d=d.readToUint8(2),d={nuh_layer_id:63&d[0],nal_unit_type:d[1]>>3&31,nuh_temporal_id_plus1:7&d[1]};return r.forbiddenZeroBit=0,r.nalType=d.nal_unit_type,r.nhLayerId=d.nuh_layer_id,r.nhTimeId=d.nuh_temporal_id_plus1,r}function G(o,r){var d=!1;return Object.keys(r).forEach(function(b){B()(o[b],r[b])||(o[b]=r[b],d=!0)}),d}function F(o){return o<10?"0"+o:o}var ue=c(775),W=c.n(ue),Z=typeof performance<"u"&&typeof performance.now=="function";function ae(){return(Z?performance:Date).now()}var _e;(K=_e=_e||{})[K.TRACE=-1]="TRACE",K[K.DEBUG=0]="DEBUG",K[K.LOG=1]="LOG",K[K.INFO=2]="INFO",K[K.WARN=10]="WARN",K[K.ERROR=11]="ERROR",K[K.NONE=1e3]="NONE";var le,he,be,te,D,Q=_e.INFO,ne=_e.ERROR,pe=2e3,ce=ae(),fe=[],xe=0,Ee=(vt.prototype._print=function(o,r){var d,b,k,j,Y,re,de,ge;Q<=o&&(d=ae()-ce,k="[".concat(_e[o],"][").concat(this.name,"][").concat((b=d,(k=!0)===void 0&&(k=!0),ge=Math.floor(b/1e3),k=k!==void 0&&k,((j=ge)===1/0?j:(re=Math.floor(j/60),re-=60*(Y=Math.floor(re/60)),j=Math.floor(j-60*(60*Y+re)),de=[],(k||0<Y)&&de.push(F(Y)),de.push(F(re)),de.push(F(j)),de.join(":")))+"."+Math.floor(1e3*(b-1e3*ge))),"]"),fe.push({id:xe++,level:o,name:this.name,timestamp:d,args:r,prefix:k,message:""}),fe.length>pe&&fe.shift(),ne<=o)&&(Y=(_e[o]||"").toLowerCase(),re=console[Y])&&re.apply(void 0,function(we,Se,Ce){if(arguments.length===2)for(var We,De=0,Ue=Se.length;De<Ue;De++)!We&&De in Se||((We=We||Array.prototype.slice.call(Se,0,De))[De]=Se[De]);return we.concat(We||Array.prototype.slice.call(Se))}([k],r,!1))},vt.prototype.getLogs=function(){return fe.map(function(o){return o.message=o.prefix+" "+o.args.map(function(r){return typeof r=="string"?r:W()(r)}).join(" "),o})},vt.prototype.clear=function(){fe=[]},vt.prototype.setSize=function(o){pe=o},vt.prototype.setLevel=function(o){Q=o},vt.prototype.getLevel=function(){return Q},vt.prototype.setPrintLevel=function(o){ne=o},vt.prototype.reset=function(){Q=_e.INFO,ne=_e.ERROR,pe=2e3,ce=ae(),fe=[],xe=0},vt.LogLevel=_e,vt),ve=(new Ee("common"),new Ee("demuxer")),Te=(lt.prototype.loadWord=function(){var o=this.data,b=this.bytesAvailable,r=o.byteLength-b,d=new Uint8Array(4),b=Math.min(4,b);if(b===0)throw new Error("no bytes available");d.set(o.subarray(r,r+b)),this.word=new DataView(d.buffer).getUint32(0),this.bitsAvailable=8*b,this.bytesAvailable-=b},lt.prototype.skipBits=function(o){var r;this.bitsAvailable>o||(o=(o-=this.bitsAvailable)-((r=o>>3)<<3),this.bytesAvailable-=r,this.loadWord()),this.word<<=o,this.bitsAvailable-=o},lt.prototype.readBits=function(o){var r=Math.min(this.bitsAvailable,o),d=this.word>>>32-r;return 32<o&&ve.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,0<this.bitsAvailable?this.word<<=r:0<this.bytesAvailable&&this.loadWord(),0<(r=o-r)&&this.bitsAvailable?d<<r|this.readBits(r):d},lt.prototype.skipLZ=function(){for(var o=0;o<this.bitsAvailable;++o)if(this.word&2147483648>>>o)return this.word<<=o,this.bitsAvailable-=o,o;return this.loadWord(),o+this.skipLZ()},lt.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},lt.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},lt.prototype.readUEG=function(){var o=this.skipLZ();return this.readBits(o+1)-1},lt.prototype.readEG=function(){var o=this.readUEG();return 1&o?1+o>>>1:-1*(o>>>1)},lt.prototype.readUByte=function(){return this.readBits(8)},lt.prototype.readUShort=function(){return this.readBits(16)},lt.prototype.readUInt=function(){return this.readBits(32)},lt.prototype.skipScalingList=function(o){for(var r=8,d=8,b=0;b<o;b++)r=(d=d!==0?(r+this.readEG()+256)%256:d)===0?r:d},lt),Ie=[100,110,122,244,44,83,86,118,128,138,144],ke=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],Ae=(Pt.generateCodec=function(o){return"avc1."+[o.generalProfileIdc,o.generalProfileCompatibility,o.generalLevelIdc].map(function(r){return(r=r.toString(16)).length<2?"0"+r:r}).join("")},Pt),Ne=[1,2,2,1],qe=[1,2,1,1],it=[1,2,2,1],Qe=[1,2,1,1],ht=(ft.generateCodec=function(o){var r=["hvc1"],d=o.generalProfileSpace;r.push((0<d&&d<4?String.fromCharCode(64+d):"")+o.generalProfileIdc.toString()),r.push(o.generalProfileCompatibilityFlags.reverse().reduce(function(re,de){return re<<1|de},0).toString(16)),r.push((o.generalTierFlag?"H":"L")+o.generalLevelIdc);for(var b=!1,k=[],j=5;0<=j;j--){var Y=o.generalConstraintIndicatorFlags[j];(Y||b)&&(k.unshift(Y.toString(16)),b=!0)}return r.concat(k).join(".")},ft),Et=function(o){this.log2CtuSizeMinus5=0,this.ptlDpbHrdParamsPresentFlag=0,this.gdrEnabledFlag=0,this.refPicResamplingEnabledFlag=0,this.resChangeInClvsAllowedFlag=0,this.picWidthMaxInLumasamples=0,this.picHeightMaxInLumasamples=0,this.conformanceWindowFlag=0,this.profileTierPresentFlag=0,this.generalProfileIdc=0,this.generalTierFlag=0,this.generalLevelIdc=0,this.ptlFrameOnlyConstraintFlag=0,this.ptlMultiLayerEnabledFlag=0,this.subLayerProfilePresentFlags=[],this.ptlSubLayerLevelPresentFlags=[],this.subLayerLevelIdc=[],this.ptlNumSubProfiles=0,this.generalSubProfileIdc=[],this.gciPresentFlag=0,this.width=0,this.height=0,this.pixelRatio=[],this.codec="vvc1.1.L48.CA";var r,d,b,k=new Te(o),j=0;if(this.spsId=k.readBits(4),this.vpsId=k.readBits(4),this.maxSubLayersMinus1=k.readBits(3),this.chromaFormatIdc=k.readBits(2),this.log2CtuSizeMinus5=k.readBits(2),this.ptlDpbHrdParamsPresentFlag=k.readBits(1),j+=16,this.ptlDpbHrdParamsPresentFlag){if(this.profileTierPresentFlag=1,this.profileTierPresentFlag&&(this.generalProfileIdc=k.readBits(7),this.generalTierFlag=k.readBits(1),j+=8),this.generalLevelIdc=k.readBits(8),j+=8,this.ptlFrameOnlyConstraintFlag=k.readBits(1),this.ptlMultiLayerEnabledFlag=k.readBits(1),j+=2,this.profileTierPresentFlag&&(this.gciPresentFlag=k.readBits(1),j+=1,this.gciPresentFlag)){k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=3,k.skipBits(4),k.skipBits(2),j+=6,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=10,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=6,k.skipBits(2),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=5,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=6,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=16,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=13,k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=6;for(var Y=k.readBits(8),re=(j+=8,0),de=(5<Y&&(k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),k.skipBits(1),j+=6,re=6),0),de=0;de<Y-re;de++)k.skipBits(1),j+=1}var o=8-j%8;for(k.skipBits(o),j+=o,de=this.maxSubLayersMinus1-1;0<=de;de--)this.ptlSubLayerLevelPresentFlags[de]=k.readBits(1),j+=1;for(k.skipBits(o=8-j%8),j+=o,de=this.maxSubLayersMinus1-1;0<=de;de--)this.ptlSubLayerLevelPresentFlags[de]&&(this.subLayerLevelIdc[de]=k.readBits(8),j+=8);if(this.profileTierPresentFlag)for(this.ptlNumSubProfiles=k.readBits(8),de=0;de<this.ptlNumSubProfiles;de++)this.generalSubProfileIdc[de]=k.readBits(32),j+=32}this.gdrEnabledFlag=k.readBits(1),this.refPicResamplingEnabledFlag=k.readBits(1),j+=2,this.refPicResamplingEnabledFlag&&(this.resChangeInClvsAllowedFlag=k.readBits(1),j+=1),this.picWidthMaxInLumasamples=k.readUEG(),this.picHeightMaxInLumasamples=k.readUEG(),j+=16,this.conformanceWindowFlag=k.readBits(1),j+=1,this.width=this.picWidthMaxInLumasamples,this.height=this.picHeightMaxInLumasamples,this.conformanceWindowFlag&&(o=it[this.chromaFormatIdc],b=Qe[this.chromaFormatIdc],r=k.readUEG()*o,o=k.readUEG()*o,d=k.readUEG()*b,b=k.readUEG()*b,this.width-=r+o,this.height-=d+b)};function ft(o){var r=this;this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibilityFlags=[],this.generalConstraintIndicatorFlags=[],this.subLayerProfilePresentFlags=[],this.subLayerLevelPresentFlags=[],this.separateColourPlaneFlag=0,this.pixelRatio=[],this.codec="",this.checkProfileIdc=function(re){return r.generalProfileIdc===re||r.generalProfileCompatibilityFlags[re]};var d,b,k,j,Y=new Te(o);for(this.vpsId=Y.readBits(4),this.maxSubLayersMinus1=Y.readBits(3),this.temporalIdNestingFlag=Y.readBits(1),this.generalProfileSpace=Y.readBits(2),this.generalTierFlag=Y.readBits(1),this.generalProfileIdc=Y.readBits(5),d=0;d<32;d++)this.generalProfileCompatibilityFlags[d]=Y.readBits(1),this.generalProfileIdc===0&&0<d&&this.generalProfileCompatibilityFlags[d]&&(this.generalProfileIdc=d);for(d=0;d<6;d++)this.generalConstraintIndicatorFlags.push(Y.readUByte());for(this.generalLevelIdc=Y.readUByte(),d=0;d<this.maxSubLayersMinus1;d++)this.subLayerProfilePresentFlags[d]=Y.readBits(1),this.subLayerLevelPresentFlags[d]=Y.readBits(1);for(0<this.maxSubLayersMinus1&&Y.skipBits(2*(8-this.maxSubLayersMinus1)),d=0;d<this.maxSubLayersMinus1;d++)this.subLayerProfilePresentFlags[d]&&Y.skipBits(48),this.subLayerLevelPresentFlags[d]&&Y.readUByte();this.spsId=Y.readUEG(),this.codec=ft.generateCodec(this),this.chromaFormatIdc=Y.readUEG(),this.chromaFormatIdc===3&&(this.separateColourPlaneFlag=Y.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),this.width=Y.readUEG(),this.height=Y.readUEG(),Y.readBits(1)&&(o=Ne[this.chromaFormatIdc],j=qe[this.chromaFormatIdc],b=Y.readUEG()*o,o=Y.readUEG()*o,k=Y.readUEG()*j,j=Y.readUEG()*j,this.width-=b+o,this.height-=k+j)}function Pt(j){this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibility=0,this.crop=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.cropBottom=0,this.pixelRatio=[],this.codec="";var r,d,b=new Te(j);if(this.generalProfileIdc=b.readUByte(),this.generalProfileCompatibility=b.readUByte(),this.generalLevelIdc=b.readUByte(),this.spsId=b.readUEG(),this.codec=Pt.generateCodec(this),-1<Ie.indexOf(this.generalProfileIdc)){if(this.chromaFormatIdc=b.readUEG(),this.chromaFormatIdc===3&&b.skipBits(1),b.skipUEG(),b.skipUEG(),b.skipBits(1),b.readBits(1))for(r=0,d=this.chromaFormatIdc!==3?8:12;r<d;r++)b.readBits(1)&&(r<6?b.skipScalingList(16):b.skipScalingList(64))}else this.chromaFormatIdc=1;if(b.skipUEG(),j=b.readUEG(),j===0)b.skipUEG();else if(j===1)for(b.skipBits(1),b.skipEG(),b.skipEG(),r=0,d=b.readUEG();r<d;r++)b.skipEG();b.skipUEG(),b.skipBits(1);var k,j=b.readUEG()+1,Y=b.readUEG()+1,re=b.readBits(1);re||b.skipBits(1),this.height=Y*(2-re),b.skipBits(1),this.crop=b.readBits(1),this.crop&&(k=1<<(this.chromaFormatIdc===1||this.chromaFormatIdc===2?1:0),re=2-re<<(this.chromaFormatIdc===1?1:0),this.cropLeft=b.readUEG()*k,this.cropRight=b.readUEG()*k,this.cropTop=b.readUEG()*re,this.cropBottom=b.readUEG()*re),this.width=16*j-(this.cropRight+this.cropLeft),this.height=16*Y-(this.cropTop+this.cropBottom),b.readBits(1)&&b.readBits(1)&&((k=b.readUByte())===255?(this.pixelRatio[0]=b.readUByte()<<8|b.readUByte(),this.pixelRatio[1]=b.readUByte()<<8|b.readUByte()):k<ke.length&&(this.pixelRatio=ke[k]))}function lt(o){this.data=o,this.bytesAvailable=o.byteLength,this.word=0,this.bitsAvailable=0}function vt(o){var r=this;this.trace=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return r._print(_e.TRACE,d)},this.debug=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return r._print(_e.DEBUG,d)},this.log=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return r._print(_e.LOG,d)},this.info=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return r._print(_e.INFO,d)},this.warn=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return r._print(_e.WARN,d)},this.error=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return r._print(_e.ERROR,d)},this.name=o}(ue=le=le||{})[ue.NONE=-16]="NONE",ue[ue.DEFAULT=0]="DEFAULT",ue[ue.NONREF=8]="NONREF",ue[ue.BIDIR=16]="BIDIR",ue[ue.NONINTRA=24]="NONINTRA",ue[ue.NONKEY=32]="NONKEY",ue[ue.ALL=48]="ALL",(K=he=he||{})[K.ABORTED=1]="ABORTED",K[K.NETWORK=2]="NETWORK",K[K.DECODE=3]="DECODE",K[K.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",K[K.PARSER=1001]="PARSER",K[K.WEBGL_NOT_SUPPORTED=10005]="WEBGL_NOT_SUPPORTED",K[K.COROUTINE=20001]="COROUTINE",K[K.BUFFERING=20003]="BUFFERING",K[K.RENDERER=20005]="RENDERER",(ue=be=be||{}).VIDE="vide",ue.SOUN="soun",(K=te=te||{})[K.FLV=0]="FLV",K[K.MP4=1]="MP4",K[K.HLS=2]="HLS",K[K.MPEGTS=3]="MPEGTS",K[K.UNKNOWN=4]="UNKNOWN",(ue=D=D||{})[ue.UNKNOWN=0]="UNKNOWN",ue[ue.VIDEO=1]="VIDEO",ue[ue.AUDIO=2]="AUDIO";function ct(o,r){var d=o.offset;this.start=r,this.size=o.read(4),this.type=String.fromCharCode(o.read(1),o.read(1),o.read(1),o.read(1)).trim(),this.size===1&&(this.size=o.read(8)),this.length=o.offset-d}(K={})[be.VIDE]=D.VIDEO,K[be.SOUN]=D.AUDIO;var dt,At=K,K=((ue=dt=dt||{})[ue.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",ue[ue.IS_NON_SYNC=65536]="IS_NON_SYNC",ue[ue.PADDING_MASK=917504]="PADDING_MASK",ue[ue.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",ue[ue.DEPENDED_MASK=12582912]="DEPENDED_MASK",ue[ue.DEPENDS_MASK=50331648]="DEPENDS_MASK",ue[ue.DEPENDS_NO=33554432]="DEPENDS_NO",ue[ue.DEPENDS_YES=16777216]="DEPENDS_YES",Ot=function(o,r){return(Ot=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Ot(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}),Jt=function(){return(Jt=Object.assign||function(o){for(var r,d=1,b=arguments.length;d<b;d++)for(var k in r=arguments[d])Object.prototype.hasOwnProperty.call(r,k)&&(o[k]=r[k]);return o}).apply(this,arguments)},ir=new Date("1904-01-01T00:00:00Z").getTime(),Je=(Zt.prototype.append=function(o){this.children.push(o)},Zt.mapBoxToJSON=function(o){return Jt({box:o},o.children.reduce(function(r,j){var b=j.header.type,k=r[b],j=Zt.mapBoxToJSON(j);return k?Array.isArray(k)?k.push(j):r[b]=[k,j]:r[b]=j,r},{}))},Zt),Ut=(K(Lt,mr=Je),Lt);Wt=function(o,r){return(Wt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Wt(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(br,nr=Je);var sr=br;Gt=function(o,r){return(Gt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)};function jt(o){for(var r=o.byteLength,d=[],b=1;b<r-2;)o[b]===0&&o[b+1]===0&&o[b+2]===3?d.push(b+=2):b++;if(d.length===0)return o;for(var k=r-d.length,j=new Uint8Array(k),Y=0,b=0;b<k;Y++,b++)Y===d[0]&&(Y++,d.shift()),j[b]=o[Y];return j}(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Gt(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)})(Xt,Vt=Je);var Vt,Gt,nr,Wt,mr,Ot,Ht=Xt;function Xt(o,r){var d,b=Vt.call(this,o,r)||this;b.nalus=[],b.vps=[],b.sps=[],b.pps=[],b.sei=[],b.configVersion=r.read(1),d=new g(r.read(1),8),b.generalProfileSpace=d.read(2),b.generalTierFlag=d.read(1),b.generalProfileIdc=d.read(5),d=new g(r.read(4),32),b.generalProfileCompatibilityFlags=Array.from(new Array(32)).map(function(){return d.read(1)}),b.generalConstraintIndicatorFlags=Array.from(new Array(6)).map(function(){return r.read(1)}),b.generalLevelIdc=r.read(1),b.minSpatialSegmentationIdc=4095&r.read(2),b.parallelismType=3&r.read(1),b.chromaFormatIdc=3&r.read(1),b.bitDepthLumaMinus8=7&r.read(1),b.bitDepthChromaMinus8=7&r.read(1),b.avgFrameRate=r.read(2),d=new g(r.read(1),8),b.constantFrameRate=d.read(2),b.numTemporalLayers=d.read(3),b.temporalIdNested=d.read(1),b.lengthSizeMinusOne=d.read(2),b.nalus=[];for(var k=r.read(1),j=0;j<k;j++){var Y=[],re=(d=new g(r.read(1),8)).read(1);d.read(1);for(var de=d.read(6),ge=r.read(2),we=0;we<ge;we++)Y.push(new Uint8Array(r.read(2)).map(function(){return r.read(1)}));b.nalus.push({completeness:re,type:de,data:Y}),de===I.VPS?Y.forEach(function(Se){return b.vps.push(Se)}):de===I.SPS?Y.forEach(function(Se){return b.sps.push(Se)}):de===I.PPS?Y.forEach(function(Se){return b.pps.push(Se)}):de===I.SEI&&Y.forEach(function(Se){return b.sei.push(Se)})}return b.codec=ht.generateCodec(b),b}function br(o,r){var d=nr.call(this,o,r)||this;d.sps=[],d.pps=[],d.configVersion=r.read(1),d.generalProfileIdc=r.read(1),d.generalProfileCompatibility=r.read(1),d.generalLevelIdc=r.read(1),d.lengthSizeMinusOne=3&r.read(1),d.numOfSequenceParameterSets=31&r.read(1);for(var b,j=0,k=[],j=0;j<d.numOfSequenceParameterSets;j++){for(b=r.read(2),k=[];b--;)k.push(r.read(1));d.sps.push(new Uint8Array(k))}for(d.numOfPictureParameterSets=31&r.read(1),j=0;j<d.numOfPictureParameterSets;j++){for(b=r.read(2),k=[];b--;)k.push(r.read(1));d.pps.push(new Uint8Array(k))}return d.codec=Ae.generateCodec(d),d}function Lt(o,r){return o=mr.call(this,o,r)||this,o.version=r.read(1),o.flag=r.read(3),o}function Zt(o,r){this.children=[],this.isContainer=!1,this.toStandardTime=function(d){return d&&ir+1e3*d},this.header=o}function oe(){var o=this;this._eventMap={},this.listeners=function(r){return o._eventMap[r]||[]},this.emit=function(r,d){return r=o._eventMap[r],!!Array.isArray(r)&&(r.forEach(function(b){return b(d)}),!0)},this.off=function(r,d){var b=o._eventMap[r];return Array.isArray(b)&&(o._eventMap[r]=b.filter(function(k){return k!==d})),o},this.removeAllListeners=function(r){return r===void 0?o._eventMap={}:o._eventMap[r]&&(o._eventMap[r]=[]),o},this.on=function(r,d){return o._eventMap[r]?o._eventMap[r].push(d):o._eventMap[r]=[d],o},this.once=function(r,d){return o.on(r,function b(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];o.off(r,b),d.apply(o,k)}),o},this.proxy=function(r,d){d.forEach(function(b){o.on(b,function(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];k.unshift(b),r.emit.apply(r,k)})})},this.proxyOnce=function(r,d){d.forEach(function(b){o.once(b,function(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];k.unshift(b),r.emit.apply(r,k)})})}}Pe=function(o,r){return(Pe=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)};var se,Pe,je,_t,et,ue=function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Pe(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)},bt=((K=se=se||{})[K.IDLE=0]="IDLE",K[K.LOADING=1]="LOADING",K[K.SUSPENGING=2]="SUSPENGING",K[K.ERROR=3]="ERROR",_t=Error,ue(Oe,_t),Oe),ie=(ue(me,je=oe),Object.defineProperty(me.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),me.prototype._changeStatus=function(o){this.status!==o&&(ve.log("loader status changed: ".concat(se[this.status]," -> ").concat(se[o])),this.status=o)},me.prototype.jump=function(o){this.offset=o},me.prototype.load=function(o,r,d){return this.reset(),this.url=o,this.loadRange(r,d)},me.prototype.resume=function(){return this.loadRange(this.offset)},me.prototype.suspend=function(){var o=this.status;this._abort(),o===se.LOADING&&(this._changeStatus(se.SUSPENGING),this.emit("suspend",void 0))},me.prototype.abort=function(){var o=this.status;this._abort(),o!==se.SUSPENGING&&o!==se.LOADING||this.emit("abort",void 0)},me.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},me.prototype.destroy=function(){this.removeAllListeners(),this.reset()},me),ye={isIos:!1,isDingtalk:!1,isQQBrowser:!1},K=(window.navigator.userAgent||"").toLowerCase();function me(o){o===void 0&&(o={});var r=je.call(this)||this;return r.timeout=15e3,r.total=1/0,r.offset=0,r.status=se.IDLE,r.url="",r._handleError=function(d){d.name!=="AbortError"&&(r._changeStatus(se.ERROR),r.emit("error",{code:he.NETWORK,message:d.message,origin:d}))},r.timeout=o.timeout||r.timeout,r}function Oe(o){return _t.call(this,o)||this}/(iPhone\sOS)\s([\d_]+)/i.test(K)&&(ye.isIos=!0),-1<K.indexOf("dingtalk")?ye.isDingtalk=!0:-1<K.indexOf("qqbrowser")&&(ye.isQQBrowser=!0),Ze=function(o,r){return(Ze=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Ze(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Tt,yt=ie),Tt.isSupported=function(){return ye.isIos&&(ye.isDingtalk||ye.isQQBrowser)?(console.log("ios","isDingtalk",ye.isDingtalk,"isQQBrowser",ye.isQQBrowser),!1):typeof AbortController<"u"&&typeof ReadableStream<"u"},Tt.prototype.loadRange=function(o,r){var d=this;if(o===void 0&&(o=0),r===void 0&&(r=1/0),!this.url||o>=this.total||this.status===se.LOADING||this.status===se.ERROR)return u.resolve(!1);ve.info("执行load, ".concat(this.total," from=").concat(o," to=").concat(r," url=").concat(this.url)),this.abort();var b=new Headers,k=0<o||r<1/0;return k&&(r=Math.min(this.total-1,r),b.set("Range","bytes=".concat(o,"-").concat(r===1/0?"":r))),this._changeStatus(se.LOADING),this.controller=new AbortController,this.emit("loadstart",void 0),this.timer=setTimeout(this.triggerTimeout,this.timeout),fetch(this.url,{method:"GET",headers:b,signal:this.controller.signal}).then(function(j){if(clearTimeout(d.timer),200<=j.status&&j.status<300){var Y;if(d.offset=o,k?(re=j.headers.get("Content-Range")||"",d.total=Number(re.split("/")[1])||d.total):d.total=Number(j.headers.get("Content-Length"))||d.total,j.body)return Y=j.body.getReader(),function de(){return Y.read().then(function(ge){return ge.done?(d.total===1/0&&(d.total=d.offset),d.controller=null,d._changeStatus(se.IDLE),d.emit("loadend",void 0),!0):(d.offset+=ge.value.byteLength,d.emit("progress",{offset:d.offset-ge.value.byteLength,data:ge.value}),de())})}();if(j.arrayBuffer)return j.arrayBuffer().then(function(de){return d.offset+=de.byteLength,d.emit("progress",{offset:d.offset-de.byteLength,data:new Uint8Array(de)}),d.controller=null,d._changeStatus(se.IDLE),d.emit("loadend",void 0),!0})}var re=new bt("媒体流数据不存在: ".concat(d.url));throw re.response=j,re}).catch(function(j){return clearTimeout(d.timer),d._handleError(j),!1})},ue=Tt,St=function(o,r){return(St=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}St(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(st,ot=ie),st.prototype._abort=function(){var o=this.xhr;o&&(o.onerror=null,o.onprogress=null,o.onloadend=null,o.onreadystatechange=null,o.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(se.IDLE)},st.prototype.loadRange=function(o,r){var d=this;return o===void 0&&(o=0),r===void 0&&(r=1/0),!this.url||o>=this.total||this.status===se.LOADING||this.status===se.ERROR?u.resolve(!1):(this.abort(),new u(function(b,k){d.xhr=new XMLHttpRequest,d._resolve=b;function j(ge){var we,Se=Y.responseText,Ce=Se.length,We=de,De=d.offset,Ue=Ce-We;0<Ue&&(d.offset+=Ue),!re&&ge&&d.total===1/0&&(d.total=d.offset),0<Ue&&(de=Ce,d.emit("progress",{offset:De,data:(we=Se.substring(We,Ce),new Uint8Array(we.length).map(function(He,Re){return we.charCodeAt(Re)}))}))}var Y=d.xhr,re=0<o||r<1/0,de=(Y.open("GET",d.url),re&&Y.setRequestHeader("Range","bytes=".concat(o,"-").concat(r===1/0?"":r)),Y.onreadystatechange=function(){var ge;Y.readyState===Y.HEADERS_RECEIVED&&200<=Y.status&&Y.status<300&&(re?(ge=Y.getResponseHeader("Content-Range")||"",d.total=Number(ge.split("/")[1])||d.total):d.total=Number(Y.getResponseHeader("Content-Length"))||d.total),Y.readyState>=Y.HEADERS_RECEIVED&&clearTimeout(d._timer)},d.offset=o,0);Y.timeout=d.timeout,Y.onprogress=function(){j(!1)},Y.onloadend=function(){j(!0),d.xhr=null,d._changeStatus(se.IDLE),d.emit("loadend",void 0),b(!0)},Y.onerror=function(ge){d.xhr=null,ge=new Error(ge.constructor.name),d._handleError(ge),k(ge)},Y.overrideMimeType("text/plain; charset=x-user-defined"),d._changeStatus(se.LOADING),d.emit("loadstart",void 0),d._timer=setTimeout(d.triggerTimeout,d.timeout),Y.send()}))};var K=st,nt=ue.isSupported()?ue:K;rt=function(o,r){return(rt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}rt(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Ke,Be=oe),Object.defineProperty(Ke.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(Ke.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),Object.defineProperty(Ke.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),Ke.probe=function(o){throw new Error("parser should implements static probe")},Ke.prototype.onProgress=function(o){},Ke.prototype.onLoadEnd=function(){},Ke.prototype.load=function(o){return this.reset(),this.loader.load(o)},Ke.prototype.suspend=function(){return this.loader.suspend()},Ke.prototype.resume=function(){return this.loader.resume()},Ke.prototype.reset=function(){this.loader.reset(),this.metadata=null},Ke.prototype.destroy=function(){this.reset(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()};var Be,rt,ot,St,yt,Ze,ue=Ke,at=(ze.BUFFER_LENGTH=9,ze);function ze(d){this.signature=String.fromCharCode(d.read(1),d.read(1),d.read(1)),this.version=d.read(1);var r=d.read(1),d=(this.size=d.read(4),new g(r,8));d.read(5),this.hasAudio=!!d.read(1),d.read(1),this.hasVideo=!!d.read(1)}function Ke(o){var r=Be.call(this)||this;return r.skipFrame=le.DEFAULT,r.metadata=null,r.options=o,r.onProgress=r.onProgress.bind(r),r.onLoadEnd=r.onLoadEnd.bind(r),r.originLoader=new nt(r.options),r.customLoader=o.loader,r.loader.on("progress",r.onProgress),r.loader.on("loadend",r.onLoadEnd),r.skipFrame=o.skipFrame||le.DEFAULT,r}function st(){var o=ot!==null&&ot.apply(this,arguments)||this;return o.xhr=null,o._timer=-1,o._resolve=function(r){},o.triggerTimeout=function(){o._abort(),o._handleError(new Error("加载超时，请重试"))},o}function Tt(){var o=yt!==null&&yt.apply(this,arguments)||this;return o.controller=null,o.timer=-1,o._abort=function(){clearTimeout(o.timer),o.controller&&!o.controller.signal.aborted&&(o.controller.abort(),o.controller=null),o._changeStatus(se.IDLE)},o.triggerTimeout=function(){o._abort(),o._handleError(new bt("加载超时，请重试"))},o}(K=et=et||{})[K.AUDIO=8]="AUDIO",K[K.VIDEO=9]="VIDEO",K[K.SCRIPT=18]="SCRIPT",or.BUFFER_LENGTH=11;var gt,er=or;function or(o){this.type=o.read(1),this.size=o.read(3),this.dts=o.read(3),this.dts|=o.read(1)<<24,o.skip(3)}(K=gt=gt||{})[K.PCM=0]="PCM",K[K.ADPCM=1]="ADPCM",K[K.MP3=2]="MP3",K[K.PCM_LE=3]="PCM_LE",K[K.NELLYMOSER_16KHZ_MONO=4]="NELLYMOSER_16KHZ_MONO",K[K.NELLYMOSER_8KHZ_MONO=5]="NELLYMOSER_8KHZ_MONO",K[K.NELLYMOSER=6]="NELLYMOSER",K[K.PCM_ALAW=7]="PCM_ALAW",K[K.PCM_MULAW=8]="PCM_MULAW",K[K.AAC=10]="AAC",K[K.SPEEX=11]="SPEEX";var Sr,kt,Dt=[5512,11025,22050,44100],kr=[8,16];(K=Sr=Sr||{})[K.MONO=0]="MONO",K[K.STEREO=1]="STEREO",(K=kt=kt||{})[K.ADTS_HEADER=0]="ADTS_HEADER",K[K.RAW=1]="RAW",ar.readAudioSpecificConfig=function(b){var b=new g(b.read(2),16),r=b.read(5),d=b.read(4),b=b.read(4);return{audioObjectType:r,sampleRate:_[d],samplingFrequencyIndex:d,channelCount:b}};var Ft,fr=ar;function ar(o){var r=new g(o.read(1),8);this.codecId=r.read(4),this.sampleRate=Dt[r.read(2)],this.sampleSize=kr[r.read(1)],this.soundType=r.read(1),this.packetType=o.read(1),this.data=o.readToUint8()}function Tr(o){var r=o.read(2);return Array.from(Array(r)).map(function(){var d=o.read(1);return 0<d?String.fromCharCode(d):""}).join("")}function Cr(d){var r=Tr(d),d=hr(d);return{key:r,value:d.value,objectEnd:d.objectEnd}}function hr(o){var r={value:null,objectEnd:!1},d=o.read(1);switch(d){case Ft.NUMBER:r.value=o.readFloat(8);break;case Ft.BOOLEAN:r.value=!!o.read(1);break;case Ft.LONG_STRING:case Ft.STRING:r.value=Tr(o);break;case Ft.OBJECT_START:r.value=function(b){for(var k={};0<b.unreadLength;){var j=Cr(b);if(j.objectEnd)break;k[j.key]=j.value}return k}(o);break;case Ft.ECMA_ARRAY:r.value=function(b){for(var k=b.read(4),j={};0<k--;){var Y=Cr(b);j[Y.key]=Y.value}return j}(o);break;case Ft.OBJECT_END:r.objectEnd=!0;break;case Ft.STRICT_ARRAY:r.value=function(b){for(var k=b.read(4),j=[];0<k--;){var Y=hr(b);j.push(Y.value)}return j}(o);break;case Ft.DATE:r.value=new Date(o.readFloat(8)+60*o.readInt(2)+1e3);break;default:console.warn("unknown AMF value type",d)}return r}(K=Ft=Ft||{})[K.NUMBER=0]="NUMBER",K[K.BOOLEAN=1]="BOOLEAN",K[K.STRING=2]="STRING",K[K.OBJECT_START=3]="OBJECT_START",K[K.NULL=5]="NULL",K[K.UNDEFINED=6]="UNDEFINED",K[K.REFERENCE=7]="REFERENCE",K[K.ECMA_ARRAY=8]="ECMA_ARRAY",K[K.OBJECT_END=9]="OBJECT_END",K[K.STRICT_ARRAY=10]="STRICT_ARRAY",K[K.DATE=11]="DATE",K[K.LONG_STRING=12]="LONG_STRING";var Yt,ur,mt,wt,_r,Ur=function(o){this.name=hr(o).value,this.value=hr(o).value};(K=Yt=Yt||{})[K.KEY=1]="KEY",K[K.INTER=2]="INTER",K[K.DISP_INTER=3]="DISP_INTER",K[K.GENERATED_KEY=4]="GENERATED_KEY",K[K.VIDEO_INFO_CMD=5]="VIDEO_INFO_CMD",(K=ur=ur||{})[K.STARTSEEK=0]="STARTSEEK",K[K.ENDSEEK=1]="ENDSEEK",(K=mt=mt||{})[K.JPEG=1]="JPEG",K[K.H263=2]="H263",K[K.SCREEN=3]="SCREEN",K[K.VP6=4]="VP6",K[K.VP6A=5]="VP6A",K[K.SCREEN2=6]="SCREEN2",K[K.H264=7]="H264",K[K.REALH263=8]="REALH263",K[K.MPEG4=9]="MPEG4",K[K.H265=12]="H265",K[K.H266=14]="H266",(K=wt=wt||{})[K.AVC_SEQUENCE_HEADER=0]="AVC_SEQUENCE_HEADER",K[K.AVC_NALU=1]="AVC_NALU",K[K.AVC_END=2]="AVC_END",K[K.COCED_FRAMES_X=3]="COCED_FRAMES_X",K[K.METADATA=4]="METADATA",K[K.MPEG2_TS_SEQUENCE_START=5]="MPEG2_TS_SEQUENCE_START",K[K.MULTI_TRACK=6]="MULTI_TRACK",(K=_r=_r||{})[K.OneTrackOneCodec=0]="OneTrackOneCodec",K[K.ManyTracksOneCodec=1]="ManyTracksOneCodec",K[K.ManyTracksManyCodecs=2]="ManyTracksManyCodecs";var tr,Er=function(o){this.videoCommand=ur.STARTSEEK,this.codecId=mt.H265,this.packetType=wt.AVC_NALU,this.cts=0,this.videoFourCC="";var r,d,b=new g(o.read(1),8);this.isExVideoHeader=b.read(1),this.type=b.read(3),this.videoFrameType=this.type,this.isExVideoHeader===0&&(this.codecId=b.read(4),this.packetType=o.read(1),this.type===Yt.VIDEO_INFO_CMD)&&(this.videoCommand=o.read(1)),this.isExVideoHeader===1&&((b=b.read(4))!=wt.METADATA&&this.videoFrameType===Yt.VIDEO_INFO_CMD?this.videoCommand=o.read(1):b==wt.MULTI_TRACK?(d=(r=new g(o.read(1),8)).read(4),b=r.read(4),d==_r.ManyTracksManyCodecs&&(String.fromCharCode(o.read(1)),this.videoFourCC=String.fromCharCode(o.read(1))+String.fromCharCode(o.read(1))+String.fromCharCode(o.read(1))+String.fromCharCode(o.read(1)))):this.videoFourCC=String.fromCharCode(o.read(1))+String.fromCharCode(o.read(1))+String.fromCharCode(o.read(1))+String.fromCharCode(o.read(1)),this.packetType=b),this.cts=o.read(3)+4286578688^4286578688,this.data=o.readToUint8()},Rt={isFirefox:!1,isOpera:!1,isTrident:!1,isEdge:!1,isChrome:!1,isSafari:!1,isMQQBrowser:!1,isMobile:!1,isIos:!1,isDingtalk:!1},K=window.navigator!==void 0,Me=K?window.navigator.userAgent:"";-1<Me.indexOf("MQQBrowser")?Rt.isMQQBrowser=!0:-1<Me.indexOf("Firefox")?Rt.isFirefox=!0:-1<Me.indexOf("Opera")||-1<Me.indexOf("OPR")?Rt.isOpera=!0:-1<Me.indexOf("Trident")?Rt.isTrident=!0:-1<Me.indexOf("Edge")?Rt.isEdge=!0:-1<Me.indexOf("Chrome")?(Rt.isChrome=!0,(Me.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1]):-1<Me.indexOf("Safari")||-1<Me.indexOf("iPhone")||-1<Me.indexOf("iPad")||-1<Me.indexOf("iPod")?Rt.isSafari=!0:-1<Me.toLowerCase().indexOf("dingtalk")&&(Rt.isDingtalk=!0),/(iPhone\sOS)\s([\d_]+)/i.test(Me)&&(Rt.isIos=!0),K&&("maxTouchPoints"in(Me=window.navigator)?Rt.isMobile=0<Me.maxTouchPoints:"msMaxTouchPoints"in Me?Rt.isMobile=0<Me.msMaxTouchPoints:(K=(K=window.matchMedia)==null?void 0:K.call(window,"(pointer:coarse)"))&&K.media==="(pointer:coarse)"?Rt.isMobile=!!K.matches:"orientation"in window?Rt.isMobile=!0:(K=Me.userAgent,Rt.isMobile=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(K)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(K))),ni=function(o,r){return(ni=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}ni(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(vn,dn=Je);var wr=vn;ii=function(o,r){return(ii=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}ii(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Qt,Fr=ue),Qt.probe=function(o){return!(o.byteLength<9)&&new at(new s(o.buffer,o.byteOffset,o.byteLength)).signature==="FLV"},Qt.prototype.parse=function(o,r){var d=[];if(o.byteLength){this.unhandleBuffer&&(o=s.concat(this.unhandleBuffer,o),r-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null);var b=new s(o);for(!this.header&&b.unreadLength>=at.BUFFER_LENGTH&&(this.header=new at(b),this.header.hasVideo===!1&&(this.header.hasVideo=!0),b.skip(this.header.size-at.BUFFER_LENGTH));b.unreadLength>4+er.BUFFER_LENGTH;){b.skip(4);var k=new er(b);if(!(b.unreadLength>=k.size)){b.back(4+er.BUFFER_LENGTH);break}var j=new s(b.buffer,b.offset,k.size);switch(b.skip(k.size),k.type){case et.VIDEO:d=d.concat(this.parseVideoBody(k,j,b.offset+r));break;case et.AUDIO:d=d.concat(this.parseAudioBody(k,j,b.offset+r));break;case et.SCRIPT:this.parseScriptBody(k,j);break;default:return ve.warn("unknown tag type",k.type),d}}this.unhandleBuffer=b.unreadLength?b.readToBuffer():null}return d},Qt.prototype.checkMetadata=function(){var o=this.flvMetadata,r=this.header;if(console.log("checkMetadata flvMetadata:",o,"header:",r,", this.metadata:",this.metadata),r&&!this.metadata){var d=[];if(r.hasVideo){if(!this.videoTrackMeta||!this.videoLoaded)return void console.log("checkMetadata hasVideo no this.videoTrackMeta",this.videoTrackMeta,", this.videoLoaded",this.videoLoaded);this.videoTrackMeta.baseDTS=this.baseVideoDTS,this.videoTrackMeta.basePTS=this.baseVideoPTS,this.videoTrackMeta.fps=o==null?void 0:o.framerate,d.push(this.videoTrackMeta)}if(r.hasAudio){if(!this.audioTrackMeta||!this.audioLoaded)return void console.log("checkMetadata hasAudio no this.audioTrackMeta",this.audioTrackMeta,", this.audioLoaded",this.audioLoaded);this.audioTrackMeta.baseDTS=this.baseAudioDTS,this.audioTrackMeta.basePTS=this.baseAudioPTS,d.push(this.audioTrackMeta)}var r=this.options,b=r.live,r=r.progressive;this.metadata={formatType:te.FLV,live:!!b,progressive:!b&&!!r,url:this.loader.url,basePTS:Math.min.apply(Math,d.map(function(j){return j.basePTS||0})),baseDTS:Math.min.apply(Math,d.map(function(j){return j.baseDTS||0})),timescale:1e3,duration:1e3*((o==null?void 0:o.duration)||1/0),tracks:d},console.log("checkMetadata loadedmetadata",this.metadata),this.emit("loadedmetadata",this.metadata)}},Qt.prototype.parseVideoBody=function(o,k,d){var b=this,k=new Er(k),j=(this.emit("loadedtag",{header:o,body:k}),[]),Y=k.type===Yt.KEY,re=!1;if(k.data.length)if(k.packetType===wt.AVC_SEQUENCE_HEADER){var de,ge,we,Se=this.flvMetadata||{},Ce={type:D.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:Se.width||0,height:Se.height||0,codec:"",pixelRatio:[],live:((Se=this.metadata)==null?void 0:Se.live)||!1};k.codecId===mt.H264?(ge=new ct(new s(new ArrayBuffer(8)),0),we=new s(k.data.buffer,k.data.byteOffset,k.data.byteLength),Se=new sr(ge,we),Ce.pps=Se.pps,Ce.sps=Se.sps,Ce.codec=Se.codec,(Se=Se.sps[0])&&(de=new Ae(Se.subarray(1)),Ce.width=de.width,Ce.height=de.height)):k.codecId===mt.H265?(R.extractAnnexbNAL(k.data).forEach(function(Xe){var Le=new s(Xe.buffer,Xe.byteOffset,Xe.length),Fe=new U(Le);Fe.nalType<I.ACCESS_UNIT_DELIMITER&&(Fe.nalType===I.SPS?(Le=new ht(jt(Le.readToUint8())),Ce.sps.push(Xe),Ce.codec=Le.codec,console.log("thisvideoTrackMeta sps.codec=",Le.codec),Ce.width=Le.width,Ce.height=Le.height):Fe.nalType===I.VPS?Ce.vps.push(Xe):Fe.nalType===I.PPS&&Ce.pps.push(Xe))}),Ce.codec===""&&(ge=new ct(new s(new ArrayBuffer(8)),0),we=new s(k.data.buffer,k.data.byteOffset,k.data.byteLength),Se=new Ht(ge,we),Ce.vps=Se.vps,Ce.pps=Se.pps,Ce.sps=Se.sps,Ce.sei=Se.sei,Ce.codec=Se.codec,Se.sps&&0<Se.sps.length&&(de=new ht(jt(Se.sps[0])),Ce.width=de.width,Ce.height=de.height),this.isHVCC=!0)):k.codecId===mt.H266&&(R.extractAnnexbNAL(k.data).forEach(function(Xe){var Le=new s(Xe.buffer,Xe.byteOffset,Xe.length),Fe=new X(Le);Fe.nalType<O.VVC_UNSPEC_31&&(Fe.nalType===O.VVC_SPS_NUT?(Le=new Et(jt(Le.readToUint8())),Ce.width=Le.width,Ce.height=Le.height,Ce.codec=Le.codec,Ce.sps.push(Xe)):Fe.nalType===O.VVC_VPS_NUT?Ce.vps.push(Xe):Fe.nalType===O.VVC_PPS_NUT&&Ce.pps.push(Xe))}),Ce.codec==="")&&(ge=new ct(new s(new ArrayBuffer(8)),0),we=new s(k.data.buffer,k.data.byteOffset,k.data.byteLength),Se=new wr(ge,we),Ce.vps=Se.vps,Ce.pps=Se.pps,Ce.sps=Se.sps,Ce.sei=Se.sei,Ce.codec=Se.codec,this.isHVCC=!0),this.videoTrackMeta=Ce,this.checkMetadata()}else{var We=[];if(k.codecId===mt.H266){var De={type:D.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((de=this.flvMetadata)==null?void 0:de.width)||0,height:((ge=this.flvMetadata)==null?void 0:ge.height)||0,codec:"",pixelRatio:[],live:((we=this.metadata)==null?void 0:we.live)||!1},Ue=[],He=[],Re=[],Ge=[],Ct=R.extractAVCCNAL(k.data,3),ut=[],Se=(Ct.forEach(function(Le){var Fe=new s(Le.buffer,Le.byteOffset,Le.length),xt=new X(Fe);7<=xt.nalType&&xt.nalType<=10&&(Y=!0,b.videoTrackMeta&&0<b.videoTrackMeta.sps.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.sps[0]),b.videoTrackMeta&&0<b.videoTrackMeta.pps.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.pps[0]),b.videoTrackMeta&&0<b.videoTrackMeta.vps.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.vps[0]),b.videoTrackMeta)&&0<b.videoTrackMeta.sei.length&&ut.push(X.createAnnexbStartCode(),b.videoTrackMeta.sei[0]),ut.push(X.createAnnexbStartCode(),Le),xt.nalType<O.VVC_UNSPEC_31&&(xt.nalType===O.VVC_SPS_NUT?(Fe=new Et(jt(Fe.readToUint8())),De.width=Fe.width,De.height=Fe.height,De.codec=Fe.codec,Ue.push(Le)):xt.nalType===O.VVC_VPS_NUT?He.push(Le):xt.nalType===O.VVC_PPS_NUT?Re.push(Le):xt.nalType===O.VVC_PREFIX_SEI_NUT&&Ge.push(Le)),re=X.isNonRefNALType(xt.nalType)}),s.concatUint8s(ut));We.push(Se),He.length&&(De.vps=He),Ue.length&&(De.sps=Ue),Re.length&&(De.pps=Re),Ge.length&&(De.sei=Ge),Ue.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],He.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.vps.push(Le)}),Ue.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sps.push(Le)}),Re.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.pps.push(Le)}),Ge.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sei.push(Le)})):this.videoTrackMeta=De)}else if(k.codecId!==mt.H265||this.isHVCC){var Ct=R.extractAVCCNAL(k.data,3),Ve={type:D.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((de=this.flvMetadata)==null?void 0:de.width)||0,height:((ge=this.flvMetadata)==null?void 0:ge.height)||0,codec:"",pixelRatio:[],live:((we=this.metadata)==null?void 0:we.live)||!1},$e=[],Pr=[],vr=[],Bt=[];Ct.forEach(function(Le){var Fe=new s(Le.buffer,Le.byteOffset,Le.length),xt=new U(Fe);16<=xt.nalType&&xt.nalType<=23&&(Y=!0),xt.nalType<I.ACCESS_UNIT_DELIMITER&&(xt.nalType===I.SPS?(Fe=new ht(jt(Fe.readToUint8())),$e.push(Le),Ve.codec=Fe.codec,Ve.width=Fe.width,Ve.height=Fe.height):xt.nalType===I.VPS?Pr.push(Le):xt.nalType===I.PPS?vr.push(Le):xt.nalType===I.SEI?Bt.push(Le):!Rt.isSafari||xt.nalType===I.TRAIL_R||xt.nalType===I.TRAIL_N||xt.nalType===I.IDR_W_RADL||xt.nalType===I.IDR_N_LP||xt.nalType===I.CRA?We.push(Le):console.warn("skip this nalu nalType:",xt.nalType),re=U.isNonRefNALType(xt.nalType))}),Pr.length&&(Ve.vps=Pr),$e.length&&(Ve.sps=$e),vr.length&&(Ve.pps=vr),Bt.length&&(Ve.sei=Bt),0<$e.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],this.videoTrackMeta.sei=[],Pr.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.vps.push(Le)}),$e.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sps.push(Le)}),vr.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.pps.push(Le)}),Bt.forEach(function(Le){var Fe;return(Fe=b.videoTrackMeta)==null?void 0:Fe.sei.push(Le)})):this.videoTrackMeta=Ve)}else{if(this.skipFrame===le.NONREF&&U.isNonRefNALType(U.extractNALType(k.data,4)))return console.warn("skipFrame isNonRefNALType"),[];var pt={type:D.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((Se=this.flvMetadata)==null?void 0:Se.width)||0,height:((de=this.flvMetadata)==null?void 0:de.height)||0,codec:"",pixelRatio:[],live:((ge=this.metadata)==null?void 0:ge.live)||!1},Kt=[],$r=[],qr=[],zr=[];(Ct=R.extractAnnexbNAL(k.data)).forEach(function(Xe){var Le=new s(Xe.buffer,Xe.byteOffset,Xe.length),Fe=new U(Le);16<=Fe.nalType&&Fe.nalType<=23&&(Y=!0),Fe.nalType<I.ACCESS_UNIT_DELIMITER&&(Fe.nalType===I.SPS?(Le=new ht(jt(Le.readToUint8())),Kt.push(Xe),pt.codec=Le.codec,pt.width=Le.width,pt.height=Le.height):Fe.nalType===I.VPS?$r.push(Xe):Fe.nalType===I.PPS?qr.push(Xe):Fe.nalType===I.SEI&&zr.push(Xe)),re=U.isNonRefNALType(Fe.nalType),We.push(Xe)}),$r.length&&(pt.vps=$r),Kt.length&&(pt.sps=Kt),qr.length&&(pt.pps=qr),zr.length&&(pt.sei=zr),Kt.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],$r.forEach(function(Xe){var Le;return(Le=b.videoTrackMeta)==null?void 0:Le.vps.push(Xe)}),Kt.forEach(function(Xe){var Le;return(Le=b.videoTrackMeta)==null?void 0:Le.sps.push(Xe)}),qr.forEach(function(Xe){var Le;return(Le=b.videoTrackMeta)==null?void 0:Le.pps.push(Xe)}),zr.forEach(function(Xe){var Le;return(Le=b.videoTrackMeta)==null?void 0:Le.sei.push(Xe)})):this.videoTrackMeta=pt)}if(!this.videoLoaded&&this.videoTrackMeta){if(!Y)return[];this.videoLoaded=!0,this.baseVideoDTS=o.dts,this.baseVideoPTS=k.cts+o.dts,this.checkMetadata()}this.videoTrackMeta&&k.codecId==mt.H265&&Y&&(this.videoTrackMeta.pps.forEach(function(Xe){return We.unshift(Xe)}),this.videoTrackMeta.sps.forEach(function(Xe){return We.unshift(Xe)}),this.videoTrackMeta.vps.forEach(function(Xe){return We.unshift(Xe)}),this.videoTrackMeta.sei.forEach(function(Xe){return We.unshift(Xe)})),We.length&&(Se={trackId:2,codec:((we=this.videoTrackMeta)==null?void 0:we.codec)||"",trackType:D.VIDEO,isSync:Y||k.type===Yt.KEY,isNonRef:re,data:We,dts:o.dts,pts:o.dts+k.cts,offset:d,size:We.reduce(function(Xe,Le){return Xe+Le.byteLength},0)},j.push(Se))}else ve.warn("[videox] flv parse empty data",o,k);return j},Qt.prototype.parseAudioBody=function(o,k,d){var b,k=new fr(k),j=(this.emit("loadedtag",{header:o,body:k}),[]);return k.packetType===kt.ADTS_HEADER?(b=new s(k.data.buffer,k.data.byteOffset,k.data.byteLength),b=fr.readAudioSpecificConfig(b),this.audioTrackMeta={id:1,baseDTS:0,basePTS:0,type:D.AUDIO,codec:"mp4a.40."+b.audioObjectType,timescale:1e3,audioObjectType:b.audioObjectType,sampleRate:b.sampleRate,samplingFrequencyIndex:b.samplingFrequencyIndex,sampleSize:k.sampleSize,channelCount:b.channelCount},this.checkMetadata()):(this.audioLoaded||(this.audioLoaded=!0,this.baseAudioDTS=o.dts,this.baseAudioPTS=o.dts,this.checkMetadata()),j.push({codec:((b=this.audioTrackMeta)==null?void 0:b.codec)||"",trackId:1,trackType:D.AUDIO,isSync:!0,isNonRef:!1,data:[k.data],dts:o.dts,pts:o.dts,offset:d,size:k.data.byteLength})),j},Qt.prototype.parseScriptBody=function(o,r){r=new Ur(r),this.emit("loadedtag",{header:o,body:r}),o=r.value,o&&r.name==="onMetaData"&&(this.flvMetadata=o,ve.info("flv script tag loaded, flv metadata:",this.flvMetadata))},Qt.prototype.onProgress=function(d){var r=d.data,d=d.offset;r.byteLength&&(r=this.parse(r.buffer,d)).length&&(d=void 0,this.cachePackets.length?(d=this.cachePackets.concat(r),this.cachePackets=[]):d=r,this.metadata&&this.loader.status!==se.SUSPENGING?this.emit("loadeddata",{packets:d}):this.cachePackets=d)},Qt.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},Qt.prototype.seek=function(){},Qt.prototype.reset=function(){Fr.prototype.reset.call(this),this.cachePackets=[],this.videoLoaded=!1,this.audioLoaded=!1,this.baseVideoDTS=0,this.baseVideoPTS=0,this.baseAudioDTS=0,this.baseAudioPTS=0,this.header=null,this.unhandleBuffer=null,this.flvMetadata=null,this.videoTrackMeta=null,this.audioTrackMeta=null};var on=Qt;ri=function(o,r){return(ri=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}ri(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(gn,ti=Je);var Nt=gn;ei=function(o,r){return(ei=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}ei(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(yn,cn=Nt);var Kr=yn;Zr=function(o,r){return(Zr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Zr(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(_n,Jr=Kr);var an=_n;Qr=function(o,r){return(Qr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Qr(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(hn,ln=Je);var Ho=hn;Yr=function(o,r){return(Yr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Yr(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(fn,un=Nt);var Bo=fn;Xr=function(o,r){return(Xr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Xr(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(pn,sn=Je);var Gr,sn,Xr,un,Yr,ln,Qr,Jr,Zr,cn,ei,ti,ri,Fr,ii,dn,ni,Vo=pn,Me=(Gr=function(o,r){return(Gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Gr(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)});function pn(o,r){var d=sn.call(this,o,r)||this;d.entries=[],d.version=r.read(1),d.flag=r.read(3),d.entryCount=r.read(4);for(var b=0;b<d.entryCount;b++){var k=d.version===1;d.entries.push({segmentDuration:r.read(k?8:4),mediaTime:r.read(k?8:4),mediaRateInteger:r.read(2),mediaRateFraction:r.read(2)})}return d}function fn(o,r){return o=un.call(this,o,r)||this,o.version=r.read(1),o.flag=r.read(3),o.entryCount=r.read(4),o}function hn(o,r){return o=ln.call(this,o,r)||this,o.bufferSizeDB=r.read(4),o.maxBitrate=r.read(4),o.avgBitrate=r.read(4),o}function _n(){return Jr!==null&&Jr.apply(this,arguments)||this}function yn(d,r){var d=cn.call(this,d,r)||this,b=(r.skip(4),r.skip(2),d.bitReferenceId=r.read(2),d.codeStreamVersion=r.read(4),r.skip(4),r.skip(8),d.width=r.read(2),d.heigth=r.read(2),d.horizontalResolution=r.read(4),d.verticalResolution=r.read(4),r.skip(4),d.frameCount=r.read(2),Math.min(r.read(1),32));return d.compressorName=Array.from(new Array(b)).map(function(){return String.fromCharCode(r.read(1))}).join(""),r.skip(32-(b+1)),d.depth=r.read(2),r.skip(2),d}function gn(){var o=ti!==null&&ti.apply(this,arguments)||this;return o.isContainer=!0,o}function Qt(){var o=Fr!==null&&Fr.apply(this,arguments)||this;return o.header=null,o.flvMetadata=null,o.videoTrackMeta=null,o.audioTrackMeta=null,o.unhandleBuffer=null,o.cachePackets=[],o.videoLoaded=!1,o.baseVideoPTS=0,o.baseVideoDTS=0,o.audioLoaded=!1,o.baseAudioPTS=0,o.baseAudioDTS=0,o.isHVCC=!1,o.formatType=te.FLV,o}function vn(b,r){var d=dn.call(this,b,r)||this,b=(d.generalTierFlag=0,d.numBytesConstraintInfo=0,d.generalProfileIdc=0,d.generalLevelIdc=0,d.chromaFormatIdc=0,d.bitDepthLumaMinus8=0,d.bitDepthChromaMinus8=0,d.avgFrameRate=0,d.constantFrameRate=0,d.lengthSizeMinusOne=0,d.olsIdx=0,d.ptlFrameOnlyConstraintFlag=0,d.ptlMultilayerEnabledFlag=0,d.maxPictureWidth=0,d.maxPictureHeight=0,d.nalus=[],d.vps=[],d.sps=[],d.pps=[],d.sei=[],d.codec="",d.codecTag="vvc1",(we=new g(r.read(1),8)).skip(5),we.read(2)),k=we.read(1);if(d.lengthSizeMinusOne=b,k){var b=(we=new g(r.read(3),24)).read(9),j=we.read(3),k=we.read(2),re=we.read(2),Y=we.read(3),b=(d.olsIdx=b,d.constantFrameRate=k,d.chromaFormatIdc=re,d.bitDepthLumaMinus8=Y,we.skip(5),(we=new g(r.read(2),16)).skip(2),we.read(6)),k=we.read(7),re=we.read(1),Y=(d.numBytesConstraintInfo=b,d.generalTierFlag=re,d.generalProfileIdc=k,r.read(1)),re=(d.generalLevelIdc=Y,(we=new g(r.read(1),8)).read(1)),k=we.read(1),de=(d.ptlFrameOnlyConstraintFlag=re,d.ptlMultilayerEnabledFlag=k,0),ge=(0<b?we.skip(8*b-2):we.read(6),0);if(1<j){for(var we=new g(r.read(1),8),Se=0,ge=j-2;0<=ge;--ge)Se|=we.read(1)<<ge;for(ge=j;ge<=8&&1<j;++ge)we.read(1);for(ge=j-2;0<=ge;--ge)Se&1<<ge&&r.read(1);var Ce=r.read(1),We=[];if(Ce)for(de=0;de<Ce;de++)We.push(r.readInt(1))}Y=r.read(2),re=r.read(2),k=(d.maxPictureWidth=Y,d.maxPictureHeight=re,r.read(2)),d.avgFrameRate=k}for(var De=r.read(1),He=0,Ue=0,He=0;He<De;He++){(we=new g(r.read(1),8)).read(1),we.skip(2);var Re=we.read(5),Ge=[],Ct=0;for(Re!=O.VVC_DCI_NUT&&Re!=O.VVC_OPI_NUT&&(Ct=r.read(2)),Ue=0;Ue<Ct;Ue++)Ge.push(new Uint8Array(r.read(2)).map(function(){return r.read(1)}));Re===O.VVC_VPS_NUT?Ge.forEach(function(ut){return d.vps.push(ut)}):Re===O.VVC_SPS_NUT?Ge.forEach(function(ut){return d.sps.push(ut)}):Re===O.VVC_PPS_NUT&&Ge.forEach(function(ut){return d.pps.push(ut)})}return d.configVersion=0,d.codec="vvc1.1.L48.CA",d}(K=tr=tr||{})[K.OD=1]="OD",K[K.IOD=2]="IOD",K[K.ESD=3]="ESD",K[K.DCD=4]="DCD",K[K.DSD=5]="DSD",K[K.SLCD=6]="SLCD";{let d=function(){this.constructor=oi};var Ua=d;Ar.readSize=function(b){for(var k,j=0,Y=4;Y--&&(j=j<<7|127&(k=b.read(1)),128&k););return j},Ar.extractDescriptors=function(b){for(var k,j,Y,re=[];b.unreadLength;){if(k=new Ar(b),Y=new s(b.buffer,b.offset,k.size),b.skip(k.size),k.size<=0)return re;switch(k.tag){case tr.ESD:j=new $o(k,Y);break;case tr.DCD:j=new qo(k,Y);break;case tr.DSD:j=new zo(k,Y);break;case tr.SLCD:j=new Ko(k,Y);break;default:j=null}j&&Y.unreadLength&&(j.children=Ar.extractDescriptors(Y)),re.push(j)}return re};var $t,Wo=Ar,Rr=(Ii.findDescriptor=function(b,k){var j;return b.some(function(Y){return!!(j=Y.probe.tag===k?Y:Ii.findDescriptor(Y.children,k))}),j},Ii),$o=(Me(oo,Mn=Rr),oo),qo=(Me(no,Nn=Rr),no),zo=(Me(io,Dn=Rr),io),Ko=(Me(ro,On=Rr),ro);Ai=function(b,k){return(Ai=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var K,Go=((K=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}Ai(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(to,Ln=Ut),to);Ri=function(b,k){return(Ri=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var Me,Xo=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}Ri(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(eo,In=Je),eo);Ci=function(b,k){return(Ci=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var K,Yo=((K=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}Ci(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(Zn,ki=Kr),Zn);Pi=function(b,k){return(Pi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var Me,Qo=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}Pi(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(Jn,An=Je),Jn);xi=function(b,k){return(xi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var K,Jo=((K=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}xi(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(Qn,Rn=Je),Qn);wi=function(b,k){return(wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var Me,Zo=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}wi(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(Yn,Cn=Je),Yn);Ei=function(b,k){return(Ei=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var K,ea=((K=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}Ei(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(Xn,kn=Nt),Xn);Ti=function(b,k){return(Ti=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)};var Me,ta=((Me=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function j(){this.constructor=b}Ti(b,k),b.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)})(Gn,Pn=Je),Gn),oi=(Si=function(b,k){return(Si=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,Y){j.__proto__=Y}:function(j,Y){for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(j[re]=Y[re])}))(b,k)},Kn),xr=xn=Je;if(typeof xr!="function"&&xr!==null)throw new TypeError("Class extends value "+String(xr)+" is not a constructor or null");Si(oi,xr),oi.prototype=xr===null?Object.create(xr):(d.prototype=xr.prototype,new d);var ra=Kn}bi=function(o,r){return(bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}bi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(zn,wn=Je);var ia=zn;mi=function(o,r){return(mi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}mi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(qn,En=Je);var na=qn;vi=function(o,r){return(vi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}vi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}($n,Tn=Je);var oa=$n;gi=function(o,r){return(gi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}gi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Wn,yi=Nt);var aa=Wn;_i=function(o,r){return(_i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}_i(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Vn,hi=Nt);var sa=Vn;fi=function(o,r){return(fi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}fi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Bn,pi=Ut);var ua=Bn;di=function(o,r){return(di=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}di(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Hn,ci=Nt);var la=Hn;li=function(o,r){return(li=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}li(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(jn,Sn=Ut);var ca=jn;ui=function(o,r){return(ui=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}ui(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Fn,bn=Ut);var da=Fn;si=function(o,r){return(si=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}si(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Un,mn=Ut);var ai,mn,si,bn,ui,Sn,li,ci,di,pi,fi,hi,_i,yi,gi,Tn,vi,En,mi,wn,bi,xn,Si,Pn,Ti,kn,Ei,Cn,wi,Rn,xi,An,Pi,ki,Ci,In,Ri,Ln,Ai,On,Dn,Nn,Mn,pa=Un,K=(ai=function(o,r){return(ai=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}ai(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)});function Un(o,r){return o=mn.call(this,o,r)||this,o.version===1?o.baseMediaDecodeTime=r.read(8):o.baseMediaDecodeTime=r.read(4),o}function Fn(o,r){var d=bn.call(this,o,r)||this;d.references=[],d.trackId=r.read(4),d.timescale=r.read(4),d.version===0?(d.pts=r.read(4),d.offset=r.read(4)):(d.pts=r.read(8),d.offset=r.read(8)),r.skip(2),d.references=[];for(var b=r.read(2),k=0;k<b;k++){var j=new g(r.read(4),32),Y=r.read(4),re=new g(r.read(4),32);d.references.push({type:j.read(1),size:j.read(31),duration:Y,startWithSap:re.read(1),sapType:re.read(3),sapDeltaTime:re.read(28)})}return d}function jn(o,r){var d=Sn.call(this,o,r)||this;d.isLeadings=[],d.sampleDependsOns=[],d.sampleIsDependedOns=[],d.sampleHasRedundancys=[];for(var b=0,k=void 0;b<r.unreadLength;b++)k=new g(r.read(1),8),d.isLeadings[b]=k.read(2),d.sampleDependsOns[b]=k.read(2),d.sampleIsDependedOns[b]=k.read(2),d.sampleHasRedundancys[b]=k.read(2);return d}function Hn(){return ci!==null&&ci.apply(this,arguments)||this}function Bn(){return pi!==null&&pi.apply(this,arguments)||this}function Vn(){return hi!==null&&hi.apply(this,arguments)||this}function Wn(){return yi!==null&&yi.apply(this,arguments)||this}function $n(o,r){return o=Tn.call(this,o,r)||this,o.version=r.read(1),o.flag=r.read(3),o.graphicsMode=r.read(2),o.opcolor=[r.read(2),r.read(2),r.read(2)],o}function qn(o,r){return o=En.call(this,o,r)||this,o.version=r.read(1),o.flag=r.read(3),o}function zn(o,r){var d=wn.call(this,o,r)||this;d.matrix=[],d.version=r.read(1),d.flag=r.read(3),d.createTime=d.toStandardTime(r.read(4)),d.modifyTime=d.toStandardTime(r.read(4)),d.trackId=r.read(4),r.skip(4),d.duration=r.read(4),r.skip(8),d.layer=r.read(2),d.alternateGroup=r.read(2),d.volume=+(r.read(1)+"."+r.read(1)),r.skip(2);for(var b=0;b<9;b++)d.matrix.push(+(r.read(2)+"."+r.read(2)));return d.width=+(r.read(2)+"."+r.read(2)),d.height=+(r.read(2)+"."+r.read(2)),d}function Kn(o,r){var d=xn.call(this,o,r)||this;for(d.data=[];0<r.unreadLength;)d.data.push(r.read(1));return d}function Gn(o,r){var d=Pn.call(this,o,r)||this;d.matrix=[],d.version=r.read(1),d.flag=r.read(3),d.createTime=d.toStandardTime(r.read(4)),d.modifyTime=d.toStandardTime(r.read(4)),d.timeScale=r.read(4),d.duration=r.read(4),d.rate=+(r.read(2)+"."+r.read(2)),d.volume=+(r.read(1)+"."+r.read(1)),r.skip(10);for(var b=0;b<9;b++)d.matrix.push(+(r.read(2)+"."+r.read(2)));return r.skip(24),d.nextTrackId=r.read(4),d}function Xn(o,r){return o=kn.call(this,o,r)||this,r.skip(6),o.dataReferenceIndex=r.read(2),r.skip(8),o.channelCount=r.read(2),o.sampleSize=r.read(2),r.skip(4),o.sampleRate=r.read(4)>>>16,o}function Yn(b,r){function d(j){return 96+(31&j)}var b=Cn.call(this,b,r)||this,k=(b.version=r.read(1),b.flag=r.read(3),b.version===1),k=(b.createTime=b.toStandardTime(r.read(k?8:4)),b.modifyTime=b.toStandardTime(r.read(k?8:4)),b.timeScale=r.read(4),b.duration=r.read(k?8:4),r.read(2));return b.language=String.fromCharCode(d(k>>10),d(k>>5),d(k)),b.quality=+(r.read(1)+"."+r.read(1)),b}function Qn(o,r){var d=Rn.call(this,o,r)||this;return d.data=r.readToUint8(o.size-o.length),d}function Jn(o,r){var d=An.call(this,o,r)||this;for(d.name="",d.version=r.read(1),d.flag=r.read(3),d.preDefined=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),d.handleType=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),r.skip(12);0<r.unreadLength;)d.name+=String.fromCharCode(r.read(1));return d}function Zn(){return ki!==null&&ki.apply(this,arguments)||this}function eo(o,r){var d=In.call(this,o,r)||this;for(d.compatibleBrands=[],d.majorBrand=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),d.minorVersion=r.read(4);4<=r.unreadLength;)d.compatibleBrands.push(String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)));return d}function to(d,b){var d=Ln.call(this,d,b)||this,b=(d.descriptors=[],d.audioObjectType=0,d.samplingFrequencyIndex=0,d.descriptors=Wo.extractDescriptors(b),Rr.findDescriptor(d.descriptors,tr.DCD)),k=Rr.findDescriptor(d.descriptors,tr.DSD);return k&&(d.audioObjectType=k.audioObjectType,d.samplingFrequencyIndex=k.samplingFrequencyIndex),d.codec=b&&k?"mp4a."+b.mepg4Audio.toString(16)+"."+k.audioObjectType.toString(16):"mp4a",d}function ro(o,r){return o=On.call(this,o)||this,o.esId=r.read(2),o}function io(o,r){return o=Dn.call(this,o)||this,r=new g(r.read(2),16),o.audioObjectType=r.read(5),o.samplingFrequencyIndex=r.read(4),o.channel=r.read(4),o.frameLengthFlag=r.read(1),o.dependsOnCoreCoder=r.read(1),o.extesionFlag=r.read(1),o}function no(o,r){return o=Nn.call(this,o)||this,o.mepg4Audio=r.read(1),o.audioStream=r.read(1),o.bufferSize=r.read(3),o.maxBitrate=r.read(4),o.avgBitrate=r.read(4),o}function oo(o,r){return o=Mn.call(this,o)||this,o.streamDependenceFlag=0,o.URLFlag=0,o.OCRStreamFlag=0,o.esId=r.read(2),o.esFlag=r.read(1),128&o.esFlag&&(o.streamDependenceFlag=r.read(2)),64&o.esFlag&&(o.URLFlag=r.read(1),r.skip(o.URLFlag)),32&o.esFlag&&(o.OCRStreamFlag=r.read(2)),o}function Ii(o){this.children=[],this.probe=o}function Ar(o){this.tag=o.read(1),this.size=Ar.readSize(o)}(Me=$t=$t||{})[Me.BASE_DATA_OFFSET=1]="BASE_DATA_OFFSET",Me[Me.SAMPLE_DESC=2]="SAMPLE_DESC",Me[Me.SAMPLE_DUR=8]="SAMPLE_DUR",Me[Me.SAMPLE_SIZE=16]="SAMPLE_SIZE",Me[Me.SAMPLE_FLAG=32]="SAMPLE_FLAG",Me[Me.DUR_EMPTY=65536]="DUR_EMPTY",Me[Me.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",K(lo,so=Ut);var qt,fa=lo;Oi=function(o,r){return(Oi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Oi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(uo,ao=Ut);var Li,ao,Oi,so,ha=uo,Me=(Li=function(o,r){return(Li=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Li(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)});function uo(o,r){return o=ao.call(this,o,r)||this,o.trackId=r.read(4),o.defaultSampleDescriptionIndex=r.read(4),o.defaultSampleDuration=r.read(4),o.defaultSampleSize=r.read(4),o.defaultSampleFlag=r.read(4),o}function lo(o,r){return o=so.call(this,o,r)||this,o.baseDataOffset=0,o.defaultSampleDescriptionIndex=0,o.defaultSampleDuration=0,o.defaultSampleSize=0,o.defaultSampleFlag=0,o.trackId=r.read(4),o.flag&$t.BASE_DATA_OFFSET&&(o.baseDataOffset=r.read(8)),o.flag&$t.SAMPLE_DESC&&(o.defaultSampleDescriptionIndex=r.read(4)),o.flag&$t.SAMPLE_DUR&&(o.defaultSampleDuration=r.read(4)),o.flag&$t.SAMPLE_SIZE&&(o.defaultSampleSize=r.read(4)),o.flag&$t.SAMPLE_FLAG&&(o.defaultSampleFlag=r.read(4)),o}(K=qt=qt||{})[K.DATA_OFFSET=1]="DATA_OFFSET",K[K.FIRST_FLAG=4]="FIRST_FLAG",K[K.DURATION=256]="DURATION",K[K.SIZE=512]="SIZE",K[K.FLAG=1024]="FLAG",K[K.CTS_OFFSET=2048]="CTS_OFFSET",Me(Ao,bo=Ut);var lr,_a=Ao;$i=function(o,r){return($i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}$i(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Ro,mo=Je);var ya=Ro;Wi=function(o,r){return(Wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Wi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Co,vo=Je);var ga=Co;Vi=function(o,r){return(Vi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Vi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(ko,go=Je);var va=ko;Bi=function(o,r){return(Bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Bi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Po,yo=Je);var ma=Po;Hi=function(o,r){return(Hi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Hi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(xo,_o=Nt);var ba=xo;ji=function(o,r){return(ji=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}ji(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(wo,ho=Nt);var Sa=wo;Fi=function(o,r){return(Fi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Fi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Eo,fo=Je);var Ta=Eo;Ui=function(o,r){return(Ui=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)};function co(o){return Array.isArray(o)?o:o?[o]:[]}(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Ui(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)})(To,po=Je);var Ea=To,wa=(Hr.prototype.addTrack=function(o){this.tracks.push(o)},Hr.prototype.getTracks=function(){return this.tracks},Hr.prototype.getTrackById=function(o){return this.tracks.find(function(r){return r.options.id===o})},Hr),Di=function(){return(Di=Object.assign||function(o){for(var r,d=1,b=arguments.length;d<b;d++)for(var k in r=arguments[d])Object.prototype.hasOwnProperty.call(r,k)&&(o[k]=r[k]);return o}).apply(this,arguments)},xa=(yr.prototype.getSamples=function(){return this.samples},yr.prototype.getNextSampleOffset=function(){var o=this.samples[this.nextSampleIndex];return o?o.offset:0},yr.prototype.addSample=function(o){this.samples.push(o),this.duration+=o.duration},yr.prototype.processNextSample=function(o,r){r===void 0&&(r=0);var d=this.samples[this.nextSampleIndex];if(d)return this.processSample(o,r,d)},yr.prototype.processSample=function(o,k,d){var b=(k=k===void 0?0:k)+o.byteLength,k=d.offset-k;if(0<=k&&d.offset+d.size<=b)return this.nextSampleIndex++,Di(Di({},d),{data:o.subarray(k,k+d.size)})},yr.prototype.processSamples=function(o,r){r===void 0&&(r=0);for(var d=this.samples,b=[],k=this.nextSampleIndex,j=d.length;k<j;k++){var Y=this.processSample(o,r,d[k]);if(!Y)break;b.push(Y)}return b},yr.prototype.seek=function(o){for(var r,d=o*this.options.timeScale,b=-1,k=-1,j=0,Y=this.samples.length;j<Y;j++)if((r=this.samples[j]).isSync&&(k=j),r.dts+r.cts>=d){b=k;break}if(-1<b)return this.nextSampleIndex=b,this.samples[b]},yr),Pa=(jr.prototype.createMedia=function(o){return this._parseMoovJSON(o)},jr.prototype._parseMoovJSON=function(o){var r=this,d=o.mvhd.box,b=new wa({duration:d.duration,timeScale:d.timeScale,rate:d.rate,modifyTime:d.modifyTime,createTime:d.createTime});return o.trak&&[].concat(o.trak).forEach(function(de){var j=de.tkhd,de=de.mdia,re=de.mdhd,Y=de.hdlr,de=de.minf.stbl,j=j.box,Y=Y.box,re=re.box,we=At[Y.handleType],de=r._buildSamples(de,we),ge={id:j.trackId,name:Y.name,handleType:Y.handleType,type:we,createTime:j.createTime,modifyTime:j.modifyTime,layer:j.layer,volume:j.volume,matrix:j.matrix,duration:j.duration,width:j.width,height:j.height,timeScale:re.timeScale,language:re.language,quality:re.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0},we=(Y=o.mvex)==null?void 0:Y.trex,Se=(we&&[].concat(we).forEach(function(Ce){Ce=Ce.box,ge.defaultSampleDescriptionIndex=Ce.defaultSampleDescriptionIndex,ge.defaultSampleDuration=Ce.defaultSampleDuration,ge.defaultSampleSize=Ce.defaultSampleSize,ge.defaultSampleFlag=Ce.defaultSampleFlag}),new xa(ge));de.forEach(function(Ce){return Se.addSample(Ce)}),b.addTrack(Se)}),b},jr.prototype._buildSamples=function(o,r){var d,b,k,j,Y,re,de,ge,we,Se,Ce,We,De,Ue,He,Re,Ge,Ct=o.stts,ut=o.stss,Ve=o.ctts,$e=o.stsc,Pr=o.stsz||o.stz2;return Pr?(re=o.stco||o.co64,de=$e.box,ge=ut==null?void 0:ut.box,we=Ct.box,Se=Ve==null?void 0:Ve.box,Ue=De=We=Ce=-1,He=0,Re=[],(Ge=Pr.box.sampleSizes).forEach(function(vr,Bt){var pt={},Kt=de.entries;pt.size=vr,pt.trackType=r,Bt===0?(b=1,d=0,pt.chunkIndex=b,Y=Kt[pt.chunkRunIndex=d].samplePerChunk,j=0,k=d+1<Kt.length?Kt[d+1].firstChunk-1:1/0):Bt<Y?(pt.chunkIndex=b,pt.chunkRunIndex=d):(b++,j=0,k<(pt.chunkIndex=b)&&(k=++d+1<Kt.length?Kt[d+1].firstChunk-1:1/0),Y+=Kt[pt.chunkRunIndex=d].samplePerChunk),pt.descriptionIndex=Kt[d].sampleDescriptionIndex-1,pt.offset=re.box.chunkOffsets[pt.chunkIndex-1]+j,j+=pt.size,Ce<Bt&&(We++,Ce=Math.max(Ce,0),Ce+=we.sampleCounts[We]),0<Bt?((vr=Re[Bt-1]).duration=we.sampleDurations[We],pt.dts=Re[Bt-1].dts+vr.duration):pt.dts=0,Se?(De<=Bt&&(Ue++,De=Math.max(De,0),De+=Se.sampleCounts[Ue]),pt.cts=Se.sampleOffsets[Ue]):pt.cts=0,ge?Bt===ge.sampleNumbers[He]-1?(pt.isSync=!0,He++):pt.isSync=!1:pt.isSync=!0,pt.isLast=Bt===Ge.length-1,Re.push(pt)}),Re):[]},jr),ka=(Lr.prototype.init=function(o){this.options=o},Lr.prototype.parse=function(o){var r=this;co(o.traf).forEach(function(d){return r._buildSamples(d,o.box)})},Lr.prototype._buildSamples=function(o,r){var d=o.tfhd.box,b=this._getTrakById(d.trackId);if(b)for(var k=b.options,j=o.tfdt.box,Y=d.flag,re=(Y&$t.SAMPLE_DESC?d:k).defaultSampleDescriptionIndex,de=(Y&$t.SAMPLE_DUR?d:k).defaultSampleDuration,ge=(Y&$t.SAMPLE_SIZE?d:k).defaultSampleSize,we=(Y&$t.SAMPLE_FLAG?d:k).defaultSampleFlag,Se=co(o.trun),Ce=k.id,We=k.type,De=Y&$t.BASE_DATA_OFFSET?d.baseDataOffset:Y&$t.DEFAULT_BASE_IS_MOOF?r.header.start:0,Ue=0,He=0;He<Se.length;He++)for(var Re=Se[He].box,Ge=Re.flag,Ct=Re.dataOffset+De,ut=0;ut<Re.sampleCount;ut++){var Ve={},$e=(Ve.trackId=Ce,Ve.trackType=We,Ve.descriptionIndex=re,Ge&qt.SIZE?Ve.size=Re.sampleSizes[ut]:Ve.size=ge,Ge&qt.DURATION?Ve.duration=Re.sampleDurations[ut]:Ve.duration=de,Ve.dts=0<Ue?Ue:j?j.baseMediaDecodeTime:0,Ue=Ve.dts+Ve.duration,Ge&qt.CTS_OFFSET?Ve.cts=Re.sampleCTSs[ut]:Ve.cts=0,we);Ge&qt.FLAG?$e=Re.sampleFlags[ut]:ut===0&&Ge&qt.FIRST_FLAG&&($e=Re.firstSampleFlag),Ve.offset=Ct,Ve.flag=$e,Ve.isSync=!($e&(dt.IS_NON_SYNC|dt.DEPENDS_YES)),Ve.isLeading=$e>>26&3,Ve.dependsOn=$e>>24&3,Ve.isDependedOn=$e>>22&3,Ve.hasRedundancy=$e>>20&3,Ve.degradationPriority=65535&$e,Ct+=Ve.size,Ve.isLast=He===Se.length-1&&ut===Re.sampleCount-1,b.addSample(Ve)}},Lr.prototype.destroy=function(){this.options=null},Lr);Mi=function(o,r){return(Mi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Mi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(rr,Ni=ue),rr.probe=function(o){return!(o.byteLength<8)&&[o[4],o[5],o[6],o[7]].map(function(r){return String.fromCharCode(r)}).join("")==="ftyp"},rr.prototype.processPackets=function(o,r){var d,b=this,k=[];return this.media&&o.byteLength&&(this.media.getTracks().forEach(function(j){j.processSamples(o,r).forEach(function(Y){Y=b.convertSampleToPacket(Y),Y&&k.push(Y)})}),d=this.getMinNextSampleOffset()-r,this.unhandleBuffer=d>=o.byteLength?null:o.slice(d).buffer),k},rr.prototype.seek=function(o){var r,d=this.options.progressive;this.unhandleBuffer=null,d&&this.loader.suspend(),(r=this.media)!=null&&r.getTracks().map(function(b){return b.seek(o)}),d&&this.loader.loadRange(this.getMinNextSampleOffset())},rr.prototype.onProgress=function(d){var r=d.data,d=d.offset;r.length&&(this.unhandleBuffer&&(r=s.concatUint8(new Uint8Array(this.unhandleBuffer),r),d-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null),this.metadata||this.parse(new s(r.buffer,0),d),this.metadata)&&(r=this.processPackets(r,d)).length&&this.emit("loadeddata",{packets:r})},rr.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},rr.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map(function(o){return o.getNextSampleOffset()})):0},rr.prototype.parse=function(o,r){var d,b=this;r===void 0&&(r=0);for(var k=o.offset,j=0,Y=this;8<=o.unreadLength;){var re=function(){var de,ge,we,Se,Ce;return j=o.offset-k,(de=new ct(o,r+j)).size===0?(we=new Error("box [".concat(de.type,"] size 为 0")),ve.error(we),Y.emit("error",{code:he.PARSER,message:we.message,origin:we}),"break"):Y.options.progressive&&de.type==="mdat"&&!Y.metadata?(ge=de.start+de.size,Y.loader.suspend(),Y.unhandleBuffer=null,ve.info("检测到mdat box在moov box之后，跳转moov起始偏移位"),Y.loader.loadRange(ge).then(function(We){We&&(b.unhandleBuffer=null,b.loader.jump(de.start),b.loader.status!==se.SUSPENGING)&&b.loader.loadRange(de.start,ge)}),{value:void 0}):(we=de.size-de.length,o.unreadLength>=we?((Ce=a[de.type])?(Se=new s(o.buffer,o.offset,we),(d=new Ce(de,Se)).isContainer&&((Ce=new rr({sub:!0})).proxy(Y,["loadedbox"]),Ce.parse(Se,j+r+de.length),Ce.removeAllListeners(),Ce.boxes.forEach(function(We){d.append(We)}))):d=new Je(de),o.skip(we),Y.boxes.push(d),void Y.emit("loadedbox",d)):(o.back(de.length),"break"))}();if(typeof re=="object")return re.value;if(re==="break")break}o.unreadLength&&(this.unhandleBuffer=o.readToBuffer())},rr.prototype.reset=function(){Ni.prototype.reset.call(this),this.boxes=[],this.unhandleBuffer=null,this.avcCBox=void 0,this.hvcCBox=void 0,this.mp4aBox=void 0,this.media=null,this.moofParser.destroy()};var Ni,Mi,po,Ui,fo,Fi,ho,ji,_o,Hi,yo,Bi,go,Vi,vo,Wi,mo,$i,bo,So=rr;function rr(o){var r=Ni.call(this,o=o===void 0?{}:o)||this;return r.media=null,r.unhandleBuffer=null,r.formatType=te.MP4,r.boxes=[],r._handleBoxLoad=function(d){var b,k,j,Y,re,de,ge,we,Se,Ce,We,De,Ue,He,Re=d.header.type;Re==="vvcC"?r.vvcCBox=d:Re==="vvc1"?r.vvcCBox&&(r.vvcCBox.codecTag=Re):Re==="hvcC"?r.hvcCBox=d:Re==="hvc1"||Re==="hev1"?r.hvcCBox&&(r.hvcCBox.codecTag=Re):Re==="avcC"?r.avcCBox=d:Re==="esds"?r.esdsBox=d:Re==="mp4a"?r.mp4aBox=d:Re==="moov"?(Ue=Je.mapBoxToJSON(d),r.media=r.moovParser.createMedia(Ue),r.moofParser.init({media:r.media}),De=(Ue=r.mp4aBox||{}).sampleRate,k=De===void 0?0:De,De=Ue.sampleSize,j=De===void 0?0:De,De=Ue.channelCount,Y=De===void 0?0:De,De=(Ue=r.esdsBox||{}).audioObjectType,re=De===void 0?0:De,De=Ue.samplingFrequencyIndex,de=De===void 0?0:De,De=Ue.codec,ge=De===void 0?"":De,we=[],Se=[],Ce=[],r.hvcCBox?(Se=r.hvcCBox.vps,Ce=r.hvcCBox.pps,we=r.hvcCBox.sps):r.vvcCBox?(Ce=r.vvcCBox.pps,we=r.vvcCBox.sps,we=r.vvcCBox.sps):r.avcCBox&&(Ce=r.avcCBox.pps,we=r.avcCBox.sps),De=(Ue=r.options).live,Ue=Ue.progressive,He=((b=r.avcCBox)==null?void 0:b.codec)||"",r.vvcCBox?(He=r.vvcCBox.codec,We=r.vvcCBox?r.vvcCBox.codecTag:void 0):r.hvcCBox&&(He=r.hvcCBox?r.hvcCBox.codec:((b=r.avcCBox)==null?void 0:b.codec)||"",We=r.hvcCBox?r.hvcCBox.codecTag:void 0),r.metadata={formatType:te.MP4,live:!!De,progressive:!De&&!!Ue,url:r.loader.url,basePTS:0,baseDTS:0,duration:r.media.options.duration,timescale:r.media.options.timeScale,tracks:r.media.getTracks().map(function(Ge){var Ct,ut,Ve,$e={};switch($e.id=Ge.options.id,$e.type=Ge.options.type,$e.timescale=Ge.options.timeScale,$e.baseDTS=0,$e.basePTS=0,$e.type){case D.VIDEO:$e.width=Ge.options.width,$e.height=Ge.options.height,$e.vps=Se,$e.sps=we,$e.pps=Ce,$e.rotate=(Ct=Ge.options.matrix).length<5||(ut=Math.hypot(Ct[0],Ct[3]),Ve=Math.hypot(Ct[1],Ct[4]),ut===0)||Ve===0?0:180*Math.atan2(Ct[1]/Ve,Ct[0]/ut)/Math.PI,$e.pixelRatio=[],$e.codec=He,$e.codecTag=We,$e.fps=r.computeFps(Ge,(Ve=r.media)==null?void 0:Ve.options);break;case D.AUDIO:$e.audioObjectType=re,$e.sampleRate=k,$e.samplingFrequencyIndex=de,$e.sampleSize=j,$e.channelCount=Y,$e.codec=ge;break;default:$e.type=D.UNKNOWN}return $e})},ve.info("loadedmetadata metadata:",r.metadata),r.emit("loadedmetadata",r.metadata)):Re==="moof"&&(ve.info("检测到moof box被加载，当前素材为fMP4"),r.moofParser.parse(Je.mapBoxToJSON(d)))},r.computeFps=function(d,b){return b?d.getSamples().length/(b.duration/b.timeScale):0},r.convertSampleToPacket=function(d){var b,k,j,Y,re,de;return d.trackType===D.VIDEO&&(r.hvcCBox||r.avcCBox||r.vvcCBox)?(b=d.data,k=d.isSync,j=(Y=r.hvcCBox||r.avcCBox||r.vvcCBox).lengthSizeMinusOne,Y=Y.codec,de=!1,r.vvcCBox&&4<b.length&&b[0]===0&&b[1]===0&&b[2]===0&&b[3]===1&&(de=!0),re=[],re=de?R.extractAnnexbNAL(b):R.extractAVCCNAL(b,j),de=!1,r.hvcCBox&&(de=re.every(function(ge){return U.isNonRef(ge)})),r.vvcCBox&&(de=re.every(function(ge){X.isNonRef(ge)})),k&&(r.hvcCBox?(r.hvcCBox.pps.forEach(function(ge){return re.unshift(ge)}),r.hvcCBox.sps.forEach(function(ge){return re.unshift(ge)}),r.hvcCBox.vps.forEach(function(ge){return re.unshift(ge)})):r.vvcCBox?(r.vvcCBox.pps.forEach(function(ge){return re.unshift(ge)}),r.vvcCBox.sps.forEach(function(ge){return re.unshift(ge)}),r.vvcCBox.vps.forEach(function(ge){return re.unshift(ge)})):r.avcCBox&&(r.avcCBox.pps.forEach(function(ge){return re.unshift(ge)}),r.avcCBox.sps.forEach(function(ge){return re.unshift(ge)}))),{codec:Y,trackId:d.trackId,trackType:d.trackType,isLast:d.isLast,dts:d.dts,pts:d.cts+d.dts,isSync:d.isSync,isNonRef:de,data:re,size:re.reduce(function(ge,we){return ge+we.byteLength},0),offset:d.offset}):d.trackType===D.AUDIO&&r.esdsBox?{codec:r.esdsBox.codec,trackId:d.trackId,trackType:d.trackType,dts:d.dts,pts:d.cts+d.dts,isLast:d.isLast,isSync:!0,isNonRef:!1,data:[d.data],size:d.data.byteLength,offset:d.offset}:void 0},r.options=o,r.moovParser=new Pa,r.moofParser=new ka,o.sub||r.on("loadedbox",r._handleBoxLoad),r}function Lr(){var o=this;this.options=null,this._getTrakById=function(r){var d;return(d=o.options)==null?void 0:d.media.getTracks().find(function(b){return b.options.id===r})}}function jr(){}function yr(o){this.samples=[],this.nextSampleIndex=0,this.duration=0,this.options=o}function Hr(o){this.tracks=[],this.options=o}function To(o,r){var d=po.call(this,o,r)||this;d.sampleCounts=[],d.sampleDurations=[],d.version=r.read(1),d.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)d.sampleCounts[k]=r.read(4),d.sampleDurations[k]=r.read(4);return d}function Eo(o,r){var d=fo.call(this,o,r)||this;d.isContainer=!0,d.sampleSizes=[],d.version=r.read(1),d.flag=r.read(3),d.sampleSize=r.read(4);for(var b=r.read(4),k=0;k<b;k++)d.sampleSize===0?d.sampleSizes.push(r.read(4)):d.sampleSizes.push(d.sampleSize);return d}function wo(o,r){var d=ho.call(this,o,r)||this;d.sampleNumbers=[],d.version=r.read(1),d.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)d.sampleNumbers.push(r.read(4));return d}function xo(o,r){return o=_o.call(this,o,r)||this,o.version=r.read(1),o.flag=r.read(3),o.entryCount=r.read(4),o}function Po(o,r){var d=yo.call(this,o,r)||this;d.entries=[],d.version=r.read(1),d.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)d.entries.push({firstChunk:r.read(4),samplePerChunk:r.read(4),sampleDescriptionIndex:r.read(4)});return d}function ko(o,r){var d=go.call(this,o,r)||this;d.chunkOffsets=[],d.version=r.read(1),d.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)d.chunkOffsets.push(r.read(8));return d}function Co(o,r){var d=vo.call(this,o,r)||this;d.chunkOffsets=[],d.version=r.read(1),d.flag=r.read(3);for(var b=r.read(4),k=0;k<b;k++)d.chunkOffsets.push(r.read(4));return d}function Ro(o,r){var d=mo.call(this,o,r)||this;d.sampleCounts=[],d.sampleOffsets=[],d.version=r.read(1),d.flag=r.read(3),d.entryCount=r.read(4);for(var b=0;b<d.entryCount;b++)d.sampleCounts.push(r.read(4)),d.sampleOffsets.push(r.readInt(4));return d}function Ao(o,r){var d=bo.call(this,o,r)||this;d.sampleDurations=[],d.sampleSizes=[],d.sampleFlags=[],d.sampleCTSs=[],d.sampleCount=r.read(4),d.flag&qt.DATA_OFFSET?d.dataOffset=r.readInt(4):d.dataOffset=0,d.flag&qt.FIRST_FLAG?d.firstSampleFlag=r.read(4):d.firstSampleFlag=0;for(var b=0;b<d.sampleCount;b++)d.flag&qt.DURATION&&(d.sampleDurations[b]=r.read(4)),d.flag&qt.SIZE&&(d.sampleSizes[b]=r.read(4)),d.flag&qt.FLAG&&(d.sampleFlags[b]=r.read(4)),d.flag&qt.CTS_OFFSET&&(d.version===0?d.sampleCTSs[b]=r.read(4):d.sampleCTSs[b]=r.readInt(4));return d}(K=lr=lr||{})[K.H264=27]="H264",K[K.H265=36]="H265",K[K.H266=51]="H266",K[K.AAC=15]="AAC";var Io={1:D.VIDEO,2:D.VIDEO,3:D.AUDIO,4:D.AUDIO,5:D.UNKNOWN,6:D.UNKNOWN,7:D.UNKNOWN,8:D.UNKNOWN,9:D.UNKNOWN,10:D.UNKNOWN,11:D.UNKNOWN,12:D.UNKNOWN,13:D.UNKNOWN,14:D.UNKNOWN,15:D.AUDIO,16:D.VIDEO,17:D.AUDIO,18:D.UNKNOWN,19:D.UNKNOWN,20:D.UNKNOWN,21:D.UNKNOWN,22:D.UNKNOWN,23:D.UNKNOWN,24:D.UNKNOWN,25:D.UNKNOWN,26:D.UNKNOWN,27:D.VIDEO,28:D.AUDIO,29:D.UNKNOWN,30:D.VIDEO,31:D.UNKNOWN,32:D.UNKNOWN,33:D.VIDEO,36:D.VIDEO,51:D.VIDEO,66:D.UNKNOWN,127:D.UNKNOWN,128:D.AUDIO,129:D.AUDIO,130:D.AUDIO,131:D.AUDIO,132:D.AUDIO,133:D.AUDIO,134:D.AUDIO,135:D.AUDIO,144:D.UNKNOWN,145:D.UNKNOWN,192:D.UNKNOWN,193:D.AUDIO,194:D.AUDIO,207:D.UNKNOWN,209:D.VIDEO,210:D.VIDEO,219:D.UNKNOWN,234:D.VIDEO},Br,Lo=function(o){this.programs=[],this.tableId=o.read(1);var r=new g(o.read(2),16),r=(this.sectionSyntaxIndicator=r.read(1),r.skip(1),r.skip(2),this.sectionLength=r.read(12),this.transportStreamId=o.read(2),new g(o.read(1),8));r.skip(2),this.versionNumber=r.read(5),this.currentNextIndicator=r.read(1),this.sectionNumber=o.read(1),this.lastSectionNumber=o.read(1);for(var d=0;d<this.sectionLength-12;d+=4)this.programs.push({number:o.read(2),pid:8191&o.read(2)});this.crc32=o.read(4)},Oo=function(o){this.streamId=o.read(1),this.pesPacketLength=o.read(2);var r=new g(o.read(2),16),r=(r.skip(2),this.pesScramblingControl=r.read(2),this.pesPriority=r.read(1),this.dataAlignmentIndicator=r.read(1),this.copyright=r.read(1),this.originalOrCopy=r.read(1),this.ptsDtsFlags=r.read(2),this.esCRFlag=r.read(1),this.esRateFlag=r.read(1),this.dsmTrickModeFlag=r.read(1),this.additionalCopyInfoFlag=r.read(1),this.pesCRCFlag=r.read(1),this.pesExtensionFlag=r.read(1),this.pesHeaderDataLength=o.read(1),o.offset),r=(2&this.ptsDtsFlags?(this.pts=(14&o.read(1))<<27|o.read(2)>>>1<<13|o.read(2)>>>3,this.pts*=4,o.back(1),this.pts+=(6&o.read(1))>>>1,1&this.ptsDtsFlags?(this.dts=(14&o.read(1))<<27|o.read(2)>>>1<<13|o.read(2)>>>3,this.dts*=4,o.back(1),this.dts+=(6&o.read(1))>>>1):this.dts=this.pts):(this.pts=0,this.dts=0),this.pesHeaderDataLength-(o.offset-r));0<r&&o.skip(r),this.data=o.readToUint8()},Do=function(o){this.streams=[],this.tableId=o.read(1);var r=new g(o.read(2),16),r=(this.sectionSyntaxIndicator=r.read(1),r.skip(1),r.skip(2),this.sectionLength=r.read(12),this.programNumber=o.read(2),new g(o.read(1),8));r.skip(2),this.versionNumber=r.read(5),this.currentNextIndicator=r.read(1),this.sectionNumber=o.read(1),this.lastSectionNumber=o.read(1),this.pcrPid=8191&o.read(2),this.programInfoLength=4095&o.read(2);for(var d=12+this.programInfoLength;d<=this.sectionLength-2;d+=5){var b={streamType:o.read(1),pid:8191&o.read(2),esInfoLength:4095&o.read(2)};this.streams.push(b),o.skip(b.esInfoLength),d+=b.esInfoLength}this.crc32=o.read(4)};(Me=Br=Br||{})[Me.PAT=0]="PAT",Me[Me.CAT=1]="CAT",Me[Me.TSDT=2]="TSDT",Mo.SYNC_BYTE=71;var gr,qi,Or=Mo,K=c(378),No=c.n(K),Ca=(Object.freeze({formatType:te.UNKNOWN,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]}),Object.freeze({type:D.VIDEO,id:0,baseDTS:0,basePTS:0,timescale:1e3,codec:"",width:0,height:0,vps:[],pps:[],sps:[],sei:[],pixelRatio:[],fps:0,live:!1})),Ra=Object.freeze({type:D.AUDIO,id:1,baseDTS:0,basePTS:0,timescale:1e3,codec:"",audioObjectType:2,samplingFrequencyIndex:0,sampleRate:0,sampleSize:16,channelCount:0}),Aa=(Object.defineProperty(Ir.prototype,"size",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),Ir.prototype.write=function(o){this.list.push(o)},Ir.prototype.read=function(){return this.list.shift()},Ir.prototype.readAll=function(){var o=this.list;return this.list=[],o},Ir.prototype.clear=function(){this.list=[]},Ir),Me=(qi=function(o,r){return(qi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}qi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)});function Ir(){this.list=[]}function Mo(o){var r=new g(o.read(4),32);this.syncByte=r.read(8),this.errorIndicator=r.read(1),this.payloadUnitStartIndicator=r.read(1),this.transportPriority=r.read(1),this.pid=r.read(13),this.transportScramblingControl=r.read(2),this.adaptationFlag=r.read(1),this.payloadFlag=r.read(1),this.continueCounter=r.read(4),this.adaptationFlag&&(r=o.read(1),o.skip(r)),this.payloadUnitStartIndicator&&o.skip(1)}(K=gr=gr||{})[K.UNKNOWN=0]="UNKNOWN",K[K.PAT=1]="PAT",K[K.PES=2]="PES",K[K.PMT=3]="PMT",Me(It,Mr=ue),It.probe=function(o){if(o.byteLength<1)return!1;for(var r=0,d=o.byteLength;r<d;r+=188)if(o[r]!==Or.SYNC_BYTE)return!1;return!0},It.prototype.splitToTsPacket=function(o){this.unhandleBuffer&&this.unhandleBuffer.byteLength&&(o=s.concat(this.unhandleBuffer,o),this.unhandleBuffer=void 0);for(var r=new Uint8Array(o),d=r.byteLength,b=0;b+188<=d;){if(r[b]!==Or.SYNC_BYTE){var k=new Uint8Array(r.buffer,b).findIndex(function(j){return j===Or.SYNC_BYTE});if(console.warn("[videox] mpegts sync byte error",r[b],b,k),-1<k){b+=k;continue}break}this.parseTsPacket(r.subarray(b,b+188)),b+=188}b<d&&(this.unhandleBuffer=o.slice(b))},It.prototype.parseTsPacket=function(d){var r,d=s.fromUint8(d),b=new Or(d),k=null;b.pid===Br.PAT?(k=new Lo(d),this.patPrograms=k.programs,this.emitTSPacket(gr.PAT,b,k)):this.patPrograms.some(function(j){return j.pid===b.pid})?(k=new Do(d),(r=B()(this.pmtStreams,k.streams))&&this.emitPackets(),this.metadataChanged=r,this.pmtStreams=k.streams,this.emitTSPacket(gr.PMT,b,k)):(r=this.pmtStreams.find(function(j){return j.pid===b.pid}))?(b.payloadUnitStartIndicator&&this.parsePes(),this.prevPesSegments.push(d.readToUint8()),this.prevPesTSHeader=b,this.prevPmtStream=r):this.emitTSPacket(gr.UNKNOWN,b,k)},It.prototype.parsePes=function(){var o,r=this.prevPmtStream;this.prevPesSegments.length&&this.prevPesTSHeader&&r&&(o=s.fromUint8(s.concatUint8s(this.prevPesSegments)),this.prevPesSegments=[],o.read(2)===1)&&(o=new Oo(o),this.emitTSPacket(gr.PES,this.prevPesTSHeader,o),r.streamType===lr.H265||r.streamType===lr.H266||r.streamType===lr.H264?this.parseVideoPes(o,r):r.streamType===lr.AAC&&this.parseAudioPes(o,r))},It.prototype.parseVideoPes=function(De,r){var d,b=Math.round(De.dts/90),k=Math.round(De.pts/90),j=r.streamType===lr.H265,Y=r.streamType===lr.H266,re={},de=!0,ge=!1,we=[],Se=[],Ce=[],We=[],De=R.extractAnnexbNAL(De.data);if(Y?(d=[],De.forEach(function(Ue){var He,Re=s.fromUint8(Ue);Ue.length<2||(He=new X(Re)).nalType<O.VVC_AUD_NUT&&(He.nalType===O.VVC_SPS_NUT?(ge=!0,Re=new Et(jt(Re.readToUint8())),re.width=Re.width,re.height=Re.height,re.codec=Re.codec,Se.push(Ue)):He.nalType===O.VVC_VPS_NUT?Ce.push(Ue):He.nalType===O.VVC_PPS_NUT&&We.push(Ue),de=X.isNonRefNALType(He.nalType)&&de,d.push(X.createAnnexbStartCode(),Ue))}),Y=s.concatUint8s(d),we.push(Y)):De.forEach(function(Ue){var He,Re,Ge=s.fromUint8(Ue);Ue.length<2||(j?(Re=new U(Ge)).nalType<I.ACCESS_UNIT_DELIMITER&&(Re.nalType>=I.VPS&&(Re.nalType===I.SPS?(ge=!0,He=new ht(jt(Ge.readToUint8())),re.width=He.width,re.height=He.height,re.pixelRatio=He.pixelRatio,re.codec=He.codec,Se.push(Ue)):Re.nalType===I.VPS?Ce.push(Ue):Re.nalType===I.PPS&&We.push(Ue)),!Rt.isSafari||Re.nalType===I.TRAIL_R||Re.nalType===I.TRAIL_N||Re.nalType===I.IDR_W_RADL||Re.nalType===I.IDR_N_LP||Re.nalType===I.CRA||Re.nalType===I.SPS||Re.nalType===I.VPS||Re.nalType===I.PPS||Re.nalType===I.SEI?we.push(Ue):console.warn("skip this nalu nalType:",Re.nalType),de=U.isNonRefNALType(Re.nalType)&&de):((Re=new H(Ge)).nalType<N.DIVIDER&&(Re.nalType===N.SPS?(ge=!0,He=new Ae(jt(Ge.readToUint8())),re.width=He.width,re.height=He.height,re.pixelRatio=He.pixelRatio,re.codec=He.codec,Se.push(Ue)):Re.nalType===N.PPS&&We.push(Ue),we.push(Ue)),de=!1))}),!this.videoLoaded){if(!ge)return;this.videoLoaded=!0,re.baseDTS=b,re.basePTS=k}Ce.length&&(re.vps=Ce),Se.length&&(re.sps=Se),We.length&&(re.pps=We),this.videoMetadata?(this.metadataChanged=G(this.videoMetadata,re),this.metadataChanged&&this.emit("updatedtrackmetadata",this.videoMetadata)):(this.videoMetadata=No()({},Ca,re),this.metadataChanged=!0),this.checkMetadataChanged(),this.packetQueue.write({trackId:r.pid,codec:this.videoMetadata.codec,trackType:D.VIDEO,isSync:ge,isNonRef:de,data:we,dts:b,pts:k,size:we.reduce(function(Ue,He){return Ue+He.byteLength},0)})},It.prototype.parseAudioPes=function(ge,r){var d,b,k,j=this,Y={},re=Math.round(ge.dts/90),de=Math.round(ge.pts/90),ge=(this.audioLoaded||(this.audioLoaded=!0,Y.baseDTS=re,Y.basePTS=de),P(ge.data));ge.length&&(d=ge[0],b="mp4a.40."+d.audioObjectType,Y.codec=b,Y.audioObjectType=d.audioObjectType,Y.sampleRate=d.sampleRate,Y.channelCount=d.channelCount,this.audioMetadata?(this.metadataChanged=G(this.audioMetadata,Y),this.metadataChanged&&this.emit("updatedtrackmetadata",this.audioMetadata)):(this.audioMetadata=No()({},Ra,Y),this.metadataChanged=!0),this.checkMetadataChanged(),k=Math.round(9e4*T/d.sampleRate/90),ge.forEach(function(we,Se){j.packetQueue.write({trackId:r.pid,codec:b,trackType:D.AUDIO,isSync:!0,isNonRef:!0,data:[we.data],dts:k*Se+re,pts:k*Se+de,size:we.data.byteLength})}))},It.prototype.checkMetadataChanged=function(){var o,r,d=this;return this.pmtStreams.length&&this.metadataChanged&&(o=[],this.pmtStreams.every(function(b){return b=Io[b.streamType],b===D.VIDEO?(d.videoMetadata&&o.push(d.videoMetadata),!(!d.videoMetadata||!d.videoMetadata.codec)):b!==D.AUDIO||(d.audioMetadata&&o.push(d.audioMetadata),!(!d.audioMetadata||!d.audioMetadata.codec))}))&&(r={formatType:te.MPEGTS,live:!1,progressive:!!this.options.progressive,url:this.loader.url,basePTS:Math.min.apply(Math,o.map(function(b){return b.basePTS||0})),baseDTS:Math.min.apply(Math,o.map(function(b){return b.baseDTS||0})),timescale:1e3,duration:0,tracks:o},this.metadataChanged=!1,this.metadata?G(this.metadata,r)&&this.emit("updatedmetadata",this.metadata):(this.metadata=r,this.emit("loadedmetadata",this.metadata))),this.metadataChanged},It.prototype.emitTSPacket=function(o,r,d){ve.debug("loadedtspacket","type:",gr[o],"header:",r,"payload:",d),this.emit("loadedtspacket",{type:o,header:r,payload:d})},It.prototype.emitPackets=function(){var o;this.metadata&&this.loader.status!==se.SUSPENGING&&!this.metadataChanged&&0<this.packetQueue.size&&(o=this.packetQueue.readAll(),this.emit("loadeddata",{packets:o}))},It.prototype.continuousLoad=function(o){return this.loader.load(o)},It.prototype.parse=function(o){this.splitToTsPacket(o),this.emitPackets()},It.prototype.onProgress=function(o){o.data.byteLength&&this.parse(o.data.buffer)},It.prototype.onLoadEnd=function(){this.parsePes(),this.emitPackets(),this.loader.eof&&this.emit("end",void 0)},It.prototype.resume=function(){return this.options.progressive?Mr.prototype.resume.call(this):u.resolve(!1)},It.prototype.flush=function(){this.unhandleBuffer=void 0,this.prevPesTSHeader=void 0,this.prevPmtStream=void 0,this.prevPesSegments=[]},It.prototype.seek=function(){this.reset(),this.loader.jump(0)},It.prototype.reset=function(){Mr.prototype.reset.call(this),this.flush(),this.audioLoaded=!1,this.videoLoaded=!1,this.packetQueue.clear(),this.patPrograms=[],this.pmtStreams=[],this.metadata=null,this.audioMetadata=void 0,this.videoMetadata=void 0,this.metadataChanged=!1};var zi=It;Xi=function(o,r){return(Xi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)};var Ki=function(){return(Ki=Object.assign||function(o){for(var r,d=1,b=arguments.length;d<b;d++)for(var k in r=arguments[d])Object.prototype.hasOwnProperty.call(r,k)&&(o[k]=r[k]);return o}).apply(this,arguments)},Dr={M3U:/^#EXTM3U/,INF:/^#EXTINF:?([0-9\.]*)?,?(.*)?(?:\n|\r\n)(.*)$/,X_MEDIA_SEQUENCE:/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/,X_ENDLIST:/^#EXT-X-ENDLIST/,X_DISCONTINUITY:/^#EXT-X-DISCONTINUITY/},Uo=(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Xi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Mt,Nr=ue),Mt.probe=function(o){var r;return 7<=o.byteLength&&(r=[],o.forEach(function(d){return r.push(String.fromCharCode(d))}),Dr.M3U.test(r.join("")))},Object.defineProperty(Mt.prototype,"status",{get:function(){return this.loader.eof?this.mpegtsParser.status===se.IDLE?this.shouldContinuousLoad?se.LOADING:se.SUSPENGING:this.mpegtsParser.status:this.loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(Mt.prototype,"duration",{get:function(){return this.isLive?1/0:Math.round(1e3*this.segments.reduce(function(o,r){return o+r.duration},0))},enumerable:!1,configurable:!0}),Object.defineProperty(Mt.prototype,"currentSegment",{get:function(){return this.segments[this.currSegmentIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(Mt.prototype,"prevSegmentsTotalDuration",{get:function(){return this.segments.slice(0,this.currSegmentIndex).reduce(function(o,r){return o+r.duration},0)},enumerable:!1,configurable:!0}),Mt.prototype.insertSegment=function(o){var r=!this.segments.some(function(d){return d.uri===o.uri});return r&&this.segments.push(o),r},Mt.prototype.onProgress=function(o){this.bufferSegments.push(o)},Mt.prototype.onLoadEnd=function(){var o,r,d,b,k,j=this;this.loader.eof&&(r=s.concatUint8s(this.bufferSegments.map(function(Y){return Y.data})),this.bufferSegments=[],r.byteLength&&(r=new TextDecoder().decode(r).split(/\n#/).map(function(Y){return"#"+Y.trim()}),d=0,k=b=!1,r.forEach(function(Y){var re=Y.match(Dr.INF);re?(re={sequence:d,duration:parseFloat(re[1]),uri:new URL(re[3],j.url).href,discontinuity:k},j.insertSegment(re),j.emit("loadedsegment",re)):(o=Y.match(Dr.X_MEDIA_SEQUENCE))?d=Number(o[1]):Dr.X_ENDLIST.test(Y)?b=!0:Dr.X_DISCONTINUITY.test(Y)&&(k=!0)}),this.discontinuity=k,this.isLive=!b,this.segments.length||this.emit("error",{code:he.PARSER,message:"M3U8文件无TS数据"}),this.prevManifestLoadedTime=Date.now(),this.loadSegment()),ve.info("hls manifest loaded, all segments length:",this.segments.length))},Mt.prototype.loadSegment=function(){var o,r,d=this;return this.shouldContinuousLoad?(o=this.segments[this.currSegmentIndex],this.isLive&&!o?(r=1e3*this.m3u8UpdateDuration-(Date.now()-this.prevManifestLoadedTime))<=0?this.loader.load(this.loader.url):new u(function(b){clearTimeout(d.fetchTimer),d.fetchTimer=setTimeout(function(){b(d.loader.load(d.loader.url))},r)}):o?(this.cachePackets=[],this.m3u8UpdateDuration=o.duration||2,this.currSegmentStartPTS=void 0,this.mpegtsParser.continuousLoad(o.uri)):(this.ended=!0,u.resolve(!1))):u.resolve(!1)},Mt.prototype.suspend=function(){clearTimeout(this.fetchTimer),this.shouldContinuousLoad=!1},Mt.prototype.resume=function(){var o;return this.cachePackets.length?(o=this.cachePackets,this.cachePackets=[],this.emit("loadeddata",{packets:o}),u.resolve(!1)):this.shouldContinuousLoad||this.ended?u.resolve(!1):(this.shouldContinuousLoad=!0,this.loader.eof?this.mpegtsParser.loader.status===se.LOADING||this.mpegtsParser.loader.status===se.ERROR?u.resolve(!0):this.loadSegment():Nr.prototype.resume.call(this))},Mt.prototype.seek=function(o){this.ended=!1;var r=0,d=this.segments.findIndex(function(b){return r+=b.duration,o<r});this.currSegmentIndex=-1<d?d:this.segments.length-1,this.cachePackets=[],this.bufferSegments=[],this.mpegtsParser.suspend(),this.mpegtsParser.flush(),this.shouldContinuousLoad=!0,this.loadSegment()},Mt.prototype.reset=function(){clearTimeout(this.fetchTimer),Nr.prototype.reset.call(this),this.discontinuity=!1,this.cachePackets=[],this.bufferSegments=[],this.shouldContinuousLoad=!0,this.mpegtsParser.reset(),this.segments=[],this.currSegmentIndex=0,this.isLive=!1,this.ended=!1},Mt.prototype.destroy=function(){Nr.prototype.destroy.call(this),this.mpegtsParser.loader.removeAllListeners(),this.mpegtsParser.destroy()},Mt),K=c(801),Ia=c.n(K);Gi=function(o,r){return(Gi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)};function Vr(o,r,d){if(arguments.length===2)for(var b,k=0,j=r.length;k<j;k++)!b&&k in r||((b=b||Array.prototype.slice.call(r,0,k))[k]=r[k]);return o.concat(b||Array.prototype.slice.call(r))}function cr(o){return o.split("").map(function(r){return r.charCodeAt(0)})}var Fo,Gi,Nr,Xi,Mr,Yi=function(){return(Yi=Object.assign||function(o){for(var r,d=1,b=arguments.length;d<b;d++)for(var k in r=arguments[d])Object.prototype.hasOwnProperty.call(r,k)&&(o[k]=r[k]);return o}).apply(this,arguments)},La=["loadedmetadata","updatedmetadata","updatedtrackmetadata","loadeddata","error","end"],Oa=[So,Uo,on,zi],Da=(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}Gi(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(zt,Fo=oe),zt.prototype.createLoader=function(){var o=new nt(this.options);return o.proxy(this,["progress","error"]),o.proxyOnce(this,["loadstart","loadend"]),o.once("progress",this.handleFirstLoadData),o},zt.prototype.createParser=function(o){return o=new o(Yi(Yi({},this.options),{loader:this.loader})),o.proxy(this,La),o},Object.defineProperty(zt.prototype,"skipFrame",{get:function(){return this.activeParser.skipFrame},set:function(o){ve.info("设置skipFrame:",o),Ia()(o)||(this.options.skipFrame=o,this.activeParser.skipFrame=o)},enumerable:!1,configurable:!0}),Object.defineProperty(zt.prototype,"status",{get:function(){return this.activeParser.status},enumerable:!1,configurable:!0}),Object.defineProperty(zt.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),zt.prototype.parse=function(o){ve.info("执行parse"),this.loader.reset(),this.handleFirstLoadData({offset:0,data:o}),this.activeParser.onLoadEnd()},zt.prototype.load=function(o){return ve.info("执行load",o),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(o)},zt.prototype.seek=function(o){return ve.info("执行seek",o),this.activeParser.seek(o)},zt.prototype.suspend=function(){return this.activeParser.suspend()},zt.prototype.resume=function(){return this.activeParser.resume()},zt.prototype.destroy=function(){ve.info("执行destory"),this.loader.destroy(),this.activeParser.destroy(),this.removeAllListeners()},zt);function zt(o){o===void 0&&(o={});var r=Fo.call(this)||this;return r.loader=new nt,r.parserClasses=Oa,r.logger=ve,r.handleFirstLoadData=function(d){var b,k;d&&((k=r.parserClasses.find(function(j){return j.probe(d.data)}))?(b=r.activeParser.formatType,r.activeParser.destroy(),r.activeParser=r.createParser(k),ve.info("切换parser, ".concat(te[b]," -> ").concat(te[r.activeParser.formatType])),r.emit("parserchange",void 0),r.activeParser.onProgress(d)):(k="未找到对应的Parser, Byte数据: "+d.data.slice(0,20).join(","),ve.error(k),r.emit("error",{code:he.PARSER,message:k})))},r.options=o,r.loader=r.createLoader(),r.activeParser=r.createParser(r.parserClasses[0]),r.logger.info("demuxer options",o),r}function Mt(o){var r=Nr.call(this,o)||this;return r.mpegtsParser=new zi({progressive:!0,timeout:r.options.timeout}),r.currSegmentIndex=0,r.isLive=!1,r.shouldContinuousLoad=!0,r.ended=!1,r.prevManifestLoadedTime=0,r.fetchTimer=-1,r.discontinuity=!1,r.m3u8UpdateDuration=2,r.bufferSegments=[],r.cachePackets=[],r.formatType=te.HLS,r.segments=[],r.handleTSEnd=function(){r.currSegmentIndex>=r.segments.length-1&&r.emit("end",void 0)},r.handleTSLoadedMetadata=function(d){r.basePTS===void 0&&(r.basePTS=d.basePTS),r.baseDTS===void 0&&(r.baseDTS=d.baseDTS),d=Ki(Ki({},d),{formatType:te.HLS,live:r.isLive,progressive:!0,basePTS:r.basePTS,baseDTS:r.baseDTS,duration:r.duration,url:r.loader.url,discontinuity:r.discontinuity}),r.metadata?G(r.metadata,d)&&r.emit("updatedmetadata",r.metadata):(r.metadata=d,r.emit("loadedmetadata",r.metadata))},r.handleTSLoadedData=function(re){var b,k,j,Y,re=re.packets;re.length&&((b=r.currentSegment)!=null&&b.discontinuity&&(b=re.slice().sort(function(de,ge){return de.pts-ge.pts}),r.currSegmentStartPTS===void 0&&(r.currSegmentStartPTS=b[0].pts),k=r.currSegmentStartPTS,j=Math.round(1e3*r.prevSegmentsTotalDuration)+(r.basePTS||0),b.forEach(function(de){var ge=de.dts-de.pts;de.pts=j+de.pts-k,de.dts=de.pts+ge})),r.cachePackets.length?(Y=r.cachePackets.concat(re),r.cachePackets=[]):Y=re,r.shouldContinuousLoad?r.emit("loadeddata",{packets:Y}):r.cachePackets=Y)},r.handleTSLoadEnd=function(){r.currSegmentIndex++,r.loadSegment()},r.mpegtsParser.on("loadedmetadata",r.handleTSLoadedMetadata),r.mpegtsParser.on("updatedmetadata",r.handleTSLoadedMetadata),r.mpegtsParser.on("loadeddata",r.handleTSLoadedData),r.mpegtsParser.on("end",r.handleTSEnd),r.mpegtsParser.loader.on("loadend",r.handleTSLoadEnd),r.mpegtsParser.loader.proxy(r,["error"]),r.mpegtsParser.proxy(r,["updatedtrackmetadata"]),r}function It(){var o=Mr!==null&&Mr.apply(this,arguments)||this;return o.patPrograms=[],o.pmtStreams=[],o.prevPesSegments=[],o.packetQueue=new Aa,o.audioLoaded=!1,o.videoLoaded=!1,o.metadataChanged=!1,o.metadata=null,o.formatType=te.MPEGTS,o}Ye.prototype.create=function(o){for(var r=[],d=1;d<arguments.length;d++)r[d-1]=arguments[d];var b=new Uint8Array(8),k=[b].concat(r.map(function(re){return new Uint8Array(re)})),j=k.reduce(function(re,de){return re+de.byteLength},0),Y=new s(b.buffer);return Y.write(4,j),cr(o).forEach(function(re){return Y.write(1,re)}),s.concatUint8s(k)},Ye.prototype.avc1=function(o){var k=o.pixelRatio,r=o.vps,d=new ArrayBuffer(78),b=new s(d),k=(b.write(4,0),b.write(2,0),b.write(2,1),b.write(4,0),b.write(4,0),b.write(4,0),b.write(4,0),b.write(2,o.width),b.write(2,o.height),b.write(4,4718592),b.write(4,4718592),b.write(4,0),b.write(2,1),b.write(1,12),cr("@ali/splayer").forEach(function(j){return b.write(1,j)}),b.skip(19),b.write(2,24),b.write(2,65535),k.length===2?this.pasp(k[0],k[1]):[]);return r.length?this.create("hvc1",d,this.hvcC(o),k):this.create("avc1",d,this.avcC(o),k)},Ye.prototype.avcC=function(k){var b=k.sps,k=k.pps,r=[],d=[],b=(r.push(b.length),b.forEach(function(j){r.push(j.byteLength>>>8&255),r.push(255&j.byteLength),j.forEach(function(Y){return r.push(Y)})}),d.push(k.length),k.forEach(function(j){d.push(j.byteLength>>>8&255),d.push(255&j.byteLength),j.forEach(function(Y){return d.push(Y)})}),new ArrayBuffer(5)),k=new s(b);return k.write(1,1),k.write(1,r[4]||0),k.write(1,r[5]||0),k.write(1,r[6]||0),k.write(1,255),this.create("avcC",b,r,d)},Ye.prototype.btrt=function(){var o=new ArrayBuffer(12),r=new s(o);return r.write(4,1875072),r.write(4,3e6),r.write(4,3e6),this.create("btrt",o)},Ye.prototype.pasp=function(o,r){var d=new ArrayBuffer(8),b=new s(d);return b.write(4,o),b.write(4,r),this.create("pasp",d)},Ye.prototype.dinf=function(){return this.create("dinf",this.dref())},Ye.prototype.dref=function(){var o=new ArrayBuffer(8),r=new s(o);return r.write(4,0),r.write(4,1),this.create("dref",o,this.url())},Ye.prototype.esds=function(b){var r=b.audioObjectType,d=b.sampleRate,b=b.channelCount,k=new ArrayBuffer(33),j=new s(k),Y=5<=r,re=(j.write(4,0),j.write(1,3),j.write(1,Y?27:25),j.write(2,1),j.write(1,0),j.write(1,4),j.write(1,Y?19:17),j.write(1,64),j.write(1,21),j.write(3,0),j.write(4,0),j.write(4,0),j.write(1,5),j.write(1,Y?4:2),_.findIndex(function(de){return d===de}));return j.write(1,r<<3|(14&re)>>1),Y?(j.write(1,(1&(r=re))<<7|b<<3|(14&r)>>1),j.write(1,(1&r)<<7|8),j.write(1,0)):j.write(1,(1&re)<<7|b<<3),j.back(4),j.skip(4),j.write(1,6),j.write(1,1),j.write(1,2),this.create("esds",k)},Ye.prototype.ftyp=function(){var o=new ArrayBuffer(16),r=new s(o);return cr("isom").forEach(function(d){return r.write(1,d)}),r.write(4,1),cr("isom").forEach(function(d){return r.write(1,d)}),cr("avc1").forEach(function(d){return r.write(1,d)}),this.create("ftyp",o)},Ye.prototype.hdlr=function(o){var r=new ArrayBuffer(37),d=new s(r);return d.skip(8),o===D.VIDEO?cr("vide").forEach(function(b){return d.write(1,b)}):o===D.AUDIO&&cr("soun").forEach(function(b){return d.write(1,b)}),d.skip(12),o===D.VIDEO?cr("VideoHandler").forEach(function(b){return d.write(1,b)}):o===D.AUDIO&&cr("SoundHandler").forEach(function(b){return d.write(1,b)}),d.write(1,0),this.create("hdlr",r)},Ye.prototype.hvcC=function(k){var b=k.vps,r=k.sps,k=k.pps,d=[],b=[{type:I.VPS,data:b},{type:I.SPS,data:r},{type:I.PPS,data:k}],k=(b.forEach(function(we){var ge=we.type,we=we.data;d.push(128|ge),d.push(we.length>>>8&255),d.push(255&we.length),we.forEach(function(Se){d.push(Se.byteLength>>>8&255),d.push(255&Se.byteLength),Se.forEach(function(Ce){return d.push(Ce)})})}),new ArrayBuffer(23)),j=new s(k),Y=r.length?r[0]:[];j.write(1,1);for(var re=1;re<12;re++)j.write(1,Y[re]||0);return j.write(1,0),j.write(2,0),j.write(1,0),j.write(1,1),j.write(1,0),j.write(1,0),j.write(2,0),j.write(1,15),j.write(1,b.length),this.create("hvcC",k,d)},Ye.prototype.mdat=function(o){return this.create("mdat",o)},Ye.prototype.mdhd=function(o){var r=new ArrayBuffer(24),d=new s(r);return d.write(4,0),d.write(4,0),d.write(4,0),d.write(4,o.timescale),d.write(4,0),d.write(2,21956),d.write(2,0),this.create("mdhd",r)},Ye.prototype.mdia=function(o){return this.create("mdia",this.mdhd(o),this.hdlr(o.type),this.minf(o))},Ye.prototype.mfhd=function(o){var r=new ArrayBuffer(8),d=new s(r);return d.write(4,0),d.write(4,o),this.create("mfhd",r)},Ye.prototype.minf=function(o){var r=o.type===D.VIDEO?this.vmhd():this.smhd();return this.create("minf",r,this.dinf(),this.stbl(o))},Ye.prototype.moof=function(Y,k,d){var b=this,k=this.mfhd(k),j=8+k.byteLength+60*Y.tracks.length+16*d.length+8,Y=Y.tracks.map(function(re){var de=d.filter(function(we){return we.trackType===re.type}),ge=b.traf(re,de,j);return j+=de.reduce(function(we,Se){return we+Se.size},0),ge});return this.create.apply(this,Vr(["moof",k],Y,!1))},Ye.prototype.moov=function(o){var r=this,d=o.tracks.map(function(b){return r.trak(b)});return this.create.apply(this,Vr(Vr(["moov",this.mvhd(o)],d,!1),[this.mvex(o)],!1))},Ye.prototype.mp4a=function(o){var r=new ArrayBuffer(28),d=new s(r);return d.write(4,0),d.write(2,0),d.write(2,1),d.write(4,0),d.write(4,0),d.write(2,o.channelCount),d.write(2,o.sampleSize),d.write(4,0),d.write(4,o.sampleRate<<16),this.create("mp4a",r,this.esds(o))},Ye.prototype.mvex=function(o){var r=this;return this.create.apply(this,Vr(["mvex"],o.tracks.map(function(d){return r.trex(d)}),!1))},Ye.prototype.mvhd=function(o){var r=new ArrayBuffer(100),d=new s(r);return d.write(4,0),d.write(4,0),d.write(4,0),d.write(4,o.timescale),d.write(4,o.duration),d.write(2,1),d.skip(2),d.write(1,1),d.skip(1),d.skip(10),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach(function(b){return d.write(1,b)}),d.skip(24),d.write(4,4294967295),this.create("mvhd",r)},Ye.prototype.sdtp=function(o){var r=o.length,d=new ArrayBuffer(4+r),b=new s(d);b.write(4,0);for(var k=0;k<r;k++){var j=o[k];b.write(1,j.flag)}return this.create("sdtp",d)},Ye.prototype.smhd=function(){var o=new ArrayBuffer(8),r=new s(o);return r.write(4,0),r.write(4,0),this.create("smhd",o)},Ye.prototype.stbl=function(o){return this.create("stbl",this.stsd(o),this.stts(),this.stsc(),this.stsz(),this.stco())},Ye.prototype.stco=function(){var o=new ArrayBuffer(8),r=new s(o);return r.write(4,0),r.write(4,0),this.create("stco",o)},Ye.prototype.stsc=function(){var o=new ArrayBuffer(8),r=new s(o);return r.write(4,0),r.write(4,0),this.create("stsc",o)},Ye.prototype.stsd=function(o){var r=new ArrayBuffer(8),d=new s(r);return d.write(4,0),d.write(4,1),o.type===D.VIDEO?this.create("stsd",r,this.avc1(o)):o.type===D.AUDIO?this.create("stsd",r,this.mp4a(o)):this.create("stsd",r)},Ye.prototype.stsz=function(){var o=new ArrayBuffer(12),r=new s(o);return r.write(4,0),r.write(4,0),r.write(4,0),this.create("stsz",o)},Ye.prototype.stts=function(){var o=new ArrayBuffer(8),r=new s(o);return r.write(4,0),r.write(4,0),this.create("stts",o)},Ye.prototype.tkhd=function(o){var r=new ArrayBuffer(84),d=new s(r);return d.write(4,7),d.write(4,0),d.write(4,0),d.write(4,o.id),d.write(4,0),d.write(4,0),d.write(4,0),d.write(4,0),d.write(4,0),d.write(1,0),d.write(1,0),d.write(2,0),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach(function(b){return d.write(1,b)}),d.write(2,o.width||0),d.write(2,0),d.write(2,o.height||0),d.write(2,0),this.create("tkhd",r)},Ye.prototype.tfdt=function(o){var r=new ArrayBuffer(8),d=new s(r);return d.write(4,0),d.write(4,o),this.create("tfdt",r)},Ye.prototype.tfhd=function(o){var r=new ArrayBuffer(8),d=new s(r);return d.write(4,0),d.write(4,o.id),this.create("tfhd",r)},Ye.prototype.traf=function(o,r,d){d===void 0&&(d=0);var b=r.length?r[0].dts:0;return this.create("traf",this.tfhd(o),this.tfdt(b),this.trun(r,d))},Ye.prototype.trak=function(o){return this.create("trak",this.tkhd(o),this.mdia(o))},Ye.prototype.trex=function(o){var r=new ArrayBuffer(24),d=new s(r);return d.write(4,0),d.write(4,o.id),d.write(4,1),d.write(4,0),d.write(4,0),d.write(4,65537),this.create("trex",r)},Ye.prototype.trun=function(o,r){var d=o.length,b=new ArrayBuffer(12+16*d),k=new s(b);k.write(4,3841),k.write(4,o.length),k.write(4,r);for(var j=0;j<d;j++){var Y=o[j];k.write(4,Y.duration),k.write(4,Y.size),k.write(4,Y.flag),k.write(4,Y.cts)}return this.create("trun",b)},Ye.prototype.vmhd=function(){var o=new ArrayBuffer(12),r=new s(o);return r.write(4,1),r.write(2,0),r.write(2,0),r.write(2,0),r.write(2,0),this.create("vmhd",o)},Ye.prototype.url=function(){var o=new ArrayBuffer(4);return new s(o).write(4,1),this.create("url ",o)};var Na=Ye;function Ye(){}Qi.createSilentFrame=function(o,r){if(o==="mp4a.40.2"){if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return new Uint8Array},Qi.FRAME_DURATION=1024;var jo=Qi;function Qi(){}pr.prototype.updateConfig=function(o){Object.assign(this.config,o)},pr.prototype.createInitSegment=function(){var o=s.concatUint8(this.generator.ftyp(),this.generator.moov(this.config));return this.offset=o.byteLength,o},pr.prototype.createSegment=function(o){var r,d,b=this;return o.length?(r=[],this.config.tracks.forEach(function(k){var j,Y=o.filter(function(re){return re.trackType===k.type});Y.length&&(j=null,k.type===D.VIDEO?j=b.recaculateVideoSamples(Y,k):k.type===D.AUDIO&&(j=b.recaculateAudioSamples(Y,k)),j)&&(r.push(b.generator.moof(b.config,++b.sequenceNumber,j)),r.push(b.generator.mdat(s.concatUint8s(j.map(function(re){return re.data})))))}),d=s.concatUint8s(r),this.offset+=d.byteLength,d):new Uint8Array},pr.prototype.createSlientFrames=function(o,r,d,b){var k=[];if(1.5*b<d){this.logger.warn("remux audio found pts hole at pts:",o,"timestamp:",(o-this.config.basePTS)/r.timescale,"gap duration:",d,"sample duration:",b);for(var j=jo.createSilentFrame(r.codec,r.channelCount),Y=Math.ceil(d/b),re=0;re<Y;re++)k.push({flag:dt.DEPENDS_NO,trackType:D.AUDIO,dts:o+b*re,cts:0,duration:b,size:j.byteLength,data:j,isSync:!0});k.length&&(k[k.length-1].duration=d-(Y-1)*b)}return k},pr.prototype.recaculateAudioSamples=function(o,r){var d=[];this.prevAudioPacket&&(o.unshift(this.prevAudioPacket),this.prevAudioPacket=void 0);var b,k,j=Math.round(jo.FRAME_DURATION/r.sampleRate*r.timescale);!this.audioInited&&o.length&&(this.audioInited=!0,k=o[0].pts-this.config.basePTS,this.createSlientFrames(this.config.basePTS,r,k,j).forEach(function(Se){d.push(Se)}));for(var Y,re,de=0,ge=0,we=o.length;de<we;de++){if(b=o[de],Y=o[de+1]){if((ge=Y.dts-b.dts)<0){if(!((Y=o.findIndex(function(Se){return b.dts<Se.dts}))>de+1))break;ge=o[Y].dts-b.dts,de=Y-1,this.logger.warn("remux audio found pts overlap at pts:",b.pts,"timestamp:",(b.pts-(this.config.basePTS||0))/r.timescale,"gap duration:",ge,"sample duration:",j)}}else{if(!b.isLast||!d.length){this.prevAudioPacket=b;break}ge=d[d.length-1].duration}0<ge&&((Y=this.createSlientFrames(b.pts+j,r,ge-j,j)).length&&(ge=j),re=s.concatUint8s(b.data),d.push({flag:dt.DEPENDS_NO,trackType:D.AUDIO,size:re.byteLength,dts:b.dts,cts:b.pts-b.dts,duration:ge,data:re,isSync:!0}),Y.forEach(function(Se){d.push(Se)}))}return d.length&&this.recaculateSample(d[0],this.config.baseDTS),d},pr.prototype.recaculateVideoSamples=function(o,r){var d;this.prevVideoPacket&&(o.unshift(this.prevVideoPacket),this.prevVideoPacket=void 0),this.videoInited||(this.videoInited=!0,d=Math.min.apply(Math,o.map(function(De){return De.pts})),o.find(function(De){return De.pts===d}).pts=this.config.basePTS);for(var b,k,j,Y,re=[],de=this,ge=0,we=0,Se=0,Ce=o.length;ge<Ce;ge++){var We=function(He,Re,Ge,Ct){if(b=o[He],k=o[He+1]){if((Ge=k.dts-b.dts)<0){for(k.dts=b.dts,Re=He+1;Re<Ct-1;Re++)o[Re].dts>o[Re+1].dts&&(o[Re+1].dts=o[Re].dts);de.logger.warn("remux video found pts overlap at pts:",b.pts,"timestamp:",(b.pts-de.config.basePTS)/r.timescale,"gap packet number:",Re-He,"gap duration:",Ge),Ge=0}}else{if(!b.isLast||!re.length)return de.prevVideoPacket=b,j=Re,Y=Ge,"break";Ge=re[re.length-1].duration}var ut;0<=Ge&&(ut=[],b.data.forEach(function(Ve){ut.push(H.createAVCCStartCode(Ve.length),Ve)}),He=s.concatUint8s(ut),re.push({flag:b.isSync?dt.DEPENDS_NO:dt.IS_NON_SYNC|dt.DEPENDS_YES,trackType:D.VIDEO,size:He.byteLength,dts:b.dts,cts:b.pts-b.dts,duration:Ge,data:He,isSync:b.isSync})),j=Re,Y=Ge}(ge,we,Se,Ce),we=j,Se=Y;if(We==="break")break}return re.length&&this.recaculateSample(re[0],this.config.baseDTS),re},pr.prototype.recaculateSample=function(o,r){return r=o.dts-r,o.dts=r,o},pr.prototype.flush=function(){this.prevAudioPacket=void 0,this.prevVideoPacket=void 0};var Ji=pr;rn=function(o,r){return(rn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}rn(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(Wr,tn=oe),Wr.prototype.end=function(){this.emit("end",void 0)},Wr.prototype.pipe=function(o,r){return r?this.on("data",function(d){return o.write(r(d))}):this.on("data",function(d){return o.write(d)}),this.on("end",function(){return o.end()}),o},Me=Wr,en=function(o,r){return(en=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(d[k]=b[k])}))(o,r)};var Zi,en,tn,rn,nn=function(){return(nn=Object.assign||function(o){for(var r,d=1,b=arguments.length;d<b;d++)for(var k in r=arguments[d])Object.prototype.hasOwnProperty.call(r,k)&&(o[k]=r[k]);return o}).apply(this,arguments)},Ma=(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=o}en(o,r),o.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}(dr,Zi=Me),dr.prototype.remux=function(o,r){var d=this.remuxerMap.get(o);d&&r.length&&this.emit("data",{type:o,buffer:d.createSegment(r).buffer,eos:!!r[r.length-1].isLast})},dr.prototype.eos=function(){var o=this;this.pendingPacketsMap.forEach(function(r,d){o.pendingPacketsMap.delete(d),o.remux(d,r)})},dr.prototype.writeMetadata=function(o){var r=this;(this.metadata=o).tracks.forEach(function(d){return r.writeTrackMetadata(d)})},dr.prototype.writeTrackMetadata=function(o){this.eos();var r=this.remuxerMap.get(o.type);r&&(r.updateConfig(nn(nn({},this.metadata),{tracks:[o]})),this.emit("data",{type:o.type,buffer:r.createInitSegment().buffer,eos:!1}))},dr.prototype.write=function(d){var r=this,d=d.packets,b=this.pendingPacketsMap;d.forEach(function(k){var j=b.get(k.trackType);j?(j.push(k),10<=j.length&&(b.set(k.trackType,[]),r.remux(k.trackType,j))):b.set(k.trackType,[k])})},dr.prototype.flush=function(){this.remuxerMap.forEach(function(o){return o.flush()}),this.pendingPacketsMap.clear()},dr.prototype.end=function(){this.eos(),Zi.prototype.end.call(this)},dr);function dr(){var o=Zi.call(this)||this;return o.remuxerMap=new Map,o.pendingPacketsMap=new Map,o.metadata={},o.remuxerMap.set(D.VIDEO,new Ji),o.remuxerMap.set(D.AUDIO,new Ji),o}function Wr(){return tn!==null&&tn.apply(this,arguments)||this}function pr(){this.logger=new Ee("remux"),this.generator=new Na,this.config={formatType:te.MP4,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]},this.sequenceNumber=0,this.offset=0,this.videoInited=!1,this.audioInited=!1,this.lastPacketMap=new Map}}(),n;function c(l){var a=h[l];return a!==void 0||(a=h[l]={id:l,loaded:!1,exports:{}},f[l](a,a.exports,c),a.loaded=!0),a.exports}var f,h,n},typeof w=="object"&&typeof t=="object"?t.exports=y():typeof w=="object"?w.VideoxMuxer=y():e.VideoxMuxer=y()},{"es6-promise":8}],54:[function(e,t,w){function y(c){for(var f=5381,h=c.length;h;)f=33*f^c.charCodeAt(--h);return(f>>>0).toString()}var u=e("./vttparse");t.exports={parse:function(l,f,h){var n,l=l.trim().replace(/\r\n|\n\r|\n|\r/g,`
`).split(`
`),a=[],s=new u;s.oncue=function(_){_.id=y(_.startTime)+y(_.endTime)+y(_.text),_.text=decodeURIComponent(escape(_.text)),_.isBig=!1;var T=_.text.split("#xywh=");T.length==2&&(T=T[1].split(","),_.x=T[0],_.y=T[1],_.w=T[2],_.h=T[3],_.isBig=!0),0<_.endTime&&a.push(_)},s.onparsingerror=function(_){n=_},s.onflush=function(){n&&h?(h(n),console.log(n)):f(a)},l.forEach(function(_){s.parse(_+`
`)}),s.flush()}}},{"./vttparse":56}],55:[function(e,t,w){function y(n){return typeof n=="string"&&!!h[n.toLowerCase()]&&n.toLowerCase()}function u(n){for(var l=1;l<arguments.length;l++){var a,s=arguments[l];for(a in s)n[a]=s[a]}return n}function c(n,l,a){var s=this,_=function(){if(typeof navigator<"u")return/MSIE\s8\.0/.test(navigator.userAgent)}(),T={},m=(_?s=document.createElement("custom"):T.enumerable=!0,s.hasBeenReset=!1,""),v=!1,S=n,x=l,P=a,g=null,E="",C=!0,R="auto",A="start",L=50,N="middle",I=50,M="middle";if(Object.defineProperty(s,"id",u({},T,{get:function(){return m},set:function(H){m=""+H}})),Object.defineProperty(s,"pauseOnExit",u({},T,{get:function(){return v},set:function(H){v=!!H}})),Object.defineProperty(s,"startTime",u({},T,{get:function(){return S},set:function(H){if(typeof H!="number")throw new TypeError("Start time must be set to a number.");S=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",u({},T,{get:function(){return x},set:function(H){if(typeof H!="number")throw new TypeError("End time must be set to a number.");x=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",u({},T,{get:function(){return P},set:function(H){P=""+H,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",u({},T,{get:function(){return g},set:function(H){g=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",u({},T,{get:function(){return E},set:function(H){if(H=typeof(H=H)=="string"&&!!f[H.toLowerCase()]&&H.toLowerCase(),H===!1)throw new SyntaxError("An invalid or illegal string was specified.");E=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",u({},T,{get:function(){return C},set:function(H){C=!!H,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",u({},T,{get:function(){return R},set:function(H){if(typeof H!="number"&&H!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");R=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",u({},T,{get:function(){return A},set:function(H){if(H=y(H),!H)throw new SyntaxError("An invalid or illegal string was specified.");A=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",u({},T,{get:function(){return L},set:function(H){if(H<0||100<H)throw new Error("Position must be between 0 and 100.");L=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",u({},T,{get:function(){return N},set:function(H){if(H=y(H),!H)throw new SyntaxError("An invalid or illegal string was specified.");N=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",u({},T,{get:function(){return I},set:function(H){if(H<0||100<H)throw new Error("Size must be between 0 and 100.");I=H,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",u({},T,{get:function(){return M},set:function(H){if(H=y(H),!H)throw new SyntaxError("An invalid or illegal string was specified.");M=H,this.hasBeenReset=!0}})),s.displayState=void 0,_)return s}var f,h;t.exports=typeof window<"u"&&window.VTTCue?window.VTTCue:(f={"":!0,lr:!0,rl:!0},h={start:!0,middle:!0,end:!0,left:!0,right:!0},c.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},c)},{}],56:[function(e,t,w){function y(){return{decode:function(s){if(!s)return"";if(typeof s!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(s))}}}var u=e("./vttcue");function c(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new y,this.regionList=[]}function f(){this.values=Object.create(null)}function h(s,_,T,m){var v,S,x=m?s.split(m):[s];for(v in x)typeof x[v]=="string"&&(S=x[v].split(T)).length===2&&_(S[0],S[1])}f.prototype={set:function(s,_){this.get(s)||_===""||(this.values[s]=_)},get:function(s,_,T){return T?this.has(s)?this.values[s]:_[T]:this.has(s)?this.values[s]:_},has:function(s){return s in this.values},alt:function(s,_,T){for(var m=0;m<T.length;++m)if(_===T[m]){this.set(s,_);break}},integer:function(s,_){/^-?\d+$/.test(_)&&this.set(s,parseInt(_,10))},percent:function(s,_){return!!(_.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(_=parseFloat(_))&&_<=100)&&(this.set(s,_),!0)}};var n=new u(0,0,0),l=n.align==="middle"?"middle":"center";function a(s,_,T){var m,v,S=s;function x(){var g,E=(E=(E=s).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(g=(g=E[4])&&g.replace(".",""),E[3]?C(E[1],E[2],E[3].replace(":",""),g):59<E[1]?C(E[1],E[2],0,g):C(0,E[1],E[2],g)):null;function C(R,A,L,N){return 3600*(0|R)+60*(0|A)+(0|L)+(0|N)/1e3}if(E===null)throw new Error("Malformed timestamp: "+S);return s=s.replace(/^[^\sa-zA-Z-]+/,""),E}function P(){s=s.replace(/^\s+/,"")}if(P(),_.startTime=x(),P(),s.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+S);s=s.substr(3),P(),_.endTime=x(),P(),m=s,_=_,v=new f,h(m,function(g,E){switch(g){case"region":for(var C=T.length-1;0<=C;C--)if(T[C].id===E){v.set(g,T[C].region);break}break;case"vertical":v.alt(g,E,["rl","lr"]);break;case"line":var R=E.split(","),A=R[0];v.integer(g,A),v.percent(g,A)&&v.set("snapToLines",!1),v.alt(g,A,["auto"]),R.length===2&&v.alt("lineAlign",R[1],["start",l,"end"]);break;case"position":R=E.split(","),v.percent(g,R[0]),R.length===2&&v.alt("positionAlign",R[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":v.percent(g,E);break;case"align":v.alt(g,E,["start",l,"end","left","right"])}},/:/,/\s/),_.region=v.get("region",null),_.vertical=v.get("vertical",""),(m=v.get("line","auto"))==="auto"&&n.line===-1&&(m=-1),_.line=m,_.lineAlign=v.get("lineAlign","start"),_.snapToLines=v.get("snapToLines",!0),_.size=v.get("size",100),_.align=v.get("align",l),(m=v.get("position","auto"))==="auto"&&n.position===50&&(m=_.align==="start"||_.align==="left"?0:_.align==="end"||_.align==="right"?100:50),_.position=m}c.prototype={parse:function(s){var _=this;function T(){for(var P=0,g=(g=_.buffer).replace(/<br(?: \/)?>/gi,`
`);P<g.length&&g[P]!=="\r"&&g[P]!==`
`;)++P;var E=g.substr(0,P);return g[P]==="\r"&&++P,g[P]===`
`&&++P,_.buffer=g.substr(P),E}s&&(_.buffer+=_.decoder.decode(s,{stream:!0}));try{if(_.state==="INITIAL"){if(!/\r\n|\n/.test(_.buffer))return this;var m,v=(m=T()).match(/^WEBVTT([ \t].*)?$/);if(!v||!v[0])throw new Error("Malformed WebVTT signature.");_.state="HEADER"}for(var S=!1;_.buffer;){if(!/\r\n|\n/.test(_.buffer))return this;switch(S?S=!1:m=T(),_.state){case"HEADER":/:/.test(m)?h(m,function(P,g){P==="Region"&&console.log("parse region",g)},/:/):m||(_.state="ID");continue;case"NOTE":m||(_.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(m)){_.state="NOTE";break}if(!m)continue;if(_.cue=new u(0,0,""),_.state="CUE",m.indexOf("-->")===-1){_.cue.id=m;continue}case"CUE":try{a(m,_.cue,_.regionList)}catch{_.cue=null,_.state="BADCUE";continue}_.state="CUETEXT";continue;case"CUETEXT":var x=m.indexOf("-->")!==-1;if(!m||x&&(S=!0)){_.oncue&&_.oncue(_.cue),_.cue=null,_.state="ID";continue}_.cue.text&&(_.cue.text+=`
`),_.cue.text+=m;continue;case"BADCUE":m||(_.state="ID");continue}}}catch{_.state==="CUETEXT"&&_.cue&&_.oncue&&_.oncue(_.cue),_.cue=null,_.state=_.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&this.state!=="HEADER"||(this.buffer+=`

`,this.parse()),this.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(s){throw s}return this.onflush&&this.onflush(),this}},t.exports=c},{"./vttcue":55}],57:[function(T,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var x,P=arguments[S];for(x in P)Object.prototype.hasOwnProperty.call(P,x)&&(v[x]=P[x])}return v}).apply(this,arguments)}function u(v,S){for(var x=0;x<S.length;x++){var P=S[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(v,P.key,P)}}function c(v,S,x){S&&u(v.prototype,S),Object.defineProperty(v,"prototype",{writable:!1})}var f=T("./vtt-parser"),h=T("./vtt-renderer"),n=T("./vtt-loader"),l=T("../../player/base/event/eventtype"),a=T("../../lib/ua"),s=T("../../lib/event"),_=T("../../ui/component/util"),T=function(){function v(x){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new m,this.player=(x=x||{}).player,this.loader=new n,this.parser=new f,this.createRendererInstance(),this.bindEvents()}var S=v.prototype;return S.bindEvents=function(){function x(A){A.paramData.splayer&&g.switchRenderer(h.VttBasicRenderer.RENDER_TYPE_CUSTOM)}var P,g=this,E=this,C=this.player,R=(C.on(l.Private.TextTrackFounded,function(A){if(A.paramData.from==="user")g.hasUserTracks=!0;else if(g.hasUserTracks)return;A=A.paramData.textTracks,A&&A.length&&(g.enabled=!0,g.trackConfigs=A.map(function(L){return y({},L,{label:L.label||L.srclang,language:L.srclang})}),g.trackConfigs.forEach(function(L){g.activeRenderer.addTrack(L),C.getOptions().controlBarVisibility==="always"&&g.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},g.parser.cues)}))}),C.on(l.Private.UserTrackReset,function(){g.hasUserTracks=!1}),C.on(l.Player.H265PlayInfo,x),C.on(l.Player.H266PlayInfo,x),a.IS_IOS?(P=!1,C.on(l.Player.RequestFullScreen,function(){P=!0}),s.on(C.tag,"webkitendfullscreen",function(){P=!1}),s.on(C.tag.textTracks,"change",function(){var A;g.sleeper.isSleep||(g.sleeper.sleep(1e3),g.isCustomRenderer)||P&&(A=C.tag.textTracks,(A=Array.from(A).find(function(L){return L.mode==="showing"}))?g.activeTrackConfig&&g.activeTrackConfig.language===A.language||(g.switchTrack(A.language),C.trigger(l.Private.SelectorValueChange,{type:"cc",text:A.label})):C.trigger(l.Private.CCStateChanged,{value:"off",lang:""}))})):(C.on(l.Player.RequestFullScreen,this.adjustLayout.bind(this)),C.on(l.Player.CancelFullScreen,this.adjustLayout.bind(this)),R=_.debounce(function(){E.isCustomRenderer&&E.activeRenderer.resetCuesStyle(g.parser.cues)},100),s.on(window,"resize",R)),_.throttle(function(){E.isShow&&(E.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},E.parser.cues),E.player.paused())&&(E.activeRenderer.hide(),E.activeRenderer.restore())},100)),R=(C.on(l.Private.ShowBar,R),_.throttle(function(){E.isShow&&(E.activeRenderer.forceUpdateCuesStyle({transform:"none"},E.parser.cues),E.player.paused())&&(E.activeRenderer.hide(),E.activeRenderer.restore())},100));C.on(l.Private.HideBar,R),C.on(l.Private.VttHide,function(){g.hide()}),C.on(l.Private.VttSwitchTrack,function(A){g.switchTrack(A.paramData)}),C.on(l.Private.VttClearTracks,function(){g.reset()})},S.createRendererInstance=function(x){this.activeRenderer&&this.activeRenderer.dispose();var P=this.player.getOptions(),g={player:this.player};this.adaptPlatform(),x?x===h.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new h.NativeRenderer(g):(g.overlayId=this.getOverlayId(),this.activeRenderer=new h.CustomRenderer(g)):P.useNativeTextRenderer?this.activeRenderer=new h.NativeRenderer(g):(g.overlayId=this.getOverlayId(),this.activeRenderer=new h.CustomRenderer(g))},S.switchTrack=function(x){var P,g=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new f,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=x,P=this.trackConfigs.find(function(E){return E.language===x}))&&(P=P._loaded?"":(P||{}).src,this.loadVtt(P,function(){g.parseVtt(),g.activeRenderer.addCues(g.parser.cues,g.activeTrackConfig.language),g.show()}))},S.adaptPlatform=function(){var x=this.player.getOptions();a.IS_IOS&&(x.useNativeTextRenderer=!0)},S.loadVtt=function(x,P){var g=this;x?this.loader.loadFromUrl(x,function(E){g.activeTrackConfig._loaded=!0,g.vttText[g.activeTrackConfig.language]=E,P&&P()}):P&&P()},S.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language);var x=this.player.el().getElementsByClassName("prism-controlbar")[0];x&&((x=x.style)==null?void 0:x.display)==="block"&&this.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},this.parser.cues)},S.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},S.switchRenderer=function(x){var P=this,g=h.VttBasicRenderer.RENDER_TYPE_NATIVE,E=h.VttBasicRenderer.RENDER_TYPE_CUSTOM;(x===g&&this.activeRenderer.type!==g||x===E&&this.activeRenderer.type!==E)&&(this.createRendererInstance(x),this.trackConfigs.forEach(function(C){return P.activeRenderer.addTrack(C)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},S.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},S.adjustLayout=function(){var x=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){x.activeRenderer.restore()},300))},S.startTickTimeListener=function(){var x=this;this.clearTicker(),this.tick(function(){var P=x.player.getCurrentTime();isNaN(P)||x.activeRenderer.renderCues(x.findTargetCues(P))})},S.tick=function(x){var P=this;this.tickTimer=requestAnimationFrame(function(){try{x()}catch(g){console.log("e",g)}P.tick(x)})},S.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},S.getOverlayId=function(){var x=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(x)return x.id},S.findTargetCues=function(x){if(this.parser&&x!==this.prevPosition){this.prevPosition=x;for(var P=[],g=0;g<this.parser.cues.length;g++){var E=this.parser.cues[g];if(x>=E.startTime&&x<=E.endTime)P.push(E);else if(x<E.startTime)break}return P}},S.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},S.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},c(v,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(x){this._enabled=x}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===h.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var x;return(x=this.trackConfigs)==null?void 0:x.find(function(P){return P._isActive})},set:function(x){this.trackConfigs.forEach(function(P){return P._isActive=P.language===x})}}]),v}(),m=function(){function v(){this.value=!1,this.timer=null}return v.prototype.sleep=function(S){var x=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){x.value=!1},S)},c(v,[{key:"isSleep",get:function(){return this.value}}]),v}();t.exports=T},{"../../lib/event":35,"../../lib/ua":50,"../../player/base/event/eventtype":70,"../../ui/component/util":165,"./vtt-loader":59,"./vtt-parser":60,"./vtt-renderer":61}],58:[function(s,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(T){for(var m=1;m<arguments.length;m++){var v,S=arguments[m];for(v in S)Object.prototype.hasOwnProperty.call(S,v)&&(T[v]=S[v])}return T}).apply(this,arguments)}function u(T,m){T.prototype=Object.create(m.prototype),c(T.prototype.constructor=T,m)}function c(T,m){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,S){return v.__proto__=S,v})(T,m)}function f(T,m){for(var v=0;v<m.length;v++){var S=m[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}function h(T,m,v){m&&f(T.prototype,m),Object.defineProperty(T,"prototype",{writable:!1})}var n=s("../../lib/data"),l={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},a={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},s=function(T){function m(x){var x=y({},x=x===void 0?{}:x,{kind:x.kind||a.SUBTITLES,language:x.language||x.srclang||""}),P=x.mode||l.DISABLED;return x.default,-1<[a.METADATA,a.CHAPTERS].indexOf(x.kind)&&(P=l.HIDDEN),x.mode=P,(P=T.call(this,x)||this)._cues=[],P._activeCues=[],P._settings={},P._nativeTrack=null,P._extData={},P._settings=x,P}u(m,T);var v=m.prototype;return v.setExtData=function(S){this._extData=y({},this._extData,S=S===void 0?{}:S)},v.addCue=function(S){this._cues.push(S),this.nativeTrack&&this.nativeTrack.addCue(S)},v.removeCue=function(S){this._cues=this._cues.filter(function(x){return x!==S}),this.nativeTrack&&this.nativeTrack.removeCue(S)},h(m,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(S){this._settings.mode=S,this.nativeTrack&&(this.nativeTrack.mode=S)}},{key:"language",get:function(){return this._settings.language},set:function(S){this._settings.language=S,this.nativeTrack&&(this.nativeTrack.language=S)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(S){this._nativeTrack=S}}]),m}(function(){function T(m){this._id=(m=m===void 0?{}:m).id||"prism-track-"+n.guid(),this._kind=m.kind||"",this._language=m.language||"",this._label=m.label||""}return h(T,[{key:"label",get:function(){return this._label},set:function(m){this._label=m}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}]),T}()),_=function(T){function m(){return T.call(this)||this}return u(m,T),m}(function(){function T(){this._trackList=[]}return T.prototype.addTrack=function(m){var v=this.length;""+v in this||Object.defineProperty(this,v,{get:function(){return this._trackList[v]}}),this._trackList.indexOf(m)===-1&&this._trackList.push(m)},h(T,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}]),T}());t.exports.TextTrack=s,t.exports.TextTrackList=_,t.exports.TRACK_MODE=l,t.exports.TRACK_KIND=a},{"../../lib/data":32}],59:[function(e,t,w){var y=e("../io");t.exports=function(){function u(){}return u.prototype.loadFromUrl=function(c,f){y.get(c,function(h){f(h)},function(h,n){console.log("ERR",h,n)})},u}()},{"../io":42}],60:[function(c,t,w){function y(f,h){for(var n=0;n<h.length;n++){var l=h[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(f,l.key,l)}}var u=c("./vttjs").WebVTT,c=function(){function f(){var l=this;this._cues=[],this._regions=[],this.parser=new u.Parser(window,u.StringDecoder()),this.parser.onregion=function(a){l._regions.push(a)},this.parser.oncue=function(a){l._cues.push(a)},this.parser.onflush=function(){},this.parser.onparsingerror=function(a){}}var h,n=f.prototype;return n.parse=function(l){this.parser.parse(l),this.parser.flush()},n.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},n.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},n=f,(h=[{key:"cues",get:function(){return this._cues}}])&&y(n.prototype,h),Object.defineProperty(n,"prototype",{writable:!1}),f}();t.exports=c},{"./vttjs":62}],61:[function(T,t,w){function y(v,S){for(var x=0;x<S.length;x++){var P=S[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(v,P.key,P)}}function u(){return(u=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var x,P=arguments[S];for(x in P)Object.prototype.hasOwnProperty.call(P,x)&&(v[x]=P[x])}return v}).apply(this,arguments)}function c(v,S){v.prototype=Object.create(S.prototype),f(v.prototype.constructor=v,S)}function f(v,S){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,P){return x.__proto__=P,x})(v,S)}T("../../player/base/event/eventtype");var m=T("./text-track"),h=T("./vttjs").WebVTT,n=T("../../lib/dom"),l=m.TextTrack,a=m.TextTrackList,s=m.TRACK_MODE,_=(m.TRACK_KIND,function(){function v(x){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(x=x||{}).player,this.defineTextTrackGetter(),this.trackList=new a}var S=v.prototype;return S.log=function(){for(var x,P=arguments.length,g=new Array(P),E=0;E<P;E++)g[E]=arguments[E];(x=console).log.apply(x,["[LOG:"+this.type+"]"].concat(g))},S.defineTextTrackGetter=function(){var x=this;this.player.getTextTracks=function(){return x.trackList||[]}},S.show=function(x){x=this.findTrackByLanguage(x),x&&(x.mode=s.SHOWING)},S.findTrackByLanguage=function(x){return this.trackList.list.find(function(P){return P.language===x})},S.clearCurrentCues=function(x){if(x){var P=x.mode;if(P===s.DISABLED&&(x.mode=s.HIDDEN),x.cues)for(var g=x.cues.length;g--;)x.removeCue(x.cues[g]);P===s.DISABLED&&(x.mode=P)}},S.addTrack=function(){},S.addCues=function(){},S.restore=function(){},S.renderCues=function(){},S.updateCuesStyle=function(){},S.clearTrack=function(x){this.clearCurrentCues(this.findTrackByLanguage(x))},S.clearAllTracks=function(){var x=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(P){P.mode=s.DISABLED,x.clearCurrentCues(P)}),this.trackList=new a},S.reset=function(){this.hide(),this.clearAllTracks()},S.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},v}()),T=(_.RENDER_TYPE_CUSTOM="CUSTOM",_.RENDER_TYPE_NATIVE="NATIVE",function(v){function S(P){var g=v.call(this,P)||this;return g.overlayId=null,g.currentCues=null,P=P||{},g.type=_.RENDER_TYPE_CUSTOM,g.overlayId=P.overlayId,g}c(S,v);var x=S.prototype;return x.addTrack=function(P){var g=new l({kind:P.kind,label:P.label,language:P.language,default:P.default});g.mode=P.default?s.SHOWING:s.DISABLED,this.trackList.addTrack(g)},x.hide=function(){return h.processCues(window,[],document.getElementById(this.overlayId))},x.restore=function(){this.currentCues&&(this.currentCues.forEach(function(P){return P.displayState=null}),h.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},x.renderCues=function(P){P&&(this.currentCues=P,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),h.processCues(window,P,this.overlayEl),this.updateCuesStyle(P))},x.updateCuesStyle=function(P){var g=this;P.forEach(function(E){var C,R=E.displayState;R._styleSetDone||R&&(R.setAttribute("class","prism-cue"),g.overlayEl||(g.overlayEl=document.getElementById(g.overlayId)),E=g.overlayEl.offsetWidth,C=g.overlayEl.offsetHeight,(E=Math.min(E,C))&&(R.style.fontSize=.05*E+"px",R.style.height="auto",R.style.top="auto"),Object.keys(g.overrideStyle).forEach(function(A){g.tryUpdateStyle(R,A,g.overrideStyle[A])}),R._styleSetDone=!0)})},x.updateOverrideStyle=function(P){this.overrideStyle=u({},this.overrideStyle,P=P===void 0?{}:P)},x.forceUpdateCuesStyle=function(P,g){g===void 0&&(g=[]),this.updateOverrideStyle(P=P===void 0?{}:P),this.resetCuesStyle(g)},x.tryUpdateStyle=function(P,g,E){try{P.style[g]=E}catch{}},x.resetCuesStyle=function(P){P&&P.length&&P.forEach(function(g){g.displayState&&(g.displayState=null)})},x.dispose=function(){v.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},S}(_)),m=function(v){function S(g){return(g=v.call(this,g=g===void 0?{}:g)||this).type=_.RENDER_TYPE_NATIVE,g}c(S,v);var x,P=S.prototype;return P.addTrack=function(g){var E=this.player.tag,C=Array.from(E.textTracks)||[],R=C.find(function(A){return A.language===g.language}),C=R?(this.log("sameLangTrack",R,C),this.clearCurrentCues(R),R.kind=g.kind,R.label=g.label,R):E.addTextTrack(g.kind,g.label,g.language),R=(C.mode=g.default?s.SHOWING:s.DISABLED,new l(g));R.nativeTrack=C,this.trackList.addTrack(R)},P.addCues=function(g,E){var C;g&&g.length&&(C=this.trackList.list.find(function(R){return R.language===E}))&&g.forEach(function(R){C.addCue(R)})},P.hide=function(){this.trackList.list.forEach(function(g){g.mode=g.mode===s.SHOWING?s.HIDDEN:g.mode})},P.invalidAllTracks=function(){},P.forceUpdateCuesStyle=function(g,E){n.addCssByStyle("video::-webkit-media-text-track-container{transform: "+g.transform+";}")},P.dispose=function(){v.prototype.dispose.call(this)},P=S,(x=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(g){return g.mode===s.SHOWING})}}])&&y(P.prototype,x),Object.defineProperty(P,"prototype",{writable:!1}),S}(_);t.exports.VttBasicRenderer=_,t.exports.CustomRenderer=T,t.exports.NativeRenderer=m},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"./text-track":58,"./vttjs":62}],62:[function(e,t,w){t.exports={WebVTT:e("./vtt.js").WebVTT}},{"./vtt.js":63}],63:[function(e,t,w){var y=this;function u(I,M){return M===void 0&&(M=1),"rgba("+[parseInt(I.substring(0,2),16),parseInt(I.substring(2,4),16),parseInt(I.substring(4,6),16),M].join(",")+")"}var c,f=1;function h(I,M,H){switch(H){case"webvtt.font.color":case"webvtt.font.opacity":var O=Services.prefs.getCharPref("webvtt.font.color"),z=Services.prefs.getIntPref("webvtt.font.opacity")/100;c.fontSet=u(O,z);break;case"webvtt.font.scale":f=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":O=Services.prefs.getCharPref("webvtt.bg.color"),z=Services.prefs.getIntPref("webvtt.bg.opacity")/100,c.backgroundSet=u(O,z);break;case"webvtt.edge.color":case"webvtt.edge.type":O=Services.prefs.getIntPref("webvtt.edge.type"),z=Services.prefs.getCharPref("webvtt.edge.color"),c.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][O]+u(z)}}typeof Services<"u"&&(c={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(I){h(0,0,I),Services.prefs.addObserver(I,h,!1)}));var n=Object.create||function(I){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return l.prototype=I,new l};function l(){}function a(I,M){this.name="ParsingError",this.code=I.code,this.message=M||I.message}function s(I){function M(H,O,z,J){return 3600*(0|H)+60*(0|O)+(0|z)+(0|J)/1e3}return I=I.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/),I?I[3]?M(I[1],I[2],I[3].replace(":",""),I[4]):59<I[1]?M(I[1],I[2],0,I[4]):M(0,I[1],I[2],I[4]):null}function _(){this.values=n(null)}function T(I,M,H,O){var z,J,U=O?I.split(O):[I];for(z in U)typeof U[z]=="string"&&(J=U[z].split(H)).length===2&&M(J[0],J[1])}((a.prototype=n(Error.prototype)).constructor=a).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},_.prototype={set:function(I,M){this.get(I)||M===""||(this.values[I]=M)},get:function(I,M,H){return H?this.has(I)?this.values[I]:M[H]:this.has(I)?this.values[I]:M},has:function(I){return I in this.values},alt:function(I,M,H){for(var O=0;O<H.length;++O)if(M===H[O]){this.set(I,M);break}},integer:function(I,M){/^-?\d+$/.test(M)&&this.set(I,parseInt(M,10))},percent:function(I,M){return!!(M.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(M=parseFloat(M))&&M<=100)&&(this.set(I,M),!0)}};var m={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},v={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},S={v:"title",lang:"lang"},x={rt:"ruby"};function P(I,M){function H(F){return m[F]}for(var O,z,J,U,q,V,X,B=I.document.createElement("div"),ee=B,G=[];X=void 0,(X=M?(X=(X=M.match(/^([^<]*)(<[^>]*>?)?/))[1]||X[2],M=M.substr(X.length),X):null)!==null;)X[0]==="<"?X[1]==="/"?G.length&&G[G.length-1]===X.substr(2).replace(">","")&&(G.pop(),ee=ee.parentNode):(J=s(X.substr(1,X.length-2)))?(O=I.document.createProcessingInstruction("timestamp",J),ee.appendChild(O)):(z=X.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(J=z[1],U=z[3],V=q=void 0,V=v[J],O=V?((q=I.document.createElement(V)).localName=V,(V=S[J])&&U&&(q[V]=U.trim()),q):null)&&(J=ee,x[(V=O).localName]&&x[V.localName]!==J.localName||(z[2]&&(O.className=z[2].substr(1).replace("."," ")),G.push(z[1]),ee.appendChild(O),ee=O)):ee.appendChild(I.document.createTextNode(function(F){for(;z=F.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)F=F.replace(z[0],H);return F}(X)));return B}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function E(I){var M=[],H="";if(I&&I.childNodes){for(z(M,I);H=function J(U){var q,V,X;return U&&U.length?(V=(q=U.pop()).textContent||q.innerText)?(X=V.match(/^.*(\n|\r)/))?X[U.length=0]:V:q.tagName==="ruby"?J(U):q.childNodes?(z(U,q),J(U)):void 0:null}(M);)for(var O=0;O<H.length;O++)if(function(J){for(var U=0;U<g.length;U++){var q=g[U];if(J>=q[0]&&J<=q[1])return 1}}(H.charCodeAt(O)))return"rtl"}return"ltr";function z(J,U){for(var q=U.childNodes.length-1;0<=q;q--)J.push(U.childNodes[q])}}function C(){}function R(I,M,H){var O=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent),U="rgba(255, 255, 255, 1)",z="rgba(0, 0, 0, 0.8)",J="",U=(c!==void 0&&(U=c.fontSet,z=c.backgroundSet,J=c.edgeSet),O&&(U="rgb(255, 255, 255)",z="rgb(0, 0, 0)"),C.call(this),this.cue=M,this.cueDiv=P(I,M.text),{color:U,backgroundColor:z,textShadow:J,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),q=(O||(U.writingMode=M.vertical===""?"horizontal-tb":M.vertical==="lr"?"vertical-lr":"vertical-rl",U.unicodeBidi="plaintext"),this.applyStyles(U,this.cueDiv),this.div=I.document.createElement("div"),U={textAlign:M.align==="middle"?"center":M.align,font:H.font,whiteSpace:"pre-line",position:"absolute"},O||(U.direction=E(this.cueDiv),U.writingMode=M.vertical===""?"horizontal-tb":M.vertical==="lr"?"vertical-lr":"plaintext"),this.applyStyles(U),this.div.appendChild(this.cueDiv),0);switch(M.positionAlign){case"start":q=M.position;break;case"middle":q=M.position-M.size/2;break;case"end":q=M.position-M.size}M.vertical===""?this.applyStyles({left:this.formatStyle(q,"%"),width:this.formatStyle(M.size,"%")}):this.applyStyles({top:this.formatStyle(q,"%"),height:this.formatStyle(M.size,"%")}),this.move=function(V){this.applyStyles({top:this.formatStyle(V.top,"px"),bottom:this.formatStyle(V.bottom,"px"),left:this.formatStyle(V.left,"px"),right:this.formatStyle(V.right,"px"),height:this.formatStyle(V.height,"px"),width:this.formatStyle(V.width,"px")})}}function A(I){var M,H,O,z,J=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent);I.div&&(M=I.div.offsetHeight,H=I.div.offsetWidth,O=I.div.offsetTop,z=(z=(z=I.div.childNodes)&&z[0])&&z.getClientRects&&z.getClientRects(),I=I.div.getBoundingClientRect(),z=z?Math.max(z[0]&&z[0].height||0,I.height/z.length):0),this.left=I.left,this.right=I.right,this.top=I.top||O,this.height=I.height||M,this.bottom=I.bottom||O+(I.height||M),this.width=I.width||H,this.lineHeight=z!==void 0?z:I.lineHeight,J&&!this.lineHeight&&(this.lineHeight=13)}function L(I,M,H,O){var z,J=new A(M),U=M.cue,q=function(W){if(typeof W.line=="number"&&(W.snapToLines||0<=W.line&&W.line<=100))return W.line;if(!W.track||!W.track.textTrackList||!W.track.textTrackList.mediaElement)return-1;for(var Z=W.track,ae=Z.textTrackList,_e=0,le=0;le<ae.length&&ae[le]!==Z;le++)ae[le].mode==="showing"&&_e++;return-1*++_e}(U),V=[];if(U.snapToLines){switch(U.vertical){case"":V=["+y","-y"],z="height";break;case"rl":V=["+x","-x"],z="width";break;case"lr":V=["-x","+x"],z="width"}var X=J.lineHeight,B=X*Math.round(q),ee=H[z]+X,G=V[0];Math.abs(B)>ee&&(B=B<0?-1:1,B*=Math.ceil(ee/X)*X),q<0&&(B+=U.vertical===""?H.height:H.width,V=V.reverse()),J.move(G,B)}else{var F=J.lineHeight/H.height*100;switch(U.lineAlign){case"middle":q-=F/2;break;case"end":q-=F}switch(U.vertical){case"":M.applyStyles({top:M.formatStyle(q,"%")});break;case"rl":M.applyStyles({left:M.formatStyle(q,"%")});break;case"lr":M.applyStyles({right:M.formatStyle(q,"%")})}V=["+y","-x","+x","-y"],J=new A(M)}ee=function(W,Z){for(var ae,_e=new A(W),le=1,he=0;he<Z.length;he++){for(;W.overlapsOppositeAxis(H,Z[he])||W.within(H)&&W.overlapsAny(O);)W.move(Z[he]);if(W.within(H))return W;var be=W.intersectPercentage(H);be<le&&(ae=new A(W),le=be),W=new A(_e)}return ae||_e}(J,V),M.move(ee.toCSSCompatValues(H))}function N(){}C.prototype.applyStyles=function(I,M){for(var H in M=M||this.div,I)I.hasOwnProperty(H)&&(M.style[H]=I[H])},C.prototype.formatStyle=function(I,M){return I===0?0:I+M},(R.prototype=n(C.prototype)).constructor=R,A.prototype.move=function(I,M){switch(M=M!==void 0?M:this.lineHeight,I){case"+x":this.left+=M,this.right+=M;break;case"-x":this.left-=M,this.right-=M;break;case"+y":this.top+=M,this.bottom+=M;break;case"-y":this.top-=M,this.bottom-=M}},A.prototype.overlaps=function(I){return this.left<I.right&&this.right>I.left&&this.top<I.bottom&&this.bottom>I.top},A.prototype.overlapsAny=function(I){for(var M=0;M<I.length;M++)if(this.overlaps(I[M]))return!0;return!1},A.prototype.within=function(I){return this.top>=I.top&&this.bottom<=I.bottom&&this.left>=I.left&&this.right<=I.right},A.prototype.overlapsOppositeAxis=function(I,M){switch(M){case"+x":return this.left<I.left;case"-x":return this.right>I.right;case"+y":return this.top<I.top;case"-y":return this.bottom>I.bottom}},A.prototype.intersectPercentage=function(I){return Math.max(0,Math.min(this.right,I.right)-Math.max(this.left,I.left))*Math.max(0,Math.min(this.bottom,I.bottom)-Math.max(this.top,I.top))/(this.height*this.width)},A.prototype.toCSSCompatValues=function(I){return{top:this.top-I.top,bottom:I.bottom-this.bottom,left:this.left-I.left,right:I.right-this.right,height:this.height,width:this.width}},A.getSimpleBoxPosition=function(I){var M=I.div?I.div.offsetHeight:I.tagName?I.offsetHeight:0,H=I.div?I.div.offsetWidth:I.tagName?I.offsetWidth:0,O=I.div?I.div.offsetTop:I.tagName?I.offsetTop:0;return{left:(I=I.div?I.div.getBoundingClientRect():I.tagName?I.getBoundingClientRect():I).left,right:I.right,top:I.top||O,height:I.height||M,bottom:I.bottom||O+(I.height||M),width:I.width||H}},N.StringDecoder=function(){return{decode:function(I){if(!I)return"";if(typeof I!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(I))}}},N.convertCueToDOMTree=function(I,M){return I&&M?P(I,M):null},N.processCues=function(I,M,H){if(!I||!M||!H)return null;for(;H.firstChild;)H.removeChild(H.firstChild);var O=I.document.createElement("div");if(O.style.position="absolute",O.style.left="0",O.style.right="0",O.style.top="0",O.style.bottom="0",O.style.margin="1.5%",H.appendChild(O),function(ee){for(var G=0;G<ee.length;G++)if(ee[G].hasBeenReset||!ee[G].displayState)return 1}(M))for(var z,J,U=[],q=A.getSimpleBoxPosition(O),V={font:Math.round(.05*q.height*100)/100*f+"px sans-serif"},X=0;X<M.length;X++)J=M[X],z=new R(I,J,V),O.appendChild(z.div),L(0,z,q,U),J.displayState=z.div,U.push(A.getSimpleBoxPosition(z));else for(var B=0;B<M.length;B++)O.appendChild(M[B].displayState)},(N.Parser=function(I,M){this.window=I,this.state="INITIAL",this.buffer="",this.decoder=M||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(I){if(!(I instanceof a))throw I;this.onparsingerror&&this.onparsingerror(I)},parse:function(I){var M=this;function H(){for(var V=M.buffer,X=0;X<V.length&&V[X]!=="\r"&&V[X]!==`
`;)++X;var B=V.substr(0,X);return V[X]==="\r"&&++X,V[X]===`
`&&++X,M.buffer=V.substr(X),B}function O(V){T(V,function(X,B){var ee;X==="Region"&&(X=B,ee=new _,T(X,function(G,F){switch(G){case"id":ee.set(G,F);break;case"width":ee.percent(G,F);break;case"lines":ee.integer(G,F);break;case"regionanchor":case"viewportanchor":var W,Z=F.split(",");Z.length===2&&((W=new _).percent("x",Z[0]),W.percent("y",Z[1]),W.has("x")&&W.has("y"))&&(ee.set(G+"X",W.get("x")),ee.set(G+"Y",W.get("y")));break;case"scroll":ee.alt(G,F,["up"])}},/=/,/\s/),ee.has("id"))&&((X=new M.window.VTTRegion).width=ee.get("width",100),X.lines=ee.get("lines",3),X.regionAnchorX=ee.get("regionanchorX",0),X.regionAnchorY=ee.get("regionanchorY",100),X.viewportAnchorX=ee.get("viewportanchorX",0),X.viewportAnchorY=ee.get("viewportanchorY",100),X.scroll=ee.get("scroll",""),M.onregion&&M.onregion(X),M.regionList.push({id:ee.get("id"),region:X}))},/:/)}I&&(M.buffer+=M.decoder.decode(I,{stream:!0}));try{if(M.state==="INITIAL"){if(!/\r\n|\n/.test(M.buffer))return this;var z,J=(z=H()).match(/^WEBVTT([ \t].*)?$/);if(!J||!J[0])throw new a(a.Errors.BadSignature);M.state="HEADER"}for(var U=!1;M.buffer;){if(!/\r\n|\n/.test(M.buffer))return this;switch(U?U=!1:z=H(),M.state){case"HEADER":/:/.test(z)?O(z):z||(M.state="ID");continue;case"NOTE":z||(M.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(z)){M.state="NOTE";break}if(!z)continue;if(M.cue=new M.window.VTTCue(0,0,""),M.state="CUE",z.indexOf("-->")===-1){M.cue.id=z;continue}case"CUE":try{(function(V,X,B){var ee=V;function G(){var ae=s(V);if(ae===null)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+ee);return V=V.replace(/^[^\sa-zA-Z-]+/,""),ae}function F(){V=V.replace(/^\s+/,"")}if(F(),X.startTime=G(),F(),V.substr(0,3)!=="-->")throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+ee);V=V.substr(3),F(),X.endTime=G(),F();var W=V,Z=new _;T(W,function(ae,_e){switch(ae){case"region":for(var le=B.length-1;0<=le;le--)if(B[le].id===_e){Z.set(ae,B[le].region);break}break;case"vertical":Z.alt(ae,_e,["rl","lr"]);break;case"line":var he=_e.split(","),be=he[0];Z.integer(ae,be),Z.percent(ae,be)&&Z.set("snapToLines",!1),Z.alt(ae,be,["auto"]),he.length===2&&Z.alt("lineAlign",he[1],["start","middle","end"]);break;case"position":he=_e.split(","),Z.percent(ae,he[0]),he.length===2&&Z.alt("positionAlign",he[1],["start","middle","end"]);break;case"size":Z.percent(ae,_e);break;case"align":Z.alt(ae,_e,["start","middle","end","left","right"])}},/:/,/\s/),X.region=Z.get("region",null),X.vertical=Z.get("vertical","");try{X.line=Z.get("line","auto")}catch{}X.lineAlign=Z.get("lineAlign","start"),X.snapToLines=Z.get("snapToLines",!0),X.size=Z.get("size",100);try{X.align=Z.get("align","center")}catch{X.align=Z.get("align","middle")}try{X.position=Z.get("position","auto")}catch{X.position=Z.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},X.align)}X.positionAlign=Z.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},X.align)})(z,M.cue,M.regionList)}catch(V){M.reportOrThrowError(V),M.cue=null,M.state="BADCUE";continue}M.state="CUETEXT";continue;case"CUETEXT":var q=z.indexOf("-->")!==-1;if(!z||q&&(U=!0)){M.oncue&&M.oncue(M.cue),M.cue=null,M.state="ID";continue}M.cue.text&&(M.cue.text+=`
`),M.cue.text+=z;continue;case"BADCUE":z||(M.state="ID");continue}}}catch(V){M.reportOrThrowError(V),M.state==="CUETEXT"&&M.cue&&M.oncue&&M.oncue(M.cue),M.cue=null,M.state=M.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var I=this;try{if(I.buffer+=I.decoder.decode(),!I.cue&&I.state!=="HEADER"||(I.buffer+=`

`,I.parse()),I.state==="INITIAL")throw new a(a.Errors.BadSignature)}catch(M){I.reportOrThrowError(M)}return I.onflush&&I.onflush(),this}},y.WebVTT=N},{}],64:[function(e,t,w){var y=e("../lib/io");e("../lib/storage");function u(c){this._uploadDuration=c.logDuration||5,this._uploadCount=c.logCount||10,this._logReportTo=c.logReportTo,this._dumpLogReportTo=c.dumpLogReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var f,h=this;window&&(window.onbeforeunload=function(n){if(0<h._logs.length)if(h._supportLocalStorage)localStorage.setItem("__aliplayer_log_data",JSON.stringify(h._logs));else{h._report();for(var l=500,a=new Date().getTime(),s=a;s<a+l;)s=new Date().getTime()}});try{localStorage?(f=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),f&&(this._logs=JSON.parse(f))):this._supportLocalStorage=!1}catch{this._supportLocalStorage=!1}this._start()}u.prototype.add=function(c){var f=this._logs.length;if(c.__time__=Math.round(new Date/1e3),0<f&&c.e=="4001"){var f=this._logs[f-1];if(f.e=="4001"&&f.__time__-c.__time__<5)return}this._logs.push(c),(this._logs.length>this._uploadCount||c.e=="4001"||c.e=="2002"||c.e=="9002"&&(f=c.args)!=null&&f.includes("dump::"))&&this._report()},u.prototype.dispose=function(){this._report(),this._disposed=!0},u.prototype._start=function(){this._disposed=!1,this._retry=0,this._report()},u.prototype._report=function(c){var f,h,n;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(c=c||this._logs.splice(0,this._uploadCount)).length?(n={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(f=JSON.stringify({__logs__:c,__source__:""})).length},y.postWithHeader((h=this)._logReportTo,f,n,function(l){h._tick()},function(l){h._retry==0?(h._retry=1,h._report(c)):h._tick()})):this._tick()},u.prototype.reportDump=function(c){var f;c&&(f={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(c=JSON.stringify({__logs__:[c],__source__:""})).length},y.postWithHeader(this._dumpLogReportTo,c,f,function(h){},function(h){}))},u.prototype._tick=function(){var c;this._disposed||(this._retry=0,(c=this)._logs.length>this._uploadCount?c._report():this._tickHandler=setTimeout(function(){c._report()},1e3*this._uploadDuration))},t.exports=u},{"../lib/io":42,"../lib/storage":49}],65:[function(P,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(g){for(var E=1;E<arguments.length;E++){var C,R=arguments[E];for(C in R)Object.prototype.hasOwnProperty.call(R,C)&&(g[C]=R[C])}return g}).apply(this,arguments)}var u,c=P("../lib/oo"),f=P("../lib/object"),h=P("../lib/data"),n=P("../lib/io"),l=P("../lib/ua"),a=P("../lib/event"),s=P("../config"),_=P("../player/base/event/eventtype"),T=P("./util"),m=P("./log"),v=P("../lib/playerutil"),S=0,x={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},P=c.extend({init:function(A,L,R){this.trackLog=R=R===void 0?!0:R,this.player=A,this.requestId="",this.sessionId=h.guid(),this.playId=0,this.firstPlay=!0,this.osName=l.os.name,this.osVersion=l.os.version||"",this.exName=l.browser.name,this.exVersion=l.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeInfo={},this.loadedDataReported=!1,this.startPlayReported=!1,this.canplayReported=!1,this.doPlayReported=!1,this.seekingData={seekingStartTime:0},this.pendingPrepareEndData=null,this.h265RenderTypeTimer=null,this.statisticsHistoryTimer=null,this.timeline=[{name:"init",ts:performance.now()}],s.logReportTo=L.logReportTo||s.logReportTo,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),L.logBatched&&(this._logService=new m(s));var R=this.player.getOptions(),A=L.from||"",L=(R.isLive,R.isLive?"live":"vod"),N="pc",I=(l.IS_IPAD?N="pad":l.os.phone&&(N="phone"),this.encodeURL(l.getReferer())),O=l.getHref(),M=this.encodeURL(O),H="",O=(O&&(H=l.getHost(O)),s.h5Version),z=T.getUuid(),J=R.source?this.encodeURL(R.source):"",U=l.getHost(R.source),q=R.userId?R.userId+"":"0",V=this.sessionId,X=new Date().getTime(),B=R.traceId||"";this._userNetInfo={cdnIp:"",localIp:""},this.opt={APIVersion:"0.6.0",t:X,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:l.USER_AGENT,hn:"0.0.0.0",bi:A,ri:V,e:"0",args:"0",li_ki:R.license.key||"",vt:L,tt:N,dm:"h5",av:O,uuid:z,vu:J,vd:U,ua:q,dn:"custom",cdn_ip:"0.0.0.0",app_n:H,r:I,pu:M,ti:B},this.bindEvent()},updateVideoInfo:function(g){g=g.from||"",this.opt.bi=g+"",this.updateSourceInfo()},updateSourceInfo:function(){var g,E=this.player.getOptions();E&&(g=E.source?this.encodeURL(E.source):"",E=l.getHost(E.source),this.opt.vu=g,this.opt.vd=E)},updateTraceId:function(g){this.opt.ti=g},updateLightSaasVideoId:function(g){this.lightSaasVideoId=g},replay:function(){this.reset(),this.player.trigger(_.Video.LoadStart),this.player.trigger(_.Video.LoadedMetadata),this.player.trigger(_.Video.LoadedData),this.startHeartBeat()},bindEvent:function(){var g=this;this.player.on(_.Private.Create,function(E){g._onCreate(E)}),this.player.on(_.Player.Init,function(){g._onPlayerInit()}),this.player.on(_.Video.LoadStart,function(){g._onPlayerloadstart()}),this.player.on(_.Video.LoadedMetadata,function(){g._onPlayerLoadMetadata()}),this.player.on(_.Video.LoadedData,function(){g._onPlayerLoaddata()}),this.player.on(_.Player.H265PlayInfo,function(E){g._onH265PlayInfo(E),g._onPlayerH265PlayInfo(E)}),this.player.on(_.Player.H266PlayInfo,function(E){g._onH265PlayInfo(E),g._onPlayerH265PlayInfo(E)}),this.player.on(_.Video.Play,function(){g._onPlayerPlay()}),this.player.on(_.Video.Playing,function(){g._onPlayerReady()}),this.player.on(_.Video.Ended,function(){g._onPlayerFinish()}),this.player.on(_.Video.Pause,function(){g._onPlayerPause()}),this.player.on("seeking",function(){g._onPlayerSeeking()}),this.player.on("seeked",function(){g._onPlayerSeeked()}),this.player.on(_.Private.LicenseHasResult,function(E){g._onLicenseHasResult(E)}),this.player.on(_.Private.SeekStart,function(E){g._onPlayerSeekStart(E)}),this.player.on(_.Private.EndStart,function(E){g._seekEndData=E.paramData}),this.player.on(_.Player.Waiting,function(){g._onPlayerLoaded()}),this.player.on(_.Video.CanPlayThrough,function(){}),this.player.on(_.Video.CanPlay,function(){g._waitingDelayLoadingShowHandle&&(clearTimeout(g._waitingDelayLoadingShowHandle),g._waitingDelayLoadingShowHandle=null),g._onPlayerUnderload(),g._onPlayerCanplay()}),this.player.on(_.Video.TimeUpdate,function(){g._waitingDelayLoadingShowHandle&&(clearTimeout(g._waitingDelayLoadingShowHandle),g._waitingDelayLoadingShowHandle=null),g._seekEndData&&g.player._seeking&&g._onPlayerSeekEnd()}),this.player.on(_.Player.Error,function(E){g._onPlayerError(E)}),this.player.on(_.Player.RequestFullScreen,function(){g._onFullscreenChange(1)}),this.player.on(_.Player.CancelFullScreen,function(){g._onFullscreenChange(0)}),this.player.on(_.Private.PREPARE,function(E){g._prepareTime=performance.now(),g._log("PREPARE",{dn:E.paramData}),g.timeline.push({name:"prepare",ts:performance.now()})}),this.player.on(_.Private.ManualPlay,function(){g.loadedDataReported||(g._prepareTime=performance.now(),g.timeline.push({name:"prepare2",ts:performance.now()}))}),this.player.on(_.Player.Snapshoted,function(){g._log("SNAPSHOT")}),this.player.on(_.Private.Retry,function(E){E=E.paramData||{},g._log("RETRY",{type:E.type,source:E.source})}),this.player.on(_.Player.RtsFallback,function(R){var C,R=R.paramData||{};g._log("RTSFALLBACK",{reason:(C=R.reason)==null?void 0:C.error_msg,url:R.fallbackUrl})}),this.player.on(_.Private.VodRequestException,function(E){E=E.paramData||{},g.reportVodException(E)}),this.player.on(_.Private.VodRequestExceptionResume,function(E){E=E.paramData||{},g.reportVodExceptionResume(E)}),this.player.on(_.Private.TraceLog,function(E){E=E.paramData||{},g._reportTrace(E)}),this.player.on(_.Private.DumpBuffer,function(E){E=E.paramData||{},g._reportDump(E)}),this.player.on(_.Private.StatisticsInfo,function(E){E=E.paramData||{},g._onStatisticsHistoryUpdate(E)}),this.player.on(_.Private.Timeline,function(E){E=E.paramData||{},g._onTimeline(E)}),a.on(this.player.tag,_.Video.Playing,function(){g.reportPlaying()}),a.on(this.player.tag,_.Video.TimeUpdate,function(){g.reportPlaying()}),this.startHeartBeat.call(this),this.startStatisticsHistory.call(this)},startStatisticsHistory:function(){var g=this;this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistoryTimer&&clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=setInterval(function(){g.player.trigger(_.Private.TraceLog,"[statistics_history]"+JSON.stringify(g.statisticsHistory)),g.resetStatisticsHistoryData()},this.player._options.statisticsReportInterval))},reportPlaying:function(){var g;this.doPlayReported||this.player.paused()||this.player.readyState()===0||(this.doPlayReported=!0,this.first_play_time=performance.now(),g={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",g))},removeEvent:function(){this.player.offAll("init"),this.player.offAll("ready"),this.player.offAll("ended"),this.player.offAll("play"),this.player.offAll("pause"),this.player.offAll("seekStart"),this.player.offAll("seekEnd"),this.player.offAll("canplaythrough"),this.player.offAll("playing"),this.player.offAll("timeupdate"),this.player.offAll("error"),this.player.offAll("fullscreenchange"),this.player.offAll("seeking"),this.player.offAll("seeked"),this.player.offAll(_.Private.PREPARE),this.player.offAll(_.Player.RtsFallback),a.off(this.player.tag,_.Video.Playing),a.off(this.player.tag,_.Video.TimeUpdate),this._logService&&this._logService.dispose(),clearInterval(u),clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null},reset:function(){this.stucking=!1,this.startTimePlay=0,this.pause_flag=0,this.firstPlay=!1,this.playId=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},S=0,this.lightSaasVideoId="",this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),u&&(clearInterval(u),u=null)},encodeURL:function(g){var E;return g?(E=this.player.getOptions())&&!E.logBatched?encodeURIComponent(g):g:""},startHeartBeat:function(){var g=this;u&&clearInterval(u),u=setInterval(function(){var E;g.player.getCurrentTime()&&(E=Math.floor(1e3*g.player.getCurrentTime()),g.player.paused()&&(g.prevStats.timestamp=0),++S>=g.player._options.heartHeatInterval)&&g.updateStats.call(g,function(C){var A=g._imageInfo()||{},L=g.player.tag.playbackRate,R=g.player.getVolume(),A={vt:E,interval:1e3*S,imgLength:A.imgLength,playbackRate:L,volume:R,bw:g._getbwEstimator()+"KB"},L=((A=C?y({},A,{dls:Math.floor(C.downloadSpeedPerSec),dfps:Math.floor(C.decodedFramesPerSec),pkl:Number((C.packageLossRate||0).toFixed(2)),rtt:1e3*C.rtt}):A).player_status=y({},g.heartBeatStatusData),g.player);A.time={play_time:parseFloat((L._playingTime/1e3).toFixed(2)),stuck_count:parseFloat(L._stuckCount.toFixed(2)),stuck_time:parseFloat((L._stuckTime/1e3).toFixed(2))},g._log("HEARTBEAT",A),S=0})},1e3)},updateStats:function(g){g=g||function(){};var E=this;this.player.getStats().then(function(C){var R,A,L,N;C?(N=E.prevStats,C.bytesReceived=C.bytesReceived||0,C.framesDecoded=C.framesDecoded||0,C.packetsLost=C.packetsLost||0,C.packetsReceived=C.packetsReceived||0,R=((E.prevStats=C).timestamp-N.timestamp)/1e3,A=(C.bytesReceived-N.bytesReceived)/R,L=(C.framesDecoded-N.framesDecoded)/R,N=(C.packetsLost-N.packetsLost)/(C.packetsLost-N.packetsLost+(C.packetsReceived-N.packetsReceived)),C=C.rtt,g({downloadSpeedPerSec:A,decodedFramesPerSec:L,packageLossRate:N,rtt:C,timeGap:R})):g()}).catch(function(C){console.log("error in monitor getStats: ",C),g()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:new Date().getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:new Date().getTime()}),this.canplayReported=!0)},reportPlayAbort:function(g){this._log("PLAYABORT",{vt:new Date().getTime(),from:g})},reportVodException:function(g){console.log("VOD_REQUEST_FATAL_ERROR",g),this._log("VOD_REQUEST_FATAL_ERROR",g)},reportVodExceptionResume:function(g){console.log("VOD_REQUEST_FATAL_ERROR_RESUME",g),this._log("VOD_REQUEST_FATAL_ERROR_RESUME",g)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetLoadedDataReported:function(){this.loadedDataReported=!1,this._prepareTime=performance.now()},resetDoPlayReportFlag:function(){this.doPlayReported=!1},resetSessionId:function(){this.sessionId=h.guid()},resetHeartBeatStatusData:function(){this.heartBeatStatusData={t_last_pause:-1,t_last_resume:-1,t_last_load_start:-1,t_last_load_end:-1},this.player.startPlayTimeMonitor()},resetStatisticsHistoryData:function(){this.statisticsHistory={speed:[],framesDropped:[],downlink:[],type:[],rtt:[]}},resetTimeline:function(){var g=performance.now();this._createTime=g,this.timeline=[{name:"init",ts:g}]},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetLoadedDataReported(),this.resetDoPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId(),this.resetTimeline())},updateH265ProbeInfo:function(g){this._h265ProbeInfo=g||{}},_onFullscreenChange:function(g){g?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onTimeline:function(g){var E=["frag_s","frag_f","frag_parsed"].includes(g.name);this.timeline.some(function(C){return E&&C.name===g.name})||this.timeline.push(g)},_onPlayerloadstart:function(){this.loadstartTime=performance.now(),this.playId=h.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=performance.now()-this.loadstartTime,this.timeline.push({name:"meta",ts:performance.now()})},_onPlayerLoaddata:function(){var g,E,C,R,A=this;this.timeline.push({name:"loadeddata",ts:performance.now()}),this.loadedDataReported||(R=C=0,this.player.tag&&(C=this.player.tag.videoWidth,R=this.player.tag.videoHeight),g={fc:parseInt(performance.now()-this._createTime),tc:parseInt(performance.now()-this._prepareTime),cc:parseInt(performance.now()-this.loadstartTime),md:parseInt(this.loadMetaDataCost),mi:JSON.stringify({type:"video",definition:C+"*"+R})},this.timeline.forEach(function(L,N){try{var I=N?L.ts-A.timeline[N-1].ts:0;g["tl_"+L.name]=N+"#"+parseInt(I)}catch{}}),(C=this.player.tag)!=null&&C.duration&&(g.vdur=1e3*((R=this.player.tag)==null?void 0:R.duration)),(5<this._h265ProbeInfo.codecCost||5<this._h265ProbeInfo.decoderCost)&&(C=Math.floor(this._h265ProbeInfo.codecCost)||0,R=Math.floor(this._h265ProbeInfo.decoderCost)||0,g.tc+=E=C+R,g.cc+=E,g.pcc=C,g.pdc=R),E=[{type:"audio"}],C={type:"video",codecType:null,isHardwareDecode:null},R=this._h265ProbeInfo.codecTag,v.isH265Codec(R)?C.codecType="h265":v.isH266Codec(R)?C.codecType="h266":v.isH264Codec(R)&&(C.codecType="h264"),E.push(C),g.decode_info=E,this._h265ProbeInfo.waitRenderType?(this.pendingPrepareEndData=g,this.h265RenderTypeTimer=setTimeout(function(){A._log("PREPAREEND",g),A.h265RenderTypeTimer=null},2e3)):this._log("PREPAREEND",g)),this.loadedDataReported=!0},_onStatisticsHistoryUpdate:function(g){this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistory.speed.push(parseInt(g.speed)),this.statisticsHistory.framesDropped.push(g.droppedFrames),g=navigator.connection)&&(this.statisticsHistory.downlink.push(g.downlink),this.statisticsHistory.type.push(g.effectiveType),this.statisticsHistory.rtt.push(g.rtt))},_onH265PlayInfo:function(g){var E,C;this.h265RenderTypeTimer&&(clearTimeout(this.h265RenderTypeTimer),this.h265RenderTypeTimer=null),this.pendingPrepareEndData&&(g=g.paramData,E=this.pendingPrepareEndData,this.pendingPrepareEndData=null,C=E.decode_info[1],g.renderType==="wasm"&&(C.isHardwareDecode=!1),this._log("PREPAREEND",E))},_onPlayerH265PlayInfo:function(g){g=g.paramData||{},this._log("HEVCINFO",{cd:g.codecTag,rd:g.renderType,si:g.simd,sio:g.simdOption,wt:g.wasmThreads,wto:g.wasmThreadsOption,sp:g.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this.prevStats.timestamp||this.updateStats.call(this)},_onCreate:function(g){g=g.paramData||{},g.hasPa=!!g.playauth,delete g.playauth,g.hasSk=!!g.accessKeySecret,delete g.accessKeySecret,g.hasSt=!!g.securityToken,delete g.securityToken,this._log("CREATE",g),this._createTime=performance.now()},_onPlayerInit:function(){this.stucking=!1,this.pause_flag=0,this.startTimePlay=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=new Date().getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_onPlayerPlay:function(){var g;this.playstartTime=new Date().getTime(),this.playId==0&&(this.playId=h.guid()),this.player._isPreload()||(this.loadstartTime=performance.now()),this.doPlayReported&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=new Date().getTime(),this.heartBeatStatusData.t_last_resume=this.pauseEndTime,g=this.pauseEndTime-this.pauseTime,this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:g,pass:g,t_last_pause:this.pauseTime}))},_onPlayerPause:function(){!this.doPlayReported||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=new Date().getTime(),this.heartBeatStatusData.t_last_pause=this.pauseTime,this.heartBeatStatusData.t_last_resume=-1,this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(g){g=g.paramData||{},this._log("LICENSE_RESULT",{li_ri:g.result,li_ti:g.featureId||"sdk"})},_onPlayerSeekStart:function(g){this.seekStartTime=g.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=new Date().getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=new Date().getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var g,E=this;this.doPlayReported&&!this.stucking&&document.visibilityState!=="hidden"&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),setTimeout(function(){var C=E.player.readyState()<4;E.player.readyState()||(C=!0),E.player.getCurrentTime()===E.seekingStartTime&&C&&(C=E._getbwEstimator(),E._log("UNDERLOAD",{vt:Math.floor(1e3*E.player.getCurrentTime()),bw:C,cbs:E._getCbs()}),E.stucking=!0,E.stuckStartTime=new Date().getTime(),E._getCbs()===0)&&(E.heartBeatStatusData.t_last_load_start=E.stuckStartTime,E.heartBeatStatusData.t_last_load_end=-1)},500)):(this.stuckStartTime=new Date().getTime(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_start=this.stuckStartTime,this.heartBeatStatusData.t_last_load_end=-1),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,g=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:g,cbs:this._getCbs()}),this.stuckStartTime=new Date().getTime())))},_onPlayerUnderload:function(){var g,E,C,R;!this.doPlayReported&&this.player._options&&this.player._options.autoplay||this.stucking&&(g=Math.floor(1e3*this.player.getCurrentTime()),E=this.stuckStartTime||new Date().getTime(),0<(C=Math.floor(new Date().getTime()-E))&&C<(1e3*this.player._options.waitingTimeout||6e4)&&(R=this._getbwEstimator(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_end=new Date().getTime()),this._log("LOADED",{vt:g,cost:C,bw:R,cbs:this._getCbs(),t_last_load_start:E})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var g=this;this.player._splayer?this.player.one("canplay",function(){g._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var g=performance.now(),g=Math.floor(g-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:g})},_reportTrace:function(g){this._log("TRACE",{log:g})},_reportDump:function(g){this._log("DUMP",g)},_onPlayerError:function(g){this._reportTrace(g.paramData),this.playId=0,this.statisticsHistoryTimer&&(clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,this.resetStatisticsHistoryData())},_getbwEstimator:function(){var g=NaN;try{g=((g=this.player._getbwEstimator&&parseInt(this.player._getbwEstimator(),10))/8/1024).toFixed(2)}catch{}return g},_getCbs:function(){return!this.player.getOptions().isLive&&this.seekStart?1:0},_log:function(g,E){if(this.trackLog){this.updateSourceInfo();var C=f.copy(this.opt),R=(this.requestId=h.guid(),s.logReportTo),g=(C.e=x[g]+"",C.en=g,C.ri=this.sessionId,C.bi=C.bi&&String(C.bi),C.t=new Date().getTime()+"",C.cdn_ip=this._userNetInfo.cdnIp,C.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),A=(g!=""&&(C.definition=g.definition),[]),g=(f.each(E,function(M,H){if(typeof H!="string")try{H=JSON.stringify(H)}catch{}A.push(M+"="+H)}),""),E=this.player.getOptions(),g=((g=E&&E.vid||this.lightSaasVideoId?E.vid||this.lightSaasVideoId:g)&&A.push("vid="+g),"");(g=E&&E.mediaAuth?E.mediaAuth:g)&&A.push("pauth="+g);try{Aliplayer&&Aliplayer.__logCallback__&&(C.args=A,Aliplayer.__logCallback__(C))}catch(M){console.log(M)}if((A=A.join("&"))==""&&(A="0"),C.args=this.encodeURL(A),this._logService){if(C.e===String(x.DUMP))return void this._logService.reportDump(C);this._logService.add(C)}else{var L=[];f.each(C,function(M,H){L.push(M+"="+H)}),L=L.join("&"),n.jsonp(R+"?"+L,function(){},function(){})}return this.sessionId}},_imageInfo:function(){try{var g,E,C,R,A,L,N;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(g=this.player.tag)?(E=document.createElement("canvas"),C=g.videoWidth,R=g.videoHeight,E.width=C,E.height=R,(A=E.getContext("2d")).save(),A.drawImage(g,0,0,C,R),A.restore(),L=E.toDataURL("image/jpeg",1),N="",{imgLength:(N=L?(N=L.substr(L.indexOf(",")+1))||"":N).length}):{}}catch{return{}}}});t.exports=P},{"../config":14,"../lib/data":32,"../lib/event":35,"../lib/io":42,"../lib/object":44,"../lib/oo":45,"../lib/playerutil":47,"../lib/ua":50,"../player/base/event/eventtype":70,"./log":64,"./util":66}],66:[function(e,t,w){var y=e("../lib/cookie"),u=e("../lib/data"),c=e("../lib/ua");t.exports.getUuid=function(){var f=y.get("p_h5_u");return f||(f=u.guid(),y.set("p_h5_u",f,730)),f},t.exports.getTerminalType=function(){var f="pc";return c.IS_IPAD?f="pad":c.IS_ANDROID?f="android":c.IS_IOS&&(f="iphone"),f},t.exports.returnUTCDate=function(T){var h=T.getUTCFullYear(),n=T.getUTCMonth(),l=T.getUTCDate(),a=T.getUTCHours(),s=T.getUTCMinutes(),_=T.getUTCSeconds(),T=T.getUTCMilliseconds();return Date.UTC(h,n,l,a,s,_,T)},t.exports.getRfc822=function(f){return f.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":31,"../lib/data":32,"../lib/ua":50}],67:[function(e,t,w){var y=e("./base/player"),u=(e("./flash/flashplayer"),e("./saas/mtsplayer")),c=e("./saas/vodplayer"),f=e("./saas/lightPlayer"),h=e("./audio/audioplayer"),n=e("./hls/hlsplayer"),l=e("./flv/flvplayer"),a=e("./dash/dashplayer"),s=e("./rts/rtsplayer"),_=e("./drm/drmplayer"),T=e("./splayer/splayer"),m=e("../lib/ua"),v=e("../lib/playerutil"),S=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),x=e("../lib/constants"),P=e("./base/event/eventtype");t.exports.create=function(R,C){R._userOptions||(R._userOptions=Object.assign({},R)),navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(R.useNativeControls=!0),R.readyCallback=C=typeof C!="function"?function(){}:C,S.setCurrentLanguage(R.language,"h5",R.languageTexts,R.extLanguageTexts);var C=v.handleOption(R),R=C.source,A=C.format;if(A&&R)try{A=A.toLowerCase()}catch(M){console.log("Aliplayer - parsing format failed",M),A=""}else A="";v.isSupportedFormat(A)||(A=""),C.optionFormat=A;var L,N=v.isAudio(R,A),I=(N&&(C.mediaType="audio"),v.createWrapper(C));if(I.player)return I.player;if(N)L=new h(I,C);else if(v.isRts(R))L=new s(I,C);else if((C.forceH265||C.enableH265)&&(v.isMp4(R,A)||v.isFlv(R,A)||v.isHls(R,A)))L=new T(I,C);else if((C.forceH266||C.enableH266)&&(v.isMp4(R,A)||C.isLive&&(v.isFlv(R,A)||v.isHls(R,A))))L=new T(I,C);else if(!C.useFlashPrism&&v.isFlv(R,A)&&v.isSupportFlv())L=new l(I,C);else if([null,void 0].indexOf(C.mediaAuth)!==-1||C.source)if(C.vid&&!C.source)if(C.authInfo)L=new u(I,C);else{if(!(C.playauth||C.accessKeyId&&C.accessKeySecret))throw N="vid="+C.vid+" playauth='', playauth property is required by VOD(视频点播) as new Aliplayer.",new Error(N);L=new c(I,C)}else v.isHls(R,A)?v.canPlayHls()?L=new(v.isSupportHls()&&(v.isUsedHlsPluginOnMobile()||v.isSafariUsedHlsPlugin(C.useHlsPluginForSafari))?C.isDrm?_:n:C.isDrm?_:y)(I,C):v.isSupportHls()?L=new(C.isDrm?_:n)(I,C):m.os.pc||(L=new y(I,C)):v.isDash(R,A)&&v.isSupportMSE()?L=new a(I,C):(L=new y(I,C),C.source||(N={error_code:x.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:S.get("Error_Empty_Source")},L.trigger(P.Player.Error,N)));else L=new f(I,C);return L}},{"../lang/index":25,"../lib/constants":30,"../lib/dom":34,"../lib/io":42,"../lib/playerutil":47,"../lib/ua":50,"./audio/audioplayer":68,"./base/event/eventtype":70,"./base/player":93,"./dash/dashplayer":100,"./drm/drmplayer":102,"./flash/flashplayer":103,"./flv/flvplayer":105,"./hls/hlsplayer":107,"./rts/rtsplayer":109,"./saas/lightPlayer":113,"./saas/mtsplayer":115,"./saas/vodplayer":121,"./splayer/splayer":130}],68:[function(n,t,w){var y=n("../base/player"),u=n("../../ui/component"),c=n("../../lib/dom"),f=n("../../lib/object"),h=n("../../lib/playerutil"),n=y.extend({init:function(l,a){this._isAudio=!0,a.skinLayout===void 0&&(a.skinLayout=h.getDefaultAudioLayout()),y.call(this,l,a)}});n.prototype.createEl=function(){this.tag.tagName!=="AUDIO"&&(this._el=this.tag,this.tag=u.prototype.createEl.call(this,"audio"));var l=this._el,a=this.tag,s=(a.player=this,c.getElementAttributes(a));return f.each(s,function(_){l.setAttribute(_,s[_])}),this.setVideoAttrs(),a.parentNode&&a.parentNode.insertBefore(l,a),c.insertFirst(a,l),l},t.exports=n},{"../../lib/dom":34,"../../lib/object":44,"../../lib/playerutil":47,"../../ui/component":135,"../base/player":93}],69:[function(e,t,w){var y=e("../../../lib/event"),u=e("./eventtype"),c=e("../eventHandler/video/index"),f=e("../eventHandler/player/index");t.exports.offAll=function(h){var n,l,a,s=h.tag,_=h._el;for(n in u.Video)y.off(s,u.Video[n]);for(l in u.Player)y.off(_,u.Player[l]);for(a in u.Private)y.off(_,u.Private[a])},t.exports.offVideoAll=function(h){var n,l=h.tag;for(n in u.Video)y.off(l,u.Video[n])},t.exports.onAll=function(h){c.bind(h),f.bind(h)}},{"../../../lib/event":35,"../eventHandler/player/index":74,"../eventHandler/video/index":84,"./eventtype":70}],70:[function(e,t,w){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange",Resize:"resize"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",RtsTraceId:"rtsTraceId",H265PlayInfo:"h265PlayInfo",H266PlayInfo:"h266PlayInfo",H265DecoderOverload:"h265DecoderOverload",SettingSelected:"settingSelected",AutoResize:"autoResize",VideoUnavailable:"videoUnavailable"},Private:{Create:"create",Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch",VodRequestException:"vodRequestException",VodRequestExceptionResume:"vodRequestExceptionResume",TraceLog:"traceLog",DumpBuffer:"dumpBuffer",PlaybackRateChanged:"playbackRateChanged",StatisticsInfo:"statisticsInfo",MutedAutoplay:"mutedAutoplay",Timeline:"timeline",ManualPlay:"manualPlay",UpdateWatchTime:"updateWatchTime"}}},{}],71:[function(e,t,w){e("../../event/eventtype");var y=e("../../../../lib/dom"),u=e("../../../../lib/ua");t.exports.handle=function(){(!u.IS_IOS||u.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&y.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":34,"../../../../lib/ua":50,"../../event/eventtype":70}],72:[function(e,t,w){var y=e("../../event/eventtype");t.exports.handle=function(u){var c=this;c.trigger(y.Player.CompleteSeek,u.paramData.toTime),c.one(y.Player.CanPlay,function(){c._enteredProgressMarker&&c.pause()})}},{"../../event/eventtype":70}],73:[function(e,t,w){var y=e("../../event/eventtype"),u=(e("../../../../lib/constants"),e("../../../../lang/index"),e("../../../../monitor/util"));t.exports.handle=function(h){var f=this,h=h.paramData;f.trigger(y.Private.H5_Loading_Hide),f.trigger(y.Private.Cover_Hide),f.trigger(y.Private.Play_Btn_Hide),f.trigger(y.Private.SettingListHide),f.trigger(y.Private.SelectorHide),f.trigger(y.Private.VolumeVisibilityChange,""),h=h||{},f._monitor&&(h.uuid=u.getUuid(),h.serverRequestId=f._serverRequestId,h.requestId=f._monitor.sessionId,h.cdnIp=f._monitor._userNetInfo.cdnIp,h.localIp=f._monitor._userNetInfo.localIp),f._isError=!0,f.trigger(y.Private.Error_Show,h),f.trigger(y.Private.LifeCycleChanged,{type:y.Player.Error,data:h})}},{"../../../../lang/index":25,"../../../../lib/constants":30,"../../../../monitor/util":66,"../../event/eventtype":70}],74:[function(e,t,w){var y=e("../../event/eventtype"),u=e("../../../../lib/event"),c=e("./lifecyclecommon"),f={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error"),privateSeiFrame:e("./seiframe"),patchWaiting:e("../video/waiting")},h=[y.Private.EndStart,y.Private.SeekStart,y.Player.RequestFullScreen,y.Player.CancelFullScreen,y.Player.Error,y.Player.Ready,y.Private.Dispose,y.Private.Created,y.Private.SeiFrame,y.Private.PatchWaiting];t.exports.bind=function(n){n.el();for(var l=0;l<h.length;l++){var a=h[l];f[a]!="undefined"&&function(s,_,T){var m=s.el();u.on(m,_,function(v){var S=(T&&T.handle?T:c).handle;S.call(s,v,_)})}(n,a,f[a])}}},{"../../../../lib/event":35,"../../event/eventtype":70,"../video/waiting":92,"./cancelfullscreen":71,"./endstart":72,"./error":73,"./lifecyclecommon":75,"./requestfullscreen":76,"./seekstart":77,"./seiframe":78}],75:[function(e,t,w){var y=e("../../event/eventtype");t.exports.handle=function(u,c){this.trigger(y.Private.LifeCycleChanged,{type:c,data:u})}},{"../../event/eventtype":70}],76:[function(e,t,w){e("../../event/eventtype");var y=e("../../../../lib/dom"),u=e("../../../../lib/ua");t.exports.handle=function(){(!u.IS_IOS||u.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&y.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":34,"../../../../lib/ua":50,"../../event/eventtype":70}],77:[function(e,t,w){var y=e("../../event/eventtype");t.exports.handle=function(u){this._seeking=!0,this.trigger(y.Player.StartSeek,u.paramData.fromTime)}},{"../../event/eventtype":70}],78:[function(e,t,w){e("../../event/eventtype"),t.exports.handle=function(f){var u,c,f=f.paramData,h=f.pts;this._hls2?h=parseInt(1e3*h):this._hls&&(u=f.pts,c=this._initPTS,h=parseInt((u-c)/90,10)),this._seis[h]=this._seis[h]||[],this._seis[h].push(f.dataContent)}},{"../../event/eventtype":70}],79:[function(e,t,w){var y=e("../../event/eventtype");t.exports.handle=function(u){var c=this,f=(c._retrySwitchUrlCount=0,c._liveRetryCount=0,c._clearLiveErrorHandle(),c._dumpBuffer="ABORTED",new Date().getTime()-c.readyTime);c._options.autoplay||c._options._autoplay||!c.paused()||(c.trigger(y.Private.H5_Loading_Hide),c.trigger(y.Private.Play_Btn_Show)),c.trigger(y.Player.CanPlay,{loadtime:f})}},{"../../event/eventtype":70}],80:[function(e,t,w){var y=e("../../event/eventtype"),u=e("../../../../lib/dom"),c=e("../../../../lib/ua");t.exports.handle=function(f){this._seeking=!1;var h=this.tag;h.style.display==="none"&&c.IS_IOS&&setTimeout(function(){u.css(h,"display","block")},100),this.trigger(y.Video.CanPlayThrough)}},{"../../../../lib/dom":34,"../../../../lib/ua":50,"../../event/eventtype":70}],81:[function(e,t,w){t.exports.handle=function(y,u){var c="";y&&y.paramData&&(c=y.paramData),this.trigger(u,c)}},{}],82:[function(e,t,w){var y=e("../../event/eventtype");e("../../../../lang/index"),e("../../../../lib/event"),t.exports.handle=function(u){var c=this;c.waiting=!1,c._ended=!0,c._currentTimeForDisableSeek=0,c.traceLog("video/ended.js","event::ended"),c.trigger(y.Private.Play_Btn_Show),c.trigger(y.Player.Ended),c.__disposed||(c._monitor&&c._monitor._onPlayerInit(),c._options.rePlay?(c._monitor&&c._monitor.startHeartBeat(),this._splayer||(c.seek(c._getPlayStartTime()),c.tag.play())):c._options.isLive&&c.trigger(y.Private.H5_Loading_Hide))}},{"../../../../lang/index":25,"../../../../lib/event":35,"../../event/eventtype":70}],83:[function(e,t,w){var y=e("../../event/eventtype"),u=e("../../../../lib/constants"),c=e("../../../../lang/index"),f=(e("../../../../lib/event"),e("../../../../lib/ua")),h=(e("../../../../lib/io"),e("../../../../lib/playerutil")),n="video/error.js";function l(a,s,_){var T=a._options,m=T.source||"";(s=s!==4&&f.IS_IOS&&/qqbrowser/i.test(f.USER_AGENT)?4:s)===4&&h.isHls(m)?h.detectRegionBlock(m,function(v){v?(v={mediaId:T.isLive?"ISLIVE":T.vid||"",error_code:u.ErrorCode.RegionBlock,error_msg:c.get("Error_Region_Block_Text"),diagnosis_info:c.get("Tip_Err_Blocked")},a.logError(v),a.trigger("error",v)):_()}):_()}t.exports.handle=function(a){if((a.target||a.srcElement).error){var s=this;if(s.waiting=!1,s._clearTimeout(),s.checkOnline()&&!s._splayer){var _,v="",T=a.target||a.srcElement,m=T.error&&T.error.message||"",v="";if(T.error&&T.error.code&&(_=T.error.code,v=u.VideoErrorCode[T.error.code],m=_+" || "+m),s.traceLog(n,"event::error#"+_+"#"+m),s._reportDumpBuffer&&s._reportDumpBuffer(),s._options.isLive)l(s,_,function(){s._options.liveRetry>s._liveRetryCount?s._reloadAndPlayForM3u8():(s._liveRetryCount=0,s.trigger(y.Player.LiveStreamStop),s._liveErrorHandle=setTimeout(function(){var x={mediaId:"ISLIVE",error_code:v,error_msg:m||c.get("Error_Play_Text")+"，"+c.get("Error_Retry_Text")};s.logError(x),x.display_msg=u.VideoErrorCodeText[_]||x.error_msg,s.trigger("error",x)}),f.IS_UC&&(s._liveErrorHandle=null))});else if(_==3){if(T="",-1<m.indexOf("no decoder found"))T=c.get("Error_No_Decoder_Text");else if(s._nudgeCount=s._nudgeCount||0,s._nudgeCount<5){s._nudgeCount++;var S=+s._nudgeCount,S=s.getCurrentTime()+S;if(s.traceLog(n,"decode error, try to nudge("+s._nudgeCount+"/5) from "+s.getCurrentTime()+" to "+S+"s, duration: "+s.getDuration()),S<s.getDuration())return void s._loadByUrlInner(s._options.source,S,!0)}else if((function(){var x=!1,P=this.getOptions();{var g;this._fallback||!h.isHls(P.source)||this._options._native||!h.canPlayHls()||this.swPlayer||(x=!0,this._options.useHlsPluginForSafari=!1,this._options._native=!0,this.traceLog(n,"fallback to native player"),g=this.getCurrentTime(),window.Aliplayer&&window.Aliplayer.reloadInstance(this._options,function(E){E._fallback=!0,P.isLive||E.seek(g)},this))}return x}).call(s)||(function(){var x=!1,P=this.getOptions();{var g;!this._fallback&&h.isHls(P.source)&&this._options._native&&h.isSupportHls()&&(x=!0,this._options.useHlsPluginForSafari=!0,this._options._native=!1,this.traceLog(n,"fallback to MSE player"),g=this.getCurrentTime(),window.Aliplayer)&&window.Aliplayer.reloadInstance(this._options,function(E){E._fallback=!0,P.isLive||E.seek(g)},this)}return x}).call(s))return;S={mediaId:s._options.vid||"",error_code:v,error_msg:m},s.logError(S),S.display_msg=u.VideoErrorCodeText[_]+(T?"，"+T:""),S.diagnosis_info=c.get("Tip_Err_Decode")+"<br />"+c.get("Tip_Err_Common_Short")+m,s.trigger(y.Player.Error,S)}else s._reloadForVod()||l(s,_,function(){var x,P,g;x=c.get("Error_Play_Text"),P=!1,_<3?x=u.VideoErrorCodeText[_]:s._eventState==u.SUSPEND?(x=c.get("Error_Load_Abort_Text"),v=u.ErrorCode.RequestDataError):s._eventState==u.LOAD_START?(x=c.get("Error_Network_Text"),0<s._options.source.indexOf("auth_key")&&(x=x+"，"+c.get("Error_AuthKey_Text")),v=u.ErrorCode.StartLoadData):s._eventState==u.LOADED_METADATA&&(x=c.get("Error_Play_Text"),v=u.ErrorCode.PlayingError),x=x+"，"+c.get("Error_Retry_Text"),1<s._urls.length&&s._retrySwitchUrlCount<3&&s._options.source.indexOf(".mpd")==-1&&(s.switchUrl(),P=!0),g={mediaId:s._options.vid||"",error_code:v,error_msg:m},P||(s.logError(g),g.display_msg=x,s.trigger(y.Player.Error,g))})}}else this.traceLog(n,"video.MediaError is null, may be caused by non-video source, like invalid poster ("+(a.target||a.srcElement).poster+")")}},{"../../../../lang/index":25,"../../../../lib/constants":30,"../../../../lib/event":35,"../../../../lib/io":42,"../../../../lib/playerutil":47,"../../../../lib/ua":50,"../../event/eventtype":70}],84:[function(e,t,w){var y=e("../../../../lib/event"),u=e("../../event/eventtype"),c={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate"),manualended:e("./ended"),loadedmetadata:e("./loadedmetadata"),seeking:e("./seeking"),resize:e("./resize")};t.exports.bind=function(f){f.tag;for(var h in u.Video)h=u.Video[h],function(n,l,a){var s=n.tag;y.on(s,l,function(_){a.handle.call(n,_,l),l!=u.Video.Error&&(l==u.Video.ManualEnded&&(l=u.Video.Ended),n.trigger(u.Private.LifeCycleChanged,{type:l,data:_}))})}(f,h,c[h]!==void 0?c[h]:c.common)}},{"../../../../lib/event":35,"../../event/eventtype":70,"./canplay":79,"./canplaythrough":80,"./common":81,"./ended":82,"./error":83,"./loadedmetadata":85,"./pause":86,"./play":87,"./playing":88,"./resize":89,"./seeking":90,"./timeupdate":91,"./waiting":92}],85:[function(e,t,w){var y=e("../../event/eventtype");e("../../../../lib/playerutil"),t.exports.handle=function(u){var c=this.tag;this._duration=c.duration<1?0:c.duration,this._getSubVideoConfig().start>this._duration-1&&(console.warn("Params.start ["+this._getSubVideoConfig().start+"] is greater than video.duration ["+this._duration+"] - 1, seeking to 0"),this.setStartEnd(0,this._getSubVideoConfig().end)),this._getWatchTimeConfig().watchStartTime>this._duration-1&&(console.warn("Params.watchStartTime ["+this._getWatchTimeConfig().watchStartTime+"] is greater than video.duration ["+this._duration+"] - 1, seeking to 0"),this.setWatchTime(0,this._getWatchTimeConfig().watchEndTime)),this.trigger(y.Private.ReadyState),this._splayer&&this.trigger(y.Video.DurationChange),this.trigger(y.Video.LoadedMetadata),c.videoWidth&&c.videoHeight||this.trigger(y.Player.VideoUnavailable)}},{"../../../../lib/playerutil":47,"../../event/eventtype":70}],86:[function(e,t,w){var y=e("../../event/eventtype"),u=e("../../../../lib/ua");t.exports.handle=function(c){var f=this;f._seeking&&f._splayer||(f._hls&&f._options&&f._options.isLive&&u.IS_FIREFOX&&f.trigger(y.Private.Play_Btn_Show),f._clearTimeout(),f.trigger(y.Private.AutoStreamHide),f.trigger(y.Player.Pause),f._isManualPause&&(f.trigger(y.Private.Play_Btn_Show),f.trigger(y.Private.H5_Loading_Hide)),f.waiting=!1)}},{"../../../../lib/ua":50,"../../event/eventtype":70}],87:[function(e,t,w){var y=e("../../event/eventtype");t.exports.handle=function(u){this.trigger(y.Private.Error_Hide),this.trigger(y.Private.Cover_Hide),this.trigger(y.Private.AutoStreamHide),this.waiting=!1,this.trigger(y.Player.Play)}},{"../../event/eventtype":70}],88:[function(e,t,w){var y=e("../../event/eventtype");t.exports.handle=function(u){var c,f=this;this.tag.paused||(f.trigger(y.Private.H5_Loading_Hide),f.trigger(y.Private.Cover_Hide),f.trigger(y.Private.Info_Hide),f.waiting=!1,f._ended=!1,f._liveRetryCount=0,f._vodRetryCount=0,f._seeking=!1,c=f.getCurrentTime(),f._waitingReloadTime!=c&&(f._waitingTimeoutCount=0),f._checkTimeoutHandle&&(clearTimeout(f._checkTimeoutHandle),f._checkTimeoutHandle=null),f._waitingLoadedHandle&&(clearTimeout(f._waitingLoadedHandle),f._waitingLoadedHandle=null),f._ucSourceHandle&&(clearTimeout(f._ucSourceHandle),f._ucSourceHandle=null),f._waitingDelayLoadingShowHandle&&(clearTimeout(f._waitingDelayLoadingShowHandle),f._waitingDelayLoadingShowHandle=null),f._waitingTimeoutHandle&&(clearTimeout(f._waitingTimeoutHandle),f._waitingTimeoutHandle=null,f._ccService)&&f._options.isLive&&(c=f._ccService.getCurrentSubtitle(),f._setDefaultCC=!0,c)&&f._ccService.switch(c),f.trigger(y.Private.AutoStreamHide),f.trigger(y.Player.Playing),f.trigger(y.Private.Error_Hide),f.trigger(y.Private.Play_Btn_Hide))}},{"../../event/eventtype":70}],89:[function(e,t,w){var y=e("../../event/eventtype"),u=e("../../../../feature/ratioAdapter");t.exports.handle=function(c){this.trigger(y.Video.Resize);var f=this.getOptions();if(f.autoSize){if(!this._ratioAdapter){if(f.autoSize!==!0&&f.autoSize!=="width"&&f.autoSize!=="height")return void console.warn("Unknown parameter [autoSize]: "+f.autoSize+", only true/height/width are supported");f.autoSize===!0&&(f.autoSize="height"),this._ratioAdapter=new u}this._ratioAdapter.autoResize(this.tag.videoWidth/this.tag.videoHeight,this,f.autoSize)}}},{"../../../../feature/ratioAdapter":21,"../../event/eventtype":70}],90:[function(e,t,w){var y=e("../../event/eventtype");e("../../../../lib/playerutil"),t.exports.handle=function(u){var c,f,h,n=this.tag,l=(this.getOptions().disableSeek&&(l=n.currentTime-this._currentTimeForDisableSeek,.01<Math.abs(l))&&(n.currentTime=this._currentTimeForDisableSeek),n.currentTime);this._canSeek(l)||(c=this._getWatchTimeConfig(),h=0,(f=this._getSubVideoConfig()).start||f.end?h=l>f.end?f.end:f.start:(c.watchStartTime||c.watchEndTime)&&(h=l>c.watchEndTime?c.watchEndTime:c.watchStartTime),n.currentTime=h),this.trigger(y.Video.Seeking)}},{"../../../../lib/playerutil":47,"../../event/eventtype":70}],91:[function(e,t,w){var y=e("../../event/eventtype"),u=e("../../../../lib/ua"),c=e("../../../../lib/event"),f=e("../../plugin/status");function h(n){var l=this;n!=null&&n.length&&n.forEach(function(a){l.trigger(y.Player.SeiFrame,a)})}t.exports.handle=function(m){var l,a,s,_=this,T=(_._isError||_.trigger(y.Player.TimeUpdate,m.timeStamp),_._decodeErrorNudgeTimer||(_._decodeErrorNudgeTimer=setTimeout(function(){_._nudgeCount=0},3e3)),(u.IS_IOS||u.IS_MAC_SAFARI)&&(clearTimeout(_._waitingPatchTimer),_._waitingPatchTimer=setTimeout(function(){_.waiting||_._isError||_.paused()||_._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),_.trigger(y.Private.PatchWaiting))},3e3)),_.getCurrentTime()),m=(_.tag.seeking||(_._currentTimeForDisableSeek=T),_.waiting&&!_._TimeUpdateStamp&&(_._TimeUpdateStamp=T),_.waiting!=0&&_._TimeUpdateStamp==T||(_.trigger(y.Private.H5_Loading_Hide),_.trigger(y.Private.AutoStreamHide),_._checkTimeoutHandle&&clearTimeout(_._checkTimeoutHandle),_._waitingTimeoutHandle&&clearTimeout(_._waitingTimeoutHandle),_._waitingLoadedHandle&&clearTimeout(_._waitingLoadedHandle),_._ucSourceHandle&&(clearTimeout(_._ucSourceHandle),_._ucSourceHandle=null),_.waiting=!1),u.IS_ANDROID&&u.IS_UC&&(_._timeNotUpdateCount=_._timeNotUpdateCount||0,_.waiting||T!==_._TimeUpdateStamp||(_._timeNotUpdateCount++,2<=_._timeNotUpdateCount&&(_._timeNotUpdateCount=0,_.trigger(y.Private.PatchWaiting)))),_._TimeUpdateStamp=T,_._options.isLive||(l=_.getDuration(),m=!1,a=0,l<T&&!_.paused()?(a=1,m=!0):l-T<.2&&0<=u.browser.version.indexOf("49.")&&!_.paused()?(a=2,m=!0):_.exceedPreviewTime(T)?(a=3,m=!0):T>=_._getWatchTimeConfig().watchEndTime&&(a=4,m=!0,_.pause()),m&&setTimeout(function(){_._ended||(_._splayer||_.paused()||_.pause(),c.trigger(_.tag,y.Video.ManualEnded),_.traceLog&&_.traceLog("video/timeupdate.js","ManualEnded#"+a+"#"+T+"#"+l))},100)),_._player.tag),v=(m&&_._options.isLive&&(_._player.resolution&&0<m.videoWidth&&0<m.videoHeight&&(0<_._player.resolution.width||0<_._player.resolution.height)&&(_._player.resolution.width!==m.videoWidth||_._player.resolution.height!==m.videoHeight)&&(s={oldResolution:{width:_._player.resolution.width,height:_._player.resolution.height},newResolution:{width:m.videoWidth,height:m.videoHeight}},_.trigger(y.Player.ResolutionChange,s)),_._player.resolution.width=m.videoWidth==0?_._player.resolution.width:m.videoWidth,_._player.resolution.height=m.videoHeight==0?_._player.resolution.height:m.videoHeight),u.IS_CHROME&&Number(u.CHROME_VERSION)<50&&(_._playingSlientPause&&(clearTimeout(_._playingSlientPause),_._playingSlientPause=null),_._playingSlientPause=setTimeout(function(){var E,C;_._status!=f.playing||_.paused()||_._drm||_._urls.length||(E=_.getCurrentTime(),C=_._options.isLive?0:E,_._loadByUrlInner(_._options.source,C,E))},3e3)),_._seis||{}),S=Object.keys(v);if(S.length!==0)for(var x=parseInt(1e3*T,10)+300,P=0;P<S.length;P++){var g=S[P];if(!(g<=x))break;h.call(_,v[g]),delete v[g]}}},{"../../../../lib/event":35,"../../../../lib/ua":50,"../../event/eventtype":70,"../../plugin/status":97}],92:[function(e,t,w){var y=e("../../event/eventtype"),u=e("../../../../lib/constants"),c=e("../../../../lib/event"),f=e("../../../../lang/index"),h=e("../../../../lib/ua"),n=e("../../../../lib/playerutil"),l="video/waiting.js";t.exports.handle=function(a){var s=this;if(!s._options.isLive){var _=this.getCurrentTime(),T=this.getDuration();if(!s._ended&&0<T&&(T-_<.5||T<_))return s.pause(),s._ended=!0,c.trigger(this.tag,y.Video.ManualEnded),void(s.traceLog&&s.traceLog(l,"ManualEnded#"+_+"#"+T))}s.waiting=!0;function m(){s._checkTimeoutHandle&&(clearTimeout(s._checkTimeoutHandle),s._checkTimeoutHandle=null),s._waitingTimeoutHandle&&(clearTimeout(s._waitingTimeoutHandle),s._waitingTimeoutHandle=null),s._waitingLoadedHandle&&(clearTimeout(s._waitingLoadedHandle),s._waitingLoadedHandle=null),s._waitingDelayLoadingShowHandle&&(clearTimeout(s._waitingDelayLoadingShowHandle),s._waitingDelayLoadingShowHandle=null),s._ucSourceHandle&&(clearTimeout(s._ucSourceHandle),s._ucSourceHandle=null)}m(),s._waitingDelayLoadingShowHandle=setTimeout(function(){h.IS_IOS&&s.paused()||s.trigger(y.Private.H5_Loading_Show)},1e3*s._options.delayLoadingShow),s._TimeUpdateStamp=null,s._checkTimeoutHandle=setTimeout(function(){s.trigger(y.Private.AutoStreamShow)},1e3*s._options.loadDataTimeout),s.trigger(y.Player.Waiting),s._waitingTimeoutHandle=setTimeout(function(){var v;s.tag&&s._options&&(s.pause(),v={mediaId:s._options.vid||"",error_code:u.ErrorCode.LoadingTimeout,error_msg:f.get("Error_Waiting_Timeout_Text")},s.logError(v),s.trigger("error",v))},1e3*s._options.waitingTimeout),_=s._options,_.disableLiveHalfRetry&&_.isLive||_.disableVodHalfRetry&&!_.isLive||(s._waitingLoadedHandle=setTimeout(function(){var v=s.getCurrentTime();s._waitingTimeoutCount==0&&v!=s._waitingReloadTime&&(s.traceLog(l,"half-retry::"+s._options.waitingTimeout/2),s._waitingTimeoutCount=1,s._waitingReloadTime=v,v=s._options.isLive?0:v,s._loadByUrlInner(s._options.source,v,!0))},s._options.waitingTimeout/2*1e3)),h.IS_ANDROID&&h.IS_DINGTALK&&(s._ucSourceHandle=setTimeout(function(){n.detectRegionBlock(s._options.source,function(v){v&&(v={mediaId:s._options.vid,error_code:u.ErrorCode.RegionBlock,error_msg:f.get("Error_Region_Block_Text"),diagnosis_info:f.get("Tip_Err_Blocked")},s.logError(v),s.trigger("error",v))})},5e3)),s.on("error",function(){m()})}},{"../../../../lang/index":25,"../../../../lib/constants":30,"../../../../lib/event":35,"../../../../lib/playerutil":47,"../../../../lib/ua":50,"../../event/eventtype":70}],93:[function(G,t,w){var y=typeof Promise>"u"?G("es6-promise").Promise:Promise,u=G("../../ui/component"),c=G("../../lib/object"),f=G("../../lib/dom"),h=G("../../lib/event"),n=G("../../ui/exports"),l=G("../../monitor/monitor"),a=G("../../lib/ua"),s=G("../../lib/constants"),_=G("../../lib/playerutil"),T=G("../../lib/util"),m=G("./x5play"),v=G("../../lib/cookie"),S=G("../../lang/index"),x=G("../../feature/autoplaydelay"),P=G("./event/eventmanager"),g=G("../../ui/component/cover"),E=G("../../ui/component/license-watermark"),C=G("../../feature/license"),R=G("../../ui/component/text-track-display"),A=G("../../ui/component/play-animation"),L=G("../../commonui/autostreamselector"),N=G("./event/eventtype"),I=G("./plugin/lifecyclemanager"),M=G("../service/export"),H=G("../../ui/component/progressmarker"),O=G("../../feature/keyboardControl"),z=G("../../feature/AntiRecord"),J=(G("./eventHandler/video/index"),G("../../lib/vttnext/index")),U=G("../../lib/codec-probe"),q=G("../splayer/splayerinjector"),V=G("../../ui/component/util").throttle,X=G("../../feature/ratioAdapter"),B=G("../../feature/logoManager"),ee="base/player.js",G=u.extend({init:function(F,W){var Z,ae=this;function _e(le){var he=this;if(le.paramData.renderType!=="native"){var be,le=le.paramData.codecTag;if(_.isH265Codec(le))be=s.FEATURE_ID_H265;else{if(!_.isH266Codec(le))return;be=s.FEATURE_ID_H266}C.getLicense(W.license.domain,W.license.key,W.env==="SEA"?"ap-southeast-1":"cn-shanghai").then(function(D){if(D=D.validate(s.PLAYER_SDK_CODE,be),console.log("license validate result => ",D),D===0)he.trigger(N.Private.LicenseHasResult,{result:s.LicenseResultCode.Success,featureId:be});else{if(D===1)return y.reject(s.LicenseResultCode.NotFound);{if(D===2)return y.reject(s.LicenseResultCode.Expired);console.error("license validate unknown error")}}}).catch(function(D){he.trigger(N.Private.LicenseHasResult,{result:D,featureId:be}),C.logError(D)})}}this.tag=F,this.loaded=!1,this.played=!1,this.oncePlayed=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._flvDumpTimer=null,this._vodRetryCount=0,this._nudgeCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._duration=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this._ratioAdapter=null,this._logoManager=null,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._loadByUrlStartTime=0,this._posOffset=0,this._onceLogged=!1,this.__disposed=!1,this.resolution={width:0,height:0},W.skinLayout===void 0&&(W.skinLayout=_.getDefaultH5Layout()),(F=W.skinLayoutIgnore)!=null&&F.length&&(W.skinLayout=_.ignoreSkinLayouts(W.skinLayout,W.skinLayoutIgnore)),_.isRts(W.source)&&!W.autoplay&&(W.preload=!1),W.env==="SEA"&&(W.logReportTo="https://videocloud-sgp.ap-southeast-1.log.aliyuncs.com/logstores/newplayer/track",W.disableDumpBuffer=!0),W.license&&W.license.key&&W.license.domain||(console.warn(S.get("Tip_License_Required")+(W.isLive?"":": https://help.aliyun.com/zh/vod/developer-reference/license-authorization-and-management#13133fa053843")),console.warn(S.get("Tip_License_Params")+": https://help.aliyun.com/zh/vod/developer-reference/integration")),u.call(this,this,W),this.addClass("prism-player"),W.plugins&&c.each(W.plugins,function(le,he){this[le](he)},this),this._createService(),this.UI={},W.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=n,W.errorDisplay==0&&(this.UI.errorDisplay=void 0)),W.disablePip&&this.tag.setAttribute("disablePictureInPicture","true"),!W.isLive&&W.clickPause&&(this._clickPauseEnabled=!0,h.on(this.tag,"click",function(){ae._clickPauseEnabled&&(ae.paused()?ae.play(!0):ae.pause(!0))})),this.initChildren(),this._options.trackLog&&(this._monitor=new l(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched,logReportTo:this._options.logReportTo},this._options.trackLog)),P.onAll(this),this.trigger(N.Private.Create,W._userOptions),this._options.preventRecord&&(this._antiRecord=new z({player:this}),this._antiRecord.start()),this._lifeCycleManager=new I(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(F={mediaId:this._options.vid||"",error_code:s.ErrorCode.InvalidParameter,error_msg:S.get("ShiftLiveTime_Error")},this.trigger(N.Player.Error,F)):(this._posOffset=this._getSubVideoConfig().start||0,this._options.extraInfo&&(F=this._options.extraInfo).liveRetry&&(this._options.liveRetry=F.liveRetry),this.on(N.Private.ReadyState,function(){this.trigger(N.Player.Ready)}),this.on(N.Player.H265PlayInfo,_e),this.on(N.Player.H266PlayInfo,_e),this.on(N.Private.LicenseHasResult,function(le){var he=s.LicenseResultCode;-1<[he.NotFound,he.Expired,he.CertInvalid,he.ResourceIncorrect,he.LicenseKeyInvalid,he.DomainInvalid].indexOf(le.paramData.result)&&(this.UI.licenseWatermark=E,this._licenseWatermark=this.addChild("licenseWatermark",this._options))}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(N.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(N.Private.H5_Loading_Show):this.trigger(N.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(N.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new x(this),(Z=this)._autoPlayDelay.handle(function(){Z.initPlay()})):this.initPlay()),this._options.ratio&&(this._options.autoSize?console.warn("The parameter [ratio] will be ignored when [autoSize] is set."):(this._options.height&&console.warn("The parameter [height] will be ignored when [ratio] is set."),this._ratioAdapter=new X,this._ratioAdapter.autoResize(this._options.ratio,this))),O.init.call(this),(F=this._options.logo)!=null&&F.length&&(this._logoManager=new B({container:this.el(),video:this.tag,logo:this._options.logo})),this._vttBroker=new J({player:this}),this._getUserTextTracks())}});G.prototype.isSupportMSE=function(){return _.isSupportMSE()},G.prototype.initPlay=function(F){this._initPlayBehavior(F,this._options.source)},G.prototype.initChildren=function(){var F=this.options(),W=F.skinLayout;if(W!==!1&&!c.isArray(W))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");W!==!1&&W.length!==0&&(this.options({children:W}),u.prototype.initChildren.call(this)),this.UI.cover=g,F.className="",this.addChild("cover",F),this.UI.playanimation=A,this.addChild("playanimation",F),this.UI.autoStreamSelector=L,this.addChild("autoStreamSelector",F),this.UI.progressMarker=H,this.addChild("progressMarker",F),this.UI.textTrackDisplay=R,this.addChild("textTrackDisplay",F),this.trigger(N.Private.UiH5Ready)},G.prototype.createEl=function(){var F=!1,W=(this.tag.tagName!=="VIDEO"?(this._el=this.tag,this.tag=u.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(F=!0,this._el=this.tag.parentNode),this._el),Z=this.tag,ae=(this._options.enableSystemMenu||(Z.addEventListener?Z.addEventListener("contextmenu",function(_e){_e.preventDefault()},!1):Z.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),Z.player=this,f.getElementAttributes(Z));return c.each(ae,function(_e){W.setAttribute(_e,ae[_e])}),this.setVideoAttrs(),F||(Z.parentNode&&Z.parentNode.insertBefore(W,Z),f.insertFirst(Z,W)),W},G.prototype.setVideoAttrs=function(){var F=this._options.preload,W=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",F&&this.tag.setAttribute("preload","preload"),W&&a.IOS_VERSION!=="15"&&this.tag.setAttribute("autoplay","autoplay"),a.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(a.IS_UC||a.dingTalk())&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var Z in this._options.extraInfo)a.IS_OPPO&&Z==="crossOrigin"||this.tag.setAttribute(Z,this._options.extraInfo[Z]);m.adaptX5Play(this)},G.prototype.checkOnline=function(){var F;return!(this._options&&!this._options.debug&&navigator.onLine==0&&((F={mediaId:this._options.vid||"",error_code:s.ErrorCode.NetworkUnavaiable,error_msg:S.get("Error_Offline_Text")}).display_msg=S.get("Error_Offline_Text"),this.trigger(N.Player.Error,F),1))},G.prototype.id=function(){return this.el().id},G.prototype.renderUI=function(){},G.prototype.switchUrl=function(){var F,W;this.traceLog(ee,"switchUrl"),this._urls.length!=0&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),F=this._urls[this._currentPlayIndex],v.set(s.SelectedStreamLevel,F.definition,365),this.trigger(N.Private.QualityChange,S.get("Quality_Change_Fail_Switch_Text")),W=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(F.Url,W,!0))},G.prototype.setControls=function(){var F=this.options();F.useNativeControls?this.tag.setAttribute("controls","controls"):typeof F.controls=="object"&&(F=this._initControlBar(F.controls),this.addChild(F))},G.prototype.enableClickPause=function(){this._clickPauseEnabled=!0},G.prototype.disableClickPause=function(){this._clickPauseEnabled=!1},G.prototype._initControlBar=function(F){return new ControlBar(this,F)},G.prototype.getMetaData=function(){},G.prototype.getReadyTime=function(){return this.readyTime},G.prototype.readyState=function(){return this.tag.readyState},G.prototype.getError=function(){return this.tag.error},G.prototype.getRecentOccuredEvent=function(){return this._eventState},G.prototype.getSourceUrl=function(){return this._options?this._options.source:""},G.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},G.prototype.getCurrentQuality=function(){var F;return 0<this._urls.length?{width:(F=this._urls[this._currentPlayIndex]).width,url:F.Url,definition:F.definition}:""},G.prototype.getCurrentPDT=function(){var F;if((a.IS_SAFARI||a.IS_IOS)&&this.tag)return F=Date.parse(this.tag.getStartDate()),isNaN(F)?0:F+1e3*this.getCurrentTime()},G.prototype.stopPlayTimeMonitor=function(){this._playTimeMonitorTimer&&(clearInterval(this._playTimeMonitorTimer),this._playTimeMonitorTimer=null)},G.prototype.startPlayTimeMonitor=function(){var F=this,W=(this._playingTime=0,this._stuckTime=0,this._stuckCount=0,performance.now()),Z=0,ae=0,_e=!1,le=0;this.stopPlayTimeMonitor(),this._playTimeMonitorTimer=setInterval(function(){var he=F.paused()?_e=!0:!F.tag,be=1e3*F.getCurrentTime(),te=performance.now(),D=te-W,Q=(W=te,be-Z);Z=be,Q<0&&(he=!0),(be=F._monitor)!=null&&be.canplayReported||(he=!0),(he=document.visibilityState==="hidden"?!0:he)||(_e?_e=!1:Q<.8*D?(D<te-ae&&(F._stuckCount++,le=te),te-le>=1e3*F.getOptions().waitingTimeout?F.stopPlayTimeMonitor():(ae=te,F._playingTime+=Q,F._stuckTime+=D-Q)):F._playingTime+=D)},1e3)},G.prototype.setSpeed=function(F,W){W===void 0&&(W=!0),this.tag&&(this._originalPlaybackRate=F,this.tag.playbackRate=F,W)&&this.trigger(N.Private.PlaybackRateChanged,F)},G.prototype.play=function(F){return this.traceLog(ee,"play::"+F),F&&this.trigger(N.Private.ManualPlay),this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(N.Private.Cover_Hide),this.tag.play())),this._isManualPlay=F||!1,this},G.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(this._getPlayStartTime()),this.tag.play(),this},G.prototype._getPlayStartTime=function(){return Math.max(0,this._getWatchTimeConfig().watchStartTime||0,this._loadByUrlStartTime||0)},G.prototype._getWatchTimeConfig=function(){var ae=this.getOptions(),F=ae.start,W=ae.end,Z=ae.watchStartTime,ae=ae.watchEndTime,Z=Number(Z),ae=Number(ae);return(Z||ae)&&(_.hasValue(F)||_.hasValue(W))?(this._logOnce("Params.watchStartTime and Params.watchEndTime will be ignored when Params.start or Params.end is set","warn"),{watchStartTime:void 0,watchEndTime:void 0}):(ae=ae||void 0,(Z=Z||void 0)<0&&(this._logOnce("Params.watchStartTime is less than 0 ["+Z+"], setting to undefined","warn"),Z=void 0),ae<0&&(this._logOnce("Params.watchEndTime is less than 0 ["+ae+"], setting to undefined","warn"),ae=void 0),ae<=Z&&(this._logOnce("Params.watchEndTime("+ae+") is less than Params.watchStartTime("+Z+"), setting to [undefined, "+ae+"]","warn"),Z=void 0),{watchStartTime:Z,watchEndTime:ae})},G.prototype._getSubVideoConfig=function(){var F=this.getOptions(),W=F.start,F=F.end,W=Number(W);return F=(F=Number(F))||void 0,(W=W||void 0)<0&&(this._logOnce("Params.start is less than 0 ["+W+"], setting to undefined","warn"),W=void 0),F<0&&(this._logOnce("Params.end is less than 0 ["+F+"], setting to undefined","warn"),F=void 0),F<=W&&(this._logOnce("Params.start("+W+") is greater than Params.end("+F+"), setting to [undefined, "+F+"]","warn"),W=void 0),{start:W,end:F}},G.prototype.pause=function(F){return this.tag&&this.tag.pause(),this._isManualPause=F||!1,this},G.prototype.stop=function(){return this.traceLog(ee,"stop"),this.tag.setAttribute("src",null),this},G.prototype.paused=function(){if(this.tag)return this.tag.paused!==!1},G.prototype.getDuration=function(){var F=0,Z=(this.tag&&(F=this.isPreview()?this._vodDuration||this.tag.duration:this._duration&&this._duration!=1/0?this._duration:this.tag.duration),this._getSubVideoConfig()),W=Z.start,Z=Z.end;return F=W||Z?Math.min(this.tag.duration,Z||this.tag.duration)-Math.max(0,W||0):F},G.prototype.getDisplayDuration=function(){var F=0,Z=(this.tag&&(F=this._vodDuration||this.getDuration()),this._getSubVideoConfig()),W=Z.start,Z=Z.end;return F=W||Z?Math.min(this.tag.duration,Z||this.tag.duration)-Math.max(0,W||0):F},G.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime-this._posOffset:0},G.prototype.seek=function(F){if(F+=this._posOffset,this._canSeek(F)){this._ended=!1;var W=this.tag.duration;if(!Number.isNaN(F))return this._doSeek(this,F=W<=F?W:F),this}},G.prototype._doSeek=V(function(Z){var W=Z[0],Z=Z[1];try{var ae=W._originalPlaybackRate||W.tag.playbackRate;["16"].indexOf(a.IOS_VERSION)!==-1&&!W.oncePlayed||(W.tag.currentTime=Z),W._seeking=!0,W.traceLog(ee,"doSeek::"+Z),a.IS_IE11&&setTimeout(function(){W.tag&&(W.tag.playbackRate=ae)})}catch(_e){console.log(_e)}},100),G.prototype.traceLog=function(F,W){this.trigger(N.Private.TraceLog,"["+F+"]"+W)},G.prototype._loadByUrlInner=function(F,W,Z){this.loadByUrl(F,W,Z,!0)},G.prototype.loadByUrl=function(F,W,Z,ae){var _e=this,le=(this.traceLog(ee,"loadByUrl::"+F+"#"+W+"#"+Z+"#"+ae),this._monitor&&this._monitor._onPlayerUnderload(),this._monitor&&!ae&&(this._monitor.reportPlayAbort("loadByUrl"),this._monitor.resetVV()),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),he=((this._options.source||"").match(le)||[])[0]!==((F||"").match(le)||[])[0];if(this._options.liveShiftSource&&(he=!1),this._options.enableH266&&(he=!1),this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!he&&(_.isMp4(F)||_.isFlv(F)||_.isHls(F)))return this._options.forceH265||this._options.forceH266||!this._options.enableH265&&!this._options.enableH266||a.IS_ANDROID&&a.dingTalk()&&!_.isFlv(F)?void be.call(this):void U(F,function(D){var D=_.getVideoTrack(D.tracks),Q=(D||{}).codecTag||((Q=(D||{}).codec)==null?void 0:Q.split(".")[0]);_e._probeInfo.codecTag=Q,D&&_.isH265Codec(Q)?_.isFlv(F)||_.isHls(F)?(_e._splayer||(he=!0),be.call(_e)):_.shouldUseBasePlayer({codecTag:Q,url:F},function(ne){ne?(_e._splayer&&(he=!0),_e._probeInfo.codecTag&&q.reportH265PlayInfo.call(_e,{renderType:"native",codecTag:_e._probeInfo.codecTag})):_e._splayer||(he=!0),be.call(_e)}):(D&&_.isH266Codec(Q)?_e._splayer||(he=!0):_e._splayer&&(he=!0),be.call(_e))},function(te){be.call(_e)});function be(){var te,D=this;he&&this._splayer&&this.removeChild(this._licenseWatermark),he&&window.Aliplayer?(console.log("[RELOAD INSTANCE]"),this.traceLog(ee,"reloadInstance::"+F),this._options.source=F,window.Aliplayer.reloadInstance(this._options,function(){},this)):(ae||(this._urls=[]),this._monitor&&!ae&&(this._monitor.reset(),this._monitor.startHeartBeat()),this._isError=!1,this._duration=0,this._clearTimeout(),this.trigger(N.Private.Error_Hide),this._options.source=F,this._posOffset=this._getSubVideoConfig().start||0,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:F,from:this._options.from}),ae||(this.trigger(N.Private.ChangeURL),this._vodRetryCount=0),W&&this._canSeek(W)?this._loadByUrlStartTime=W-this._posOffset:this._loadByUrlStartTime=0,this._options._autoplay=Z,this.initPlay(Z),(te=this._options.autoplay||Z)&&this.trigger(N.Private.Cover_Hide),te?this.trigger(N.Player.Play):this.trigger(N.Player.Pause),this._options.isLive||!W&&W!=0||isNaN(W)||h.one(this.tag,N.Video.CanPlay,function(Q){te&&(a.IS_IOS||a.IS_MAC_SAFARI)&&D._splayer&&D.play()}))}be.call(this)},G.prototype.setLogo=function(F){this._logoManager&&this._logoManager.dispose(),this._logoManager=new B({container:this.el(),video:this.tag,logo:F})},G.prototype.dispose=function(){this.__disposed=!0,this.trigger(N.Private.Dispose),this.tag.pause(),P.offAll(this),O.dispose.call(this),this._ratioAdapter&&(this._ratioAdapter.dispose(),this._ratioAdapter=null),this._logoManager&&(this._logoManager.dispose(),this._logoManager=null),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.reportPlayAbort("dispose"),this._monitor.removeEvent(),this._monitor=null),this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this.stopPlayTimeMonitor(),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._posOffset=0,this._onceLogged=!1},G.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},G.prototype.mute=function(F){return this._muteInner(),this._originalVolumn=this.tag.volume,F||(F=S.get("Volume_Mute"),this._player.trigger(N.Private.Info_Show,{text:F,duration:1e3,align:"lb"})),this._setInnerVolume(0),this},G.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(N.Private.VolumnChanged,-1)},G.prototype.unMute=function(F){return this._unMuteInner(),F||(F=S.get("Volume_UnMute"),this._player.trigger(N.Private.Info_Show,{text:F,duration:1e3,align:"lb"})),this._setInnerVolume(this._originalVolumn||.5),this},G.prototype._unMuteInner=function(){this.tag.muted=!1,this.getOptions().mute&&(this.getOptions().mute=!1),this.trigger(N.Private.VolumnChanged,-2)},G.prototype.muted=function(){return this.tag&&this.tag.muted},G.prototype.getVolume=function(){return this.tag&&this.tag.volume},G.prototype.getOptions=function(){return this._options},G.prototype.setVolume=function(F,W){(F=Math.min(1,Math.max(0,F)))!=0?this._unMuteInner():F==0&&this._muteInner(),this._setInnerVolume(F),F=S.get("Curent_Volume")+"<span>"+(100*F).toFixed()+"%</span>",this._player.trigger(N.Private.Info_Show,{text:F,duration:1e3,align:"lb"})},G.prototype._setInnerVolume=function(F){this.tag.volume=F,this.trigger(N.Private.VolumnChanged,F)},G.prototype.hideProgress=function(){this.trigger(N.Private.HideProgress)},G.prototype.cancelHideProgress=function(){this.trigger(N.Private.CancelHideProgress)},G.prototype.setPlayerSize=function(F,W){this._el&&(this._el.style.width=F,this._el.style.height=W)},G.prototype.getBuffered=function(){return this.tag.buffered},G.prototype.setRotate=function(F){this.tag&&(this._rotate=F,this._setTransform(),this.log("ROTATE",{rotation:F}))},G.prototype.getRotate=function(F){return this._rotate===void 0?0:this._rotate},G.prototype.setImage=function(F){this.tag&&(this._image=F,this._setTransform(),this.log("IMAGE",{mirror:F=="horizon"?2:1,text:F}))},G.prototype.getImage=function(){return this._image},G.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},G.prototype.setCover=function(F){var W=document.querySelector("#"+this.id()+" .prism-cover");W&&F&&(W.style.backgroundImage="url("+F+")",this._options.cover=F,this._options.autoplay||this.trigger(N.Private.Cover_Show))},G.prototype.setTextTracks=function(F){this._options.textTracks=F,F=_.unqiueTextTracks(F||[]),this.trigger(N.Private.VttClearTracks),F&&F.length&&this.trigger(N.Private.TextTrackFounded,{from:"user",textTracks:F}),this.trigger(N.Private.CCReset)},G.prototype._setTransform=function(){this._transformProp||(this._transformProp=f.getTransformName(this.tag));var F=" translate(-50%, -50%)";this._rotate&&(F+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?F+=" scaleY(-1)":this._image=="horizon"&&(F+=" scaleX(-1)")),this.tag.style[this._transformProp]=F},G.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},G.prototype._initPlayBehavior=function(F,W){var Z=this;return!this._checkSupportVideoType()&&(_.validateSource(W)?(F===void 0&&(F=!1),this._created||(this._created=!0,this.trigger(N.Private.Created)),this.loaded||this.trigger(N.Player.Init),this._options.mute&&this.mute(!0),this.one(N.Video.CanPlay,function(){var ae=Z._getPlayStartTime();Z.getCurrentTime()<ae&&Z.seek(ae),Z._loadByUrlStartTime=0}),this._options.autoplay||this._options._autoplay||this._options.preload||F?(this._options._preload=!0,this._initLoad(W),(this._options.autoplay||this._options._autoplay)&&this._startPlay()):this.trigger(N.Private.Play_Btn_Show),!0):((F={mediaId:this._options.vid||"",error_code:s.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=S.get("Error_Invalidate_Source"),this.trigger(N.Player.Error,F),!1))},G.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},G.prototype._initLoad=function(F){F&&(this._isPreload()&&!a.IS_MOBILE?this.trigger(N.Private.H5_Loading_Show):(this.trigger(N.Private.H5_Loading_Hide),this.trigger(N.Private.Play_Btn_Show)),this.tag.setAttribute("src",F),this.oncePlayed=!1,this.loaded=!0)},G.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},G.prototype._reloadAndPlayForM3u8=function(){this._liveRetryCount==0&&this.trigger(N.Player.OnM3u8Retry);var F=this._options,W=F.liveRetryInterval+F.liveRetryStep*this._liveRetryCount,Z=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this.traceLog(ee,"reloadAndPlayForM3u8::#"+Z._options.source+"#"+1e3*W),this._liveRetryTimer=setTimeout(function(){Z._liveRetryCount++,Z._loadByUrlInner(Z._options.source,void 0,F.autoplay)},1e3*W)},G.prototype._checkSupportVideoType=function(){var F,W=this,Z=this._options.source,ae="";if(_.isRTMP(Z)&&!this._options.useFlashPrism)ae=S.get("Error_Not_Support_RTMP");else if(_.isDash(Z)&&!_.isSupportMSE())ae=S.get("Error_Not_Support_Mse_Dash");else if(!this.tag.canPlayType||!this._options.source||!a.IS_MOBILE)return"";return 0<Z.indexOf("m3u8")?this.tag.canPlayType("application/x-mpegURL")!=""||_.isSupportHls()||(ae=S.get("Error_Not_Support_M3U8_Text")):0<Z.indexOf("mp4")?this.tag.canPlayType("video/mp4")==""&&(ae=S.get("Error_Not_Support_MP4_Text")):(_.isRTMP(Z)||_.isFlv(Z))&&a.IS_MOBILE&&(this._options.useFlvPlugOnMobile?_.isSupportFlv()||(ae=S.get("Error_Not_Support_Mse_Flv")):ae=S.get("Error_Not_Support_Format_On_Mobile")),ae&&(Z=_.getFormat(Z),F={mediaId:this._options.vid||"",error_code:s.ErrorCode.FormatNotSupport,error_msg:ae+(Z?"(format:"+Z+")":"")},this.logError(F),F.display_msg=ae,setTimeout(function(){W.trigger(N.Player.Error,F)})),ae},G.prototype.getComponent=function(F){return this._lifeCycleManager.getComponent(F)},G.prototype.logError=function(F,W){(this._options.autoplay||this._options._autoplay)&&this._monitor&&this._monitor.reportStartPlay(),(F=F||{}).vt=this.getCurrentTime(),this.log(W?"ERRORRETRY":"ERROR",F)},G.prototype.log=function(F,W){var Z=0,ae=0;if(this._monitor)return this._options&&(Z=this._options.vid||"0",ae=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:Z,album_id:0,source:this._options.source,from:ae}),this._monitor._log(F,W)},G.prototype.setSanpshotProperties=function(F,W,Z){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=F,this._snapshotMatric.height=W,1<Z)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=Z},G.prototype.setSnapshotProperties=function(F,W,Z){this.setSanpshotProperties(F,W,Z)},G.prototype.takeSnapshot=function(){var F=document.createElement("canvas"),he=this.tag,W=he.videoWidth,Z=he.videoHeight,ae=this._getSanpshotMatric(),_e=(F.width=ae.width||W,F.height=ae.height||Z,this.getCurrentTime()),le=F.getContext("2d"),be=(le.save(),this.getImage()),be=(be=="vertical"?(le.translate(0,F.height),le.scale(1,-1)):be=="horizon"&&(le.translate(F.width,0),le.scale(-1,1)),he),he=(this._splayer&&(be=this._splayer.renderType===2?this._el.querySelector("canvas"):this._el.querySelector("video")),le.drawImage(be,0,0,W,Z),le.restore(),_.drawSnapshotText(le,this.getOptions()),""),be="";try{he=F.toDataURL("image/jpeg",ae.rate||1)}catch(te){(be=te)&&be.message&&-1<be.message.indexOf("Tainted canvases")&&(be=new Error('截图功能需要设置播放器参数 extraInfo: { crossOrigin:"anonymous" }'))}return W="",Z="",he&&(le=(W=he).substr(W.indexOf(",")+1),Z=T.toBinary(le)),{time:_e,base64:W,binary:Z,error:be}},G.prototype.getStatus=function(){return this._status||"init"},G.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},G.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},G.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},G.prototype.setProgressMarkers=function(F){this.trigger(N.Private.ProgressMarkerChanged,F=F||[])},G.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},G.prototype.setPreviewTime=function(F){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=F},G.prototype.getPreviewTime=function(){var F=0;return F=this._options.playConfig?this._options.playConfig.PreviewTime:F},G.prototype.exceedPreviewTime=function(F){return this.isPreview()&&F>=this._options.playConfig.PreviewTime},G.prototype.isPreview=function(){var F=this._options.playConfig.PreviewTime,W=this._vodDuration||this.tag.duration;return 0<F&&F<W},G.prototype.getStats=function(){return new y(function(F){F()})},G.prototype.setTraceId=function(F){this._monitor&&this._monitor.updateTraceId(F)},G.prototype._canSeek=function(F){var Z=this._getSubVideoConfig(),W=Z.start,Z=Z.end;return W||Z?!(F<W||Z<F):!(!(W=this._getWatchTimeConfig()).watchStartTime||W.watchEndTime)||!(F<W.watchStartTime||F>W.watchEndTime)},G.prototype.setWatchTime=function(F,W){this._options.watchStartTime=F,this._options.watchEndTime=W,this.trigger(N.Private.UpdateWatchTime),F=this.getCurrentTime(),W=this._getWatchTimeConfig(),F<W.watchStartTime?this.seek(W.watchStartTime):F>W.watchEndTime&&this.seek(W.watchEndTime)},G.prototype.setNextWatchTime=function(F,W){this._options.watchStartTime=F,this._options.watchEndTime=W},G.prototype.setStartEnd=function(F,W){this._options.start=F,this._options.end=W,F=this._getSubVideoConfig(),this._posOffset=F.start||0,this.trigger(N.Player.DurationChange),W=this.getCurrentTime()+this._posOffset,W<F.start?this.seek(0):W>F.end&&this.seek(F.end-this._posOffset)},G.prototype.setNextStartEnd=function(F,W){this._options.start=F,this._options.end=W},G.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},G.prototype._autoplayFailedHandler=function(){var F,W=this;(F=this.getOptions().autoplayPolicy)!=null&&F.fallbackToMute&&!this.muted()?(this.mute(!0),(F=this.tag.play())?F.then(function(){W.trigger(N.Private.MutedAutoplay)}).catch(function(Z){W.tag.paused?(console.warn("Muted autoplay failed",Z),W.unMute(!0)):W.one("canplay",function(){W.trigger(N.Private.MutedAutoplay)})}):this.paused()?this.unMute(!0):this.trigger(N.Private.MutedAutoplay)):(this.oncePlayed=!1,this.trigger(N.Private.Play_Btn_Show),this.trigger(N.Private.H5_Loading_Hide),this.trigger(N.Player.AutoPlayPrevented),this.trigger(N.Player.AutoPlay,!1),this._options.cover&&this.trigger(N.Private.Cover_Show))},G.prototype._overrideNativePlay=function(){var F=this.tag.play,W=this;this.tag.play=function(){if(W._monitor&&W._monitor.reportStartPlay(),!W._options.source)return Z={mediaId:W._options.vid||"",error_code:s.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},W._options.vid||W._options.mediaAuth?void 0:(Z.display_msg=S.get("Error_Empty_Source"),void W.trigger(N.Player.Error,Z));W.readyTime=new Date().getTime();var Z=F.apply(W.tag),ae=(W.oncePlayed=!0,Z!==void 0&&Z.then(function(){W.trigger(N.Player.AutoPlay,!0)}).catch(function(_e){!W.tag||!W.tag.paused||W._isError||W._options._autoplay||W._switchedLevel||W._autoplayFailedHandler()}),W._originalPlaybackRate||W.tag.playbackRate);return setTimeout(function(){W.tag&&(W.tag.playbackRate=ae)}),Z}},G.prototype._extraMultiSources=function(){var F=this._options.source;if(F&&-1<F.indexOf("{")&&-1<F.indexOf("}")){var W="";try{W=JSON.parse(F)}catch(le){console.error(le),console.error("地址json串格式不对")}var Z,ae=[];for(Z in W){var _e=s.QualityLevels[Z];ae.push({definition:Z,Url:W[Z],desc:_e||Z})}this._setupSourceList(ae)}return ae},G.prototype._setupSourceList=function(F){var W;(F=F===void 0?[]:F).length&&(this._currentPlayIndex=_.findSelectedStreamLevel(F,this._options.defaultDefinition),W=F[this._currentPlayIndex],this._urls=F,this._options.source=W.Url,this.trigger(N.Private.SourceLoaded,W))},G.prototype._createService=function(){if(M)for(var F=M.length,W=0;W<F;W++){var Z=M[W],ae=Z.condition;ae===void 0?ae=!0:typeof ae=="function"&&(ae=ae.call(this)),ae&&(this[Z.name]=new Z.service(this))}},G.prototype._disposeService=function(){if(M)for(var F=M.length,W=0;W<F;W++){var Z=this[M[W].name];Z!==void 0&&Z.dispose&&Z.dispose()}},G.prototype._executeReadyCallback=function(){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(N.Private.H5_Loading_Hide),this.trigger(N.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(F){console.log(F)}},G.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._decodeErrorNudgeTimer&&(clearTimeout(this._decodeErrorNudgeTimer),this._decodeErrorNudgeTimer=null),this._clearLiveErrorHandle()},G.prototype._reloadForVod=function(){var F,W,Z;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(F=this.getCurrentTime(),(W=this._originalSource).indexOf("auth_key=")<0&&(W=W&&0<W.indexOf("?")?W+"&_t="+new Date().valueOf():W+"?_t="+new Date().valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(Z=this).traceLog(ee,"reloadForVod::#"+W+"#"+100*this._vodRetryCount),this._vodRetryCountHandle=setTimeout(function(){Z._loadByUrlInner(W,F,Z.getOptions().autoplay)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},G.prototype._getUserTextTracks=function(){var F=this._options.textTracks||[];(F=_.unqiueTextTracks(F)).length&&this.trigger(N.Private.TextTrackFounded,{from:"user",textTracks:F})},G.prototype._logOnce=function(F,W){this._onceLogged||(console[W||"log"](F),this._onceLogged=!0)},t.exports=G},{"../../commonui/autostreamselector":11,"../../feature/AntiRecord":16,"../../feature/autoplaydelay":17,"../../feature/keyboardControl":18,"../../feature/license":19,"../../feature/logoManager":20,"../../feature/ratioAdapter":21,"../../lang/index":25,"../../lib/codec-probe":28,"../../lib/constants":30,"../../lib/cookie":31,"../../lib/dom":34,"../../lib/event":35,"../../lib/object":44,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../../lib/vttnext/index":57,"../../monitor/monitor":65,"../../ui/component":135,"../../ui/component/cover":139,"../../ui/component/license-watermark":144,"../../ui/component/play-animation":146,"../../ui/component/progressmarker":149,"../../ui/component/text-track-display":160,"../../ui/component/util":165,"../../ui/exports":168,"../service/export":124,"../splayer/splayerinjector":131,"./event/eventmanager":69,"./event/eventtype":70,"./eventHandler/video/index":84,"./plugin/lifecyclemanager":96,"./x5play":98,"es6-promise":8}],94:[function(e,t,w){e=e("../../../lib/oo").extend({}),t.exports=e},{"../../../lib/oo":45}],95:[function(e,t,w){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],96:[function(e,t,w){function y(a){(this._player=a)._status="init",this.components=[];var s=a.getOptions().components;if(s&&u.isArray(s)&&0<s.length)for(var _=0;_<s.length;_++){var v=s[_];if(!v)return void console.log("The "+_+" custome component is "+v);var T=v.type===void 0?v:v.type,m=v.args===void 0?[]:v.args,v=v.name===void 0?"":v.name;if(!T)return void console.log(v+" compenent is "+T);m=m&&0<m.length?[].concat.call([T],m):[],T=new(Function.prototype.bind.apply(T,m)),m=T[f.createEl],m&&typeof m=="function"&&m.call(T,a.el(),a),this.components.push({name:v,obj:T})}var S=this;a.on(c.Private.LifeCycleChanged,function(x){var g=x.paramData,P=g.type,g=g.data;P===c.Video.CanPlayThrough&&S._player.trigger(c.Player.TimeUpdate,g.target.currentTime),P===c.Video.Ended&&S._player.trigger(c.Player.TimeUpdate,S._player.getDuration()),S.components.length!=0&&n.call(S,a,x)})}var u=e("../../../lib/object"),c=e("../event/eventtype"),f=e("./lifecycle"),h=e("./status"),n=(y.prototype.getComponent=function(a){var s=null,_=this.components.length;if(a){for(var T=0;T<_;T++)if(this.components[T].name==a){s=this.components[T].obj;break}}return s},function(a,s){if(s){for(var s=s.paramData,_=s.type,T=s.data,m=((s=_)!=c.Video.LoadStart&&s!=c.Video.LoadedData&&s!=c.Video.LoadedMetadata||(_=f.loading),l(a,_),this.components.length),v=0;v<m;v++){var S=this.components[v].obj,x=S[_];x&&typeof x=="function"&&x.call(S,a,T)}_==c.Private.Dispose&&(this.components=[])}}),l=function(a,s){h[s]===void 0||s==h.pause&&(a._status==h.error||a._status==h.ended)||s==h.ready&&a._status==h.playing||(a._status=s)};t.exports=y},{"../../../lib/object":44,"../event/eventtype":70,"./lifecycle":95,"./status":97}],97:[function(e,t,w){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],98:[function(e,t,w){function y(f,h){var n=f.el().style.height,l=f.el().style.width,a=(f.originalLayout={container:{height:n,width:l},video:{width:f.tag.style.width,height:f.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),s=document.body.clientWidth+"px";width=h?(height=a,s):(height=n.indexOf("%")?n:n+"px",l.indexOf("%")?l:l+"px"),f.tag.style.width=s,f.tag.style.height=a,f.el().style.height=h?a:height}var u=e("../../lib/ua"),c=e("../../lib/dom");t.exports.isAndroidX5=function(){return u.os.android&&u.is_X5||u.dingTalk()},t.exports.adaptX5Play=function(f){u.os.android&&u.is_X5&&(f._options.x5_type=="h5"&&(f.tag.setAttribute("x5-video-player-type",f._options.x5_type),window.onresize=function(){var h,n;y(f,f._options.x5_fullscreen||f._options.x5_video_position=="center"),(h=f)._x5VideoOrientation=="landscape"&&(h._originalTagWidth=h.tag.style.width,h._originalTagHeight=h.tag.style.height,(n=document.querySelector("#"+h.id()+" .prism-controlbar"))&&parseFloat(n.offsetHeight),h.tag.style.height="100%",h.tag.style.width=window.screen.width+"px")},f.tag.addEventListener("x5videoenterfullscreen",function(){y(f,f._options.x5_fullscreen||f._options.x5_video_position=="center"),f.trigger("x5requestFullScreen")}),f.tag.addEventListener("x5videoexitfullscreen",function(){var h,n;(h=f).originalLayout&&(n=h.originalLayout,h.el().style.height=n.container.height,h.el().style.width=n.container.width,h.tag.style.width=n.video.width,h.tag.style.height=n.video.height),f.trigger("x5cancelFullScreen"),f.fullscreenService.getIsFullScreen()&&f.fullscreenService.cancelFullScreen()}),f.on("requestFullScreen",function(){f._options.x5_video_position=="top"&&c.removeClass(f.tag,"x5-top-left"),u.os.android&&u.is_X5&&f._options.x5LandscapeAsFullScreen&&(f.tag.setAttribute("x5-video-orientation","landscape"),f._x5VideoOrientation="landscape")}),f.on("cancelFullScreen",function(){f._options.x5_video_position=="top"&&c.addClass(f.tag,"x5-top-left"),u.os.android&&u.is_X5&&f._options.x5LandscapeAsFullScreen&&(f.tag.setAttribute("x5-video-orientation","portrait"),y(f,f._options.x5_fullscreen||f._options.x5_video_position=="center"),f._x5VideoOrientation="portrait")})),f._options.x5_fullscreen!==void 0&&f._options.x5_fullscreen&&(f.tag.setAttribute("x5-video-player-fullscreen",f._options.x5_fullscreen),c.addClass(f.tag,"x5-full-screen")),f._options.x5_video_position=="top"&&c.addClass(f.tag,"x5-top-left"),f._options.x5_orientation!==void 0)&&f.tag.setAttribute("x5-video-orientation",f._options.x5_orientation)}},{"../../lib/dom":34,"../../lib/ua":50}],99:[function(e,t,w){var y=e("../../lib/object"),u=e("../../lib/io"),c=e("../../config"),f=e("../../lang/index"),h=e("../../lib/constants"),n=e("../../lib/playerutil"),l=e("../base/event/eventtype"),a="dashinjector.js";t.exports.inject=function(s,_,T,m){var v=m.source;if(!(function(x){return!this._dash&&n.isDash(x)&&n.isSupportMSE()}).call(s,v))return console.warn("Should not inject dash player");function S(){this._disposed||(this._disposed=!0,this._destroyDash(),this._superPt&&(this._superPt.dispose.call(this),_.prototype.play=this._superPt.play,_.prototype.pause=this._superPt.pause,_.prototype.initPlay=this._superPt.initPlay,_.prototype.seek=this._superPt.seek,_.prototype.canSeekable=this._superPt.canSeekable))}s._Type=_,s._superType=T,s._superPt=T.prototype,s._disposed=!1,s._dash=null,_.prototype.initPlay=function(){var x=this,P=(this.trigger(l.Private.H5_Loading_Show),performance.now());(function(g,E){var R="aliplayer-dash-min.js",C=this.getOptions(),R=C.dashjsUrl||"https://"+c.domain+c.path+c.h5Version+"/dash/"+R;C.assetPrefix&&(C.assetPrefix,function(A){throw new TypeError('"'+A+'" is read-only')}("url")),u.loadJS(R,g,E)}).call(this,function(){x.traceLog(a,"got js#"+parseInt(performance.now()-P)+"ms"),(function(){var g,E,C,R=!this._dash;this._disposed||(this._destroyDash(),(g=this.getOptions()).vid||(g.isVBR=!0),E={streaming:{retryAttempts:{MPD:g.isLive?g.liveRetry:g.vodRetry}}},E=y.deepMerge(E,g.dashOption),C=dashjs.MediaPlayer().create(),this._dash=C,(function(){var A=this,L=this._dash,N=this.getOptions(),I=!1;L.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(M){var H,O;I||(I=!0,O=(O=L.getBitrateInfoListFor("video"))==null?void 0:O.map(function(z){return{url:""+h.DASH_QUALITY_PROTOCOL+z.qualityIndex,width:z.width,height:z.height,bitrate:z.bitrate,attrs:{BANDWIDTH:z.bitrate,RESOLUTION:z.width+"x"+z.height}}}),A.trigger(l.Player.LevelsLoaded,{levels:O}),H=L.getCurrentTrackFor("audio"),O=L.getTracksFor("audio").map(function(z){return{id:z.index,language:z.lang,enabled:(H==null?void 0:H.index)===z.index}}),A.trigger(l.Player.AudioTrackUpdated,{audioTracks:O}))}),L.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(M){var H,O;M.mediaType==="video"&&(H=A._qualityService.levels||[],O=""+h.DASH_QUALITY_PROTOCOL+M.newQuality,M=H.find(function(z){return z.Url===O}),A.trigger(l.Private.QualityChange,{levelSwitch:!0,url:O,desc:M==null?void 0:M.desc}))}),L.on("bytesAppendedEndFragment",function(M){try{var H,O;M.mediaType==="video"&&(H=M.bufferedRanges.length)&&(O=M.bufferedRanges.end(H-1),M.startTime>O)&&(L.refreshManifest(),A.traceLog(a,"PTS rollback, refresh manifest, expectedStart: "+M.startTime+", resultBufferEnd: "+O),console.warn("PTS rollback, refresh manifest"))}catch(z){console.log("exception",z)}}),L.on(dashjs.MediaPlayer.events.ERROR,function(M){var H=M.error,O=dashjs.MediaPlayer.errors,z=function(ee){var G,F={};for(G in ee){var W;ee.hasOwnProperty(G)&&(W=ee[G],F[W]=G)}return F}(O)[H.code],J=[O.TIME_SYNC_FAILED_ERROR_CODE,O.TIMED_TEXT_ERROR_ID_PARSE_CODE];if(console.log("dash error",M,"code:",z),A.traceLog(a,"dashjs-error::"+z+"#"+H.message+"#"+((M=H.data)==null||(M=M.response)==null?void 0:M.status)),!J.includes(H.code)){A._clearTimeout();var U,q,V,X=H.code;switch(X){case O.DOWNLOAD_ERROR_ID_CONTENT_CODE:case O.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case O.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case O.DOWNLOAD_ERROR_ID_SIDX_CODE:case O.DOWNLOAD_ERROR_ID_XLINK_CODE:case O.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case O.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:var B=(B=H.data)==null||(B=B.response)==null?void 0:B.status;if(B===404){if(L.isDynamic()&&X===O.DOWNLOAD_ERROR_ID_CONTENT_CODE)return A.traceLog(a,"dashjs::reload mpd because seg 404"),void L.attachSource(N.source);U=h.ErrorCode.NotFoundSourceURL,q=f.get("Error_Not_Found"),V=f.get("Tip_Err_Not_found")}else q=B===403?(U=h.ErrorCode.AuthKeyExpired,f.get("Error_AuthKey_Text")):B===0?(U=h.ErrorCode.RequestDataError,f.get("Error_Play_Text")+","+f.get("Maybe_Cors_Error")):(U=h.ErrorCode.RequestDataError,f.get("Error_Network_Text")+"("+z+"|"+B+")");break;case O.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case O.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case O.MANIFEST_ERROR_ID_PARSE_CODE:case O.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case O.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:U=h.ErrorCode.LoadedMetadata,q=f.get("Error_Manifest_Decode_Text")+"("+z+")";break;default:U=h.ErrorCode.OtherError,q=f.get("Error_Play_Text")+"("+z+")"}q+="<br>"+H.message,M={mediaId:N.vid||"",mediaAuth:N.mediaAuth||"",error_code:U,error_msg:q,diagnosis_info:V},A.logError(M),A.trigger(l.Player.Error,M),A._dash.reset()}})}).call(this),C.initialize(),C.updateSettings(E),C.setAutoPlay(g.autoplay),C.attachView(this.tag),C.attachSource(g.source),this._initPlayBehavior(),R&&this._executeReadyCallback())}).call(x)},function(){var g={mediaId:m.vid||"",mediaAuth:m.mediaAuth||"",error_code:h.ErrorCode.ModuleLoadError,error_msg:"dash module load error."};x.trigger(l.Player.Error,g)})},Object.defineProperty(_.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return S},set:function(){return S}}),_.prototype._switchLevel=function(x){this.traceLog(a,"switchLevel::"+x);var P=this._dash;x?(x=Number(x.replace(h.DASH_QUALITY_PROTOCOL,"")),P.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),P.setQualityFor("video",x)):P.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}})},_.prototype._switchAudioTrack=function(x){var P=this._dash,g=P.getTracksFor("audio").find(function(E){return E.index===x});g&&P.setCurrentTrack(g)},_.prototype._destroyDash=function(){this._dash&&(this._dash.destroy(),this._dash=null)}}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/object":44,"../../lib/playerutil":47,"../base/event/eventtype":70}],100:[function(e,t,w){var y=e("../base/player"),u=e("./dashinjector"),c=y.extend({init:function(f,h){h._native=!1,u.inject(this,c,y,h),y.call(this,f,h)}});t.exports=c},{"../base/player":93,"./dashinjector":99}],101:[function(e,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(v){for(var S=1;S<arguments.length;S++){var x,P=arguments[S];for(x in P)Object.prototype.hasOwnProperty.call(P,x)&&(v[x]=P[x])}return v}).apply(this,arguments)}var u=e("../../lib/io"),c=e("../../config"),f=e("../../lib/constants"),h=e("../../lib/util"),n=e("../../lib/playerutil"),l=(e("../../lib/dom"),e("../../lang/index")),a=e("../base/event/eventtype"),s=e("../saas/drm"),_=e("../../lib/ua"),T="drminjector.js",m=function(){function v(){}var S=v.prototype;return S.destroy=function(){},S.append=function(x){},S.remove=function(x,P){},S.isTextVisible=function(){},S.setTextVisibility=function(x){},v}();t.exports.inject=function(v,S,x,P,g,E,C){var R,A=P.source;function L(J){var U=shaka.util.Error.Code,q="",V=J.data||[];switch(J.code){case U.BAD_HTTP_STATUS:case U.HTTP_ERROR:case U.TIMEOUT:case U.LICENSE_REQUEST_FAILED:q=l.get("Tip_Drm_Request_Err")+N(V);break;case U.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case U.SESSION_TIMEOUT:window.isSecureContext?(q=l.get("Tip_Drm_Key_System_Unavailable"),V.length&&(q+="<br />"+l.get("Tip_Err_Common_Short")+V)):q=l.get("Tip_Drm_Secure_Context");break;case U.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(q=l.get("Tip_Drm_File_Not_Allowed"));break;case U.HLS_INVALID_PLAYLIST_HIERARCHY:q=l.get("Tip_Drm_Playlist_Hierarchy")}return J=N(V),q||J}function N(J){return l.get("Tip_Err_Common")+J}function I(J){var U=this;this._drm.load(this._options.source,J.startTime).then(function(){if(U.trigger(a.Private.H5_Loading_Hide),J.continuePlay&&(U.play(),J.prevVariant)&&J.prevVariant!==0){for(var q,V=U._drm.getVariantTracks(),X=0;X<V.length;X++)if(V[X].id===J.prevVariant){q=V[X];break}q&&U._drm.selectVariantTrack(q,!0)}}).catch(function(q){H.call(U,q)})}function M(){O();var U=f.ErrorCode.DrmNotSupported,J=l.get("Error_Drm_Not_Supported"),U={mediaId:this._options.vid||"",error_code:U,error_msg:J,diagnosis_info:l.get("Tip_Drm_Unsupported")};this.logError(U),this.trigger(a.Player.Error,U)}function H(J){O();var q=f.ErrorCode.DrmLoadError,U=l.get("Error_Drm_Load"),q={mediaId:this._options.vid||"",error_code:q,error_msg:U+" | "+this._shakaCodeMap[J.code],drm_info:JSON.stringify({cdmData:this._cdmData,licenseData:this._licenseData})};this.logError(q),q.diagnosis_info=L.call(this,J),this.trigger(a.Player.Error,q)}function O(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function z(J,U){U=U.getVariantTracks().find(function(q){return q.active}),console.log("activeTrack",U),J.trigger(a.Private.QualityChange,{levelSwitch:!0,bitrate:U.bandwidth,desc:U.height})}!E&&(P=A,v._drm||!n.isDash(P)&&!n.isHls(P))||(v._isDrm=!0,v._drm=null,v._isLoadedDrm=!1,v._sessionTimer=null,v._isFairPlay=_.IS_MAC_SAFARI||_.IS_IOS,v._fairPlayHandlers={},v._shakaCodeMap={},v._cdmData="",v._licenseData="",console.log("use FairPlay",v._isFairPlay),S.prototype._checkDrmReady=function(){if(this._drm==null&&!this._isFairPlay)throw new Error("please invoke this method after ready event")},S.prototype.play=function(J){return this.traceLog(T,"play::"+J),this._checkDrmReady(),this._isManualPlay=J||!1,this.trigger(a.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},S.prototype.initPlay=function(J){var U,q,V;function X(B,ee){var G,F,W,Z;B._antiRecord&&(console.log("Manual check before load source"),B._antiRecord.check())||(!shaka.Player.isBrowserSupported()||function(){if(_.IS_ANDROID)return!(!_.IS_UC&&!_.IS_FIREFOX)}()?M.call(B):(G=null,shaka.Player.probeSupport().then(function(ae){G&&(clearTimeout(G),G=null),ae&&ae.drm&&ae.drm["com.widevine.alpha"]?B.destroy(Z):M.call(B)}),G=setTimeout(function(){M.call(B)},5e3),F=!B._drm,W=function(){var ae,_e,le;B._drm=new shaka.Player(B.tag),R(B,B._drm),shaka.util.Error.Code.SESSION_TIMEOUT="SESSION_TIMEOUT",B._shakaCodeMap=(ae=shaka.util.Error.Code,_e={},Object.keys(ae).forEach(function(he){_e[ae[he]]=he}),_e),le=B._options.isLive?"https://"+n.getLiveHostByRegion(B._options.region):"https://vod."+B._options.region+".aliyuncs.com",B._drm.configure(y({drm:{servers:{"com.widevine.alpha":le,"com.microsoft.playready":le},retryParameters:{maxAttempts:1}}},B._options.drmOption||{},{textDisplayFactory:function(){return new m}})),B._drm.getNetworkingEngine().registerRequestFilter(function(he,be){shaka.util.StringUtils;var te=shaka.util.Uint8ArrayUtils;he==shaka.net.NetworkingEngine.RequestType.LICENSE&&(he=te.toBase64(new Uint8Array(be.body)),te=B._options.isLive?s.getRequestUrl(he,B):s.postData(he,B),B._cdmData=he,be.uris[0]=te.url,be.headers["content-type"]="application/x-www-form-urlencoded",be.body=te.data)}),B._drm.getNetworkingEngine().registerResponseFilter(function(he,be){var te=shaka.util.StringUtils,D=shaka.util.Uint8ArrayUtils;he==shaka.net.NetworkingEngine.RequestType.LICENSE&&(he=te.fromUTF8(be.data),te=JSON.parse(he),he=B._options.isLive?te.Response.B64License:JSON.parse(te.License).b64License,B._licenseData=he,be.data=D.fromBase64(he))}),B._drm.addEventListener("error",function(he){console.log("errorMessage"),console.log(he.detail.code),console.log(he.detail)}),B._drm.load(B._options.source).then(function(){B._initPlayBehavior(ee)}).catch(function(he){H.call(B,he)}),O.call(B),B.one(a.Video.CanPlay,function(){O.call(B)}),B._sessionTimer=setTimeout(function(){B._isError||(H.call(B,{code:"SESSION_TIMEOUT"}),B._drm&&B._drm.destroy())},B._player.getOptions().drmSessionTimeout||5e3),g&&g(B._drm),F&&(B._executeReadyCallback(),B._urls)&&0<B._urls.length&&(B._currentPlayIndex=n.findSelectedStreamLevel(B._urls,B._options.defaultDefinition),le=B._urls[B._currentPlayIndex],B.trigger(a.Private.SourceLoaded,le))},Z=function(ae){try{W()}catch(_e){console.log(_e)}}))}h.contentProtocolMixed(A)?(O(),(U={mediaId:this._options.vid||"",error_code:f.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=l.get("Request_Block_Text"),this.trigger(a.Player.Error,U)):this._options.accessKeyId&&this._options.accessKeySecret?((q=this)._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(a.Private.H5_Loading_Show),(function(B,ee){var G;this._isFairPlay&&(function(){if(_.IS_IOS)return F=parseInt(_.os.version),console.log("osVersion",F),12<=F;{var F;if(_.IS_MAC_SAFARI)return F=parseInt(_.browser.version),console.log("browserVersion",F),12<=F}}()?((G=this).destroy(),s.loadCertificate(this,function(){B&&B(),G._initPlayBehavior(ee,G._options.source),G._executeReadyCallback()})):M.call(this))}).call(this,g,J)):this._isLoadedDrm&&typeof shaka<"u"?X(this,J):(this.trigger(a.Private.H5_Loading_Show),V=performance.now(),(function(B,ee){var G="aliplayer-drm-min.js",F="",F=c.domain?"https://"+c.domain+c.path+c.h5Version+"/drm/"+G:"/build/drm/"+G,W=(this._options.shakaUrl&&(F=this._options.shakaUrl),this);u.loadJS(F,function(){shaka.polyfill.installAll(),B.apply(W)},function(Z){ee&&ee(Z)})}).call(q,function(){this.traceLog(T,"got js#"+parseInt(performance.now()-V)),this._isLoadedDrm=!0,X(this,J)},function(B){B={mediaId:q._options.vid||"",mediaAuth:q._options.mediaAuth||"",error_code:f.ErrorCode.ModuleLoadError,error_msg:"drm player module load error."+(B?B.message:"")},q.trigger(a.Player.Error,B)}))):(O(),(U={mediaId:this._options.vid||"",error_code:f.ErrorCode.InvalidParameter,error_msg:"No sts params."}).display_msg=l.get("Error_Drm_No_Sts"),this.trigger(a.Player.Error,U))},S.prototype.destroy=function(J){var U;this._drm?(O.call(U=this),this._drm.destroy().then(function(){U._drm=null,typeof J=="function"&&J(U)})):(this._isFairPlay&&this._destroyFairPlay(),typeof J=="function"&&J(this))},S.prototype._destroyFairPlay=function(){s.destroyFairPlay.call(this)},S.prototype.dispose=function(){x.dispose.call(this),this.destroy()},S.prototype._switchLevel=function(J,U){if(U=U||{isAuto:!0},this.trigger(a.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!U.isAuto;var q=this.autoplay||this._status!="pause";this._loadByUrlInner(J,this.getCurrentTime(),q)}else if(U.isAuto)this._drm.configure({abr:{enabled:!0}}),z(this._player,this._drm);else{for(var V,X=this._drm.getVariantTracks(),B=0;B<X.length;B++){var ee=X[B];if(Number(ee.bandwidth)===Number(U.bitrate)&&Number(ee.height)===Number(U.resolution.split("x")[1])){V=ee;break}}V||console.warn("cannot find target track",U),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(V,!this._options.seamlessHandover)}var G=this;setTimeout(function(){G.trigger(a.Player.LevelSwitched),this._switchedLevel=!1},1e3)},S.prototype._getDRMEncryptItem=function(){var J=this._urls;if(J&&0<J.length)for(var U=J.length,q=0;q<U;q++){var V=J[q];if(V.Url==this._options.source&&+V.encryption)return V}return""},S.prototype._getItemBySource=function(){var J=this._urls;if(J&&0<J.length)for(var U=J.length,q=0;q<U;q++){var V=J[q];if(V.Url==this._options.source)return V}return""},R=function(J,U){U.addEventListener("error",function(B){var V,X=J,B=B.detail,G="Error code:"+B.code+"message:"+B.message,ee=(X.traceLog(T,G),console.log(G),f.ErrorCode.OtherError),G=l.get("Error_Play_Text");B.code==shaka.util.Error.Code.EXPIRED?(function(){var F=this,W=(this.trigger(a.Private.H5_Loading_Show),null);this._options.isLive||(W=this.getCurrentTime());var Z,ae=!this.paused(),_e=this._drm.getConfiguration().abr.enabled;if(!_e){for(var le=this._drm.getVariantTracks(),he=0;he<le.length;he++)if(le[he].active){Z=le[he].id;break}}var be={startTime:W,continuePlay:ae,prevVariant:Z,isAdaptive:_e};typeof this._options.refreshAccessInfo=="function"?this._options.refreshAccessInfo().then(function(te){(te=te||{}).accessKeyId&&(F._options.accessKeyId=te.accessKeyId),te.securityToken&&(F._options.securityToken=te.securityToken),te.accessKeySecret&&(F._options.accessKeySecret=te.accessKeySecret),I.call(F,be)}):I.call(F,be)}).call(X):(B.code==shaka.util.Error.Code.HTTP_ERROR?(ee=f.ErrorCode.NetworkError,G=l.get("Http_Error")):B.code==shaka.util.Error.Code.TIMEOUT?(ee=f.ErrorCode.LoadingTimeout,G=l.get("Error_Waiting_Timeout_Text")):B.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(ee=f.ErrorCode.DrmLicenseRequestFailed,G=l.get("Error_Drm_License_Request_Failed")):B.Category==shaka.util.Error.NETWORK&&(ee=f.ErrorCode.NetworkError,G=l.get("Error_Network_Text")),O.call(X),setTimeout(function(){X.trigger(a.Private.Play_Btn_Hide)}),X.checkOnline()&&(V=X._drm.drmInfo()||{},V={keyIds:Array.from(V.keyIds||[]),initData:String(((V=(V.initData||[])[0])==null?void 0:V.initData)||[]),cdmData:X._cdmData,licenseData:X._licenseData},V={mediaId:X._options.vid||"",error_code:ee,error_msg:B.message,shaka_error:JSON.stringify(B.data||[]),drm_info:JSON.stringify(V)},X.logError(V),V.display_msg=G+" | "+X._shakaCodeMap[B.code],V.diagnosis_info=L.call(X,B),X.trigger(a.Player.Error,V)))}),U.addEventListener("variantchanged",function(q){console.log("DRM Event: variantchanged",q)}),U.addEventListener("abrstatuschanged",function(q){console.log("DRM Event: abrstatuschanged",q)}),U.addEventListener("drmsessionupdate",function(q){console.log("DRM Event: drmsessionupdate",q),O.call(J)}),U.addEventListener("expirationupdated",function(q){console.log("DRM Event: expirationupdated",q),console.log("Exp:",this.getExpiration())}),U.addEventListener("adaptation",function(q){console.log("adaptation",q),z(J,U)}),U.addEventListener("trackschanged",function(q){console.log("DRM EVENT: trackschanged",U.getTextLanguages(),U.getTextTracks());var V=U.getTextLanguages();V&&V.length&&(V=function(X){var B={subtitle:"subtitles",caption:"captions"},ee=(console.log("Building track config"),X.getManifest().textStreams||[]),G=(console.log("textStreams",ee),X.getTextLanguages()),F=(console.log("languageList",G),[]);try{ee.forEach(function(W){G.includes(W.language)&&F.push({kind:B[W.kind]||W.kind,label:W.label,srclang:W.language,src:Array.from(W.segmentIndex)[0].getUris()[0]})})}catch(W){console.log("error in retrieving text track url: ",W)}return F}(U),J.trigger(a.Private.TextTrackFounded,{from:"drm",textTracks:V}),J.trigger(a.Private.CCReset))})})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/dom":34,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../base/event/eventtype":70,"../saas/drm":111}],102:[function(e,t,w){var y=e("../base/player"),u=e("./drminjector"),c=y.extend({init:function(f,h){u.inject(this,c,y.prototype,h,function(n){}),h._native=!1,y.call(this,f,h)}});t.exports=c},{"../base/player":93,"./drminjector":101}],103:[function(g,t,w){var y=g("../../ui/component"),u=g("../../lib/data"),c=g("../../lib/ua"),f=g("../../lib/constants"),h=g("../../lib/dom"),n=g("../../lib/object"),l=g("../../config"),a=g("../../lang/index"),s=g("../../lib/playerutil"),_=g("../../lib/util"),T=g("../../ui/component/info-display"),m=g("../../ui/component/error-display"),v=g("../../feature/autoplaydelay"),S=g("../../commonui/autostreamselector"),x=g("../base/event/eventtype"),P=g("../saas/ststoken"),g=y.extend({init:function(E,C){var R;C.skinLayout===void 0&&(C.skinLayout=s.getDefaultFlashLayout()),y.call(this,this,C),this._id="prism-player-"+u.guid(),this.tag=E,this._el=this.tag,this._childrenUI=[m],this.initChildren(),this.id=this._id,window[this.id]=this,a.setCurrentLanguage(this._options.language,"flash",this._options.languageTexts),_.openInFile()?(C={mediaId:this._options.vid||"",error_code:f.ErrorCode.FormatNotSupport,error_msg:a.get("Open_Html_By_File","flash")},this.trigger(x.Private.Error_Show,C)):c.IS_MOBILE?this.trigger(x.Private.Error_Show,{mediaId:this._options.vid||"",error_code:f.ErrorCode.FormatNotSupport,error_msg:a.get("Cant_Use_Flash_On_Mobile","flash")}):(this._options.vid&&this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret?P.getPlayAuth((R=this)._options,function(A){R._options.playauth=A,R._createPlayer()},function(A){var L={mediaId:R._options.vid,error_code:A.Code,error_msg:A.Message};A.sri&&(L.sri=A.sri),L.display_msg=A.display_msg,R.trigger(x.Private.Error_Show,L)},"flash"):this._createPlayer(),this._status="init")},_createPlayer:function(){var E,C;this._options.autoPlayDelay?(C=new v(this),E=this,C.handle(function(){E._options.autoplay=!0,E._initPlayer(),E._childrenUI=[T,S],E.initChildren()})):(this._initPlayer(),this._childrenUI=[T,S],this.initChildren()),c.HAS_FLASH||(C=a.get("Flash_Not_Ready","flash"),this.trigger(x.Private.Info_Show,{text:C,align:"tc",isBlack:!1}))},_initPlayer:function(){var E="//"+l.domain+"/de/prismplayer-flash/"+l.flashVersion+"/PrismPlayer.swf",C=(this._options.playerSwfPath?E=this._options.playerSwfPath:l.domain?-1<l.domain.indexOf("localhost")&&(E="//"+l.domain+"/build/flash//PrismPlayer.swf"):E="de/prismplayer-flash/"+l.flashVersion+"/PrismPlayer.swf",this._comboFlashVars()),R=this._options.wmode||"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+E+'"><param name=quality value=High><param name="FlashVars" value="'+C+'"><param name="WMode" value="'+R+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+E+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="100%" height="100%" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+R+'" FlashVars="'+C+'"></embed></object>'},_getPlayer:function(E){return navigator.appName.indexOf("Microsoft")!=-1?document.getElementById(E):document[E]},_getLowerQualityLevel:function(){var E,C=this._getVideoUrls();return C&&(E=C.Urls,C=C.index,!(E&&E.length==0||C==-1))&&0<C?{item:E[C-1],index:C-1}:""},_comboFlashVars:function(){var A=encodeURIComponent(c.getReferer()),R=c.getHref(),E=encodeURIComponent(R),C="",R=(R&&(C=c.getHost(R)),this._options),A={autoPlay:R.autoplay?1:0,isInner:0,actRequest:1,vid:R.vid,diagnosisButtonVisible:R.diagnosisButtonVisible?1:0,domain:R.domain||"//tv.taobao.com",statisticService:R.statisticService||l.logReportTo,videoInfoService:R.videoInfoService||"/player/json/getBaseVideoInfo.do",disablePing:R.trackLog?0:1,namespace:this.id,barMode:R.barMode!=0?1:0,isLive:R.isLive?1:0,waterMark:R.waterMark,environment:R.environment,vurl:R.source?encodeURIComponent(R.source):"",plugins:R.plugins||"",snapShotShow:R.snapshot?1:0,accessId:R.accId||"",accessKey:R.accSecret||"",apiKey:R.apiKey||"",flashApiKey:R.flashApiKey||"",disableSeek:R.disableSeek?1:0,disableFullScreen:R.disableFullScreen?1:0,stsToken:R.stsToken||"",domainRegion:R.domainRegion||"",authInfo:R.authInfo?encodeURIComponent(R.authInfo):"",playDomain:R.playDomain||"",stretcherZoomType:R.stretcherZoomType||"",playauth:R.playauth?R.playauth.replace(/\+/g,"%2B"):"",prismType:R.prismType||0,formats:R.formats||"",notShowTips:R.notShowTips?1:0,showBarTime:R.showBarTime||0,showBuffer:R.showBuffer==0?0:1,rePlay:R.rePlay?1:0,encryp:R.encryp||"",secret:R.secret||"",mediaType:"video",logInfo:{ud:c.getHost(R.source),os:c.os.name,ov:c.os.version||"",et:c.browser.name,ev:c.browser.version||"",uat:c.USER_AGENT,r:A,pu:E,app_n:C}},L=[];return R.rtmpBufferTime!==void 0&&(A.rtmpBufferTime=R.rtmpBufferTime),R.cover&&(A.cover=R.cover),R.extraInfo&&(A.extraInfo=encodeURIComponent(JSON.stringify(R.extraInfo))),A.logInfo&&(A.logInfo=encodeURIComponent(JSON.stringify(A.logInfo))),A.languageData=encodeURIComponent(JSON.stringify(a.getLanguageData("flash"))),A.language=a.getCurrentLanguage(),n.each(A,function(N,I){L.push(N+"="+I)}),L.join("&")},initChildren:function(){for(var E=this._childrenUI.length,C=0;C<E;C++){var R=new this._childrenUI[C](this,this._options),A=R.el();A.id=R.id(),this.contentEl().appendChild(A),R.bindEvent()}var L=document.querySelector("#"+this._options.id+" .prism-info-display");h.css(L,"display","none")},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var E=this._options.skinRes,C=this._options.skinLayout;if(C!==!1&&!n.isArray(C))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if(typeof E!="string")throw new Error("PrismPlayer Error: skinRes should be string!");E=C!=0&&C.length!==0&&{skinRes:E,skinLayout:C},this.flashPlayer.setPlayerSkin(E),this.trigger("ready");var R=this;window.addEventListener("beforeunload",function(){try{R.flashPlayer.setPlayerCloseStatus()}catch{}})},jsReady:function(){return!0},snapshoted:function(R){var C=_.toBinary(R),R="data:image/jpeg;base64,"+R;this.trigger("snapshoted",{time:this.getCurrentTime(),base64:R,binary:C})},uiReady:function(){this._status="ready",this.trigger("uiReady")},loadedmetadata:function(){this._status!="ended"&&(this._status="loading",this.trigger("loadedmetadata"))},onPlay:function(){this._status="play",this.trigger("play"),this._clearTimeoutHandle(),this.trigger(x.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),this._status="ended",this.trigger("ended")},onPause:function(){this._status="pause",this._clearTimeoutHandle(),this.trigger(x.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(E){this.trigger("bSSendMsg",E)},onVideoRender:function(E){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:E})},onVideoError:function(E){this._clearTimeoutHandle(),this._status="error",this.trigger("error",{errortype:E})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this._status="error",this.trigger("stsTokenExpired")},onVideoBuffer:function(){var E;this._status!="pause"&&(this._status="waiting",this.trigger("waiting"),this._clearTimeoutHandle(),(E=this)._checkTimeoutHandle=setTimeout(function(){E.trigger(x.Private.AutoStreamShow)},1e3*this._options.loadDataTimeout),this._checkVideoStatus())},startSeek:function(E){this.trigger("startSeek",E)},completeSeek:function(E){this.trigger("completeSeek",E)},_invoke:function(){var E=arguments[0],C=arguments;if(Array.prototype.shift.call(C),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not ready，please use api after ready event occured!");if(typeof this.flashPlayer[E]!="function")throw new Error("PrismPlayer Error: function "+E+" is not found!");return this.flashPlayer[E].apply(this.flashPlayer,C)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(E){this._invoke("seekVideo",E)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var E=this._invoke("getVideoUrls"),C=[];if(E&&E.Urls)for(var R=0;R<E.Urls.length;R++){var A=E.Urls[R].value,L=A.desc.indexOf("_"),N=a.get(A.definition,"flash");A.desc=0<L?N+"_"+A.height:N,C.push(A)}return{Urls:C,index:E.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){var E;this.flashPlayer&&!this._checkVideoStatusHandler&&(E=this,function C(){E._checkVideoStatusHandler=setTimeout(function(){var R=E._getVideoStatus();R.videoStatus=="playing"&&R.bufferStatus=="bufferFull"?(E._status="playing",E._clearTimeoutHandle()):R.videoStatus=="videoPlayOver"&&(E._status="ended",E._clearTimeoutHandle()),C()},500)}())},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null)},_changeStream:function(E){return this._invoke("changeStream",E)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(E){this._invoke("setVolume",E)},loadByVid:function(E){this._invoke("loadByVid",E,!1)},loadByUrl:function(E,C){this._invoke("loadByUrl",E,C)},dispose:function(){this._clearTimeoutHandle(),this._checkVideoStatusHandler&&(clearTimeout(this._checkVideoStatusHandler),this._checkVideoStatusHandler=null),this._invoke("pauseVideo");var E=this;setTimeout(function(){E.offAll("completeSeek"),E.offAll("startSeek"),E.offAll("stsTokenExpired"),E.offAll("liveStreamStop"),E.offAll("showBar"),E.offAll("hideBar"),E.offAll("m3u8Retry"),E.offAll("error"),E.offAll("canplay"),E.offAll("pause"),E.offAll("ended"),E.offAll("play"),E.offAll("loadedmetadata"),E.offAll("snapshoted"),E.offAll("uiReady"),E.offAll("ready"),E.flashPlayer=null,E._el&&(E._el.innerHTML="")})},showBSMsg:function(E){this._invoke("showBSMsg",E)},setToastEnabled:function(E){this._invoke("setToastEnabled",E)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(E,C){this._el.style.width=E,this._el.style.height=C}});t.exports=g},{"../../commonui/autostreamselector":11,"../../config":14,"../../feature/autoplaydelay":17,"../../lang/index":25,"../../lib/constants":30,"../../lib/data":32,"../../lib/dom":34,"../../lib/object":44,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../../ui/component":135,"../../ui/component/error-display":140,"../../ui/component/info-display":143,"../base/event/eventtype":70,"../saas/ststoken":118}],104:[function(e,t,w){var y=e("../../lib/io"),u=e("../../config"),c=e("../../lib/constants"),f=e("../../lib/util"),h=e("../../lib/playerutil"),n=e("../../lib/ua"),l=e("../../lib/data"),a=e("../../lang/index"),s=e("../base/event/eventtype"),_="flvinjector.js";t.exports.inject=function(T,m,v,S,x,P){var g,E=S.source,C=S.optionFormat;function R(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(m.prototype.play=this._superPt.play,m.prototype.pause=this._superPt.pause,m.prototype.initPlay=this._superPt.initPlay,m.prototype.seek=this._superPt.seek,m.prototype.canSeekable=this._superPt.canSeekable))}function A(L){try{for(var N=L.buffered.length,I="Len:"+N+";",M=0;M<N;M++)I+="["+(M+1)+"]"+L.buffered.start(M)+"~"+L.buffered.end(M);return I}catch{}}(P||(S=E,P=C,!T._flv&&h.isFlv(S,P)&&h.isSupportFlv()))&&(T._Type=m,T._superType=v,T._superPt=v.prototype,T._disposed=!1,m.prototype._checkFlvReady=function(){if(this._flv==null)throw new Error("please invoke this method after ready event")},T._isFlv=!0,T._flv=null,T._isLoadedFlv=!1,T._dumpBuffer=null,m.prototype.play=function(L){return this.traceLog(_,"play::"+L),L&&this.trigger(s.Private.ManualPlay),this._checkFlvReady(),this._isManualPlay=L||!1,this.trigger(s.Private.Cover_Hide),this._options.isLive&&L?this._loadByUrlInner(this._options.source,0,L):this.tag.ended||this._ended?this.replay():(this._seeking==0&&(L=0,this.tag.ended||this._ended||(L=this.getCurrentTime())==0&&(L=-1),L!=-1)&&this.seek(L),this.tag.paused&&(this._hasLoaded||(this._hasLoaded=!0,this._flv.load()),this._flv.play())),this},m.prototype.seek=function(L){this._checkFlvReady(),this._seeking=!0;var N=this.getDuration();N<=(L=Math.floor(L))&&(L=N);try{this._flv.currentTime=L}catch(I){console.log(I)}return this},m.prototype.pause=function(L){return this._checkFlvReady(),this._isManualPause=L||!1,this._flv.pause(),this},m.prototype.getProgramDateTime=function(){var L;return this._checkFlvReady(),this._metadata?(L=(L=this._flv.getFirstSample())&&L.pts?L.pts:0,console.log("推流时间："+this._metadata.NtpTime),console.log("首帧PTS："+L),this._metadata.NtpTime+L):""},m.prototype.initPlay=function(L){var N,I,M;function H(O,z){if(!O._disposed){var J=!O._flv,U=(O._destroyFlv(),O._options.isLive);if(U&&!flvjs.getFeatureList().networkStreamIO)return(B={error_code:c.ErrorCode.FormatNotSupport,error_msg:a.get("Error_Not_Support_Mse_Flv")+"|streamIO(format:flv)"}).display_msg=B.error_msg,void O.trigger(s.Player.Error,B);var q,V={isLive:U,enableWorker:O._options.enableWorker,accurateSeek:!0},X=(n.IS_IE11&&(V.enableWorker=!1),{type:"flv",isLive:U,url:O._options.source});for(q in U?(V.enableStashBuffer=O._options.enableStashBufferForFlv,V.stashInitialSize=O._options.stashInitialSizeForFlv,V.autoCleanupSourceBuffer=!1):V.lazyLoadMaxDuration=600,V.statisticsInfoReportInterval=1e3,O._options.isLive&&(O._options.flvFrameChasing&&(V.flvFrameChasing=O._options.flvFrameChasing),O._options.chasingFirstParagraph&&(V.chasingFirstParagraph=O._options.chasingFirstParagraph),O._options.chasingSecondParagraph&&(V.chasingSecondParagraph=O._options.chasingSecondParagraph),O._options.chasingFirstSpeed&&(V.chasingFirstSpeed=O._options.chasingFirstSpeed),O._options.chasingSecondSpeed)&&(V.chasingSecondSpeed=O._options.chasingSecondSpeed),O._options.flvOption)q=="cors"||q=="hasAudio"||q=="withCredentials"||q=="hasVideo"||q=="type"?X[q]=O._options.flvOption[q]:V[q]=O._options.flvOption[q];flvjs.LoggingControl.enableAll=O._options.debug,O._flv=flvjs.createPlayer(X,V),g(O,O._flv),O._flv.on(flvjs.Events.DUMP_BUFFER,function(G){var F,W,Z;O._options.disableDumpBuffer||O._liveRetryCount===0&&O._vodRetryCount===0&&O._nudgeCount===0&&typeof O._dumpBuffer!="string"&&(O._flvDumpTimer||(O._flvDumpTimer=setTimeout(function(){O._reportDumpBuffer&&O._reportDumpBuffer()},5e3)),G=new Uint8Array(G),O._dumpBuffer?O._dumpBuffer=(F=O._dumpBuffer,W=G,(Z=new Uint8Array(F.length+W.length)).set(F),Z.set(W,F.length),Z):O._dumpBuffer=G)});var B,ee=f.throttle(function(G){O.traceLog(_,"dts_adjustment::"+G.from+"->"+G.to)},1e3);O._flv.on(flvjs.Events.DTS_ADJUSTMENT,function(G){ee(G)}),O._flv.on(flvjs.Events.MEDIA_INFO,function(G){O._metadata=G.metadata}),O._flv.on(flvjs.Events.METADATA_ARRIVED,function(G){G&&G.dataContent&&G.dataContent.length&&O.trigger(s.Private.SeiFrame,{dataContent:G.dataContent,pts:G.pts})}),O._flv.on(flvjs.Events.STATISTICS_INFO,function(G){O.trigger(s.Private.StatisticsInfo,G)}),O._flv.attachMediaElement(O.tag),O._initPlayBehavior(z)&&((O._options.preload||O._options.autoplay)&&(O._hasLoaded=!0,O._flv.load()),O._options.autoplay&&!O.tag.paused&&O._flv.play(),x&&x(O._flv),J)&&(O._executeReadyCallback(),O._urls)&&0<O._urls.length&&(O._currentPlayIndex=h.findSelectedStreamLevel(O._urls,O._options.defaultDefinition),B=O._urls[O._currentPlayIndex],O._options.source=B.Url,O.trigger(s.Private.SourceLoaded,B))}}n.browser.safari&&this.trigger(s.Private.Snapshot_Hide),f.contentProtocolMixed(E,"",C)?((N={mediaId:this._options.vid||"",error_code:c.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=a.get("Request_Block_Text"),this.trigger(s.Player.Error,N)):(I=this)._isLoadedFlv&&typeof Hls<"u"?setTimeout(function(){H(I,L)},1e3):(this.trigger(s.Private.H5_Loading_Show),M=performance.now(),(function(O,z,J){var U="aliplayer-flv-min.js",q="",q=u.domain?"https://"+u.domain+u.path+u.h5Version+"/flv/"+U:"/build/flv/"+U,V=(this._options.assetPrefix&&(q=this._options.assetPrefix+"/flv/"+U),this);y.loadJS(q,function(){O.apply(V)},function(){J&&J()})}).call(I,function(){this.traceLog(_,"got js#"+parseInt(performance.now()-M)),this._isLoadedFlv=!0,H(this,L)},this._options.debug,function(){var O={mediaId:I._options.vid||"",mediaAuth:I._options.mediaAuth||"",error_code:c.ErrorCode.ModuleLoadError,error_msg:"flv module load error."};I.trigger(s.Player.Error,O)}))},m.prototype._reportDumpBuffer=function(){var L,N;this.__flvDumpTimer&&clearTimeout(this.__flvDumpTimer),this.__flvDumpTimer=null,this._dumpBuffer&&typeof this._dumpBuffer!="string"&&(1048576<this._dumpBuffer.byteLength&&(this._dumpBuffer=this._dumpBuffer.slice(0,1048576)),L=this._dumpBuffer,this._dumpBuffer="REPORTED",performance.now(),L=f.arrayBufferToB64(L),N=l.guid(),this.traceLog(_,"dump::"+N),this.trigger(s.Private.DumpBuffer,{id:N,data:L}))},m.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(L){console.log(L)}this.loaded=!1,this._hasLoaded=!1,this._flv=null,this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this._dumpBuffer=null},Object.defineProperty(m.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return R},set:function(){return R}}),m.prototype.canSeekable=function(L){var N=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(L)&&N&&!N.hasKeyframesIndex)},m.prototype._getbwEstimator=function(){var L;return 1024*((L=this._flv)==null||(L=L.statisticsInfo)==null?void 0:L.speed)*8},g=function(L,N){var I=!1;N.on(flvjs.Events.ERROR,function(M,H,O){var z,J,U,q,V="flvjs-error::"+M+"#"+H+"#"+O.code+"#"+O.msg,X=O.msg==="BodyStreamBuffer was aborted"&&N._config.lazyLoad;if(X){V+="#Maximum buffering duration exceeded, suspend transmuxing task";try{var B=N._msectl._sourceBuffers.video,ee=N._msectl._sourceBuffers.audio;V+="#Video buffer:"+A(B)+"#Audio buffer:"+A(ee)}catch{}}L.traceLog(_,V),L._reportDumpBuffer&&L._reportDumpBuffer(),M===flvjs.ErrorTypes.BUFFER_FULL||(L._flv.unload(),X)||L._isError||(z=c.ErrorCode.OtherError,J=a.get("Error_Play_Text"),U=null,H==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(B=L.getOptions().source)||B.toLowerCase().indexOf("http://")!=0&&B.toLowerCase().indexOf("https://")!=0?(z=c.ErrorCode.InvalidSourceURL,J=a.get("Error_Invalidate_Source_Widthout_Protocal"),I=!0):J=navigator.onLine?(z=c.ErrorCode.RequestDataError,a.get("Maybe_Cors_Error")):(z=c.ErrorCode.NetworkError,a.get("Error_Network_Text")):H==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?O.code=="404"?(z=c.ErrorCode.NotFoundSourceURL,J=a.get("Error_Not_Found"),U=a.get("Tip_Err_Not_found")):O.code=="403"?(z=c.ErrorCode.AuthKeyExpired,J=a.get("Error_AuthKey_Text"),I=!0):(z=c.ErrorCode.NetworkError,J=a.get("Error_Network_Text")):H==flvjs.ErrorDetails.NETWORK_TIMEOUT?(z=c.ErrorCode.LoadingTimeout,J=a.get("Error_Waiting_Timeout_Text")):H==flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED||H==flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED?(z=c.ErrorCode.FormatNotSupport,J=a.get("Error_H5_Not_Support_Text")+"|codec(format:flv)",I=!0):H===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&(ee=L.tag.error)&&(z=c.VideoErrorCode[ee.code],J=ee.code+" || "+ee.message),V=function(){var G;setTimeout(function(){L.trigger(s.Private.Play_Btn_Hide)}),L.checkOnline()&&(G={mediaId:L._options&&L._options.vid?L._options.vid:"",error_code:z,error_msg:J,diagnosis_info:U},L.logError(G),G.display_msg=J,u.cityBrain&&(L.flv=null),L.trigger(s.Player.Error,G))},L._options&&L._options.isLive&&!I?(q=L._options).liveRetry>L._liveRetryCount?(L._liveRetryCount==0&&L.trigger(s.Player.OnM3u8Retry),M=q.liveRetryInterval+q.liveRetryStep*L._liveRetryCount,L._liveRetryCount++,setTimeout(function(){L._isError||L._liveRetryTimer||L._loadByUrlInner(q.source)},1e3*M)):(L.trigger(s.Player.LiveStreamStop),V()):H===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&O.code===11&&L.getCurrentTime()<L.getDuration()?(L._flv.unload(),L._flv.load(),L._flv.detachMediaElement(),L._flv.attachMediaElement(L.tag)):I?(L._flv.unload(),V()):L._reloadForVod()||V())})})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/data":32,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../base/event/eventtype":70}],105:[function(e,t,w){var y=e("../base/player"),u=e("./flvinjector"),c=y.extend({init:function(f,h){u.inject(this,c,y,h,function(n){}),h._native=!1,y.call(this,f,h)}});t.exports=c},{"../base/player":93,"./flvinjector":104}],106:[function(e,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(P){for(var g=1;g<arguments.length;g++){var E,C=arguments[g];for(E in C)Object.prototype.hasOwnProperty.call(C,E)&&(P[E]=C[E])}return P}).apply(this,arguments)}var u,c=e("../../lib/object"),f=e("../../lib/io"),h=e("../../config"),n=e("../../lib/constants"),l=e("../../lib/util"),a=e("../../lib/playerutil"),s=e("../../lib/ua"),_=e("../../lang/index"),T=e("../base/event/eventtype"),m="hlsinjector.js";function v(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}function S(P){this.trigger(T.Private.Timeline,{name:P,ts:performance.now()})}function x(P,g){return g<P.maxNumRetry}t.exports.inject=function(P,g,E,C,R,A){P._hls2=!1;var L,N=C.source,I=C.useHlsPluginForSafari,M=C.useHlsPlugOnMobile,H=C.optionFormat;function O(U){this._checkHlsReady();try{this._superPt.seek.call(this,U),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(U)}catch(q){console.log(q)}return this}function z(U,q){q.frag.level===this.currentLevel&&(this.off(u.Events.FRAG_BUFFERED,z),this.media.currentTime=this.media.currentTime+.01)}function J(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyHls(),this._superPt&&(g.prototype.play=this._superPt.play,g.prototype.pause=this._superPt.pause,g.prototype.initPlay=this._superPt.initPlay,g.prototype.replay=this._superPt.replay,g.prototype.stop=this._superPt.stop,g.prototype.seek=this._superPt.seek))}((R||"").length||A||(C=N,A=I,I=M,M=H,!P._hls&&a.isHls(C,M)&&(!a.canPlayHls()||a.isSafariUsedHlsPlugin(A)||I&&a.isUsedHlsPluginOnMobile())))&&(P._Type=g,P._superType=E,P._superPt=E.prototype,P._disposed=!1,g.prototype._checkHlsReady=function(){if(this._hls==null)throw new Error("please invoke this method after ready event")},P._isHls=!0,P._hls=null,P._isLoadedHls=!1,P._stopLoadAsPaused=!0,P._yekced_saved=R,g.prototype.play=function(U){return this.traceLog(m,"play::"+U),U&&this.trigger(T.Private.ManualPlay),this._checkHlsReady(),this._isManualPlay=U||!1,this.trigger(T.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._options._autoplay=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(U=this.getCurrentTime(),this._hls.startLoad(U)),this},g.prototype.pause=function(U){return this.tag&&(this._checkHlsReady(),this.tag.pause(),this._stopLoadAsPaused)&&this._hls.stopLoad(),this._isManualPause=U||!1,this},g.prototype.stop=function(){return this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this},Object.defineProperty(g.prototype,"seek",{enumerable:!0,configurable:!0,get:function(){return O},set:function(){return O}}),g.prototype.getProgramDateTime=function(){if(this._checkHlsReady(),this._hls.currentLevel==-1)return"";var U=this._hls.currentLevel,U=this._hls.levels[U].details;return U&&(U=U.programDateTime,console.log("ProgramDateTime="+U),U)?new Date(U).valueOf():0},g.prototype.getCurrentPDT=function(){var U,q;return this._checkHlsReady(),this._hls.currentLevel==-1?"":this._hls.playingDate?this._hls.playingDate.getTime():(U=(q=this._hls.streamController.fragPlaying||{}).pdt)?(q=1e3*q.startPTS,U+(1e3*this.getCurrentTime()-q)):0},g.prototype._switchLevel=function(U){this.traceLog(m,"switchLevel::"+U),this.trigger(T.Player.LevelSwitch);for(var q=this._hls.levels,V=!0,X=0;X<q.length;X++)if(q[X].url==U||q[X].url[0]==U){V=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=X,console.log("Seamlessly set nextLevel to",X)):(this._hls.on(u.Events.FRAG_BUFFERED,z),this._hls.currentLevel=X,console.log("Immediately set currentLevel to",X));break}V&&(this._hls.on(u.Events.FRAG_BUFFERED,z),this._hls.currentLevel=-1),this._switchedLevel=!0;var B=this;setTimeout(function(){B.trigger(T.Player.LevelSwitched),this._switchedLevel=!1},1e3)},g.prototype._getHlsVersion=function(U){this._options.useHls2===!0?(this._hls2=!0,U()):this._options.useHls2===!1&&U()},g.prototype.initPlay=function(U){var q,V;function X(B,ee){if(!B._disposed){if(B._antiRecord&&(console.log("Manual check before load source"),B._antiRecord.check()))return;var G,F=!B._hls,W=(B._destroyHls(),{xhrSetup:function(ae,_e){ae.withCredentials=B._options.withCredentials||!1}}),Z=(B._hls2||(Z=B._options.loadingTimeOut||B._options.hlsLoadingTimeOut)&&(W.manifestLoadingTimeOut=Z,W.levelLoadingTimeOut=Z,W.fragLoadingTimeOut=Z),B._hls2&&(W.manifestLoadPolicy=y({},u.DefaultConfig.manifestLoadPolicy),W.playlistLoadPolicy=y({},u.DefaultConfig.playlistLoadPolicy),W.fragLoadPolicy=y({},u.DefaultConfig.fragLoadPolicy),Z=B._options.isLive?B._options.liveRetry:B._options.vodRetry,W.manifestLoadPolicy.default.errorRetry.maxNumRetry=Z,B._options.isLive&&(W.manifestLoadPolicy.default.errorRetry.shouldRetry=x),W.manifestLoadPolicy.default.timeoutRetry.maxNumRetry=Z,W.playlistLoadPolicy.default.errorRetry.maxNumRetry=Z,B._options.isLive&&(W.playlistLoadPolicy.default.errorRetry.shouldRetry=x),W.playlistLoadPolicy.default.timeoutRetry.maxNumRetry=Z,W.fragLoadPolicy.default.maxLoadTimeMs=2e4,W.fragLoadPolicy.default.errorRetry.shouldRetry=x,(Z=B._options.hlsOption||{}).manifestLoadPolicy&&(W.manifestLoadPolicy=c.deepMerge(W.manifestLoadPolicy,Z.manifestLoadPolicy),delete Z.manifestLoadPolicy),Z.playlistLoadPolicy&&(W.playlistLoadPolicy=c.deepMerge(W.playlistLoadPolicy,Z.playlistLoadPolicy),delete Z.playlistLoadPolicy),Z.fragLoadPolicy&&(W.fragLoadPolicy=c.deepMerge(W.fragLoadPolicy,Z.fragLoadPolicy),delete Z.fragLoadPolicy),B._options.isLive)&&!s.IS_IE11&&(W.backBufferLength=12,W.liveDurationInfinity=!0),B._options.isLive&&(B._options.hlsFrameChasing&&(W.hlsFrameChasing=B._options.hlsFrameChasing),B._options.chasingFirstParagraph&&(W.chasingFirstParagraph=B._options.chasingFirstParagraph),B._options.chasingSecondParagraph&&(W.chasingSecondParagraph=B._options.chasingSecondParagraph),B._options.chasingFirstSpeed&&(W.chasingFirstSpeed=B._options.chasingFirstSpeed),B._options.chasingSecondSpeed)&&(W.chasingSecondSpeed=B._options.chasingSecondSpeed),B._options.defaultBandwidth&&(W.defaultBandwidth=B._options.defaultBandwidth),B._options.hlsBandWidthUpCacheTime&&(W.abrBandWidthUpCacheTime=B._options.hlsBandWidthUpCacheTime),B._options.seamlessHandover&&(W.seamlessHandover=B._options.seamlessHandover),B._options.liveSyncDurationCount&&(W.liveSyncDurationCount=B._options.liveSyncDurationCount),B._options.nudgeMaxRetry&&(W.nudgeMaxRetry=B._options.nudgeMaxRetry),B._options.maxMaxBufferLength&&(W.maxMaxBufferLength=B._options.maxMaxBufferLength),B._options.maxBufferSize&&(W.maxBufferSize=B._options.maxBufferSize),B._options.fragLoadingRetryDelay&&(W.fragLoadingRetryDelay=B._options.fragLoadingRetryDelay),B._options.maxBufferLength&&(W.maxBufferLength=B._options.maxBufferLength),B._options.accessKeyId&&(W.accessKeyId=B._options.accessKeyId),B._options.accessKeySecret&&(W.accessKeySecret=B._options.accessKeySecret),B._options.securityToken&&(W.securityToken=B._options.securityToken),B._options.app&&(W.app=B._options.app),B._options.stream&&(W.stream=B._options.stream),B._options.domain&&(W.domain=B._options.domain),B._options.regionId&&(W.regionId=B._options.regionId),B._yekced_saved&&(W._yekcedxx=B._yekced_saved,W._vpk=B._yekced_saved),W.enableWorker=B._options.enableWorker,W.debug=B._options.debug,B._stopLoadAsPaused=B._options.hlsOption.stopLoadAsPaused,B._getPlayStartTime()+B._posOffset);for(G in Z&&(W.startPosition=Z,console.log("hls.js startPosition => ",Z)),B._options.hlsOption)W[G]=B._options.hlsOption[G];s.IS_IE11&&(W.enableWorker=!1),B._hls=new u(W),L(B,B._hls),B._loadSourced=!1,B._hls.attachMedia(B.tag),B._hls.on(u.Events.INIT_PTS_FOUND,function(ae,_e){B._initPTS=_e.initPTS}),B._hls.on(u.Events.FRAG_LOADING,function(){S.call(B,"frag_s")}),B._hls.on(u.Events.FRAG_LOADED,function(){S.call(B,"frag_f")}),B._hls.on(u.Events.FRAG_PARSED,function(){S.call(B,"frag_parsed")}),B._hls.on(u.Events.FRAG_PARSED,function(ae,he){var le,he=(he==null?void 0:he.frag)||{},be=he.elementaryStreams||{},be="Frag(sn"+he.sn+"): "+((le=he.startPTS)==null?void 0:le.toFixed(3))+" -> "+((le=he.endPTS)==null?void 0:le.toFixed(3))+"(v:"+((le=be.video)==null||(le=le.startPTS)==null?void 0:le.toFixed(3))+"/"+((le=be.video)==null||(le=le.endPTS)==null?void 0:le.toFixed(3))+";a:"+((le=be.audio)==null||(le=le.startPTS)==null?void 0:le.toFixed(3))+"/"+((le=be.audio)==null||(be=le.endPTS)==null?void 0:be.toFixed(3))+"); Duration: "+((le=he.duration)==null?void 0:le.toFixed(3));B.trackLogFragBuffer&&(B.trackLogFragBuffer.push(be),10<B.trackLogFragBuffer.length)&&B.trackLogFragBuffer.shift()}),B._hls.on(u.Events.FRAG_PARSING_USERDATA,function(ae,_e){_e&&_e.dataContent&&_e.dataContent.length?B.trigger(T.Private.SeiFrame,{dataContent:_e.dataContent,pts:_e.pts}):_e.samples.forEach(function(le){B.trigger(T.Private.SeiFrame,{dataContent:le.userDataBytes,dataContentString:le.userData,pts:le.pts,uuid:le.uuid})})}),B._hls.on(u.Events.MEDIA_ATTACHED,function(){var ae;B._hls.on(u.Events.MANIFEST_PARSED,function(){B._initPlayBehavior(ee||B._loadSourced)}),B._hls.on(u.Events.AUDIO_TRACKS_UPDATED,function(_e,le){B.trigger(T.Player.AudioTrackUpdated,le)}),B._hls.on(u.Events.MANIFEST_LOADED,function(_e,le){B.trigger(T.Player.LevelsLoaded,le)}),B._hls.on(u.Events.LEVEL_SWITCHED,function(_e,le){if(B._qualityService){for(var he=B._hls.levels[le.level].url,be=B._qualityService.levels,te="",D="",Q=0;Q<be.length;Q++)if(be[Q].Url==he){D=be[Q].desc,te=be[Q].bitrate;break}(D||te)&&B.trigger(T.Private.QualityChange,{levelSwitch:!0,url:he,bitrate:te,desc:D})}}),B._hls.on(u.Events.AUDIO_TRACK_SWITCH,function(_e,le){B.trigger(T.Player.AudioTrackSwitch,le),setTimeout(function(){B.trigger(T.Player.AudioTrackSwitched,le)},1e3)}),(B._options.autoplay||B._options.preload||ee)&&(B._loadSourced=!0,B._levels&&1<B._levels.length?(B._hls.trigger(u.Events.MANIFEST_LOADING,{}),B._hls.trigger(u.Events.MANIFEST_LOADED,{levels:B._levels})):B._hls.loadSource(B._options.source||"__INVALID__")),F?(B._executeReadyCallback(),B._urls&&0<B._urls.length&&(B._currentPlayIndex=a.findSelectedStreamLevel(B._urls,B._options.defaultDefinition),ae=B._urls[B._currentPlayIndex],B._options.source=ae.Url,B.trigger(T.Private.SourceLoaded,ae))):B.trigger(T.Private.H5_Loading_Show)})}}this.trigger(T.Private.H5_Loading_Show),l.contentProtocolMixed(N,"",H)?((q={mediaId:(q=this.getOptions()||{}).vid||"",mediaAuth:q.mediaAuth||"",error_code:n.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=_.get("Request_Block_Text"),this.trigger(T.Player.Error,q)):(V=this)._isLoadedHls&&u!==void 0?X(this,U):(this.trigger(T.Private.H5_Loading_Show),this._getHlsVersion(function(B){var ee=performance.now();(function(G,F,W){var Z="aliplayer-hls-min.js",ae=((F=F||{}).hls2&&(Z="aliplayer-hls2-min.js"),""),ae=h.domain?"https://"+h.domain+h.path+h.h5Version+"/hls/"+Z:"/build/hls/"+Z,_e=(F.assetPrefix&&(ae=F.assetPrefix+"/hls/"+Z),S.call(this,"mod_hls_s"),this);f.loadJS(ae,function(){S.call(_e,"mod_hls_f"),u=window.AliHls||window.Hls,G.apply(_e)},function(){W&&W()})}).call(V,function(){V.traceLog(m,"got js#"+parseInt(performance.now()-ee)),V._isLoadedHls=!0,X(V,U)},{debug:V._options.debug,hls2:V._hls2,assetPrefix:V._options.assetPrefix},function(){var G={mediaId:V._options.vid||"",mediaAuth:V._options.mediaAuth||"",error_code:n.ErrorCode.ModuleLoadError,error_msg:"hls module load error."};V.trigger(T.Player.Error,G)})}),this.on("error",v))},g.prototype._getbwEstimator=function(){var U,q=NaN;return q=this._hls?(U=this._hls.abrController._bwEstimator)?U.getEstimate():this._hls.bandwidthEstimate:q},g.prototype._destroyHls=function(){this._hls&&this._hls.destroy(),this._hls=null,this.trackLogFragBuffer=[]},Object.defineProperty(g.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return J},set:function(){return J}}),L=function(U,q){q.on(u.Events.MANIFEST_LOADING,function(){S.call(U,"mani_s")}),q.on(u.Events.MANIFEST_LOADED,function(){S.call(U,"mani_f")}),q.on(u.Events.DEFAULT_BANDWIDTH,function(V,X){U.trigger(T.Player.DefaultBandWidth,{width:X.width,height:X.height,bitrate:X.bitrate})}),q.on(u.Events.ERROR,function(V,X){var B="hlsjs-error::"+X.type+"#"+X.details+"#"+((B=X.networkDetails)==null?void 0:B.status)+"#"+X.reason+"#bw:"+(U._getbwEstimator()/8/1024).toFixed(2)+"KB";if(X.details==="manifestParsingError")try{B+="#"+X.networkDetails.getResponseHeader("Content-Type")+"#"+X.networkDetails.getResponseHeader("Content-Length")}catch{}else if(X.details==="fragLoadError"||X.details==="fragLoadTimeOut")B+="#"+X.frag.url+"#retry:"+((he=X.errorAction)==null?void 0:he.retryCount);else if(X.details==="internalException")try{B+="#"+X.event+"#"+((ee=X.error)==null?void 0:ee.message)+"#"+((F=X.error)==null?void 0:F.stack)}catch{}X.details!=="internalException"&&(B+="#"+X.error);try{B+="#"+(U==null||(W=U.trackLogFragBuffer)==null?void 0:W.toString())}catch{}if(U.traceLog(m,B),U._options&&X.details!=u.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&U._seeking!=1&&X.fatal!=0){let Q=function(){U._liveErrorHandle&&clearTimeout(U._liveErrorHandle),q.stopLoad(),U.trigger(T.Player.LiveStreamStop),U._liveErrorHandle=setTimeout(be,500)};var D=Q;U._clearTimeout();var ee,G,F,W,Z=n.ErrorCode.LoadedMetadata,ae=_.get("Error_Play_Text"),_e=!1,le=null,he=!1,be=(X.details==u.ErrorDetails.MANIFEST_LOAD_ERROR||X.details==u.ErrorDetails.LEVEL_LOAD_ERROR?(_e=!0,ee=X.networkDetails,G=Number(ee.status),U.liveShiftSerivce&&U.liveShiftSerivce.isLiveShiftPlaying()&&G===404?(Z=n.ErrorCode.NotFoundSourceURL,ae=_.get("Error_Liveshift_M3U8_Not_Found_Text"),he=!0):G===404?(Z=n.ErrorCode.NotFoundSourceURL,ae=_.get("Error_Not_Found"),le=_.get("Tip_Err_Not_found")):G===403?(F=a.parseHttpHeaders(ee)["x-tengine-error"])&&-1<n.RegionBlockMessages.indexOf(F)?(Z=n.ErrorCode.RegionBlock,ae=_.get("Error_Region_Block_Text"),le=_.get("Tip_Err_Blocked")):(Z=n.ErrorCode.AuthKeyExpired,ae=_.get("Error_AuthKey_Text")):ae=G===0&&navigator.onLine?(Z=n.ErrorCode.RequestDataError,ae+"，"+_.get("Maybe_Cors_Error")):_.get("Error_Load_M3U8_Failed_Text")):X.details==u.ErrorDetails.MANIFEST_LOAD_TIMEOUT||X.details==u.ErrorDetails.LEVEL_LOAD_TIMEOUT?(_e=!0,ae=_.get("Error_Load_M3U8_Timeout_Text")):X.details==u.ErrorDetails.MANIFEST_PARSING_ERROR||X.details==u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(_e=!0,ae=_.get("Error_M3U8_Decode_Text")):X.type==u.ErrorTypes.NETWORK_ERROR?(Z=n.ErrorCode.NetworkError,ae=_.get("Error_Network_Text")):X.type!=u.ErrorTypes.MUX_ERROR&&X.type!=u.ErrorTypes.MEDIA_ERROR||(Z=n.ErrorCode.PlayDataDecode,ae=_.get("Error_TX_Decode_Text")),ae=ae+"("+X.details+")",function(){var ne;setTimeout(function(){U.trigger(T.Private.Play_Btn_Hide)}),U.checkOnline()&&(ne={mediaId:(ne=U.getOptions()||{}).vid||"",mediaAuth:ne.mediaAuth||"",error_code:Z,error_msg:X.details,diagnosis_info:le},U.logError(ne),ne.display_msg=ae,U.trigger(T.Player.Error,ne))}),te=U._options;if(te.isLive&&he)Q();else if(U._hls2){if(_e&&te.isLive)if(te.hlsOption.progressive){if(te.liveRetry>U._liveRetryCount)return U._liveRetryCount==0&&U.trigger(T.Player.OnM3u8Retry),U.trigger(T.Private.H5_Loading_Show),U._hls.stopLoad(),U._liveRetryCount++,void setTimeout(function(){U.traceLog(m,"retry when live error in progressive mode#"+U._liveRetryCount),U._hls.loadSource(te.source)},1e3*U._liveRetryCount)}else((W=X.errorAction)==null?void 0:W.retryCount)===0&&U.trigger(T.Player.OnM3u8Retry);X.fatal&&Q()}else te.isLive?te.liveRetry>U._liveRetryCount?(U._liveRetryCount==0&&U.trigger(T.Player.OnM3u8Retry),B=te.liveRetryInterval+te.liveRetryStep*U._liveRetryCount,U._liveRetryCount++,U.trigger(T.Private.H5_Loading_Show),setTimeout(function(){_e&&U._loadByUrlInner(U._options.source,0,!0)},1e3*B)):Q():(_e&&-1<[403,404].indexOf(G)||!U._reloadForVod())&&be()}})})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/object":44,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../base/event/eventtype":70}],107:[function(e,t,w){var y=e("../base/player"),u=e("./hlsinjector"),c=y.extend({init:function(f,h){h._native=!1,u.inject(this,c,y,h),y.call(this,f,h)}});t.exports=c},{"../base/player":93,"./hlsinjector":106}],108:[function(e,t,w){var y=["extraInfo"];function u(){return(u=Object.assign?Object.assign.bind():function(P){for(var g=1;g<arguments.length;g++){var E,C=arguments[g];for(E in C)Object.prototype.hasOwnProperty.call(C,E)&&(P[E]=C[E])}return P}).apply(this,arguments)}var c=typeof Promise>"u"?e("es6-promise").Promise:Promise,f=e("../../lib/io"),h=e("../../config"),n=e("../../lib/constants"),l=e("../../lang/index"),a=e("../base/event/eventtype"),s=e("../../lib/ua"),_=e("../base/event/eventtype"),T=e("../../lib/playerutil"),m="rtsinjector.js";function v(P){var g,E,C,R,A=this._options;A.rtsFallback&&window.Aliplayer?((g=A.rtsFallbackSource)||((E=String(A.rtsFallbackType||"").toUpperCase())&&!["HLS","FLV"].includes(E)&&(console.warn("invalid rtsFallbackType:",A.rtsFallbackType,", will use flv -> hls as fallback"),E=""),E=E||(T.isSupportFlv()?"FLV":"HLS"),C=A.source,R=!C.includes("@subvideo=no"),C=!C.includes("@subaudio=no"),C=(R={enableVideo:R,enableAudio:C}).enableVideo,R=R.enableAudio,E==="FLV"?(A.flvOption=A.flvOption||{},R||(A.flvOption.hasAudio=!1),C||(A.flvOption.hasVideo=!1)):E!=="HLS"||R||(A.mute=!0),g=function(H,I){var I=I==="FLV"?"flv":"m3u8",M=window.location.protocol,M=(-1<["http:","https:"].indexOf(M)?M:"https:")+"//",H=H.replace("artc://",M).replace("?","."+I+"?").replace("@subvideo=no","").replace("@subaudio=no","");return H.includes("?")||(H+="."+I),H.includes("auth_key")&&(H+="&rts_degrade=on"),H}(A.source,E)),this.trigger(a.Player.RtsFallback,{reason:P,fallbackUrl:g}),this.loadByUrl(g)):(this.trigger(a.Player.Error,P),this.logError(P))}function S(P){var g=this,E=(this.trigger(a.Private.H5_Loading_Show),this.trigger(a.Private.Play_Btn_Hide),this._options),C=new x(g,P);return g._rts.subscribe(E.source,u({retryTimes:E.rtsFallback?1:void 0,mediaTimeout:E.rtsLoadDataTimeout},E.rtsOption||{})).then(function(R){return C.preProcess(),g.tag.srcObject=null,R.play(g.tag),!0}).catch(function(R){return g.traceLog(m,"subError::"+JSON.stringify(R)),!1})}t.exports.inject=function(P,g,E,C,R,A){function L(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts())}P._Type=g,P._superType=E,P._superPt=E.prototype,P._disposed=!1,g.prototype._checkRtsReady=function(){if(this._rts==null)throw new Error("please invoke this method after ready event")},P._isRts=!0,P._rts=null,P._isLoadedRts=!1,P.bind_rtsErrorEventHandler=null,P.bind_rtsReconnectEventHandler=null,g.prototype.play=function(N){this.traceLog(m,"play::"+N),N&&this.trigger(a.Private.ManualPlay),this._checkRtsReady(),this._isManualPlay=N||!1;var I=this;if(this.paused())return I.trigger(a.Private.Cover_Hide),I.trigger(a.Private.Play_Btn_Hide),S.call(I).then(function(M){M&&I._startPlay()}),this},g.prototype.seek=function(N){},g.prototype.setSpeed=function(N){},g.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},Object.defineProperty(g.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return L},set:function(){return L}}),g.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("reconnect",this.bind_rtsReconnectEventHandler)),this._rts=null},g.prototype.initPlay=function(N){var I,M=this;function H(O,z){var J;O._disposed||(J=!O._rts,O._destroyRts(),O._rts=new AliRTS.createClient({customReporter:function(U){if(Number(U.msgid)===126){var q={};try{q=JSON.parse(U.args)}catch{q={}}q.tcid&&O._rts&&(O._rts.traceid=q.tcid,O.traceLog(m,"tcid::"+q.tcid),O.trigger(a.Player.RtsTraceId,{traceId:q.tcid,source:O._options.source}))}}}),O._checkRtsSupport(function(U){(function(q){var V=this._rtsErrorEventHandler.bind(this),V=(this.bind_rtsErrorEventHandler=V,q.on("onError",V),this._rtsReconnectEventHandler.bind(this));this.bind_rtsReconnectEventHandler=V,q.on("reconnect",V)}).call(O,O._rts),O._options.autoplay?S.call(O).then(function(q){q&&O._initPlayBehavior(z)}):O._initPlayBehavior(z),J&&O._executeReadyCallback()},function(U){console.log("[RTS isSupport error]",U);var q=null,V=null;switch(Number(U.errorCode)){case 10110:q=n.ErrorCode.RtsNotSupportWebRtc,V=l.get("Rts_Err_Not_Support_Webrtc");break;case 10111:q=n.ErrorCode.RtsBrowserNotSupport,V=l.get("Rts_Err_Browser_Not_Support");break;case 10112:q=n.ErrorCode.RtsBrowserVersionTooLow,V=l.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:q=n.ErrorCode.RtsNotSupportH264,V=l.get("Rts_Err_Not_Support_H264");break;case 10114:q=n.ErrorCode.RtsCreateOfferError,V=l.get("Rts_Err_Create_Offer_Error")}return v.call(O,{error_code:q,error_msg:V}),!1}))}this._isLoadedRts?H(this,N):(this.trigger(a.Private.H5_Loading_Show),I=performance.now(),(function(O,z,J){var q="",U=this._options,q="https://g.alicdn.com/apsara-media-box/imp-web-rts-sdk/"+(U.rtsVersion||h.rtsVersion)+"/aliyun-rts-sdk.js",V=(U.assetPrefix&&(q=U.assetPrefix+"/rts/aliyun-rts-sdk.js"),U.rtsSdkUrl&&(q=U.rtsSdkUrl),this);f.loadJS(q,function(){O.apply(V)},function(){J&&J()})}).call(M,function(){this.traceLog(m,"got js#"+parseInt(performance.now()-I)),this._isLoadedRts=!0,H(this,N)},this._options.debug,function(){var O={error_code:n.ErrorCode.ModuleLoadError,error_msg:"rts module load error."};M.trigger(a.Player.Error,O)}))},g.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?c.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(H){var I=H[0],M=H[1],H=H[2];return{rtt:I.rtt,bytesReceived:I.bytesReceived,framesDecoded:M.framesDecoded,packetsLost:(M.packetsLost||0)+(H.packetsLost||0),packetsReceived:(M.packetsReceived||0)+(H.packetsReceived||0),timestamp:I.timestamp||Date.now()}}).catch(function(N){return console.log("ERR in RTS getstats: ",N),{}}):c.resolve()},g.prototype._checkRtsSupport=function(N,I){this._options.skipRtsSupportCheck?N():this._rts.isSupport({isReceiveVideo:!0}).then(N).catch(I)},g.prototype._rtsErrorEventHandler=function(N){console.log("RTS Error:",N),N.extraInfo;var I=function(V,X){if(V==null)return{};for(var B,ee={},G=Object.keys(V),F=0;F<G.length;F++)B=G[F],0<=X.indexOf(B)||(ee[B]=V[B]);return ee}(N,y),M=(this.traceLog(m,"rtsError::"+JSON.stringify(I)),null),H=null,O=null;switch(Number(N.errorCode)){case 10201:return;case 10101:M=n.ErrorCode.RtsSignalError,H=l.get("Rts_Err_Http_Signal_Error");break;case 10114:M=n.ErrorCode.RtsCreateOfferError,H=l.get("Rts_Err_Create_Offer_Error");break;case 10202:M=n.ErrorCode.RtsPlayUrlError,H=l.get("Rts_Err_Play_Url_Error");break;case 10203:M=n.ErrorCode.RtsSubscribeNonthing,H=l.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var z=(z=N.extraInfo)==null?void 0:z.response;if((z==null?void 0:z.status)===403){var J=z.headers["x-tengine-error"];if(J&&-1<n.RegionBlockMessages.indexOf(J)){M=n.ErrorCode.RegionBlock,H=l.get("Error_Region_Block_Text"),O=l.get("Tip_Err_Blocked");break}M=n.ErrorCode.AuthKeyExpired,H=l.get("Error_AuthKey_Text")}else O=(z==null?void 0:z.status)===404?(M=n.ErrorCode.NotFoundSourceURL,H=l.get("Error_Not_Found"),l.get("Tip_Err_Not_found")):(M=n.ErrorCode.RtsHttpRequestFaild,H=l.get("Rts_Err_Http_Request_Failed"),l.get("Tip_Err_Rts_Http_Failed"));break;case 10206:M=n.ErrorCode.RtsHttpAnswerFaild,H=l.get("Rts_Err_Http_Answer_Failed");break;case 10207:M=n.ErrorCode.RtsPlayFailedError;try{var U,q=(U=N.message.match(/after (\d+) ms/))==null?void 0:U[1]}catch{}H=l.get("Rts_Err_Play_Failed")+", "+(q?q*N.extraInfo.retryTimes/1e3+l.get("Rts_Err_No_Data_For"):N.message);break;case 12e3:M=n.ErrorCode.RtsPeerConnectionUnknown,H=l.get("Rts_Err_PeerConnection_Unknown")}I={error_code:M,error_msg:H,diagnosis_info:O,tcid:this._rts.traceid},(function(V){var X=this;X.pause(),setTimeout(function(){X.trigger(a.Private.Play_Btn_Hide)}),X.checkOnline()&&v.call(this,V)}).call(this,I)},g.prototype._rtsReconnectEventHandler=function(N){var I=this;this.traceLog(m,"rts auto reconnect::"+N.retryTimes+"#"+JSON.stringify(N.reason)),this.waiting=!0,this._TimeUpdateStamp=0,this.trigger(a.Private.H5_Loading_Show),this.trigger(a.Private.Play_Btn_Hide),this._options.autoplay&&this.one(_.Player.AutoPlayPrevented,function(){I.trigger(a.Private.Play_Btn_Hide),I.trigger(a.Private.H5_Loading_Show)}),N.retryTimes===1&&this.trigger(a.Player.OnM3u8Retry),this.trigger(a.Private.Retry,{type:"rts",source:this._options.source})}};var x=function(){function P(g,E){(this.isRetry=E)&&(this.isApple=s.IS_IOS||s.IS_SAFARI,this.player=g)}return P.prototype.preProcess=function(){var g,E,C;this.isRetry&&this.isApple&&(g=this.player.getVolume(),E=this.player.muted(),g)&&!E&&((C=this.player.tag).volume=0,this.player.one("canplay",function(){C.volume=g}))},P}()},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../base/event/eventtype":70,"es6-promise":8}],109:[function(e,t,w){var y=e("../base/player"),u=e("./rtsinjector"),c=y.extend({init:function(f,h){h.isLive&&(h._native=!1,u.inject(this,c,y,h),y.call(this,f,h))}});t.exports=c},{"../base/player":93,"./rtsinjector":108}],110:[function(u,t,w){var y=u("../../lib/constants"),u=u("../../lib/oo").extend({init:function(c){this.player=c,this.tickhandle=null}});u.prototype.tick=function(c,f){var h=this;this.tickhandle=setTimeout(function(){h.player&&h.player.trigger(y.AuthKeyExpiredEvent),f&&f()},1e3*c)},u.prototype.clearTick=function(c){this.tickhandle&&clearTimeout(this.tickhandle)},t.exports=u},{"../../lib/constants":30,"../../lib/oo":45}],111:[function(e,t,w){function y(x,P,g){var C=h.randomUUID(),E="https://mts."+x.domainRegion+".aliyuncs.com/?",C={AccessKeyId:x.accessId,Action:"GetLicense",MediaId:x.vid,LicenseUrl:E,data:x.data,SecurityToken:x.stsToken,Format:"JSON",Type:x.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:C};x.header&&(C.Header=x.header),E+="Signature="+h.AliyunEncodeURI(h.makeChangeSiga(C,x.accessSecret,"POST")),x=h.makeUTF8sort(C,"=","&"),u.post(E,x,function(R){R?(R=JSON.parse(R),P&&(R=R.License,P(R))):g&&g(n.createError("MPS获取License失败"))},function(R){if(g){var A={Code:"",Message:s.get("Error_MTS_Fetch_Urls_Text")};try{A=JSON.parse(R)}catch{}g({Code:f.ErrorCode.ServerAPIError,Message:A.Code+"|"+A.Message,sri:A.RequestId||""})}})}var u=e("../../lib/io"),c=(e("../../lib/ua"),e("../../lib/bufferbase64")),f=e("../../lib/constants"),h=e("./signature"),n=e("./util"),l=e("../../lib/url"),a=e("../../lib/playerutil"),s=e("../../lang/index"),_=e("../base/event/eventtype");function T(x){window.console.error("The license request failed.")}function m(x){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",x)}function v(x){window.console.log("Decryption key was added to session.")}function S(x,P,g){g.addEventListener(x,function(){P(arguments[0])},!1)}t.exports.requestLicenseKey=function(x){var P=x;return P._options.vid&&(P.__vid=P._options.vid),function(g,E){var C,R,A=P._options,L=P._getDRMEncryptItem();L&&(C={vid:P.__vid,accessId:A.accId,accessSecret:A.accSecret,stsToken:A.stsToken,domainRegion:A.domainRegion,authInfo:A.authInfo,encryptionType:L.encryptionType},L.encryptionType==f.EncryptionType.Widevine?C.data=c.encode(g.message):L.encryptionType==f.EncryptionType.PlayReady&&(A=c.unpackPlayReady(g.message),C.data=A.changange,A.header)&&(C.header=JSON.stringify(A.header)),console.log(C.data),g=P.__licenseKeys,R=P.__vid+L.Url,g&&g[R],y(C,function(N){P.__licenseKeys||(P.__licenseKeys={}),10<C.data.length&&(P.__licenseKeys[R]=N),N=c.decode(N),E(N)},function(N){N={mediaId:P.__vid,error_code:N.Code,error_msg:N.Message},P.logError(N),P.trigger("error",N)}))}},t.exports.loadCertificate=function(N,L){var g,E,C,R=new XMLHttpRequest,A=(R.addEventListener("load",(function(I,O){var H,O=O.target;if(O.status!==200){var J=f.ErrorCode.DrmLicenseRequestFailed,z=s.get("Error_Drm_License_Request_Failed"),J={mediaId:this._options.vid||"",error_code:J,error_msg:O.response};player.logError(J),J.display_msg=z,player.trigger(_.Player.Error,J)}else{try{H=this._options.isLive?JSON.parse(O.response).Response.B64ServCert:JSON.parse(JSON.parse(O.response).DRMCertInfo).b64ServCert}catch(U){console.log(U)}z=h.base64DecodeUint8Array(H),J=(function(U,X){var V=X.target,X=X.initData,B=h.arrayToString(X).split("skd://")[1].split("?")[0],ee=h.stringToArray(B);if(X=function(le,F,W){typeof F=="string"&&(F=stringToArray(F));var Z=0,ae=new ArrayBuffer(le.byteLength+4+F.byteLength+4+W.byteLength),_e=new DataView(ae),le=(new Uint8Array(ae,0,le.byteLength).set(le),Z+=le.byteLength,_e.setUint32(Z,F.byteLength,!0),Z+=4,new Uint16Array(ae,Z,F.length));return le.set(F),Z+=le.byteLength,_e.setUint32(Z,W.byteLength,!0),Z+=4,new Uint8Array(ae,Z,W.byteLength).set(W),new Uint8Array(ae,0,ae.byteLength)}(X,ee,U),V.webkitKeys||(function(){{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"}}(),V.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))),!V.webkitKeys)throw"Could not create MediaKeys";if(ee=V.webkitKeys.createSession("video/mp4",X),!ee)throw"Could not create key session";ee.contentId=B,S("webkitkeymessage",(function(ae){var F=this,W=ae.target,be=ae.message,Z=new XMLHttpRequest,ae=(ae.sessionId,Z.responseType="text",Z.session=W,Z.addEventListener("load",(function(D){D=D.target,Q=this._options.isLive?JSON.parse(D.response).Response.B64License:JSON.parse(JSON.parse(D.response).License).b64License;var Q=h.base64DecodeUint8Array(Q),Q=h.Uint8ArrayToString(Q);Q.substr(0,5)==="<ckc>"&&Q.substr(-6)==="</ckc>"&&(Q=Q.slice(5,-6)),Q=h.base64DecodeUint8Array(Q),D.session.update(Q)}).bind(this),!1),Z.addEventListener("error",T,!1),btoa("spc="+h.base64EncodeUint8Array(be)+"&assetId="+encodeURIComponent(W.contentId))),_e={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:h.ISODateString(new Date),SignatureNonce:h.randomUUID(),AccessKeyId:F._options.accessKeyId,SecurityToken:F._options.securityToken,CertId:F._options.certId};F._options.isLive?(_e.RegionId=F._options.region,_e.Action="DescribeDRMLicense",_e.Version="2016-11-01",_e.CdmData=ae,_e.Type="fairplay",_e.Domain=l.parseUrl(F._options.source).hostname):(_e.region=F._options.region,_e.Action="GetDRMLicense",_e.Version="2017-03-21",_e.VideoId=F._options.vid,_e.CDMData=ae,_e.DRMType="FairPlay");var le,he,be="Signature="+h.AliyunEncodeURI(h.makeChangeSiga(_e,F._options.accessKeySecret,"POST"));W=F._options.isLive?"https://"+a.getLiveHostByRegion(F._options.region)+"/?"+be:"https://vod."+F._options.region+".aliyuncs.com/?"+be;for(he in Z.open("POST",W,!0),Z.setRequestHeader("Content-type","application/x-www-form-urlencoded"),_e){var te;_e.hasOwnProperty(he)&&(te=_e[he],le=le?le+"&"+h.AliyunEncodeURI(he)+"="+h.AliyunEncodeURI(te):h.AliyunEncodeURI(he)+"="+h.AliyunEncodeURI(te))}Z.send(le)}).bind(this),ee),S("webkitkeyadded",v,ee),S("webkitkeyerror",m,ee)}).bind(this,z),O=(this._fairPlayHandlers.onNeedKey=J,(function(U){window.console.error("A video playback error occurred")}).bind(this)),this._fairPlayHandlers.onError=O,this.tag.addEventListener("webkitneedkey",J,!1),this.tag.addEventListener("error",O,!1),this.tag.src=this._options.source}I&&I()}).bind(N,L),!1),R.addEventListener("error",(function(I){window.console.error("Failed to retrieve the server certificate.")}).bind(N),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:h.ISODateString(new Date),SignatureNonce:h.randomUUID(),AccessKeyId:N._options.accessKeyId,SecurityToken:N._options.securityToken,CertId:N._options.certId}),L=(N._options.isLive?(A.RegionId=N._options.region,A.Action="DescribeDRMCertificate",A.Version="2016-11-01"):(A.region=N._options.region,A.Action="GetDRMCertInfo",A.Version="2017-03-21",A.VideoId=N._options.vid),"Signature="+h.AliyunEncodeURI(h.makeChangeSiga(A,N._options.accessKeySecret,"POST"))),N=N._options.isLive?"https://"+a.getLiveHostByRegion(N._options.region)+"/?"+L:"https://vod."+N._options.region+".aliyuncs.com/?"+L;for(g in R.open("POST",N,!0),R.setRequestHeader("Content-type","application/x-www-form-urlencoded"),A)A.hasOwnProperty(g)&&(E=A[g],C=C?C+"&"+h.AliyunEncodeURI(g)+"="+h.AliyunEncodeURI(E):h.AliyunEncodeURI(g)+"="+h.AliyunEncodeURI(E),console.log(E));R.send(C)},t.exports.getRequestUrl=function(g,P){var g={AccessKeyId:P._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:h.ISODateString(new Date),SignatureNonce:h.randomUUID(),SecurityToken:P._options.securityToken,RegionId:P._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:g,Domain:l.parseUrl(P._options.source).hostname},E=(P._options.widevineCertId&&(g.CertId=P._options.widevineCertId),"Signature="+h.AliyunEncodeURI(h.makeChangeSiga(g,P._options.accessKeySecret,"POST")));return{url:"https://"+a.getLiveHostByRegion(P._options.region)+"/?"+E,data:h.makeUTF8sort(g,"=","&"),jsonData:h.makeUTF8sort(g,"=","&","json")}},t.exports.postData=function(E,P){var g=h.randomUUID(),g={AccessKeyId:P._options.accessKeyId,VideoId:P._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:g,SecurityToken:P._options.securityToken,region:P._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:E},E=(P._options.widevineCertId&&(g.CertId=P._options.widevineCertId),"Signature="+h.AliyunEncodeURI(h.makeChangeSiga(g,P._options.accessKeySecret,"POST")));return{url:"https://vod."+P._options.region+".aliyuncs.com/?"+E,data:h.makeUTF8sort(g,"=","&"),jsonData:h.makeUTF8sort(g,"=","&","json")}},t.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":25,"../../lib/bufferbase64":27,"../../lib/constants":30,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/url":51,"../base/event/eventtype":70,"./signature":117,"./util":119}],112:[function(e,t,w){var y=e("../../lib/io"),u=e("../../lib/constants"),c=e("../../lib/data"),f=e("./util");t.exports.getDataByAuthInfo=function(h,n,l,a){h={playAuth:h.playAuth,requestId:h.requestId},y.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+function(s){return s.requestId=c.guid(),Object.keys(s).reduce(function(_,T){return _+(_?"&":"?")+T+"="+encodeURIComponent(s[T])},"")}(h),function(s){if(s)if(s=JSON.parse(s),s.httpStatusCode!==200)a&&a({Code:u.ErrorCode.ServerAPIError,Message:s.httpStatusCode+"|"+s.code,sri:s.requestId});else{for(var _=s.data.PlayInfoList,T=[],m=_.length-1;0<=m;--m)_[m].Definition==="AUTO"&&(T=[_.splice(m,1)[0]]);var v,S=null;(S=(S=T.length===0?f.objectPlayerMessageSort(_,n):f.objectPlayerMessageSort(T)).map(function(x){return x.format==="m3u8"&&(x.Url=x.Url+"&_ext=.m3u8"),x}))&&l&&(v=s.data.VideoBase||{},l({videoId:v.VideoId,userId:v.UserId,requestId:s.requestId,urls:S,encryptUrlArr:[],thumbnailUrl:"",coverUrl:v.CoverURL,playInfoAry:_,textTracks:s.data.SubtitlesList}))}else a&&a(f.createError("轻SaaS服务获取数据失败"))},function(s){s&&typeof s=="string"&&-1<s.indexOf("Invalid CORS request")?a&&a({Code:u.ErrorCode.ServerAPIError,Message:s}):a&&a(f.createError("轻SaaS服务获取数据失败"))})}},{"../../lib/constants":30,"../../lib/data":32,"../../lib/io":42,"./util":119}],113:[function(f,t,w){var y=f("./saasplayer"),u=f("./light"),c=f("../base/event/eventtype"),f=y.extend({init:function(h,n){y.call(this,h,n),this.service=u,this.loadByLightSaas()}});f.prototype.loadByLightSaas=function(h){var n=this._options,l={playAuth:n.mediaAuth,defaultDefinition:n.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:n.mediaAuth}}),this.loadData(l,h)},f.prototype.replayByMediaAuth=function(h){this.trigger(c.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(c.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=h,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},t.exports=f},{"../base/event/eventtype":70,"./light":112,"./saasplayer":116}],114:[function(e,t,w){var y=e("../../lib/io"),u=e("../../lib/constants"),c=e("./signature"),f=e("./util"),h=e("../../lang/index"),n=e("../../lib/ua"),l=function(s,_){for(var T="",m=(s.sort(function(g,E){return g=parseInt(g.bitrate),E=parseInt(E.bitrate),_=="desc"?E<g?-1:g<E?1:void 0:g<E?-1:E<g?1:void 0}),s.length),v=0;v<m;v++){var S=s[v],x=u.QualityLevels[S.definition],P="",P=x===void 0?S.bitrate:T==x?x+S.bitrate:x;S.desc=P,T=x}},a=function(s,_){for(var T="",m=(s.sort(function(g,E){return g=parseInt(g.width),E=parseInt(E.width),_=="desc"?E<g?-1:g<E?1:void 0:g<E?-1:E<g?1:void 0}),s.length),v=0;v<m;v++){var S=s[v],x=u.QualityLevels[S.definition],P="",P=x===void 0?"":T==x?x+S.height:x;S.desc=P,T=x}};t.exports.getDataByAuthInfo=function(S,_,T,m){c.returnUTCDate(),c.randomUUID();var v=c.randomUUID(),v={AccessKeyId:S.accessId,Action:"PlayInfo",MediaId:S.vid,Formats:S.format,AuthInfo:S.authInfo,AuthTimeout:S.authTimeout||u.AuthKeyExpired,IncludeSnapshotList:S.includeSnapshotList,Rand:S.rand,SecurityToken:S.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:n.IS_CHROME?"Chrome":n.IS_EDGE?"Edge":n.IS_IE11?"IE":n.IS_SAFARI?"Safari":n.IS_FIREFOX?"Firefox":"",SignatureNonce:v},v=(S.hlsUriToken&&(S.MtsHlsUriToken=S.hlsUriToken),S.playConfig&&(v.PlayConfig=JSON.stringify(S.playConfig)),c.makeUTF8sort(v,"=","&")+"&Signature="+c.AliyunEncodeURI(c.makeChangeSiga(v,S.accessSecret))),S="https://mts."+S.domainRegion+".aliyuncs.com/?"+v;y.get(S,function(x){var P,g,E;x?(P=(x=JSON.parse(x)).PlayInfoList.PlayInfo,g="",(E=x.SnapshotList?x.SnapshotList.Snapshot:[])&&0<E.length&&(g=E[0].Url),E=function(C,R){for(var A=[],L=[],N=[],I=[],M=C.length-1;0<=M;M--){var H=C[M];(H.format=="mp4"?L:H.format=="mp3"?N:H.format=="m3u8"?A:I).push(H)}return 0<N.length?(l(N,R),N):0<L.length?(a(L,R),L):0<A.length?(a(A,R),A):(a(I,R),I)}(P,_),T&&T({requestId:x.RequestId,urls:E,thumbnailUrl:g})):m&&m(f.createError("MPS获取取数失败"))},function(x){if(m){var P={Code:"",Message:h.get("Error_MTS_Fetch_Urls_Text")};try{P=JSON.parse(x)}catch{}m({Code:u.ErrorCode.ServerAPIError,Message:P.Code+"|"+P.Message,sri:P.RequestId||""})}})}},{"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/ua":50,"./signature":117,"./util":119}],115:[function(c,t,w){var y=c("./saasplayer"),u=(c("../../lib/constants"),c("./mts")),c=y.extend({init:function(f,h){y.call(this,f,h),this.service=u,this.loadByMts()}});c.prototype.loadByMts=function(f){var h={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(h,f)},c.prototype.replayByVidAndAuthInfo=function(f,h,n,l,a,s){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(f,h,n,l,a,s)},c.prototype.reloadNewVideoInfo=function(f,h,n,l,a,s){if(this.trigger("error_hide"),this._options.source="",f&&(this._options.vid=f,this._options.accId=h,this._options.accessSecret=n,this._options.stsToken=l,this._options.domainRegion=s,this._options.authInfo=a),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("需要提供vid、accId、accessSecret、stsToken、domainRegion和authInfo参数");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:f}}),this.loadByMts(!0)},t.exports=c},{"../../lib/constants":30,"./mts":114,"./saasplayer":116}],116:[function(e,t,w){var y=e("../base/player"),u=e("../audio/audioplayer"),c=(e("../../lib/event"),e("../../lib/io")),f=e("../../lib/constants"),h=e("./signature"),n=e("./authkeyexpiredhandle"),l=e("../hls/hlsinjector"),a=e("../flv/flvinjector"),s=e("../drm/drminjector"),_=e("../sw/swinjector"),T=(e("../../lib/cookie"),e("../../lang/index")),m=e("../../lib/ua"),v=e("../../config"),S=e("../../lib/playerutil"),x=e("../base/event/eventtype"),P=e("../../protected/anti-injector-protected"),g=y.extend({init:function(R,A){m.IS_PC&&P(A,this),this._authKeyExpiredHandle=new n(this),y.prototype._videoCreateEl||(y.prototype._videoCreateEl=y.prototype.createEl),A.format=="mp3"?(A.height="auto",A.mediaType="audio",y.prototype.createEl=u.prototype.createEl,u.call(this,R,A),g.prototype.play=y.prototype.play,g.prototype.pause=y.prototype.pause,g.prototype.initPlay=y.prototype.initPlay,g.prototype.replay=y.prototype.replay,g.prototype.stop=y.prototype.stop,g.prototype.seek=y.prototype.seek):(y.prototype.createEl=y.prototype._videoCreateEl,A._native=!1,y.call(this,R,A))}});function E(){var R,A=!1;return Number(this._options.encryptType)!==1?(R={error_code:f.ErrorCode.InvalidParameter,error_msg:T.get("Error_Not_Support_encrypt_Text")},this.logError(R),this.trigger("error",R),!0):A}function C(){var R=S.checkSecuritSupport();if(R)return this._mtsError_message(this,{Code:f.ErrorCode.EncrptyVideoNotSupport,Message:R,display_msg:R},""),!0}g.prototype.loadData=function(R,A){var L,N,I;this._options.encryptType!=1?this._loadData(R,A):(L="aliplayer-vod-min.js",N="",N=v.domain?"https://"+v.domain+v.path+v.h5Version+"/hls/"+L:"/build/hls/"+L,this.trigger(x.Private.Timeline,{name:"mod_rand_s",ts:performance.now()}),I=this,c.loadJS(N,function(){I.trigger(x.Private.Timeline,{name:"mod_rand_f",ts:performance.now()}),I._loadData(R,A)}))},g.prototype._loadData=function(R,A){var L,N=new Date().getTime(),I=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),R.format!=""&&R.format!="m3u8"||this._options.encryptType!=1?R.rand=h.randomUUID():(L=_rtsneg(I._vdnct6f===3?R.vid:void 0),R.rand=_dnaRekam(L,I._vdnct6f)),this._options.thumbnailUrl&&(R.thumbnailUrl=this._options.thumbnailUrl),this.trigger(x.Private.H5_Loading_Show),this.service.getDataByAuthInfo.call(this,R,this._options.qualitySort,function(M){if(I.trigger(x.Private.PlayInfoLoaded,M),M.userId&&(I._options.from=M.userId),M.videoId&&I._monitor&&I._monitor.updateLightSaasVideoId(M.videoId),M.textTracks&&M.textTracks.length&&(H=S.unqiueTextTracks(M.textTracks),I.trigger(x.Private.TextTrackFounded,{from:"saas",textTracks:H})),M.urls&&M.urls.length==0)I._mtsError_message(I,{Code:f.ErrorCode.URLsIsEmpty,Message:T.get("Error_Vod_URL_Is_Empty_Text")+(R.format?"(format:"+R.format+")":"")},"");else{I.log("COMPLETEFETCHDATA",{cost:new Date().getTime()-N,mi:JSON.stringify(function(X){for(var B=[],ee=0;ee<X.length;ee++)B.push({width:X[ee].width,height:X[ee].height,definition:X[ee].definition,format:X[ee].format,encryptionType:X[ee].encryptionType,duration:X[ee].duration});return B}(M.urls))}),I._urls=M.urls,I._currentPlayIndex=S.findSelectedStreamLevel(I._urls,R.defaultDefinition);var H=(O=M.urls[I._currentPlayIndex]).Url;if(I._vodDuration=O.duration||0,I._options.source=H,I.encType="",I.trigger(x.Private.PREPARE,O.definition),I.UI.cover&&M.coverUrl&&!I._options.cover&&I.setCover(M.coverUrl),S.isHls(H))if(M&&M.playInfoAry&&0<M.playInfoAry.length&&M.playInfoAry[0].EncryptType=="Widevine-FairPlay")s.inject(I,g,y.prototype,I._options);else{if(M.encryptUrlArr&&0<M.encryptUrlArr.length){for(var O,z=[],J=!1,U=0;U<M.encryptUrlArr.length;++U)if((O=M.encryptUrlArr[U]).encryptionType===f.EncryptionType.Private){if(E.call(I))return;if(J||C.call(I))return void(J=!0);var q=_yekced(L,O.rand,O.plaintext);z.push({url:O.Url,secData:q})}}else if(z="",O.encryptionType==f.EncryptionType.Private){if(E.call(I)||C.call(I))return;I.encType=O.encryptionType,z=_yekced(L,O.rand,O.plaintext)}var V=m.IS_IOS&&parseFloat(m.IOS_FULL_VERSION)<17.1;(z&&(I._options.useSW||V)?_:(I._hls&&(I._hls.destroy(),I._hls=null),l)).inject(I,g,y,I._options,z)}else S.isFlv(H)?a.inject(I,g,y,I._options):S.isDash(H)?(console.log("isDash"),s.inject(I,g,y,I._options)):I._player._executeReadyCallback();I._authKeyExpiredHandle.tick(f.AuthKeyRefreshExpired),I.trigger(x.Private.SourceLoaded,O),I.initPlay(A),I.trigger(x.Private.ChangeURL,{from:"saas"}),M.thumbnailUrl&&I._thumbnailService.get(M.thumbnailUrl),V=I._player._isFlv,H=-1<I._player.getOptions().source.indexOf("mp4"),I._player.encType==1||V||H||(m.IS_IOS||m.IS_MAC_SAFARI||m.IS_X5||m.IS_EDGE)&&(I._player._executeReadyCallback(),I._urls.length)&&I.trigger(x.Private.SourceLoaded,O)}},function(M){var H;-1<((H=M.Message)==null?void 0:H.indexOf('The specified parameter "Rand" is not valid'))&&E.call(I)||I._mtsError_message(I,M,"")})},g.prototype._changeStream=function(R,A){this._urls.length>R&&(this._loadByUrlInner(this._urls[R].Url,this.getCurrentTime(),!0),this._currentPlayIndex=R,this.trigger(x.Private.QualityChange,A||T.get("Quality_Change_Fail_Switch_Text")))},g.prototype._getLowerQualityLevel=function(){if(this._urls.length!=0&&this._currentPlayIndex!=-1){if(this.options().qualitySort=="asc"){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1}}return""},g.prototype._mtsError_message=function(R,A,L){R._serverRequestId=A.sri,R.trigger(x.Private.H5_Loading_Hide),A.Code=A.Code||A.code,A.Message=A.Message||A.message;var N=A.Code||"OTHER_ERR_CODE",I=A.Message||"OTHER_ERR_MSG",M=(f.ErrorCode.ServerAPIError,A.display_msg||""),H=(-1<I.indexOf("InvalidParameter.Rand")||-1<I.indexOf('"Rand" is not valid.')?(f.ErrorCode.EncrptyVideoNotSupport,M=T.get("Error_Encrypt_Fetch_Failed_Text")):-1<I.indexOf("SecurityToken.Expired")?(f.ErrorCode.AuthKeyExpired,M=T.get("Error_Playauth_Expired_Text")):-1<I.indexOf("InvalidVideo.NoneStream")?(f.ErrorCode.URLsIsEmpty,M=T.get("Error_Fetch_NotStream")+"("+R._options.format+"|"+R._options.definition+")"):-1<I.indexOf("DataNotFound")&&(f.ErrorCode.MediaNotFound,M=T.get("Error_Fetch_Media_Not_Found")),R._options.vid||""),H=(R._options.from,{mediaId:H,mediaAuth:R._options.mediaAuth||"",error_code:N,error_msg:I});A.sri&&(H.sri=A.sri),R.logError(H),H.display_msg=M&&M===I?M:(M||T.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+I,R.trigger("error",H),console.log("PrismPlayer Error: "+L+"! error_msg :"+I+";")},t.exports=g},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/cookie":31,"../../lib/event":35,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/ua":50,"../../protected/anti-injector-protected":134,"../audio/audioplayer":68,"../base/event/eventtype":70,"../base/player":93,"../drm/drminjector":101,"../flv/flvinjector":104,"../hls/hlsinjector":106,"../sw/swinjector":132,"./authkeyexpiredhandle":110,"./signature":117}],117:[function(e,t,w){var y=e("crypto-js/hmac-sha1"),u=e("crypto-js/enc-base64"),c=e("crypto-js/enc-utf8");t.exports.randomUUID=function(){for(var f=[],h="0123456789abcdef",n=0;n<36;n++)f[n]=h.substr(Math.floor(16*Math.random()),1);return f[14]="4",f[19]=h.substr(3&f[19]|8,1),f[8]=f[13]=f[18]=f[23]="-",f.join("")},t.exports.returnUTCDate=function(){var _=new Date,f=_.getUTCFullYear(),h=_.getUTCMonth(),n=_.getUTCDate(),l=_.getUTCHours(),a=_.getUTCMinutes(),s=_.getUTCSeconds(),_=_.getUTCMilliseconds();return Date.UTC(f,h,n,l,a,s,_)},t.exports.AliyunEncodeURI=function(f){return f=encodeURIComponent(f),f=(f=(f=f.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},t.exports.makesort=function(f,h,n){if(!f)throw new Error("PrismPlayer Error: vid should not be null!");var l=[];for(T in f)l.push(T);for(var a=l.sort(),s="",_=a.length,T=0;T<_;T++)s==""?s=a[T]+h+f[a[T]]:s+=n+a[T]+h+f[a[T]];return s},t.exports.makeUTF8sort=function(f,h,n){if(!f)throw new Error("PrismPlayer Error: vid should not be null!");var l=[];for(T in f)l.push(T);for(var a=l.sort(),s="",_=a.length,T=0;T<_;T++){var m=t.exports.AliyunEncodeURI(a[T]),v=t.exports.AliyunEncodeURI(f[a[T]]);s==""?s=m+h+v:s+=n+m+h+v}return s},t.exports.makeChangeSiga=function(f,h,n){if(f)return u.stringify(y((n=n||"GET")+"&"+t.exports.AliyunEncodeURI("/")+"&"+t.exports.AliyunEncodeURI(t.exports.makeUTF8sort(f,"=","&")),h+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},t.exports.ISODateString=function(f){function h(n){return n<10?"0"+n:n}return f.getUTCFullYear()+"-"+h(f.getUTCMonth()+1)+"-"+h(f.getUTCDate())+"T"+h(f.getUTCHours())+":"+h(f.getUTCMinutes())+":"+h(f.getUTCSeconds())+"Z"},t.exports.encPlayAuth=function(f){if(f=c.stringify(u.parse(f)))return JSON.parse(f);throw new Error("playuth参数解析为空")},t.exports.encRsa=function(){},t.exports.stringToArray=function(f){for(var h=new ArrayBuffer(2*f.length),n=new Uint16Array(h),l=0,a=f.length;l<a;l++)n[l]=f.charCodeAt(l);return n},t.exports.Uint8ArrayToString=function(f){for(var h="",n=0;n<f.length;n++)h+=String.fromCharCode(f[n]);return h},t.exports.arrayToString=function(f){return f=new Uint16Array(f.buffer),String.fromCharCode.apply(null,f)},t.exports.base64DecodeUint8Array=function(f){var h=window.atob(f),n=h.length,l=new Uint8Array(new ArrayBuffer(n));for(i=0;i<n;i++)l[i]=h.charCodeAt(i);return l},t.exports.base64EncodeUint8Array=function(f){for(var h,n,l,a,s,_,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="",v=0;v<f.length;)l=(h=f[v++])>>2,a=(3&h)<<4|(h=v<f.length?f[v++]:Number.NaN)>>4,s=(15&h)<<2|(n=v<f.length?f[v++]:Number.NaN)>>6,_=63&n,isNaN(h)?s=_=64:isNaN(n)&&(_=64),m+=T.charAt(l)+T.charAt(a)+T.charAt(s)+T.charAt(_);return m}},{"crypto-js/enc-base64":3,"crypto-js/enc-utf8":4,"crypto-js/hmac-sha1":5}],118:[function(e,t,w){var y=e("../../lib/io"),u=e("../../lib/constants"),c=e("./signature"),f=e("./util"),h=e("../../lang/index");t.exports.getPlayAuth=function(T,l,a,s){c.randomUUID();var _=c.randomUUID(),_={AccessKeyId:T.accessKeyId,Action:"GetVideoPlayAuth",VideoId:T.vid,AuthTimeout:u.AuthInfoExpired,SecurityToken:T.securityToken,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:_},_=c.makeUTF8sort(_,"=","&")+"&Signature="+c.AliyunEncodeURI(c.makeChangeSiga(_,T.accessKeySecret)),T="https://vod."+T.region+".aliyuncs.com/?"+_;y.get(T,function(m){m?(m=JSON.parse(m),l&&l(m.PlayAuth)):a&&a(f.createError("获取视频播放凭证失败"))},function(m){if(a){var v={Code:"",Message:h.get("Fetch_Playauth_Error")};try{(v=JSON.parse(m)).Code}catch{}a({Code:u.ErrorCode.ServerAPIError,Message:v.Code+"|"+v.Message,sri:v.RequestId,display_msg:h.get("Fetch_Playauth_Error",s)})}})}},{"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"./signature":117,"./util":119}],119:[function(e,t,w){var y=e("../../lib/constants");t.exports.createError=function(u,c){return{requestId:"",code:c||"",message:u}},t.exports.getItem=function(u){var c={};return c.width=u.Width,c.height=u.Height,c.definition=u.Definition,c.Url=u.PlayURL,c.format=u.Format,c.desc=y.QualityLevels[c.definition],c.encryptionType=y.VodEncryptionType[u.EncryptType],c.plaintext=u.Plaintext,c.rand=u.Rand,c.encrypt=u.Encrypt,c.duration=u.Duration,c.bitrate=u.Bitrate,c},t.exports.objectPlayerMessageSort=function(u,c){for(var f=[],h=[],n=[],l=[],a=u.length-1;0<=a;a--){var s=u[a],s=t.exports.getItem(s);(s.format=="mp4"?h:s.format=="mp3"?n:s.format=="m3u8"?f:l).push(s)}var _=[],_=0<n.length?n:0<h.length?h:0<f.length?f:l;return c=="asc"&&_.reverse(),_}},{"../../lib/constants":30}],120:[function(e,t,w){var y=e("../../lib/io"),u=e("../../lib/constants"),c=e("./signature"),f=e("./util"),h=e("../../config"),n=e("../../lang/index"),l=e("../base/event/eventtype"),a="saas/vod.js";t.exports.getDataByAuthInfo=function(s,_,T,m){c.randomUUID();var v=c.randomUUID(),v={AccessKeyId:s.accessId,Action:"GetPlayInfo",VideoId:s.vid,Formats:s.format,AuthTimeout:s.authTimeout||u.AuthKeyExpired,Rand:s.rand,SecurityToken:s.stsToken,StreamType:s.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:v,PlayerVersion:h.h5Version,Channel:"HTML5"},v=(s.definition==="AUTO"?v.ResultType="Multiple":s.definition&&(v.Definition=s.definition),s.authInfo&&(v.AuthInfo=s.authInfo),s.outputType&&(v.OutputType=s.outputType),s.playConfig&&(v.PlayConfig=JSON.stringify(s.playConfig)),s.reAuthInfo&&(v.ReAuthInfo=JSON.stringify(s.reAuthInfo)),c.makeUTF8sort(v,"=","&")+"&Signature="+c.AliyunEncodeURI(c.makeChangeSiga(v,s.accessSecret))),v="https://vod."+s.domainRegion+".aliyuncs.com/?"+v,S=(this.trigger(l.Private.Timeline,{name:"vod_s",ts:performance.now()}),this);y.get.call(this,v,function(x){if(S.trigger(l.Private.Timeline,{name:"vod_f",ts:performance.now()}),S.traceLog(a,"Vod request ok."+x),x){for(var x=JSON.parse(x),P="",g=x.VideoBase.ThumbnailList,E=(g&&g.Thumbnail&&0<g.Thumbnail.length?P=g.Thumbnail[0].URL:s.thumbnailUrl&&(P=String(s.thumbnailUrl)),x.PlayInfoList.PlayInfo),C=[],R=[],A=E.length-1;0<=A;--A)E[A].Definition==="AUTO"?(S.getOptions().isVBR=!0,C=[E.splice(A,1)[0]]):E[A].Encrypt===1&&R.push(E[A]);g=null,R=C.length===0?(g=f.objectPlayerMessageSort(E,_),[]):(g=f.objectPlayerMessageSort(C),f.objectPlayerMessageSort(R)),g&&T&&T({requestId:x.RequestId,urls:g,encryptUrlArr:R,thumbnailUrl:P,coverUrl:x.VideoBase.CoverURL,playInfoAry:E})}else m&&m(f.createError("点播服务获取数据失败"))},function(x){if(S.traceLog(a,"Vod request error::"+x),m){var P={Code:"",Message:n.get("Error_Vod_Fetch_Urls_Text")};try{P=JSON.parse(x)}catch{}m({Code:u.ErrorCode.ServerAPIError,Message:P.Code+"|"+P.Message,sri:P.RequestId||""})}})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../base/event/eventtype":70,"./signature":117,"./util":119}],121:[function(a,t,w){var y=a("./saasplayer"),u=a("../../lib/constants"),c=a("./vod"),f=a("./signature"),h=(a("./authkeyexpiredhandle"),a("./ststoken"),a("../../lib/io")),n=a("../../config"),l=(a("../../lib/playerutil"),a("../base/event/eventtype")),a=y.extend({init:function(s,_){y.call(this,s,_),this.service=c,this.loadByVod()}});a.prototype.loadByVod=function(s){var _,T,m;typeof _apesrap<"u"?this._loadByVod(s):(typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),_="aliplayer-vod-p-min.js",T="",T=n.domain?"https://"+n.domain+n.path+n.h5Version+"/hls/"+_:"/build/hls/"+_,this.trigger(l.Private.Timeline,{name:"mod_pa_s",ts:performance.now()}),m=this,h.loadJS(T,function(){m.trigger(l.Private.Timeline,{name:"mod_pa_f",ts:performance.now()}),m._loadByVod(s)}))},a.prototype._loadByVod=function(s){var _="",T="",m="",v="",S="";if(this._options.accessKeyId&&this._options.accessKeySecret)_=this._options.accessKeyId,T=this._options.accessKeySecret,m=this._options.securityToken,v=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var x=_apesrap(this._options.playauth,this._options.vid),P=(this._vdnct6f=x.v,x.value),g=f.encPlayAuth(P),_=g.AccessKeyId,T=g.AccessKeySecret,m=g.SecurityToken,v=g.Region,S=g.AuthInfo}catch(E){return console.log("e",E),x={Code:u.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth解析错误"},void this._mtsError_message(this,x,P)}this._options.from=g.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(_,T,m,v,S,s)},a.prototype.replayByVidAndPlayAuth=function(s,_){this.trigger("error_hide"),this.setTextTracks([]),this.trigger(l.Private.UserTrackReset),this._options.source="",this._options.vid=s,this._options.playauth=_,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._posOffset=this._getSubVideoConfig().start||0,this._clearTimeout(),this.loadByVod(!0)},a.prototype.updateSourcesByVidAndPlayAuth=function(s,_){var T,m,v;typeof _apesrap<"u"?this._updateSourcesByVidAndPlayAuth(s,_):(T="aliplayer-vod-p-min.js",m="",m=n.domain?"https://"+n.domain+n.path+n.h5Version+"/hls/"+T:"/build/hls/"+T,v=this,h.loadJS(m,function(){v._updateSourcesByVidAndPlayAuth(s,_)}))},a.prototype._updateSourcesByVidAndPlayAuth=function(s,_){if(s!=this._options.vid)console.log("不能更新地址，vid和播放中的不一致");else{this._options.vid=s,this._options.playauth=_;try{var T=_apesrap(this._options.playauth,this._options.vid),m=(this._vdnct6f=T.v,T.value),v=f.encPlayAuth(m)}catch{return void console.log("playauth解析错误")}var _={vid:s,accessId:v.AccessKeyId,accessSecret:v.AccessKeySecret,stsToken:v.SecurityToken,domainRegion:v.Region,authInfo:v.AuthInfo,playDomain:v.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},S=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(_,this._options.qualitySort,function(P){S._serverRequestId=P.requestId,P.urls.length!=0&&(S._urls=P.urls),S._authKeyExpiredHandle.tick(u.AuthKeyRefreshExpired)},function(P){console.log(P)})}},a.prototype.reloaduserPlayInfoAndVidRequestMts=function(s,_){this.replayByVidAndPlayAuth(s,_,accessSecret)},a.prototype._loadByVodBySTS=function(s,_,T,m,v,S){s={vid:this._options.vid,accessId:s,accessSecret:_,stsToken:T,authInfo:v,domainRegion:m,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo},this.loadData(s,S)},t.exports=a},{"../../config":14,"../../lib/constants":30,"../../lib/io":42,"../../lib/playerutil":47,"../base/event/eventtype":70,"./authkeyexpiredhandle":110,"./saasplayer":116,"./signature":117,"./ststoken":118,"./vod":120}],122:[function(e,t,w){function y(c){this._player=c,this._video=c.tag;var f=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",c.on(u.Private.ChangeURL,function(){f._isCreated=!1,f._canPlayTriggered=!1,f._defaultTrack=""}),c.on(u.Player.CanPlay,function(){var h;f._player._drm||f._canPlayTriggered||((h=f._getTracks())&&(f._isCreated=!0,f._player._options.isVBR||f._hls||(c.trigger(u.Player.AudioTrackReady,h),f._notifyDefaultValue(h))),f._canPlayTriggered=!0)}),c.on(u.Player.AudioTrackUpdated,function(h){f._isCreated||(h=f._getTracks(h.paramData.audioTracks))&&(f._isCreated=!0,c.trigger(u.Player.AudioTrackReady,h),f._notifyDefaultValue(h))})}var u=e("../base/event/eventtype");y.prototype._notifyDefaultValue=function(c){!this._defaultTrack&&0<c.length&&(this._defaultTrack=c[0]),this._defaultTrack&&this._player.trigger(u.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},y.prototype.support=function(){return!!this._video.audioTracks},y.prototype._getTracks=function(c){if(!this.support()&&!c)return null;for(var f=[],h=(c=!this._video||!this._video.audioTracks||c&&c.length!=0?c:this._video.audioTracks)?c.length:0,n=0;n<h;n++){var l=c[n],a={value:l.id,text:l.label||l.name||l.language};(l.default||l.enabled)&&(this._defaultTrack=a),f.push(a)}return f},y.prototype.switch=function(c){if(this._player._hls)this._player._hls.audioTrack=+c;else if(this._player._switchAudioTrack)this._player._switchAudioTrack(c);else for(var f=this._video.audioTracks?this._video.audioTracks.length:0,h=0;h<f;h++){var n=this._video.audioTracks[h];n.id==c?n.enabled=!0:n.enabled=!1}},y.prototype.dispose=function(){this._player=null},t.exports=y},{"../base/event/eventtype":70}],123:[function(e,t,w){function y(a){this._video=a.tag,this._player=a,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var s=this,_=(a.on(u.Player.LevelsLoaded,function(T){(f.IS_MAC_SAFARI||f.IS_IOS)&&(T&&T.paramData&&T.paramData.subtitles&&T.paramData.subtitles.length?s._storedTracks=T.paramData.subtitles||[]:s._resotreTracks())}),a.on(u.Private.SafariDrmLevelSwitch,function(){s._resotreTracks()}),a.on(u.Private.ChangeURL,function(T){T&&T.paramData&&T.paramData.from==="saas"||(s._disabledTracks(),s._isCreated=!1,s._defaultTrack="",s._backupCC="")}),a.on(u.Private.VttClearTracks,function(){s.switch("off"),s._disabledTracks(),s._isCreated=!1,s._defaultTrack={value:"off",text:"Off"},s.tracks=[s._defaultTrack],a.trigger(u.Private.SelectorGenerateList,{type:"cc"}),a.trigger(u.Private.CCStateChanged,{value:"off",lang:""})}),a.on(u.Player.CanPlay,function(){s._isCreated||(s.tracks=s._getTracks(),a.trigger(u.Player.TextTrackReady,s.tracks),a.trigger(u.Private.CCReset)),s._isCreated&&!s._player._setDefaultCC||!s._defaultTrack||(a.trigger(u.Private.SelectorUpdateList,{type:"cc",text:s._defaultTrack.text}),s.switch(s._defaultTrack.value),s._player._setDefaultCC=!1,s._isCreated=!0)}),f.os.ios&&parseFloat(f.os.version)<=15.1&&c.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),a.getOptions().controlBarVisibility==="always"&&c.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),l.throttle(function(){a._vttBroker&&a._vttBroker.enabled||c.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),_=(a.on(u.Private.ShowBar,_),l.throttle(function(){a._vttBroker&&a._vttBroker.enabled||c.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));a.on(u.Private.HideBar,_),a.on(u.Private.CCReset,function(){s._updateSelectorList()})}var u=e("../base/event/eventtype"),c=(e("../../lib/event"),e("../../lib/dom")),f=e("../../lib/ua"),h=e("../../lib/cookie"),n=e("../../lib/constants"),l=e("../../ui/component/util");y.prototype._adaptiveCueStype=function(){var a,s=-10;f.IS_SAFARI?(s=-65,(a=this._player.fullscreenService)&&a.getIsFullScreen()&&(s=-95)):f.IS_MOBILE&&(s=-30),c.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+s+"px) !important;}")},y.prototype.close=function(){for(var a=this.getTextTracks(),s=a.length,_=0;_<s;_++){var T=a[_];T.mode!="expired"&&(T.mode=="showing"&&(this._backupCC=T),T.mode="disabled")}this._player.trigger(u.Private.VttHide)},y.prototype.open=function(){var a,s,_;return!this.tracks||this.tracks.length<2||(s=this._backupCC?this._backupCC.language:"",_=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(T){s===T.value&&(a=!0)}),(s=a?s:_="")||(s=this.tracks[1].value,_=this.tracks[1].text),this.switch(s)),{label:_,language:s}},y.prototype.getCurrentSubtitle=function(){return this._currentValue},y.prototype._getTracks=function(){for(var a=this.getTextTracks(),s=a.length,_=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),T=h.get(n.SelectedCC),m="",v=!1,S=0;S<s;S++){var x,P=a[S];P.mode=="expired"||P.kind!="subtitles"&&P.kind!="captions"||(x={value:P.language,text:P.label},P.default&&(this._defaultTrack=x,v=!0),x.value==T&&(m=x),_.push(x))}return!v&&m&&(this._defaultTrack=m),_},y.prototype._disabledTracks=function(){for(var a=this.getTextTracks(),s=a.length,_=0;_<s;_++)a[_].mode="expired"},y.prototype.switch=function(a){var s=this._player;if(this.close(),a!="off")for(var _=this.getTextTracks(),T=_.length,m=0;m<T;m++){var v=_[m];v.language===a&&v.mode!="expired"&&(_[m].mode="showing",s.trigger(u.Private.VttSwitchTrack,v.language))}else this.close();this._currentValue=a,s.trigger(u.Private.CCChanged,a)},y.prototype.updateUI=function(a){var s="on",_="";_=a?(this.tracks.find(function(T){return T.value===a})||{}).text||"":(s="off","Off"),player.trigger(u.Private.CCChanged,s),player.trigger(u.Private.CCStateChanged,{value:s,lang:_})},y.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},y.prototype._patchSafariTracks=function(){var a=this;if(f.IS_MAC_SAFARI||f.IS_IOS){if(!(this._video&&this._video.textTracks&&this._video.textTracks.length)){var s=!1;if(s=this._video.textTracks&&this._video.textTracks.length?!0:s)return;for(var _=0;_<this._storedTracks.length;_++){var T=this._storedTracks[_],m=T.vttUrl,v=document.createElement("track");v.src=m,v.kind="subtitles",v.label=T.name,v.srclang=T.lang,this._video.appendChild(v)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var S=a.getCurrentSubtitle();S&&S!=="off"&&a.switch(S)},1e3)}},y.prototype.getTextTracks=function(){var a=this._player,s=a.tag;return a._vttBroker&&a._vttBroker.enabled&&a.getTextTracks?a.getTextTracks()||[]:s&&s.textTracks||[]},y.prototype._updateSelectorList=function(){var a=this._player;this.tracks=this._getTracks(),a.trigger(u.Private.SelectorGenerateList,{type:"cc",value:"Off"})},y.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(u.Player.TextTrackReady,this.tracks)},t.exports=y},{"../../lib/constants":30,"../../lib/cookie":31,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../ui/component/util":165,"../base/event/eventtype":70}],124:[function(e,t,w){var y=e("../../lib/playerutil");t.exports=[{service:e("./ccservice"),name:"_ccService",condition:!0},{service:e("./audiotrackservice"),name:"_audioTrackService"},{service:e("./qualityservice"),name:"_qualityService"},{service:e("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:e("./liveshiftservice"),name:"_liveshiftService",condition:function(){var u=this.options();return y.isLiveShift(u)}},{service:e("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:e("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":47,"./audiotrackservice":122,"./ccservice":123,"./fullscreenservice":125,"./liveshiftservice":126,"./progressmarkerservice":127,"./qualityservice":128,"./thumbnailservice":129}],125:[function(e,t,w){function y(s){var _=this,T=(this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=s,this),m=n;this._fullscreenChanged=function(v){var S;T._player!=null&&(v.target||v.srcElement)===(v=T._player.el())&&(S=document[m.fullscreenElement],T.isFullScreen=S===v,(T.isFullScreenChanged=!0)===T.isFullScreen?T._player.trigger(h.Player.RequestFullScreen):T._player.trigger(h.Player.CancelFullScreen))},m&&f.on(document,m.eventName,this._fullscreenChanged),f.on(s.tag,"webkitendfullscreen",function(v){v=v.target||v.srcElement,s&&s.tag===v&&(_.isFullScreenChanged=!0,_.isFullScreen=!1,_._player.trigger(h.Player.CancelFullScreen),_._player.trigger(h.Private.Play_Btn_Show))})}var u=e("../../lib/ua"),c=e("../../lib/dom"),f=e("../../lib/event"),h=e("../base/event/eventtype"),n=(e("../base/x5play"),e("../../lang/index"),function(){c.createEl("div");var s={},_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],T=!1;if(!(T=u.IS_IOS&&(s.requestFn="webkitEnterFullscreen",s.cancelFn="webkitExitFullscreen",s.fullscreenElement="webkitFullscreenElement",s.eventName="webkitfullscreenchange",s.isFullScreen="webkitDisplayingFullscreen",document[s.requestFn])?!0:T)){for(var m=0;m<5;m++)if(_[m][1]in document){s.requestFn=_[m][0],s.cancelFn=_[m][1],s.fullscreenElement=_[m][2],s.eventName=_[m][4],s.isFullScreen=_[m][6];break}"requestFullscreen"in document?s.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?s.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?s.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?s.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?s.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(s.requestFn="msRequestFullscreen"),"fullscreenchange"in document?s.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?s.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?s.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(s.eventName="MSFullscreenChange"),"fullScreen"in document?s.isFullScreen="fullScreen":"webkitfullScreen"in document?s.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?s.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?s.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?s.isFullScreen="mozFullScreen":"mozfullScreen"in document?s.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(s.isFullScreen="MSFullScreen"),"fullscreenElement"in document?s.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?s.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?s.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?s.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?s.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(s.fullscreenElement="MSFullscreenElement")}return s.requestFn?s:null}()),l=(y.prototype.requestFullScreen=function(){var s=n,_=this._player.el(),T=this;if(u.IS_IOS){var m=this._player._splayer;if(!m||m.renderType!==2){_=this._player.tag,m&&m.renderType!==2&&(_=this._player.el().querySelector("video"));try{var v=_[s.requestFn]();v&&typeof v.catch=="function"&&v.catch(function(x){console.log(x)}),T._player.trigger(h.Player.RequestFullScreen)}catch(x){console.log(x)}return this}this._player._options.enableMockFullscreen=!0}if(this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer),T=this,s&&!this._player._options.enableMockFullscreen)try{var S=_[s.requestFn]();S&&typeof S.catch=="function"&&S.catch(function(x){console.log(x)}),this._requestFullScreenTimer=setTimeout(function(){T.isFullScreenChanged||(l.apply(T),T._player.trigger(h.Player.RequestFullScreen)),T._requestFullScreenTimer=null},1e3)}catch(x){console.log(x)}else l.apply(T),this._player.trigger(h.Player.RequestFullScreen);return this._player},y.prototype.cancelFullScreen=function(){var s=n,_=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(s&&!this._player._options.enableMockFullscreen){try{var T=document[s.cancelFn]();T&&typeof T.catch=="function"&&T.catch(function(m){console.log(m)})}catch(m){console.log(m)}_._cancelFullScreenTimer=setTimeout(function(){_.isFullScreenChanged||(a.apply(_),_._player.trigger(h.Player.CancelFullScreen)),_._cancelFullScreenTimer=null},500)}else a.apply(_),this._player.trigger(h.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(h.Player.Play),this._player},y.prototype.getIsFullScreen=function(){return this.isFullScreen},y.prototype.dispose=function(){this._player=null,n&&f.off(document,n.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",c.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),a=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,c.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=y},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../base/event/eventtype":70,"../base/x5play":98}],126:[function(e,t,w){function y(m,v){var S;if(m)return m=new Date(m),S=(v=new Date(v)).valueOf()/1e3-m.valueOf()/1e3,{start:m,end:v,endDisplay:h.extractTime(v),totalTime:S}}function u(m,v){v&&(m.currentTimestamp=v,m.currentTime=h.convertToDate(v),m.currentTimeDisplay=h.extractTime(m.currentTime),m.liveShiftStart=m.liveTimeRange.start,m.liveShiftEnd=m.liveTimeRange.end,m.liveShiftStartDisplay=h.extractTime(m.liveShiftStart),m.liveShiftEndDisplay=h.extractTime(m.liveShiftEnd),m.availableLiveShiftTime=v-m.liveShiftStart.valueOf()/1e3,m.timestampStart=h.convertToTimestamp(m.liveShiftStart),m.timestampEnd,h.convertToTimestamp(m.liveShiftEnd))}function c(m){function v(){var x=m._options.source;this._originalPlayUrl=x,this._liveShiftUrl=m._options.liveTimeShiftUrl,this.liveTimeRange=y(m._options.liveStartTime,m._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=m,this._isLiveShiftPlaying=!1;var S=this;v.call(this),m.liveShiftSerivce={setLiveTimeRange:function(x,P){S.setLiveTimeRange(x,P)},queryLiveShift:function(x,P,g){S.queryLiveShift(x,P,g)},isLiveShiftPlaying:function(){return S._isLiveShiftPlaying}},m.on(T.Private.ChangeURL,function(){v.call(S)})}var f=e("../../lib/io"),h=e("../../lib/util"),n=e("../../lib/playerutil"),l=e("../../lang/index"),a=e("../flv/flvinjector"),s=e("../hls/hlsinjector"),_=e("../../lib/constants"),T=e("../base/event/eventtype");e("../../lib/url"),c.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},c.prototype.switchToLive=function(){this.seekTime=-1;var m=this._originalPlayUrl,v=this._player._options.liveShiftSource,S=this._player._options.source;n.isHls(S)&&n.isFlv(m)&&v&&n.isHls(v)&&(this._player._hls&&this._player._destroyHls(),S=this._player._superType,v=this._player._Type,this._player._options._autoplay=!0,a.inject(this._player,v,S,this._player._options,"",!0)),this._player._loadByUrlInner(m,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(T.Private.LiveShiftSwitchToLive)},c.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,this.seekTime==-1?h.parseTime(this.currentTimeDisplay):h.parseTime(this.liveShiftStartDisplay)+this.seekTime},c.prototype.getSourceUrl=function(m,v){var S=this._originalPlayUrl;return this.availableLiveShiftTime<m||(this._isLiveShiftPlaying=!0,m=parseInt(m),S=(S=this._switchLiveShiftPlayer(v))&&this._cleanUrl(S),v=parseInt(this.currentTimestamp)-m,(S=S.indexOf("?")==-1?S+"?lhs_start_unix_s_0="+v:S+"&lhs_start_unix_s_0="+v).indexOf("aliyunols=on")===-1&&(S+="&aliyunols=on"),S.indexOf("continue=on")===-1&&(S+="&continue=on")),S},c.prototype._cleanUrl=function(m){var v;return m.indexOf("?")===-1?m:(m=(m=(v=m.split("?"))[1])&&((m=m.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")===0?m.replace("&",""):m))?v[0]+"?"+m:v[0]},c.prototype._switchLiveShiftPlayer=function(m){var v,S=this._originalPlayUrl,x=this._player._options.liveShiftSource,P=this._player._options.source;if(n.isHls(P))S=P;else if(n.isFlv(S)&&x&&n.isHls(x))return this._player._flv&&this._player._destroyFlv(),P=this._player._superType,v=this._player._Type,this._player._options._autoplay=!0,s.inject(this._player,v,P,this._player._options,"",!0),x;return S},c.prototype.getTimeline=function(m,v){var S;this._player.trigger(T.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(S=this).queryLiveShift(this._liveShiftUrl,function(x){x?(x=x).retCode==0?(u(S,x.content.current),m&&m()):v({Code:_.ErrorCode.ServerAPIError,Message:x.retCode+"|"+x.description+"|"+x.content}):console.log("获取直播时移数据失败")},function(x){if(v&&x){var P={};if(x){if(typeof x=="string"&&-1<x.indexOf("403 Forbidden"))P.Code=_.ErrorCode.AuthKeyExpired,P.Message="Query liveshift failed:"+l.get("Error_AuthKey_Text");else{var g,P=x;try{g=JSON.parse(x)}catch{}g&&(P.Code=_.ErrorCode.ServerAPIError,P.Message=g.retCode+"|"+g.description+"|"+g.content)}v(P)}}}):(u(this,new Date().valueOf()/1e3),m&&m())},c.prototype.start=function(m,v){function S(){x._loopHandler&&clearTimeout(x._loopHandler),x._loopHandler=setTimeout(function(){x.getTimeline(function(){},v),S()},m)}var x=this;x.getTimeline(function(P){x._localLiveTimeHandler||x.tickLocalLiveTime()},v),S()},c.prototype.tickLocalLiveTime=function(){var m=this;(function v(){m._localLiveTimeHandler=setTimeout(function(){m.currentTimestamp++,u(m,m.currentTimestamp),m._player.trigger(T.Private.LiveShiftQueryCompleted),v()},1e3)})()},c.prototype.setLiveTimeRange=function(m,v){m=m||this._player._options.liveStartTime,v=v||this._player._options.liveOverTime,this.liveTimeRange=y(m,v),u(this,this.currentTimestamp),this._player.trigger(T.Private.LiveShiftQueryCompleted)},c.prototype.queryLiveShift=function(m,v,S){f.get(m,function(x){var P;x?(P=JSON.parse(x)).retCode==0?v&&v(P):S&&S(P):S&&S(x)},function(x){S&&S(x)})},c.prototype.stop=function(m){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},c.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},t.exports=c},{"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/url":51,"../../lib/util":52,"../base/event/eventtype":70,"../flv/flvinjector":104,"../hls/hlsinjector":106}],127:[function(e,t,w){function y(h){function n(){var a=document.querySelector("#"+h.id()+" .prism-progress-marker");if(a){a.innerHTML="";var s=l._player.getDuration();if(0<s){for(var _=0;_<l.progressMarkers.length;_++){var T,m=l.progressMarkers[_];m.offset!==void 0&&m.offset!==""&&(m=document.createElement("div"),c.addClass(m,"prism-marker-dot"),T=l.progressMarkers[_].offset/s,m.style.left=100*T+"%",a.appendChild(m),T=function(S,x){return function(){l._player.trigger(u.Private.MarkerTextShow,{left:S,progressMarker:x})}}(T,l.progressMarkers[_]),f.on(m,"mouseover",T),f.on(m,"mouseout",function(S){l._player.trigger(u.Private.MarkerTextHide)}),f.on(m,"touchstart",T),f.on(m,"mousemove",function(S){S.preventDefault()}),f.on(m,"touchmove",function(S){S.preventDefault()}))}var v=document.querySelector("#"+l._player.id()+" .prism-progress-cursor");l._player.on(v,"click",function(S){for(var x=l._player.getCurrentTime(),P=0;P<l.progressMarkers.length;P++){var g,E=l.progressMarkers[P];E&&x-1<E.offset&&E.offset<x+1&&(g=E.offset/s*100+"%",l._player.trigger(u.Private.MarkerTextShow,{left:g,progressMarker:E}))}})}}}this.progressMarkers=[],this._player=h;var l=this;h.on(u.Private.ProgressMarkerLoaded,function(a){a=a.paramData,a&&0<a.length&&(l.progressMarkers=a)}),h.on(u.Private.ProgressMarkerChanged,function(a){a=a.paramData,a&&0<a.length&&(l.progressMarkers=a,n())}),h.on(u.Video.LoadedMetadata,n)}var u=e("../base/event/eventtype"),c=(e("../../lang/index"),e("../../lib/hls/hlsparse"),e("../../lib/object"),e("../../lib/dom")),f=e("../../lib/event");e("../../lib/playerutil"),y.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},t.exports=y},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/hls/hlsparse":40,"../../lib/object":44,"../../lib/playerutil":47,"../base/event/eventtype":70}],128:[function(e,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(_){for(var T=1;T<arguments.length;T++){var m,v=arguments[T];for(m in v)Object.prototype.hasOwnProperty.call(v,m)&&(_[m]=v[m])}return _}).apply(this,arguments)}function u(_){this.levels=[],this.drmUrl={},this._player=_;var T=this;_.on(c.Private.PlayInfoLoaded,function(m){for(var v=m.paramData.encryptUrlArr||[],S=[],x=0;x<v.length;x++){var P=v[x];P.encryptionType===a.VodEncryptionType["Widevine-FairPlay"]&&S.push(P)}T.drmUrl=S}),_.on(c.Player.LevelsLoaded,function(m){if(0<T.levels.length&&(T.levels=[]),(m=m.paramData)&&m.levels){for(var v,S=m.levels.length-1;-1<S;S--){var x,P=m.levels[S];P.url&&0<P.url.length&&P.attrs&&P.attrs.BANDWIDTH&&(x=P.url,n.isArray(x)&&(x=x[0]),x={Url:x=!_._hls&&_._options.isVBR&&_._options.isDrm?s.call(T,P):x,desc:Math.min(P.width,P.height),bitrate:P.bitrate,resolution:P.attrs.RESOLUTION,bandwidth:P.attrs.BANDWIDTH},T.levels.push(x))}_._options.definition==="AUTO"&&(_._urls=[],Object.assign(_._urls,this.levels)),T.levels.sort(function(g,E){return(g.bitrate||g.desc)-(E.bitrate||E.desc)}),T.levels=T.levels.map(function(g){return y({},g,{desc:g.desc+"p@"+parseInt(g.bitrate/1e3)+"k"})}),0<T.levels.length&&(v="",this._player._options.isVBR&&(v=f.get("Auto")),T.levels.push({Url:m.url,desc:v}),_.trigger(c.Private.SelectorUpdateList,{type:"quality",text:v}))}}),_.on(c.Video.LoadStart,function(){var m,v;_._options&&(m=_._options.source,v=_._options.isVBR,!_._hls)&&m&&l.isHls(m)&&(_._manuallySwitchDrmLevel?(_._manuallySwitchDrmLevel=!1,_.trigger(c.Private.SafariDrmLevelSwitch)):v&&T.loadLevels(m))})}var c=e("../base/event/eventtype"),f=e("../../lang/index"),h=e("../../lib/hls/hlsparse"),n=e("../../lib/object"),l=e("../../lib/playerutil"),a=e("../../lib/constants");function s(_){for(var T,m=this.drmUrl,v=0;v<this.drmUrl.length;v++)if(Number(_.height)===Number(m[v].height)){T=m[v].Url;break}return T}(u.prototype={loadLevels:function(_){var T=new h,m=this;T.load(_,function(v){var S;(S=v.subtitles)!=null&&S.forEach(function(x){T.loadMediaPlaylist({url:x.url},function(P){P=P.fragments[0],P&&(x.vttUrl=T.resolve(P.relurl,P.baseurl))},function(P){console.log("parse vtt url error: ",P)})}),m._created?m._player.trigger(c.Player.LevelsLoaded,v):m._player.one(c.Private.Created,function(){m._player.trigger(c.Player.LevelsLoaded,v)})})}}).dispose=function(){this._player=null},t.exports=u},{"../../lang/index":25,"../../lib/constants":30,"../../lib/hls/hlsparse":40,"../../lib/object":44,"../../lib/playerutil":47,"../base/event/eventtype":70}],129:[function(e,t,w){function y(n){this._player=n,this.cues=[],this.baseUrl="";var l=this;n.on(h.Private.ChangeURL,function(){l.cues=[],l.baseUrl=""})}var u=e("../../lib/io"),c=e("../../lib/url"),f=e("../../lib/vtt/thumbnailvtt"),h=e("../base/event/eventtype");(y.prototype={get:function(n){var l,a,s=this;this.baseUrl=(l=n,(a=c.parseUrl(l))&&(a=a.segments)&&0<a.length&&(a=a[a.length-1],baseUrl=l.replace(a,"")),baseUrl),u.get(n,function(_){_&&f.parse(_,function(T){s.cues=T,s._player.trigger(h.Private.ThumbnailLoaded,T)})},function(_){console.log(_)})},findAvailableCue:function(n){for(var l=this.cues.length,a=0;a<l;a++){var s=this.cues[a];if(s.startTime<=n&&n<s.endTime)return s}return null},makeUrl:function(n){return n=n.indexOf("://")==-1?this.baseUrl+n:n}}).dispose=function(){this._player=null},t.exports=y},{"../../lib/io":42,"../../lib/url":51,"../../lib/vtt/thumbnailvtt":54,"../base/event/eventtype":70}],130:[function(e,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(E){for(var C=1;C<arguments.length;C++){var R,A=arguments[C];for(R in A)Object.prototype.hasOwnProperty.call(A,R)&&(E[R]=A[R])}return E}).apply(this,arguments)}var u=e("../base/player"),c=e("./splayerinjector"),f=e("../flv/flvinjector"),h=e("../hls/hlsinjector"),n=e("../../lib/playerutil"),l=e("../base/event/eventtype"),a=e("../../lib/constants"),s=e("../../lib/codec-probe"),_=e("../../lib/ua"),T=a.USER_EVENT_NAME,m=n.isH265Codec,v=n.isH266Codec,S=n.getVideoTrack,x={},P={codecCost:0,decoderCost:0},g=u.extend({init:function(E,C){var R,A=this,L=(this._options=C,n.isFlv(C.source)),N=n.isHls(C.source),I=this._extraMultiSources(),M={};function H(){L?(f.inject(this,g,u,C),C._native=!1):N&&!n.canPlayHls()&&(h.inject(this,g,u,C),C._native=!1),u.call(this,E,C),this._monitor&&this._monitor.updateH265ProbeInfo(y({},P,x)),z.call(this),x.codecTag&&c.reportH265PlayInfo.call(this,{renderType:"native",codecTag:x.codecTag})}function O(){C._native=!1,c.inject(this,g,u,C,x),u.call(this,E,C),this._monitor&&this._monitor.updateH265ProbeInfo(y({},P,x,{waitRenderType:!0})),z.call(this)}function z(){var J,U,q=this,V=M,X=this[T];X&&(V=Object.assign({},M,X),J=Object.keys(M),U=Object.keys(X),J.forEach(function(B){-1<U.indexOf(B)&&(V[B]=M[B].concat(X[B]))})),Object.keys(V).forEach(function(B){V[B].forEach(function(ee){ee.binded||u.prototype.on.call(q,B,ee)})})}M[l.Player.Ready]=[function(){A._setupSourceList(I),A.trigger(l.Private.SelectorGenerateList,{type:"quality"})}],C.from==="zhihu"||C.forceH265||C.forceH266?O.call(this):_.IS_ANDROID&&_.dingTalk()&&!L?H.call(this):(R=performance.now(),s(C.source,function(q){P.codecCost+=performance.now()-R;var U,q=S(q.tracks),V=(q||{}).codecTag||((V=(q||{}).codec)==null?void 0:V.split(".")[0]);x.codecTag=V,q&&m(V)?(U=performance.now(),L||N&&!n.canPlayHls()?(P.decoderCost+=performance.now()-U,O.call(A)):n.shouldUseBasePlayer({codecTag:V,url:C.source},function(X){P.decoderCost+=performance.now()-U,(X?H:O).call(A)})):(q&&v(V)?O:H).call(A)},function(J){console.log("error in demuxer, fallback to basePlayer",J),P.codecCost+=performance.now()-R,H.call(A),c.checkProtocol.call(A,C.source)}))}});t.exports=g},{"../../lib/codec-probe":28,"../../lib/constants":30,"../../lib/playerutil":47,"../../lib/ua":50,"../base/event/eventtype":70,"../base/player":93,"../flv/flvinjector":104,"../hls/hlsinjector":106,"./splayerinjector":131}],131:[function(e,t,w){function y(){return(y=Object.assign?Object.assign.bind():function(P){for(var g=1;g<arguments.length;g++){var E,C=arguments[g];for(E in C)Object.prototype.hasOwnProperty.call(C,E)&&(P[E]=C[E])}return P}).apply(this,arguments)}var u=e("../../lib/io"),c=e("../base/event/eventtype"),f=e("../base/event/eventmanager"),h=(e("../../lib/event"),e("../../lib/util")),n=e("../../lib/dom"),l=e("../../lib/playerutil"),a=e("../../lib/constants"),s=e("../../lang/index"),_="splayerinjector.js";function T(P){var g=this._options,E=(S.call(this),(function(){l.isVideoTag(this.tag)&&(f.offVideoAll(this),this.tag.parentNode&&this.tag.parentNode.removeChild(this.tag),this.tag=null)}).call(this),Videox.Videox),C=g.splayerWasmDomain,C=(!C&&g.assetPrefix&&(C=g.assetPrefix+"/splayer"),new E(y({container:this._el,wasmDomain:C,progressive:!0,skipFrame:E.DiscardType.NONE,loop:g.rePlay,controls:!1,muted:!1,threads:g.h265Threads,simd:g.h265Simd,autoplay:g.autoplay||g._autoplay,live:g.isLive,poster:g.cover||void 0,src:g.source,trackOptions:{disable:!0},preload:g.preload?"auto":"none",timeout:1e3*g.waitingTimeout},g.splayerOptions||{}))),R=(g.debug&&(C.setLogLevel(E.LogLevel.LOG),C.setLogPrintLevel(E.LogLevel.LOG)),this._splayer=C,(this.tag=C).play),A=this;this.tag.play=function(){A._monitor&&A._monitor.reportStartPlay(),R.call(this)},(function(){var L,N=this,I=document.createElement("video");for(L in I)(function(M){N.tag[M]||M.indexOf("on")===0||typeof I[M]!="function"||(N.tag[M]=function(){console.warn("Function ["+M+"] is called on splayer, which should be a mistake."),I[M].apply(I,arguments)})})(L)}).call(this),(function(L){var N=this,I=(f.onAll(this),this._splayer);I.addEventListener("error",(function(M){var H,O,z,q=Videox.Videox,J=(M||{}).detail,U=Number((J||{}).code),q=q.ErrorCode;switch(this.traceLog(_,"splayer-error::"+U),U){case q.WASM_NOT_SUPPORTED:case q.CANVAS_NOT_SUPPORTED:case q.AUDIOCONTEXT_NOT_SUPPORTED:case q.WORKER_NOT_SUPPORTED:case q.WEBGL_NOT_SUPPORTED:H=a.ErrorCode.SplayerEnvCheckError,O=s.get("Splayer_Err_Env_Check")+" | "+m(J);break;case q.DECODE:H=a.ErrorCode.SplayerDecodeError,O=s.get("Splayer_Err_Decode")+" | "+m(J);break;case q.NETWORK:H=a.ErrorCode.NetworkError,O=s.get("Error_Network_Text")+" | "+m(J);var V=(J.origin||{}).response;V?(V=V.status)===404?(H=a.ErrorCode.NotFoundSourceURL,O=s.get("Error_Not_Found")+" | "+m(J),z=s.get("Tip_Err_Not_found")):V===403&&(H=a.ErrorCode.AuthKeyExpired,O=s.get("Error_AuthKey_Text")+" | "+m(J)):navigator.onLine&&(H=a.ErrorCode.RequestDataError,O=O+"，"+s.get("Maybe_Cors_Error"));break;case q.PARSER:H=a.ErrorCode.SplayerParserNotFound,O=s.get("Splayer_Err_Parser_Not_Found")+" | "+m(J);break;default:H=a.ErrorCode.OtherError,O="(SP)"+s.get("Error_Play_Text")+" | "+m(J)}if(z=z||s.get("Tip_Err_Splayer")+'<a href="https://help.aliyun.com/zh/vod/developer-reference/advanced-features-3#section-j4v-zwt-641" target="_blank">'+s.get("Tip_Err_Splayer_Doc")+"</a>",!(H===a.ErrorCode.NetworkError&&this._reloadForVod())){try{this.pause()}catch{}U={error_code:H,error_msg:O,diagnosis_info:z},U.error_code!==null&&U.error_msg!==null&&(this.logError(U),this.trigger(c.Player.Error,U)),x.call(this,{splayer:!0})}}).bind(this)),I.addEventListener("decoderoverload",function(M){M=M.detail,delete M.shouldWarn,N.trigger(c.Player.H265DecoderOverload,M)}),I.addEventListener("loadedsupportinfo",function(H){var H=H.detail||{},O=H.detail||{},z=I.controller.options||{};I.renderType=H.renderer,x.call(N,{renderer:H.renderer,wasmThreads:O.wasmThreads&&z.threads,wasmThreadsOption:z.threads,simd:O.simd&&z.simd,simdOption:z.simd,codecTag:I.controller.videoTrack&&I.controller.videoTrack.codecTag||I.controller.videoTrack&&((H=I.controller.videoTrack.codec)==null?void 0:H.split(".")[0]),splayer:!0})}),(this._options.autoplay||this._options._autoplay)&&(I.once("canplay",function(){I.paused&&N._autoplayFailedHandler()}),I.once("timeupdate",function(){N.trigger(c.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay(),I.on("playing",function(){N._monitor&&N._monitor.reportPlaying()}),I.on("timeupdate",function(){N._monitor&&N._monitor.reportPlaying()})}).call(this,P)}function m(E){var E=E=E===void 0?{}:E,g=E.code,E=E.message,C=Videox.Videox.ErrorCode,R="";return R=g?R+g+(": "+(E||C[g])):R}function v(P){return!h.contentProtocolMixed(P,"alwaysCheck")||((P={mediaId:this._options.vid||"",error_code:a.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=s.get("Request_Block_Text"),this.logError(P),this.trigger(c.Player.Error,P),!1)}function S(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function x(P){var g;P===void 0&&(P={}),!this._h265InfoReported&&(this._h265InfoReported=!0,g={0:"native",1:"mse",2:"wasm"},delete(P=y({codecTag:(this._probeInfo||{}).codecTag||P.codecTag,renderType:P.renderType||g[P.renderer]},P)).renderer,P.renderType!==g[2]&&(delete P.simd,delete P.simdOption,delete P.wasmThreads,delete P.wasmThreadsOption),this._splayerRenderType=P.renderType,g=P.codecTag)&&(l.isH265Codec(g)?this.trigger(c.Player.H265PlayInfo,P):l.isH266Codec(g)&&this.trigger(c.Player.H266PlayInfo,P))}t.exports.checkProtocol=v,t.exports.reportH265PlayInfo=x,t.exports.inject=function(P,g,E,C,R){function A(N,I){this._superPt.setPlayerSize.call(this,N,I),N=this._el.querySelector("canvas"),N&&(I=this._el.offsetWidth/this._el.offsetHeight,N.offsetWidth/N.offsetHeight<I?(N.style.height="100%",N.style.width="initial"):(N.style.width="100%",N.style.height="initial"))}function L(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),g.prototype.replay=this._superPt.replay,g.prototype.setPlayerSize=this._superPt.setPlayerSize,g.prototype._setTransform=this._superPt._setTransform,g.prototype.initPlay=this._superPt.initPlay),S.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1,this._splayerRenderType=null)}P._Type=g,P._superType=E,P._superPt=E.prototype,P._disposed=!1,P._splayer=null,P._splayerLoaded=!1,P._probeInfo=R,P._splayerRenderType=null,g.prototype.initPlay=function(N){var I=this;this.trigger(c.Private.H5_Loading_Show),v.call(this,this._options.source)&&(this._splayerLoaded?T.call(this,N):(function(M,H){var O=this._options,z=O.splayerUrl||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.7/dist/index.js";!O.splayerUrl&&O.assetPrefix&&(z=O.assetPrefix+"/splayer/index.js"),u.loadJS(z,M.bind(this),function(){H&&H()})}).call(this,function(){this._splayerLoaded=!0,T.call(this,N),I._executeReadyCallback()},function(){var M={mediaId:I._options.vid||"",mediaAuth:I._options.mediaAuth||"",error_code:a.ErrorCode.ModuleLoadError,error_msg:"splayer module load error."};I.trigger(c.Player.Error,M)}))},g.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},Object.defineProperty(g.prototype,"setPlayerSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(){return A}}),g.prototype._setTransform=function(){var N=this._player.el(),I=this._splayerRenderType==="wasm",N=I?N.querySelector("canvas"):N.querySelector("video"),I=(this._transformProp||(this._transformProp=n.getTransformName(N)),I?"":" translate(-50%, -50%)");this._rotate&&(I+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?I+=" scaleY(-1)":this._image=="horizon"&&(I+=" scaleX(-1)")),N.style[this._transformProp]=I},Object.defineProperty(g.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return L},set:function(){return L}})}},{"../../lang/index":25,"../../lib/constants":30,"../../lib/dom":34,"../../lib/event":35,"../../lib/io":42,"../../lib/playerutil":47,"../../lib/util":52,"../base/event/eventmanager":69,"../base/event/eventtype":70}],132:[function(e,t,w){function y(E,C){var R,A=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(A)return(A=A.call(E)).next.bind(A);if(Array.isArray(E)||(A=function(L,N){var I;if(L)return typeof L=="string"?u(L,N):(I=(I=Object.prototype.toString.call(L).slice(8,-1))==="Object"&&L.constructor?L.constructor.name:I)==="Map"||I==="Set"?Array.from(L):I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?u(L,N):void 0}(E))||C)return A&&(E=A),R=0,function(){return R>=E.length?{done:!0}:{done:!1,value:E[R++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(E,C){(C==null||C>E.length)&&(C=E.length);for(var R=0,A=new Array(C);R<C;R++)A[R]=E[R];return A}var c=typeof Promise>"u"?e("es6-promise").Promise:Promise,f=e("../../lib/io"),h=e("../../config"),n=e("../../lang/index"),l=e("../../lib/ua"),a=e("../base/event/eventtype"),s=e("../../lib/constants"),_=s.PLAYER_SCOPE,T=s.SW_MSG_EVT,m=s.DM_MSG_EVT,v=s.ErrorCode,S=e("./tsremuxer").TSRemuxer,x="swinjector.js";function P(E){E={mediaId:this._options.vid||"",error_code:E.code,error_msg:E.msg,diagnosis_info:E.info},this.trigger(a.Player.Error,E)}function g(E){return E.split("?")[0].split("#")[0]}t.exports.inject=function(E,C,R,A,L){E.swPlayer=!0,E.firstBuild=!0,E.sw=null,E.tsDemuxerWorker=null,E.tsRemuxer=null,E.preloadError=!1,E.fetchHasResult=!1,E._initServiceWorker=new c(function(z){setTimeout(z,1e3),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(J){if(!J.length)return console.log("No serviceWorker registrations found."),z();for(var U,q=[],V=y(J);!(U=V()).done;)(function(){var X=U.value,B=X.unregister().then(function(ee){console.log(ee?"Successfully unregistered":"Failed to unregister",`ServiceWorkerRegistration
`+(X.installing?"  .installing.scriptURL = "+X.installing.scriptURL+`
`:"")+(X.waiting?"  .waiting.scriptURL = "+X.waiting.scriptURL+`
`:"")+(X.active?"  .active.scriptURL = "+X.active.scriptURL+`
`:"")+"  .scope: "+X.scope+`
`)});q.push(B)})();c.all(q).then(z).catch(z)}).catch(function(J){console.log("clear sw error",J),z()}):z()}).then((function(z){var J=this;return new c(function(U){var q=function(X){if(!X)return n.get("Error_SW_ScriptURL_Empty");if((X=String(X)).indexOf("https")!==0&&X.indexOf("localhost")===-1&&X.indexOf("127.0.0.1")===-1)return n.get("Error_SW_ScriptURL_Https");try{B=new URL(X)}catch(ee){return n.get("Error_SW_ScriptURL_ILlegal","",{detail:ee})}var X=g(location.href).split("/"),X=(X.pop(),X.join("/")),B=g(B.href).split("/"),B=(B.pop(),B.join("/"));if(X!==B)return n.get("Error_SW_ScriptURL_Scope","",{scope1:B,scope2:X})}(z.swScriptURL);if(q)return J.preloadError=!0,P.call(J,{code:v.ModuleLoadError,msg:q});"serviceWorker"in navigator?(navigator.serviceWorker.register(z.swScriptURL,{scope:"./"}).then(function(V){J.traceLog(x,"sw registered"),V=V.active||V.waiting||V.installing,V.postMessage({scope:_,name:T.SETUP}),J.sw=V}).catch(function(V){J.preloadError=!0,P.call(J,{code:v.ModuleLoadError,msg:n.get("Error_SW_Register_Failed")+"("+V+")",info:n.get("Tip_SW_Register")})}),navigator.serviceWorker.addEventListener("controllerchange",function(V){V.target.controller.scriptURL!==z.swScriptURL&&P.call(J,{code:v.ModuleLoadError,msg:n.get("Error_SW_Conflict"),info:"controlled by "+V.target.controller.scriptURL})}),navigator.serviceWorker.addEventListener("message",function(V){var X;if((B=V.data)&&B.scope===_){var B=V.data.name;switch(console.log("[MESSAGE FROM SW]["+B+"]",function(F){var W;try{W=/[0-9]+\.ts/.exec(F)[0]}catch{}return W}((X=V.data.payload)==null?void 0:X.url),V.data.payload),B){case T.SETUP_ACK:U(),J.traceLog(x,"sw ack");var ee=(ee=V.data.payload)==null?void 0:ee.version;ee!==h.h5Version&&(J.preloadError=!0,P.call(J,{code:v.ModuleLoadError,msg:n.get("Error_SW_Version_Not_Match","",{swVersion:ee,playerVersion:h.h5Version})}));break;case T.ENC_SEGMENT:var G=V.data.payload;J._getDemuxer.then(function(){J.tsDemuxerWorker&&J.tsDemuxerWorker.postMessage({name:m.DEMUX,payload:{buffer:G.buffer,url:G.url,playlistUrl:G.playlistUrl}})});break;case T.ABORT_SEGMENT:J.tsDemuxerWorker&&J.tsDemuxerWorker.postMessage({name:m.FLUSH}),J.tsRemuxer&&J.tsRemuxer.flush()}}})):(J.preloadError=!0,q=location.protocol==="http:"?n.get("Error_SW_Https_required"):n.get("UseChromeForVodEncription")+"(SW not found)",P.call(J,{code:v.EncrptyVideoNotSupport,msg:q}))})}).call(E,A));var N,I,M=performance.now(),H=(E._getDemuxer=(N=A,new c(function(z,J){var U="aliplayer-hls2-demuxer-min.js",q="https://"+h.domain+h.path+h.h5Version+"/hls/"+U;N.assetPrefix&&(q=N.assetPrefix+"/hls/"+U),f.loadJS(q,z,J)}).then(function(){E.traceLog(x,"got demuxer#"+parseInt(performance.now()-M)),window.AliDemuxerWorker&&(E.tsDemuxerWorker=window.AliDemuxerWorker.injectWorker().worker,E.tsDemuxerWorker.postMessage({name:m.SETUP,payload:{key:L,debug:A.debug}}),E.tsDemuxerWorker.addEventListener("message",function(z){var J=z.data;switch(J.name){case m.RESULT:if(E.tsRemuxer)try{E.tsRemuxer.remux(J.payload.demuxResult)}catch(U){E.traceLog(x,"remux error: "+U.message+", "+U.stack+"}")}break;case m.DISPOSED:E.tsDemuxerWorker&&(E.tsDemuxerWorker.terminate(),E.tsDemuxerWorker=null);break;case m.ERROR:E.traceLog(x,"demuxer error:  "+J.payload.reason)}}),E.tsDemuxerWorker.addEventListener("error",function(z){E.traceLog(x,"demuxer uncaught error: "+z.message)}))}).catch(function(z){E.preloadError=!0,P.call(E,{code:v.ModuleLoadError,msg:"ts-demuxer module load error"})})),performance.now());function O(){this.swPlayer=!1,this.preloadError=!1,this.fetchHasResult=!1,this.tsDemuxerWorker&&this.tsDemuxerWorker.postMessage({name:m.DISPOSE}),this.tsRemuxer&&(this.tsRemuxer.destroy(),this.tsRemuxer=null);var z=R.prototype;z&&(z.dispose.call(this),C.prototype.initPlay=z.initPlay),this.sw&&(this.sw.postMessage({scope:_,name:T.DISPOSE}),this.sw=null)}E._getRemuxer=(I=A,new c(function(z,J){var U,q="aliplayer-remuxer-min.js",V="https://"+h.domain+h.path+h.h5Version+"/hls/"+q;I.assetPrefix&&(V=I.assetPrefix+"/hls/"+q),l.IS_IOS&&Number(l.IOS_VERSION)<=14?(U="https://"+h.domain+h.path+h.h5Version+"/hls/aliplayer-remuxer-polyfill.js",I.assetPrefix&&(V=I.assetPrefix+"/hls/"+q),f.loadJS(U,function(){f.loadJS(V,z,J)},J)):f.loadJS(V,z,J)}).then(function(){E.traceLog(x,"got remuxer#"+parseInt(performance.now()-H)),window.LibMux&&(E.tsRemuxer=new S({onResult:function(z){E.sw.postMessage({scope:_,name:T.DEC_SEGMENT,payload:{buffer:z.data.buffer,url:z.id}},[z.data.buffer])}}))}).catch(function(){E.preloadError=!0,P.call(E,{code:v.ModuleLoadError,msg:"ts-remuxer module load error"})})),C.prototype.initPlay=function(){var z=this;c.all([this._getDemuxer,this._getRemuxer,this._initServiceWorker]).then(function(){z.trigger(a.Private.H5_Loading_Show),f.get(A.source,function(J){var U;E.fetchHasResult=!0,z.preloadError||(J=function(ee,V){var X,B=-1<V.indexOf("EXT-X-STREAM-INF"),ee=(V=V.replace(/#EXT-X-KEY:.*\n?/g,""),ee.match(/^(.*)\/[^\/]*$/));if(ee)return X=ee[1],ee=B?/(#EXT-X-STREAM-INF:[^\n]+\n)([^\n]+)/g:/(#EXTINF:[^\n]+\n)([^\n]+)/g,V=V.replace(ee,function(G,F,W){return""+F+X+"/"+W+(-1<W.indexOf("?")?"&":"?")+"_s=enc"});console.warn("no match base url found.")}(A.source,J),U="",U=l.IS_IOS?"data:application/x-mpegurl;base64,"+btoa(J):(J=new Blob([J],{type:"application/vnd.apple.mpegurl"}),URL.createObjectURL(J)),z.tag.src=U,z._initPlayBehavior(),z.firstBuild&&(z.firstBuild=!1,z._executeReadyCallback()))},function(J,U){if(console.log("fetch m3u8 error",J,U),z.traceLog(x,"fetch m3u8 error "+U+"-"+J),!E.fetchHasResult&&(E.fetchHasResult=!0,!z.preloadError)){var q,V;switch(U){case 403:q=v.AuthKeyExpired,V=n.get("Error_AuthKey_Text");break;case 404:q=v.NotFoundSourceURL,V=n.get("Error_Not_Found");break;default:q=v.RequestDataError,V=n.get("Error_Load_M3U8_Failed_Text")}P.call(z,{code:q,msg:V})}})})},Object.defineProperty(C.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return O},set:function(){return O}})}},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/io":42,"../../lib/ua":50,"../base/event/eventtype":70,"./tsremuxer":133,"es6-promise":8}],133:[function(e,t,w){t.exports.TSRemuxer=function(){function y(c){this.mux=null;var f=window.LibMux;console.log("LibMux ->",f),this.mux=new f({outputFormat:2,hasVideo:!0,hasAudio:!0,onResult:function(h){console.log("remux result -> ",h),c.onResult(h)}})}var u=y.prototype;return u.remux=function(c){this.mux.remuxTS({id:c.id,videoTrack:c.videoTrack,audioTrack:c.audioTrack})},u.flush=function(){this.mux.flush()},u.destroy=function(){this.mux.destroy()},y}()},{}],134:[function(require,module,exports){(function _SkeinEnclosedFunction($jsskein_array_102,$jsskein_array_103,$jsskein_array_104){function kl5f8(){function e(T){var m=window[$jsskein_array_102[10]];return $jsskein_array_103[2],$jsskein_array_104[0],m[T]=function(){}}for(var t=1;t!==void 0;){var w=3&t>>2;switch(3&t){case 0:switch(w){case 0:t=_?5:9;continue;case 1:_++,t=8;continue;case 2:t=_<a[$jsskein_array_103[1]]?0:2;continue}continue;case 1:switch(w){case 0:$jsskein_array_103[2],t=window?10:6;continue;case 1:var y=a[$jsskein_array_102[7]](_),u=~(~(y&~c)&~(~y&c)),c=y;s+=$jsskein_array_104[10][$jsskein_array_103[9]](u),t=4;continue;case 2:y=$jsskein_array_103[8],c=parseInt($jsskein_array_104[9],$jsskein_array_102[6])+y,t=5;continue}continue;case 2:switch(w){case 0:f[h]($jsskein_array_102[8],$jsskein_array_102[9],n,$jsskein_array_103[10],$jsskein_array_103[11],$jsskein_array_103[12],l,s),f[$jsskein_array_102[11]](e),t=6;continue;case 1:t=void 0;continue;case 2:var f=[],h=$jsskein_array_103[3];h+=$jsskein_array_103[4];var n=(n=$jsskein_array_104[6])[$jsskein_array_103[5]]($jsskein_array_103[6])[$jsskein_array_102[3]]()[$jsskein_array_104[7]]($jsskein_array_103[6]),l=$jsskein_array_102[4],a=(l=(l+=$jsskein_array_104[8])+$jsskein_array_102[5],$jsskein_array_103[7]),s=$jsskein_array_103[6],c=$jsskein_array_103[2],_=$jsskein_array_104[0];t=8;continue}continue}}}function gas4s8(){for(var NEXTBB24=3;NEXTBB24!==void 0;){var $jsskein_indexLevel106_0=1&NEXTBB24,$jsskein_indexLevel106_1_Base=NEXTBB24>>1,$jsskein_indexLevel106_1=1&$jsskein_indexLevel106_1_Base;switch($jsskein_indexLevel106_0){case 0:switch($jsskein_indexLevel106_1){case 0:eval(fs56j57),NEXTBB24=1;continue;case 1:NEXTBB24=void 0;continue}continue;case 1:switch($jsskein_indexLevel106_1){case 0:NEXTBB24=$jsskein_array_103[13]?0:2;continue;case 1:NEXTBB24=1;continue}continue}}}function n5fg6f(player){function _SkeinIIFE31(){function cl48s87(isOpen){for(var NEXTBB34=10;NEXTBB34!==void 0;){var $jsskein_indexLevel107_0=3&NEXTBB34,$jsskein_indexLevel107_1_Base=NEXTBB34>>2,$jsskein_indexLevel107_1=3&$jsskein_indexLevel107_1_Base;switch($jsskein_indexLevel107_0){case 0:switch($jsskein_indexLevel107_1){case 0:kl5f8(),player[$jsskein_array_104[23]](),gas4s8(),NEXTBB34=6;continue;case 1:$jsskein_simplify_tmp31=Aliplayer[$jsskein_decrypt_variable62_ret],$jsskein_simplify_tmp31=$jsskein_array_103[11]===$jsskein_simplify_tmp31,NEXTBB34=$jsskein_simplify_tmp31?13:0;continue;case 2:var $jsskein_cl48s87_string_plus54=$jsskein_array_104[11],$jsskein_decrypt_variable55_v=($jsskein_cl48s87_string_plus54+=$jsskein_array_103[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_103[15],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[13],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_104[12],$jsskein_simplify_tmp31=Aliplayer[$jsskein_cl48s87_string_plus54],$jsskein_array_103[16]),$jsskein_decrypt_variable57_ret=$jsskein_array_104[1],$jsskein_decrypt_variable58_i=$jsskein_array_103[2],NEXTBB34=9;continue;case 3:var $jsskein__rand98=$jsskein_array_104[16],$jsskein_decrypt_variable64_c=$jsskein_decrypt_variable60_v[$jsskein_array_102[7]]($jsskein_decrypt_variable63_i)-(parseInt($jsskein_array_102[17],$jsskein_array_102[18])+$jsskein__rand98);$jsskein_decrypt_variable62_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable64_c),NEXTBB34=14;continue}continue;case 1:switch($jsskein_indexLevel107_1){case 0:var $jsskein__rand97=$jsskein_array_104[13],$jsskein_decrypt_variable59_c=$jsskein_decrypt_variable55_v[$jsskein_array_104[4]]($jsskein_decrypt_variable58_i)-(parseInt($jsskein_array_102[15],$jsskein_array_103[17])+$jsskein__rand97);$jsskein_decrypt_variable57_ret+=$jsskein_array_104[10][$jsskein_array_104[14]]($jsskein_decrypt_variable59_c),NEXTBB34=2;continue;case 1:eval(fs56j57);var $jsskein_decrypt_variable60_v=$jsskein_array_104[15],$jsskein_decrypt_variable62_ret=$jsskein_array_104[1],$jsskein_decrypt_variable63_i=$jsskein_array_104[0];NEXTBB34=11;continue;case 2:NEXTBB34=$jsskein_decrypt_variable58_i<$jsskein_decrypt_variable55_v[$jsskein_array_103[1]]?1:7;continue;case 3:var $jsskein_cl48s87_string_plus65=$jsskein_array_104[17],$jsskein_cl48s87_string_plus66=($jsskein_cl48s87_string_plus65+=$jsskein_array_102[19],$jsskein_cl48s87_string_plus65+=$jsskein_array_104[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[20],$jsskein_cl48s87_string_plus65+=$jsskein_array_103[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[21],devtoolsDetector[$jsskein_cl48s87_string_plus65](cl48s87),$jsskein_array_102[22]);$jsskein_cl48s87_string_plus66+=$jsskein_array_102[23],$jsskein_cl48s87_string_plus66+=$jsskein_array_102[24],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[19],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[20],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[21],$jsskein_cl48s87_string_plus66=$jsskein_cl48s87_string_plus66[$jsskein_array_102[25]]($jsskein_array_104[1])[$jsskein_array_104[22]]()[$jsskein_array_104[7]]($jsskein_array_102[26]),devtoolsDetector[$jsskein_cl48s87_string_plus66]($jsskein_array_104[0]),devtoolsDetector[$jsskein_array_102[27]](),NEXTBB34=6;continue}continue;case 2:switch($jsskein_indexLevel107_1){case 0:$jsskein_decrypt_variable58_i++,NEXTBB34=9;continue;case 1:NEXTBB34=void 0;continue;case 2:var $jsskein_simplify_tmp31=$jsskein_array_102[12],$jsskein_cl48s87_var14=isOpen;NEXTBB34=$jsskein_cl48s87_var14?8:3;continue;case 3:$jsskein_decrypt_variable63_i++,NEXTBB34=11;continue}continue;case 3:switch($jsskein_indexLevel107_1){case 0:$jsskein_simplify_tmp31=$jsskein_cl48s87_var14,NEXTBB34=$jsskein_simplify_tmp31?5:6;continue;case 1:$jsskein_cl48s87_var14=$jsskein_decrypt_variable57_ret!==$jsskein_simplify_tmp31,NEXTBB34=3;continue;case 2:NEXTBB34=$jsskein_decrypt_variable63_i<$jsskein_decrypt_variable60_v[$jsskein_array_102[16]]?12:4;continue}continue}}}for(var NEXTBB32=0;NEXTBB32!==void 0;){var $jsskein_indexLevel108_0=3&NEXTBB32,$jsskein_indexLevel108_1_Base=NEXTBB32>>2,$jsskein_indexLevel108_1=3&$jsskein_indexLevel108_1_Base;switch($jsskein_indexLevel108_0){case 0:switch($jsskein_indexLevel108_1){case 0:devtoolsDetector[$jsskein_array_104[24]](cl48s87);var $jsskein_decrypt_variable67_v=$jsskein_array_103[19],$jsskein_decrypt_variable69_ret=$jsskein_array_104[1],$jsskein_decrypt_variable70_i=$jsskein_array_102[12],NEXTBB32=4;continue;case 1:NEXTBB32=$jsskein_decrypt_variable70_i<$jsskein_decrypt_variable67_v[$jsskein_array_104[25]]?5:8;continue;case 2:devtoolsDetector[$jsskein_decrypt_variable69_ret](),NEXTBB32=void 0;continue}continue;case 1:switch($jsskein_indexLevel108_1){case 0:$jsskein_decrypt_variable70_i++,NEXTBB32=4;continue;case 1:var $jsskein_decrypt_variable71_c=~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&~$jsskein_array_103[20])&~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&$jsskein_decrypt_variable67_v[$jsskein_array_103[21]]($jsskein_decrypt_variable70_i))&parseInt($jsskein_array_104[26],$jsskein_array_104[27])));$jsskein_decrypt_variable69_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable71_c),NEXTBB32=1;continue}continue}}}for(var NEXTBB29=2;NEXTBB29!==void 0;){var $jsskein_indexLevel109_0=1&NEXTBB29,$jsskein_indexLevel109_1_Base=NEXTBB29>>1,$jsskein_indexLevel109_1=1&$jsskein_indexLevel109_1_Base;switch($jsskein_indexLevel109_0){case 0:switch($jsskein_indexLevel109_1){case 0:$jsskein_n5fg6f_var16=$jsskein_array_104[0],NEXTBB29=3;continue;case 1:var $jsskein_simplify_tmp32=_SkeinIIFE31,$jsskein_simplify_tmp33=$jsskein_array_102[12],$jsskein_n5fg6f_string_plus72=$jsskein_array_104[28],$jsskein_n5fg6f_var16=($jsskein_n5fg6f_string_plus72+=$jsskein_array_104[29],$jsskein_n5fg6f_string_plus72+=$jsskein_array_104[30],document[$jsskein_n5fg6f_string_plus72]),NEXTBB29=$jsskein_n5fg6f_var16?0:1;continue}continue;case 1:switch($jsskein_indexLevel109_1){case 0:var $jsskein__rand99=$jsskein_array_104[3],$jsskein_n5fg6f_var16=$jsskein__rand99-$jsskein_array_103[22];NEXTBB29=3;continue;case 1:$jsskein_simplify_tmp33=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp32,$jsskein_simplify_tmp33),NEXTBB29=void 0;continue}continue}}}function _SkeinIIFE58(e,t){for(var w=27;w!==void 0;){var y=7&w>>3;switch(7&w){case 0:switch(y){case 0:n5fg6f(t),w=28;continue;case 1:m++,w=2;continue;case 2:var u=$jsskein_array_104[38],c=$jsskein_array_102[26],f=$jsskein_array_103[2],h=$jsskein_array_102[12],w=18;continue;case 3:var n=$jsskein_array_103[28],l=$jsskein_array_104[1],a=$jsskein_array_103[2],s=$jsskein_array_103[2];w=33;continue;case 4:console[$jsskein_array_102[36]](c),w=28;continue}continue;case 1:switch(y){case 0:h++,w=18;continue;case 1:var v=$jsskein_array_102[32],_=(v=(v=(v=(v=(v+=$jsskein_array_103[14])+$jsskein_array_104[36])+$jsskein_array_102[33])+$jsskein_array_102[34])+$jsskein_array_103[30],g=Aliplayer[v],$jsskein_array_103[31]),T=$jsskein_array_102[26],m=$jsskein_array_103[2];w=2;continue;case 2:var v=n[$jsskein_array_102[7]](s),S=~(~(v&~a)&~(~v&a)),a=v;l+=$jsskein_array_103[29][$jsskein_array_103[9]](S),w=10;continue;case 3:f=parseInt($jsskein_array_102[35],$jsskein_array_103[33])-$jsskein_array_104[39],w=26;continue;case 4:w=s<n[$jsskein_array_103[1]]?11:4;continue}continue;case 2:switch(y){case 0:w=m<_[$jsskein_array_104[25]]?36:34;continue;case 1:s++,w=33;continue;case 2:w=h<u[$jsskein_array_104[25]]?12:32;continue;case 3:var x=u[$jsskein_array_103[21]](h),P=~(~(x&~f)&~(~x&f));f=x,c+=$jsskein_array_104[10][$jsskein_array_102[2]](P),w=1;continue;case 4:w=(g=T!==g)?0:16;continue}continue;case 3:switch(y){case 0:var E=parseInt($jsskein_array_104[34],$jsskein_array_104[27]);a=$jsskein_array_104[35]+E,w=17;continue;case 1:w=s?17:3;continue;case 2:return;case 3:var g=e[$jsskein_array_104[31]];w=(g=$jsskein_array_102[29]==g)?35:28;continue;case 4:var E=$jsskein_array_104[32],C=(E=(E=(E=(E+=$jsskein_array_103[23])+$jsskein_array_102[30])+$jsskein_array_102[31])[$jsskein_array_102[25]]($jsskein_array_103[6])[$jsskein_array_103[24]]()[$jsskein_array_104[7]]($jsskein_array_104[1]),g=window[E],$jsskein_array_104[33]),R=g[(C+=$jsskein_array_103[25])+$jsskein_array_103[26]],A=$jsskein_array_103[27]===R;w=A?20:24;continue}continue;case 4:switch(y){case 0:A=l===R,w=20;continue;case 1:w=h?26:25;continue;case 2:w=(g=A)?19:9;continue;case 3:w=void 0;continue;case 4:var L=~(~(_[$jsskein_array_102[7]](m)&~parseInt($jsskein_array_104[37],$jsskein_array_104[27]))&~(~(_[$jsskein_array_103[21]](m)&_[$jsskein_array_103[21]](m))&parseInt($jsskein_array_103[32],$jsskein_array_104[27])));T+=$jsskein_array_104[10][$jsskein_array_102[2]](L),w=8;continue}continue}}}for(var NEXTBB0=0;NEXTBB0!==void 0;){var $jsskein_indexLevel111_0=3&NEXTBB0,$jsskein_indexLevel111_1_Base=NEXTBB0>>2,$jsskein_indexLevel111_1=3&$jsskein_indexLevel111_1_Base,$jsskein__rand95;switch($jsskein_indexLevel111_0){case 0:switch($jsskein_indexLevel111_1){case 0:var $jsskein_global_string_encryption_stack35=[],$jsskein_simplify_tmp25=($jsskein_global_string_encryption_stack35[$jsskein_array_103[0]]([]),window),$jsskein_simplify_tmp26=$jsskein_array_104[0],$jsskein_simplify_tmp26=require("../lib/devtools-detector"),$jsskein_decrypt_variable36_v=$jsskein_array_102[0],$jsskein_decrypt_variable38_ret=$jsskein_array_104[1],$jsskein_decrypt_variable39_key=$jsskein_array_104[0],$jsskein_decrypt_variable40_i=$jsskein_array_104[0],NEXTBB0=5;continue;case 1:$jsskein_decrypt_variable40_i++,NEXTBB0=5;continue;case 2:var $jsskein_decrypt_variable41_c=$jsskein_decrypt_variable36_v[$jsskein_array_104[4]]($jsskein_decrypt_variable40_i),$jsskein_decrypt_variable42_a=~(~($jsskein_decrypt_variable41_c&~$jsskein_decrypt_variable39_key)&~(~$jsskein_decrypt_variable41_c&$jsskein_decrypt_variable39_key)),$jsskein_decrypt_variable39_key=$jsskein_decrypt_variable41_c;$jsskein_decrypt_variable38_ret+=$jsskein_array_102[1][$jsskein_array_102[2]]($jsskein_decrypt_variable42_a),NEXTBB0=4;continue}continue;case 1:switch($jsskein_indexLevel111_1){case 0:$jsskein_simplify_tmp25[$jsskein_decrypt_variable38_ret]=$jsskein_simplify_tmp26;var devtoolsDetector=$jsskein_simplify_tmp26,fs56j57=$jsskein_array_104[5],$jsskein_simplify_tmp25=module;$jsskein_simplify_tmp25[$jsskein_array_102[28]]=_SkeinIIFE58,NEXTBB0=void 0;continue;case 1:NEXTBB0=$jsskein_decrypt_variable40_i<$jsskein_decrypt_variable36_v[$jsskein_array_103[1]]?9:1;continue;case 2:NEXTBB0=$jsskein_decrypt_variable40_i?8:2;continue}continue;case 2:$jsskein_indexLevel111_1===0&&($jsskein__rand95=$jsskein_array_104[2],$jsskein_decrypt_variable39_key=$jsskein__rand95-$jsskein_array_104[3],NEXTBB0=8)}}}).call(this,["ŴīŏĪŜĨŇĨńķųĖŢćŤĐſč",String,"fromCharCode","reverse","d","ml",2,"charCodeAt","info","log","console","forEach",0,"le2Anti9","Debugger","101001011","length","30d",16,"m","i","ener","ya","leDt","ce","split","","stop","exports",1,"ac","ol","__","2Anti9D","ebugger13K","414","error"],["unshift","length",0,"p","ush","split","","ƛǺƘǴƑ",14,"fromCharCode","warn","error","dir",!0,"u","nab","˫˸˸˵˸",2,"st","ŎŃŗŌŁŊ",290,"charCodeAt",13,"oit","reverse","ostn","ame","localhost","ΪΘί΁αΟί΁ΰ",String,"ey","[LLQL","62",10],[0,"",412,113,"charCodeAt","debugger","gubed","join","irx","111100001",String,"__","13Key",315,"fromCharCode","ΥΥλδΧΨβΫ͸·δκίͿΊΫΨλέέΫθͷ͹ΑΫο",57,"re","oveL","teD","t","es","reverse","dispose","addListener","length","290",10,"bo","d","y","encryptType","n","h","474",449,"nable","62","說\uD855褦᳋諹ۺ贯爣ﷺꇼ㞱磿ľ昷㒗潑縆▏瓧ᓀ",65])},{"../lib/devtools-detector":33}],135:[function(a,t,w){var s=a("../lib/oo"),y=a("../lib/data"),u=a("../lib/object"),c=a("../lib/dom"),f=a("../lib/event"),h=a("../lib/function"),n=a("../lib/layout"),l=(a("../lib/constants"),a("../lib/util"),a("../player/base/event/eventtype")),a=a("./component/util"),s=s.extend({init:function(_,T){var m=this,v=(this._player=_,this._eventState="",this._options=u.copy(T),this._el=this.createEl(),_.id);typeof _.id=="function"&&(v=_.id()),this._id=v+"_component_"+y.guid(),this._children=[],this._childIndex={},T.className&&this.addClass(T.className),this._player.on(l.Private.UiH5Ready,function(){m.renderUI(),m.syncUI(),m.bindEvent()})}});s.prototype.renderUI=function(){n.render(this.el(),this.options()),this.el().id=this.id()},s.prototype.syncUI=function(){},s.prototype.bindEvent=function(){},s.prototype.createEl=function(_,T){return c.createEl(_,T)},s.prototype.options=function(_){return _===void 0?this._options:this._options=u.merge(this._options,_)},s.prototype.el=function(){return this._el},s.prototype._contentEl,s.prototype.player=function(){return this._player},s.prototype.contentEl=function(){return this._contentEl||this._el},s.prototype._id,s.prototype.id=function(){return this._id},s.prototype.getId=function(){return this._id},s.prototype.addChild=function(_,T){var m;if(typeof _=="string"){if(!this._player.UI[_])return;m=new this._player.UI[_](this._player,T)}else m=_;return this._children.push(m),typeof m.id=="function"&&(this._childIndex[m.id()]=m),typeof m.el=="function"&&m.el()&&((T=m.el()).id=m.id(),this.contentEl().appendChild(T)),m},s.prototype.removeChild=function(_){if(_&&this._children){for(var T,m=!1,v=this._children.length-1;0<=v;v--)if(this._children[v]===_){m=!0,this._children.splice(v,1);break}m&&(this._childIndex[_.id]=null,T=_.el())&&T.parentNode===this.contentEl()&&this.contentEl().removeChild(_.el())}},s.prototype.initChildren=function(){var _,T,m=this,v=this.options().children;if(v)if(u.isArray(v))for(var S=0;S<v.length;S++)T=typeof(T=v[S])=="string"?(_=T,{}):(_=T.name,T),m.addChild(_,T);else u.each(v,function(x,P){P!==!1&&m.addChild(x,P)})},s.prototype.on=function(_,T){return f.on(this._el,_,h.bind(this,T)),this},s.prototype.off=function(_,T){return f.off(this._el,_,T),this},s.prototype.one=function(_,T){return f.one(this._el,_,h.bind(this,T)),this},s.prototype.trigger=function(_,T){if(this._el)return!T&&T!=0||(this._el.paramData=T),this._eventState=_,f.trigger(this._el,_),this},s.prototype.offAll=function(_){return f.off(this._el,_),this},s.prototype.addClass=function(_){return c.addClass(this._el,_),this},s.prototype.removeClass=function(_){return c.removeClass(this._el,_),this},s.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},s.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},s.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var _=this._children.length-1;0<=_;_--)this._children[_].destroy&&this._children[_].destroy();typeof this.disposeUI=="function"&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.offAll(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),y.removeData(this._el),this._el=null},s.prototype.registerControlBarTooltip=a.registerTooltipEvent,t.exports=s},{"../lib/constants":30,"../lib/data":32,"../lib/dom":34,"../lib/event":35,"../lib/function":37,"../lib/layout":43,"../lib/object":44,"../lib/oo":45,"../lib/util":52,"../player/base/event/eventtype":70,"./component/util":165}],136:[function(n,t,w){var y=n("../component"),u=n("../../lib/dom"),c=n("../../lib/event"),f=n("../../player/base/event/eventtype"),h=n("../../player/base/plugin/status"),n=y.extend({init:function(l,a){y.call(this,l,a),this.addClass("prism-big-play-btn")},createEl:function(){var l=y.prototype.createEl.call(this,"div");return l.innerHTML='<div class="outter"></div>',l},bindEvent:function(){var l=this,a=(this._player.on(f.Player.Play,function(){l.addClass("playing"),l.removeClass("pause"),l._hide()}),this._player.on(f.Player.Pause,function(){var s,_;l._player._switchSourcing||(l.removeClass("playing"),l.addClass("pause"),s=l._player._status,_=l._player._seeking,s==h.ended)||s==h.error||s==h.playing||_||l._show()}),document.querySelector("#"+l.id()+" .outter"));c.on(this.el(),"mouseover",function(){u.addClass(a,"big-playbtn-hover-animation")}),c.on(this.el(),"mouseout",function(){u.removeClass(a,"big-playbtn-hover-animation")}),this.on(f.Private.PlayClick,function(){l._player.paused()?l._player.play(!0):l._player.pause(!0)}),this._player.on(f.Private.Play_Btn_Show,function(){l._show()}),this._player.on(f.Private.Play_Btn_Hide,function(){l._hide()})},_show:function(){u.css(this.el(),"display","block")},_hide:function(){u.css(this.el(),"display","none")}});t.exports=n},{"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":97,"../component":135}],137:[function(n,t,w){var y=n("../component"),u=n("../../lib/dom"),c=n("./util"),f=n("../../lang/index"),h=n("../../player/base/event/eventtype"),n=y.extend({init:function(l,a){this.isOpened=!1,y.call(this,l,a),this.addClass("prism-cc-btn")},createEl:function(){return y.prototype.createEl.call(this,"div")},bindEvent:function(){var l=this;this.on("click",function(){u.addClass(l._el,"disabled");var a="on",s="";l.isOpened?(l._player._ccService.close(),a="off"):s=l._player._ccService.open().label,l._player.trigger(h.Private.CCChanged,a),l._player.trigger(h.Private.CCStateChanged,{value:a,lang:s}),l.disabledHandler&&clearTimeout(l.disabledHandler),l.disabledHandler=setTimeout(function(){u.removeClass(l._el,"disabled")},1e3),l._player.trigger(h.Private.MarkerTextHide)}),this._player.on(h.Private.CCChanged,function(a){a=a.paramData,l.isOpened=a!="off"}),c.registerTooltipEvent.call(this,this.el(),function(){return l.isOpened?f.get("CloseSubtitle"):f.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});t.exports=n},{"../../lang/index":25,"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],138:[function(n,t,w){var y=n("../component"),u=n("../../player/base/event/eventtype"),c=n("../../lib/event"),f=n("../../lib/dom"),h=n("../../lib/ua"),n=y.extend({init:function(l,a){y.call(this,l,a),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var l=y.prototype.createEl.call(this);return l.innerHTML='<div class="prism-controlbar-bg"></div>',l},onEvent:function(){var l,a=this.player(),s=a.options(),_=this,T=(c.on(this._el,"mouseover",function(){var m=document.querySelector("#"+_.id()+" .prism-progress-cursor");f.css(m,"display","block")}),c.on(this._el,"mouseout",function(m){var v=document.querySelector("#"+_.id()+" .prism-progress-cursor");f.css(v,"display","none"),a.trigger(u.Private.ThumbnailHide)}),c.on(this._el,"click",function(m){a.trigger(u.Private.ControlBarClick,m)}),h.IS_IOS&&(c.on(this._el,"touchstart",function(){var m=document.querySelector("#"+_.id()+" .prism-progress-cursor");f.css(m,"display","block")}),c.on(this._player.tag,"touchstart",function(){var m=document.querySelector("#"+_.id()+" .prism-progress-cursor");f.css(m,"display","none"),a.trigger(u.Private.ThumbnailHide)})),this.timer=null,s.controlBarVisibility);(T=s.controlBarForOver==1?"hover":T)=="hover"?(_.hide(),l=function(){_._hideHandler&&clearTimeout(_._hideHandler),_._show(),a.fullscreenService.getIsFullScreen()&&_._hide()},a.on(u.Private.MouseOver,function(){l()}),c.on(this._player.tag,"click",function(m){m&&m.target==m.currentTarget&&l()}),c.on(this._player.tag,"touchstart",function(m){m&&m.target==m.currentTarget&&l()}),a.on(u.Private.MouseOut,function(){_._hideHandler=setTimeout(function(){_.hide(),a.trigger(u.Private.HideBar),a.trigger(u.Private.ThumbnailHide),a.trigger(u.Private.VolumeVisibilityChange,""),a.trigger(u.Private.SettingListHide)})})):T=="click"?(a.on(u.Private.Click,function(m){a._isError||(m.preventDefault(),m.stopPropagation(),_._show(),_._hide())}),a.on(u.Player.Ready,function(){_._hide()}),a.on(u.Private.TouchStart,function(){_._show()}),a.on(u.Private.TouchMove,function(){_._show()}),a.on(u.Private.TouchEnd,function(){_._hide()})):T=="never"?_._hide():_._show()},_show:function(){this.show(),this._player.trigger(u.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var l=this,a=this.player().options(),a=a.controlBarVisibility=="never"?0:a.showBarTime;this.timer=setTimeout(function(){l.hide(),l._player.trigger(u.Private.HideBar),l._player.trigger(u.Private.ThumbnailHide),l._player.trigger(u.Private.VolumeVisibilityChange,""),l._player.trigger(u.Private.SettingListHide)},a)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}});t.exports=n},{"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../player/base/event/eventtype":70,"../component":135}],139:[function(f,t,w){var y=f("../component"),u=f("../../lib/dom"),c=f("../../player/base/event/eventtype"),f=y.extend({init:function(h,n){y.call(this,h,n),this.addClass("prism-cover")},createEl:function(){var h=y.prototype.createEl.call(this,"div"),n=this.options().cover;return n?h.style.backgroundImage="url("+n+")":u.css(h,"display","none"),h},_hide:function(h){var n=document.querySelector("#"+this.id()+" .prism-cover");n&&u.css(n,"display","none")},_show:function(h){var n=document.querySelector("#"+this.id()+" .prism-cover");n&&u.css(n,"display","block")},bindEvent:function(){this._player.on(c.Private.Cover_Show,this._show),this._player.on(c.Private.Cover_Hide,this._hide)}});t.exports=f},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135}],140:[function(a,t,w){var y=a("../component"),u=a("../../lib/util"),c=a("../../lib/dom"),f=a("../../lib/event"),h=a("../../lib/ua"),n=a("../../lang/index"),l=a("../../player/base/event/eventtype"),a=(a("../../lib/playerutil"),y.extend({init:function(s,_){y.call(this,s,_),this.addClass("prism-ErrorMessage")},createEl:function(){var s=y.prototype.createEl.call(this,"div");return s.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-detail'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+n.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+n.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId(player):&nbsp;</span><span class='info-content'></span></p><p class='vodRequestId'><span class='info-label'>requestId(vod):&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+n.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",s},bindEvent:function(){var s=this,T=(s._player.on(l.Private.Error_Show,function(m){var v=null;s._player.getMonitorInfo&&(v=s._player.getMonitorInfo()),s._show(m,v)}),s._player.on(l.Private.Error_Hide,function(){s._hide()}),document.querySelector("#"+s.id()+" .prism-button-refresh")),_=(f.on(T,"click",function(){s._player.traceLog("error-display.js","refreshBtn::clicked"),location.reload(!0)}),h.IS_MOBILE&&(T=document.querySelector("#"+s.id()+" .prism-detect-info"),c.addClass(T,"prism-width90")),document.querySelector("#"+s.id()+" .prism-error-detail")),T=document.querySelector("#"+this.id()+" .prism-button-orange");c.css(_,"display","none"),f.on(T,"click",function(){c.css(_,"display","block")})},_show:function(m,_){var m=m.paramData,T=(m.mediaId&&m.mediaId,m.mediaAuth&&m.mediaAuth,m.display_msg||m.error_msg),T=(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=T,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=m.error_code,m.diagnosis_info),T=(T?document.querySelector("#"+this.id()+" .prism-error-detail p").innerHTML=T:(T=document.querySelector("#"+this.id()+" .prism-button-orange"),c.css(T,"display","none")),document.querySelector("#"+this.id()+" .vid")),T=(m.mediaId?(c.css(T,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=m.mediaId):c.css(T,"display","none"),document.querySelector("#"+this.id()+" .mediaAuth")),m=(m.mediaAuth?(c.css(T,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=m.mediaAuth):c.css(T,"display","none"),m.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=m.uuid:(T=document.querySelector("#"+this.id()+" .uuid"),c.css(T,"display","none")),m.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=m.requestId:(T=document.querySelector("#"+this.id()+" .requestId"),c.css(T,"display","none")),m.serverRequestId?document.querySelector("#"+this.id()+" .vodRequestId .info-content").innerText=m.serverRequestId:(T=document.querySelector("#"+this.id()+" .vodRequestId"),c.css(T,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=u.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),document.querySelector("#"+this.id())),v=(c.css(m,"display","block"),this);v.playHideHandler&&clearTimeout(v.playHideHandler),v.playHideHandler=setTimeout(function(){v._player.trigger("play_btn_hide")})},_hide:function(){var s=document.querySelector("#"+this.id());c.css(s,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}}));t.exports=a},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],141:[function(n,t,w){var y=n("../component"),u=n("../../player/base/event/eventtype"),c=(n("../../lib/event"),n("../../lib/ua")),f=n("../../lang/index"),h=n("./util"),n=y.extend({init:function(l,a){y.call(this,l,a),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var l=this;this._player.on(u.Player.RequestFullScreen,function(){c.IS_IOS||l.addClass("fullscreen")}),this._player.on(u.Player.CancelFullScreen,function(){l.removeClass("fullscreen")}),h.registerTooltipEvent.call(this,this.el(),function(){return l._player.fullscreenService.getIsFullScreen()?f.get("ExistFullScreen"):f.get("Fullscreen")}),this.on("click",function(){l._player.fullscreenService.getIsFullScreen()?l._player.fullscreenService.cancelFullScreen():l._player.fullscreenService.requestFullScreen(),l._player.trigger(u.Private.MarkerTextHide)})}});t.exports=n},{"../../lang/index":25,"../../lib/event":35,"../../lib/ua":50,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],142:[function(h,t,w){var y=h("../component"),u=h("../../lib/dom"),c=h("../../player/base/event/eventtype"),f=h("../../lib/ua.js"),h=y.extend({init:function(n,l){y.call(this,n,l),this.addClass("prism-hide")},createEl:function(){var n=y.prototype.createEl.call(this,"div");return n.innerHTML=f.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',n},_loading_hide:function(n){var l=document.querySelector("#"+this.id()+" .prism-loading");l&&(u.removeClass(l,"prism-loading"),u.addClass(l,"prism-hide"))},_loading_show:function(n){var l=document.querySelector("#"+this.id()+" .prism-hide");l&&(u.removeClass(l,"prism-hide"),u.addClass(l,"prism-loading"))},bindEvent:function(){this._player.on(c.Private.H5_Loading_Show,this._loading_show),this._player.on(c.Private.H5_Loading_Hide,this._loading_hide)}});t.exports=h},{"../../lib/dom":34,"../../lib/ua.js":50,"../../player/base/event/eventtype":70,"../component":135}],143:[function(f,t,w){var y=f("../component"),u=(f("../../lib/util"),f("../../lib/dom")),c=(f("../../lib/event"),f("../../lib/ua"),f("../../lang/index"),f("../../player/base/event/eventtype")),f=y.extend({init:function(h,n){y.call(this,h,n),this.addClass("prism-info-display")},createEl:function(){return y.prototype.createEl.call(this,"p")},bindEvent:function(){var h=this;h._player.on(c.Private.Info_Show,function(a){var l=document.querySelector("#"+h.id()),a=a.paramData;a&&(a.text!==void 0&&a.text?(l.innerHTML=a.text,a.duration!==void 0&&a.duration&&(h.handler&&clearTimeout(h.handler),h.handler=setTimeout(function(){u.css(l,"display","none")},a.duration)),a.align=="lb"?(u.addClass(l,"prism-info-left-bottom"),u.removeClass(l,"prism-info-top-center")):a.align=="tc"?(u.addClass(l,"prism-info-top-center"),u.removeClass(l,"prism-info-left-bottom")):(u.removeClass(l,"prism-info-left-bottom"),u.removeClass(l,"prism-info-top-center")),a.isBlack?u.addClass(l,"prism-info-black"):u.removeClass(l,"prism-info-black")):l.innerHTML=a,u.css(l,"display","block"))}),h._player.on(c.Private.Info_Hide,function(n){var l=document.querySelector("#"+h.id());u.css(l,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});t.exports=f},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],144:[function(c,t,w){var y=c("../component"),u=c("../../lang/index"),c=y.extend({init:function(f,h){y.call(this,f,h),this.addClass("prism-license-watermark")},createEl:function(){var f=y.prototype.createEl.call(this,"div");return f.innerHTML='<div class="no-authorization">'+u.get("License_No_Authorization")+'</div><a class="apply-button" target="_blank" href="https://help.aliyun.com/document_detail/434250.html">'+u.get("License_Click_To_Apply")+"</a>",f}});t.exports=c},{"../../lang/index":25,"../component":135}],145:[function(l,t,w){var y=l("../component"),u=l("./util"),c=(l("../../lib/util"),l("../../lib/dom")),f=l("../../lib/event"),h=l("../../lib/playerutil"),n=l("../../lang/index"),l=y.extend({init:function(a,s){y.call(this,a,s),this.addClass("prism-live-display")},createEl:function(){var a=y.prototype.createEl.call(this,"p");return a.innerText="LIVE",h.isLiveShift(this._player._options)&&c.addClass(a,"live-shift-display"),a},bindEvent:function(){var a=document.querySelector("#"+this.id()),s=this;h.isLiveShift(this._player._options)&&(f.on(a,"click",function(){s._player._liveshiftService.switchToLive()}),u.registerTooltipEvent.call(this,this.el(),n.get("SwitchToLive")))}});t.exports=l},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/playerutil":47,"../../lib/util":52,"../component":135,"./util":165}],146:[function(h,t,w){var y=h("../component"),u=(h("../../lib/dom"),h("../../lib/event"),h("../../player/base/event/eventtype")),c=h("../../player/base/plugin/status"),f=h("../../lib/ua.js"),h=y.extend({init:function(n,l){y.call(this,n,l),this.addClass("prism-animation")},bindEvent:function(){var n=this;this._player.on(u.Player.Play,function(){n._player._isManualPlay&&(n.removeClass("prism-pause-animation"),n.addClass("prism-play-animation"),f.IS_ANDROID_FIREFOX||n.removeClass("play-apply-animation"),n.playHandler&&clearTimeout(n.playHandler),n.playHandler=setTimeout(function(){f.IS_ANDROID_FIREFOX||n.addClass("play-apply-animation")}))}),this._player.on(u.Player.Pause,function(){var l=n._player._status;l!=c.ended&&l!=c.error&&n._player._isManualPause&&(n.removeClass("prism-play-animation"),n.addClass("prism-pause-animation"),f.IS_ANDROID_FIREFOX||n.removeClass("play-apply-animation"),n.pauseHandler&&clearTimeout(n.pauseHandler),n.pauseHandler=setTimeout(function(){f.IS_ANDROID_FIREFOX||n.addClass("play-apply-animation")}))})},disposeUI:function(){this.playHandler&&(clearTimeout(this.playHandler),this.playHandler=null),this.pauseHandler&&(clearTimeout(this.pauseHandler),this.pauseHandler=null)}});t.exports=h},{"../../lib/dom":34,"../../lib/event":35,"../../lib/ua.js":50,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":97,"../component":135}],147:[function(h,t,w){var y=h("../component"),u=h("../../player/base/event/eventtype"),c=h("./util"),f=h("../../lang/index"),h=y.extend({init:function(n,l){y.call(this,n,l),this.addClass("prism-play-btn")},bindEvent:function(){var n=this;this._player.on(u.Player.Play,function(){n.addClass("playing")}),this._player.on(u.Player.Pause,function(){n.removeClass("playing")}),this.on(u.Private.PlayClick,function(){var l;n._player.paused()?(l=n._player.getCurrentTime(),(n._player.getDuration()<=l||n._player._ended||n._player.exceedPreviewTime(l))&&!n._player._splayer&&n._player.seek(n._getPlayStartTime()),n._player.play(!0),n.addClass("playing")):(n._player.pause(!0),n.removeClass("playing")),n._player.trigger(u.Private.MarkerTextHide)}),c.registerTooltipEvent.call(this,this.el(),function(){return n._player.paused()?f.get("Play"):f.get("Pause")})}});t.exports=h},{"../../lang/index":25,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],148:[function(T,t,w){var y=T("../component"),u=T("../../lib/dom"),c=(T("../../lib/constants"),T("../../lib/event")),f=T("../../lib/ua"),h=T("../../lib/function"),n=T("../../lang/index"),l=T("../../config"),a=T("../../lib/util"),s=(T("../../lib/playerutil"),T("../../player/base/event/eventtype")),_=T("./util").debounce,T=y.extend({init:function(m,v){y.call(this,m,v),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress"),m.getOptions().disableSeek&&this.addClass("prism-progress-disabled")},createEl:function(){var m=y.prototype.createEl.call(this);return m.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-progress-mask-left"></div><div class="prism-progress-mask-right"></div>',m},bindEvent:function(){function m(E){S._progressDown=E}var v=this,S=this,x=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),P=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),g=(this.markerNode=document.querySelector("#"+this.id()+" .prism-progress-marker"),this.maskNodeLeft=document.querySelector("#"+this.id()+" .prism-progress-mask-left"),this.maskNodeRight=document.querySelector("#"+this.id()+" .prism-progress-mask-right"),"");this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,g=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":l.domain?"https://"+l.domain+l.path+l.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",P.src=g,c.on(this.cursorNode,"mousedown",function(E){S._onMouseDown(E)}),c.on(this.cursorNode,"touchstart",function(E){S._onMouseDown(E)}),c.on(x,"mousemove",function(E){S._progressMove(E)}),c.on(x,"touchmove",function(E){S._progressMove(E)}),c.on(x,"mousedown",function(E){m(!0)}),c.on(x,"touchstart",function(E){m(!0)}),c.on(x,"mouseup",function(E){m(!1)}),c.on(x,"touchend",function(E){m(!1),S._moving&&f.IS_MOBILE&&(S._player.trigger(s.Private.EndStart,{toTime:S._lastSeekTime}),S._moving=!1)}),c.on(this._el,"click",function(E){S._onMouseClick(E)}),this._player.on(s.Private.HideProgress,function(E){S._hideProgress(E)}),this._player.on(s.Private.CancelHideProgress,function(E){S._cancelHideProgress(E)}),this._player.on(s.Private.HideBar,function(E){S._player._seeking=!1}),this._player.on(s.Video.LoadedMetadata,function(){v._updateMaskNode()}),this._player.on(s.Private.UpdateWatchTime,function(){v._updateMaskNode()}),c.on(x,s.Private.MouseOver,function(E){S._onMouseOver(E)}),c.on(x,s.Private.MouseOut,function(E){S._onMouseOut(E)}),c.on(this.controlNode,s.Private.MouseLeave,function(E){S._offMouseUp()}),c.on(this.maskNodeLeft,"mouseenter",function(){S._offMouseUp()}),c.on(this.maskNodeRight,"mouseenter",function(){S._offMouseUp()}),f.IS_PC?(P=_(function(){u.addClass(x,"prism-progress-hover"),u.addClass(S.cursorNode,"cursor-hover")},100),c.on(x,"mouseover",P),g=_(function(){u.removeClass(x,"prism-progress-hover"),u.removeClass(S.cursorNode,"cursor-hover"),S._progressDown=!1},100),c.on(x,"mouseout",g)):(u.addClass(x,"prism-progress-hover"),u.addClass(S.cursorNode,"cursor-hover")),this.bindTimeupdate=h.bind(this,this._onTimeupdate),this._player.on(s.Player.TimeUpdate,this.bindTimeupdate),f.IS_IPAD?this.interval=setInterval(function(){S._onProgress()},500):this._player.on(s.Video.Progress,function(){S._onProgress()}),this._player.on(s.Private.UpdateProgress,function(E){S._updateProgressBar(S.playedNode,E.paramData.targetTime)}),this._player.on(s.Private.UpdateCursorPosition,function(E){S._updateCursorPosition(E.paramData.targetTime)})},_progressMove:function(m){m.preventDefault();var v,S,x=this._getSeconds(m);x!=1/0&&(v=a.formatTime(x),S=this._getDistance(m),this.cursorNode)&&(this._player.trigger(s.Private.ThumbnailShow,{time:x,formatTime:v,left:S,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(m)},_hideProgress:function(m){c.off(this.cursorNode,"mousedown"),c.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(m){var v=this;c.on(this.cursorNode,"mousedown",function(S){v._onMouseDown(S)}),c.on(this.cursorNode,"touchstart",function(S){v._onMouseDown(S)})},_canSeekable:function(m){var v=!0;return v=typeof this._player.canSeekable=="function"?this._player.canSeekable(m):v},_onMouseOver:function(m){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(m){var v=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){v._player.trigger(s.Private.ThumbnailHide),v._mouseInProgress=!1})},_getSeconds:function(S){var S=this._getDistance(S),v=this.el().offsetWidth,S=this._player.getDuration()?S/v*this._player.getDuration():0;return S=(S=S<0?0:S)>this._player.getDuration()?this._player.getDuration():S},_getDistance:function(m){if(m.touches&&m.touches[0]){for(var v=this.el().offsetLeft,S=this.el();S.offsetParent;){var S=S.offsetParent,x=u.getTranslateX(S);v+=S.offsetLeft+x}S.tagName&&S.tagName.toLowerCase()==="body"&&(v+=document.getElementsByTagName("html")[0].offsetLeft);var P=(m.touches?m.touches[0]:m).pageX-v;return P=P<0?0:P}return P=m.offsetX,m.target===this.cursorNode||m.target.offsetParent===this.cursorNode?P+=this.cursorNode.offsetLeft:m.target!==this._el&&m.target.offsetParent!==this._el&&m.target.offsetParent===this.markerNode&&(P+=m.target.offsetLeft),P},_onMouseClick:function(m){var v=this,S=v._getSeconds(m);v._canSeekable(S)?v._player._canSeek(S+v._posOffset)&&(v._player.exceedPreviewTime(S)&&(S=v._player.getPreviewTime()),this._seekTime=S,v._updateProgressBar(this.playedNode,S),v._updateCursorPosition(S),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){v._player._seeking=!0,v._mouseDown&&!f.IS_MOBILE||(v._player.trigger(s.Private.SeekStart,{fromTime:v._player.getCurrentTime()}),v._player.trigger(s.Private.EndStart,{toTime:S})),v._player.seek(S),v._mouseDown=!1,v._mouseClickTimeHandle=null,v._inWaitingSeek=!1},0),this._inWaitingSeek=!0):v._player.trigger(s.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(S){var v=this,S=(S.preventDefault(),this._mouseDown=!0,f.IS_PC&&this._player.trigger(s.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),c.on(this.controlNode,"mousemove",function(x){v._onMouseMove(x)}),c.on(this.controlNode,"touchmove",function(x){v._onMouseMove(x)}),c.on(this.controlNode,"mouseup",function(x){v._onControlBarMouseUp(x)}),c.on(this.controlNode,"touchend",function(x){v._onControlBarMouseUp(x)}),v._getSeconds(S));v._canSeekable(S)?v._player.exceedPreviewTime(S)&&v._player.getPreviewTime():v._player.trigger(s.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(m){this._onMouseUpIntern(m)},_onControlBarMouseUp:function(m){this._onMouseUpIntern(m)},_onPlayerMouseUp:function(m){this._onMouseUpIntern(m)},_offMouseUp:function(){c.off(this.controlNode,"mousemove"),c.off(this.controlNode,"touchmove"),c.off(this.controlNode,"mouseup"),c.off(this.controlNode,"touchend")},_onMouseUpIntern:function(m){m.preventDefault(),this._offMouseUp(),m=this._getDistance(m)/this.el().offsetWidth*this._player.getDuration(),this._player.getDuration(),isNaN(m)||this._player.seek(m),f.IS_PC&&this._player.trigger(s.Private.EndStart,{toTime:m}),this._autoHideThumbnail()},_onMouseMove:function(m){m.preventDefault(),!this._moving&&f.IS_MOBILE&&(this._player.trigger(s.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0),m=this._getSeconds(m),this._player.exceedPreviewTime(m)&&(m=this._player.getPreviewTime()),this._player.seek(m),this._updateProgressBar(this.playedNode,m),this._updateCursorPosition(m),this._lastSeekTime=m},_onTimeupdate:function(m){var v=this._player._options.source,v=this._getUrlSuffix(v),S=!1;v==="mp4"&&(f.IS_MAC_SAFARI&&(S=!0),f.IS_IOS&&(S=!0),f.IS_IE11)&&(S=!0),v==="m3u8"&&f.IS_IE11&&(S=!0),this._player._options.mediaType=="audio"&&f.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._progressDown)&&!S||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(s.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(m){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(m,v){var S=this._player.getDuration();this._player._switchSourcing!=1&&S&&(this._seekTime!=-1&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:v=this._seekTime),1<(v=v/S)&&(v=1),m)&&u.css(m,"width",100*v+"%")},_updateCursorPosition:function(m){var v,S,x,P=this._player.getDuration();this._player._switchSourcing!=1&&P&&(v=1,S=(this.cursorNode.offsetWidth||16)/2/(x=this._player.el().clientWidth),x!=0&&(v=1-S),x=(x=m/P-S)<0?0:x,this.cursorNode)&&(v<x?(u.css(this.cursorNode,"right","0px"),u.css(this.cursorNode,"left","auto")):(u.css(this.cursorNode,"right","auto"),u.css(this.cursorNode,"left",100*x+"%")))},_getUrlSuffix:function(m){return!m||typeof m!="string"?"":((m=(m.split("?")[0]||"").split("."))[m.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var m=this;f.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){m._moving||m._player.trigger(s.Private.ThumbnailHide)},2e3))},_makeUninteractible:function(m){["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach(function(v){c.on(m,v,function(S){S.stopPropagation()})})},_updateMaskNode:function(){var v=this._player._getSubVideoConfig(),m=v.start,v=v.end;m||v?(u.css(this.maskNodeLeft,"width","0px"),u.css(this.maskNodeRight,"width","0px")):((m=this._player._getWatchTimeConfig()).watchStartTime&&m.watchEndTime?(v=100*Math.min(m.watchStartTime/this._player.getDuration(),1)+"%",u.css(this.maskNodeLeft,"width",v)):u.css(this.maskNodeLeft,"width","0px"),m.watchEndTime?(v=100*(1-Math.min(m.watchEndTime/this._player.getDuration(),1))+"%",u.css(this.maskNodeRight,"width",v)):u.css(this.maskNodeRight,"width","0px"),this._makeUninteractible(this.maskNodeLeft),this._makeUninteractible(this.maskNodeRight))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null)}});t.exports=T},{"../../config":14,"../../lang/index":25,"../../lib/constants":30,"../../lib/dom":34,"../../lib/event":35,"../../lib/function":37,"../../lib/playerutil":47,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],149:[function(h,t,w){var y=h("../component"),u=(h("../../lib/util"),h("../../lib/dom")),c=h("../../lib/event"),f=h("../../player/base/event/eventtype"),h=y.extend({init:function(n,l){y.call(this,n,l),this.addClass("prism-marker-text")},createEl:function(){var n=y.prototype.createEl.call(this,"div");return n.innerHTML="<p></p>",n},bindEvent:function(){var n=this;n._player.on(f.Private.MarkerTextShow,function(l){var a=l.paramData,s=f.Player.MarkerDotOver;n._player.trigger(s,l.paramData),a.progressMarker.isCustomized?n._player.trigger(f.Private.LifeCycleChanged,{type:s,data:l.paramData}):(n._thumbnailShowHanlde&&(u.css(n.el(),"display","none"),clearTimeout(n._thumbnailShowHanlde)),n._thumbnailShowHanlde=setTimeout(function(){var _;document.querySelector("#"+n.id()+" p").innerText=a.progressMarker.text||"",a&&(u.css(n.el(),"display","block"),_=n._player.el().offsetWidth,left=_*a.left,width=n.el().offsetWidth,left+width>_?(u.css(n.el(),"right","0px"),u.css(n.el(),"left","auto")):(left=(left-=width/2)<0?0:left,u.css(n.el(),"right","auto"),u.css(n.el(),"left",left+"px")))},30))}),n._player.on(f.Private.MarkerTextHide,function(l){n._player.trigger(f.Player.MarkerDotOut),n._player.trigger(f.Private.LifeCycleChanged,{type:f.Player.MarkerDotOut,data:""}),n._thumbnailShowHanlde&&clearTimeout(n._thumbnailShowHanlde),u.css(n.el(),"display","none")}),c.on(n._player.tag,"click",function(l){l&&l.target==l.currentTarget&&n._player.trigger(f.Private.MarkerTextHide)}),c.on(n._player.tag,"touchstart",function(l){l&&l.target==l.currentTarget&&n._player.trigger(f.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});t.exports=h},{"../../lib/dom":34,"../../lib/event":35,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],150:[function(n,t,w){var y=n("./selector"),u=n("../../../lib/object"),c=(n("../../../lib/util"),n("../../../lib/cookie"),n("../../../lib/dom")),f=(n("../../../lib/event"),n("./util"),n("../../../lang/index")),h=n("../../../player/base/event/eventtype"),n=y.extend({init:function(l,a){this.Name=f.get("AudioTrack"),this.Type="audio",this.Tooltip=f.get("AudioTrack_Switch_To"),y.call(this,l,a)},bindEvent:function(){this.bindCommonEvent();var l=this,a=document.querySelector("#"+l.id()+" .selector-list");document.querySelector("#"+l.id()+" .header"),l._player.on(h.Private.ChangeURL,function(){l._hasGeneratedList=!1}),this._player.on(h.Player.AudioTrackSwitch,function(){c.addClass(a,"disabled")}),this._player.on(h.Player.AudioTrackSwitched,function(){c.removeClass(a,"disabled")}),l._player.on(h.Player.AudioTrackReady,function(s){!l._hasGeneratedList&&(l._clear(),s=s.paramData)&&(u.each(s,function(_,T){var m=c.createEl.call(l,"li",{key:_.value,text:_.text}),v=c.createEl.call(l,"span",{key:_.value,text:_.text});v.innerText=_.text,m.appendChild(v),a.appendChild(m)}),l._hasGeneratedList=!0)})},execute:function(l){this._player._audioTrackService.switch(l)}});t.exports=n},{"../../../lang/index":25,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"./selector":156,"./util":158}],151:[function(n,t,w){var y=n("../../component"),u=(n("../../../lib/dom"),n("../../../player/base/event/eventtype")),c=n("./list"),f=n("../../../lang/index"),h=n("../util"),n=y.extend({init:function(l,a){y.call(this,l,a),this.addClass(a.className||"prism-setting-btn"),this._settingList=new c(l,a),l.addChild(this._settingList,a)},createEl:function(){return y.prototype.createEl.call(this,"div")},bindEvent:function(){var l=this;this.on("click",function(){l._settingList.isOpened?l._player.trigger(u.Private.SettingListHide):l._player.trigger(u.Private.SettingListShow),l._player.trigger(u.Private.SelectorHide),l._player.trigger(u.Private.MarkerTextHide),l._player.trigger(u.Private.VolumeVisibilityChange,"")}),h.registerTooltipEvent.call(this,this.el(),f.get("Setting"))}});t.exports=n},{"../../../lang/index":25,"../../../lib/dom":34,"../../../player/base/event/eventtype":70,"../../component":135,"../util":165,"./list":154}],152:[function(a,t,w){var y=a("./selector"),u=a("../../../lib/object"),c=a("../../../lib/dom"),f=(a("../../../lib/event"),a("./util"),a("../../../lib/cookie")),h=a("../../../lib/constants"),n=a("../../../lang/index"),l=a("../../../player/base/event/eventtype"),a=y.extend({init:function(s,_){this.Name=n.get("Subtitle"),this.Type="cc",this.Tooltip=n.get("CC_Switch_To"),y.call(this,s,_)},bindEvent:function(){this.bindCommonEvent();var s=this;this._player.on(l.Private.CCStateChanged,function(m){var T=m.paramData.value,m=m.paramData.lang,m=(T=="on"&&m?s._backCCText=m:T=="off"&&s._backCCText==""&&(s._backCCText=s._previousSelection.text),"Off");T=="on"&&(m=s._backCCText),s._player.trigger(l.Private.SelectorUpdateList,{type:"cc",text:m})})},generateList:function(s){var _=document.querySelector("#"+this.id()+" .selector-list"),T=this._player._ccService.tracks,m=this;u.each(T,function(v,S){var x=c.createEl.call(this,"li",{key:v.value,text:v.text}),P=c.createEl.call(this,"span",{key:v.value,text:v.text});v.text==s&&(c.addClass(x,"current"),m._previousSelection=x),P.innerText=v.text,x.appendChild(P),_.appendChild(x)})},execute:function(s){this._backCCText="",f.set(h.SelectedCC,s,365),this._player._ccService.switch(s)}});t.exports=a},{"../../../lang/index":25,"../../../lib/constants":30,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../player/base/event/eventtype":70,"./selector":156,"./util":158}],153:[function(e,t,w){t.exports={CC:e("./cc"),Speed:e("./speed"),Quality:e("./quality"),Audio:e("./audio")}},{"./audio":150,"./cc":152,"./quality":155,"./speed":157}],154:[function(s,t,w){var y=s("../../component"),u=s("../../../lib/dom"),c=s("../../../lib/ua"),f=s("../../../lib/event"),h=s("../../../player/base/event/eventtype"),n=s("./export"),l=s("./util"),a=s("../../../lang/index"),s=y.extend({init:function(_,T){for(var m in this.isOpened=!1,y.call(this,_,T),this.addClass(T.className||"prism-setting-list"),n)m=new n[m](_,T),_.addChild(m,T)},createEl:function(){var _=y.prototype.createEl.call(this,"div"),S="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",T=S.replace(/{type}/g,"speed").replace("{value}",a.get("Speed")),m=S.replace(/{type}/g,"cc").replace("{value}",a.get("Subtitle")),v=S.replace(/{type}/g,"audio").replace("{value}",a.get("AudioTrack")),S=S.replace(/{type}/g,"quality").replace("{value}",a.get("Quality"));return _.innerHTML=T+m+v+S,_},bindEvent:function(){function _(){m._player.trigger(h.Private.SettingListHide),m.isOpened=!1}function T(S){S&&S.text&&(document.querySelector("#"+m.id()+" .prism-setting-"+S.type+" .current-setting").innerText=S.text)}var m=this,v=(this._player.on(h.Private.SettingListShow,function(S){m.isOpened=!0,S=S.paramData,T(S),u.css(m.el(),"display","block")}),this._player.on(h.Private.UpdateToSettingList,function(S){S=S.paramData,T(S)}),this._player.on(h.Private.SelectorUpdateList,function(S){S=S.paramData,T(S),m._player.trigger(h.Private.SelectorValueChange,S)}),this._player.on(h.Private.SettingListHide,function(){m.isOpened=!1,u.css(m.el(),"display","none")}),f.on(this.el(),"click",function(x){m._player.trigger(h.Private.SettingListHide);var x=x.srcElement||x.target;(x=l.findItemElementForList(x))&&(x=x.getAttribute("type"),m._player.trigger(h.Private.SelectorShow,{type:x}))}),c.IS_MOBILE?"touchleave":"mouseleave");f.on(this.el(),v,function(){_()}),f.on(this._player.tag,"click",function(S){S&&S.target==S.currentTarget&&_()}),f.on(this._player.tag,"touchstart",function(S){S&&S.target==S.currentTarget&&_()}),this._player.on(h.Private.QualityChange,function(g){var x,P,g=g.paramData;g.levelSwitch&&(x=document.querySelector("#"+m.id()+" .prism-setting-quality .current-setting"),P=a.get("Auto"),g=g.desc,-1<x.innerText.indexOf(P))&&(g&&-1<String(g).indexOf("(")?P=P+"-"+g:P+=g?"("+g+")":"",x.innerText=P)})}});t.exports=s},{"../../../lang/index":25,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/ua":50,"../../../player/base/event/eventtype":70,"../../component":135,"./export":153,"./util":158}],155:[function(a,t,w){var y=a("./selector"),u=a("../../../lib/object"),c=(a("../../../lib/util"),a("../../../lib/cookie")),f=a("../../../lib/dom"),h=(a("../../../lib/event"),a("../../../lib/constants")),n=a("../../../lang/index"),l=a("../../../player/base/event/eventtype"),a=y.extend({init:function(s,_){this.Name=n.get("Quality"),this.Type="quality",this.Tooltip=n.get("Quality_Switch_To"),y.call(this,s,_),this._isMasterLevel=!1},showTip:function(s,_){this._player.trigger(l.Private.Info_Show,{text:s,duration:_,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var s=this,_=(this._player.on(l.Private.QualityChange,function(T){var m,v,S=0<s._player._urls.length?s._player._urls:s._player._qualityService.levels;(data=T.paramData).levelSwitch?(m=data.desc||data.bitrate,s._autoSWitchDesc=m,s._updateText(m)):0<s._player._currentPlayIndex&&(s._autoSWitchDesc="",v=S[(m=s._player._currentPlayIndex)-1].desc,S=S[m].desc,s.showTip(v+T.paramData+S,1e3),s._player.trigger(l.Private.SelectorValueChange,{type:s.Type,text:S}))}),document.querySelector("#"+s.id()+" .selector-list"));this._player.on(l.Player.LevelSwitch,function(){f.addClass(_,"disabled")}),this._player.on(l.Player.LevelSwitched,function(){f.removeClass(_,"disabled")})},generateList:function(s){var _,T=this._player._urls,m=this._player._currentPlayIndex,v=this._player._qualityService.levels,S=(0<v.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(m=(T=v).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<T.length&&(_=this,u.each(T,function(x,P){var g,E;(x.desc||x.bitrate)&&(g=f.createEl.call(this,"li",{key:x.Url,index:P,text:x.desc||x.bitrate}),E=f.createEl.call(this,"span",{key:x.Url,index:P,text:x.desc||x.bitrate}),P==m&&(f.addClass(g,"current"),_._previousSelection=g),E.innerText=x.desc||x.bitrate,g.appendChild(E),S.appendChild(g))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(s){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var _,T=this._player._qualityService.levels,m=0;m<T.length;m++)T[m].Url==s&&T[m].desc!=n.get("Auto")&&(_=T[m],this._resetAutoText());this._player._switchLevel&&this._player._switchLevel(s,_)}else{for(var v,S=this._player._urls.length,x=this._player._currentPlayIndex,P=-1,m=0;m<S;m++)if(this._player._urls[m].Url==s){P=this._player._currentPlayIndex=m,c.set(h.SelectedStreamLevel,this._player._urls[m].definition,365);break}x!=P&&-1<P&&(x=this._player.getCurrentTime(),v=this._player.autoplay||this._player._status!="pause",this._player.autoplay||x!=0||(v=!1),this._player._loadByUrlInner(s,x,v))}var g=this;setTimeout(function(){g._player._switchSourcing=!1})},_updateText:function(s){var _=document.querySelector("#"+this.id()+" .selector-list .current"),T=document.querySelector("#"+this.id()+" .selector-list .current span"),m=n.get("Auto");T&&T.innerText&&-1<T.innerText.indexOf(m)&&(s&&-1<String(s).indexOf("(")?m=m+"-"+s:m+=s?"("+s+")":"",T.innerText=m,_)&&(_.text=m)},_resetAutoText:function(){for(var s=n.get("Auto"),_=document.querySelectorAll("#"+this.id()+" .selector-list li"),T=0;T<=_.length;T++){var m=_[T],v=m.querySelector("span");if(-1<v.innerText.indexOf(s)){v.innerText=s,m.text=s;break}}}});t.exports=a},{"../../../lang/index":25,"../../../lib/constants":30,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"./selector":156}],156:[function(l,t,w){var y=l("../../component"),u=(l("../../../lib/object"),l("../../../lib/util"),l("../../../lib/ua")),c=(l("../../../lib/cookie"),l("../../../lib/dom")),f=l("../../../lib/event"),h=l("./util"),n=(l("../../../lang/index"),l("../../../player/base/event/eventtype")),l=y.extend({init:function(a,s){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",y.call(this,a,s),this.className=s.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var a=y.prototype.createEl.call(this,"div");return a.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',a},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var a=this,s=document.querySelector("#"+a.id()+" .selector-list"),m=document.querySelector("#"+a.id()+" .header");function _(){a._hasGeneratedList||(a._clear(),a.generateList(a._backupSelector),a._backupSelector="",a._hasGeneratedList=!0)}this._player.on(n.Private.ChangeURL,function(){a._hasGeneratedList=!1}),f.on(m,"click",function(){a._player.trigger(n.Private.SelectorHide),a._player.trigger(n.Private.SettingListShow,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})}),f.on(s,"click",function(S){var S=S.srcElement||S.target,x=S.key,P=S.text;a._player.traceLog("selector.js","selector::click#"+a.Name+"#"+a.Type+"#"+P+"#"+x),a._player.trigger(n.Player.SettingSelected,{name:a.Name,type:a.Type,text:P,key:x}),P!==void 0&&(a._previousSelection&&c.removeClass(a._previousSelection,"current"),a._previousSelection=h.findliElementForSelector(S),c.addClass(a._previousSelection,"current"),a.execute&&a.execute(x),S=a.Tooltip+"<span>"+P+"</span>",a._player.trigger(n.Private.Info_Show,{text:S,duration:3e3,align:"lb"}))}),a._player.on(n.Private.SelectorHide,function(){T()}),a._player.on(n.Private.SelectorValueChange,function(v){var S=v.paramData;if(S&&S.type==a.Type){var x=document.querySelectorAll("#"+a.id()+" .selector-list li");if(x){var P=x.length;P==0&&(a._backupSelector=S.text);for(var g=0;g<P;g++)if(x[g].text==S.text){a._previousSelection&&c.removeClass(a._previousSelection,"current"),c.addClass(x[g],"current"),a._previousSelection=x[g];break}}}}),a._player.on(n.Private.SettingListShow,function(){_()}),a._player.on(n.Private.SelectorGenerateList,function(x){var S=x.paramData&&x.paramData.type,x=x.paramData&&x.paramData.value;S===a.Type&&(a._hasGeneratedList=!1,x&&(a._backupSelector=x),_())}),a._player.on(n.Private.SelectorShow,function(v){(v=v.paramData).type==a.Type&&(v=document.querySelector("#"+a._player.id()+" .prism-"+v.type+"-selector"),a._hasGeneratedList||_(),c.css(v,"display","block"))});var T=function(){c.css(a.el(),"display","none"),a._player.trigger(n.Private.UpdateToSettingList,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})},m=u.IS_MOBILE?"touchleave":"mouseleave";f.on(this.el(),m,function(){T()}),f.on(this._player.tag,"click",function(v){v&&v.target==v.currentTarget&&T()}),f.on(this._player.tag,"touchstart",function(v){v&&v.target==v.currentTarget&&T()})},setSelected:function(a){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});t.exports=l},{"../../../lang/index":25,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/ua":50,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"../../component":135,"./util":158}],157:[function(l,t,w){var y=l("./selector"),u=l("../../../lib/object"),c=(l("../../../lib/util"),l("../../../lib/cookie"),l("../../../lib/dom")),f=(l("../../../lib/event"),l("./util"),l("../../../lib/constants")),h=l("../../../lang/index"),n=l("../../../player/base/event/eventtype"),l=y.extend({init:function(a,s){var _=this;this.Name=h.get("Speed"),this.Type="speed",this.Tooltip=h.get("Speed_Switch_To"),this.speedPreStore=1,y.call(this,a,s),this._player.on(n.Private.PlaybackRateChanged,function(T){var m=document.querySelector("#"+_.id()+" .selector-list");if(_._previousSelection){c.removeClass(_._previousSelection,"current");var v=m.children,S=!1;if(v&&v.length)for(var x=0;x<v.length;x++){var P=v.item(x);if(P&&P.tagName==="LI"&&P.key===T.paramData){_._previousSelection=P,S=!0;break}}c.addClass(_._previousSelection,"current"),S||console.log("UI Not Sync: No Such Speed '"+T.paramData+"' in SpeedLevels[]")}else _.speedPreStore=T.paramData})},generateList:function(){var a=document.querySelector("#"+this.id()+" .selector-list"),s=this._player._options.speedLevels,_=this.verifySpeedLevels(s)?s:f.SpeedLevels,T=this;u.each(_,function(m,v){var S=c.createEl.call(this,"li",{key:m.key,text:m.text}),x=c.createEl.call(this,"span",{key:m.key,text:m.text});x.innerText=m.text,(m.key==T.speedPreStore&&_.map(function(P){return P.key}).indexOf(T.speedPreStore)!==-1||m.key==1)&&(c.addClass(S,"current"),T._previousSelection=S),S.appendChild(x),a.appendChild(S)})},execute:function(a){this._player.setSpeed(a,!1)},verifySpeedLevels:function(a){var s=0;if(a&&a.length)try{a.forEach(function(_){typeof _.key=="number"&&_.key==_.key&&0<=_.key&&s++})}catch{return!1}return a&&s===a.length}});t.exports=l},{"../../../lang/index":25,"../../../lib/constants":30,"../../../lib/cookie":31,"../../../lib/dom":34,"../../../lib/event":35,"../../../lib/object":44,"../../../lib/util":52,"../../../player/base/event/eventtype":70,"./selector":156,"./util":158}],158:[function(e,t,w){t.exports.findliElementForSelector=function(y){var u;return y&&y.tagName.toLowerCase()!="li"?(u=y.parentElement)&&u.tagName.toLowerCase()=="li"?u:null:y},t.exports.findliElementByKey=function(y,u){return document.querySelectors(y),null},t.exports.findItemElementForList=function(y){var u;return!y||-1<y.className.indexOf("prism-setting-item")||(u=y.parentElement)&&(y=t.exports.findItemElementForList(u)),y}},{}],159:[function(n,t,w){var y=n("../component"),u=n("../../lib/dom"),c=n("../../lang/index"),f=n("../../player/base/event/eventtype"),h=n("./util"),n=y.extend({init:function(l,a){y.call(this,l,a),this.addClass("prism-snapshot-btn")},createEl:function(){return y.prototype.createEl.call(this,"div")},bindEvent:function(){var l=this,a=this._player;a.on(f.Private.Snapshot_Hide,function(){u.css(l._el,"display","none")}),h.registerTooltipEvent.call(this,this.el(),c.get("Snapshot")),this.on("click",function(){l.trigger(f.Player.Snapshoting),l.trigger(f.Player.Snapshoted,a.takeSnapshot())})}});t.exports=n},{"../../lang/index":25,"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],160:[function(u,t,w){var y=u("../component"),u=(u("../../lib/dom"),u("../../player/base/event/eventtype"),y.extend({init:function(c,f){y.call(this,c,f),this.addClass("prism-text-overlay")},createEl:function(){return y.prototype.createEl.call(this,"div")},_hide:function(c){},_show:function(c){},bindEvent:function(){}}));t.exports=u},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135}],161:[function(n,t,w){var y=n("../component"),u=(n("../../lib/util"),n("../../lib/dom")),c=n("../../lib/event"),f=(n("../../lib/ua"),n("../../lang/index"),n("../../player/base/event/eventtype")),h=n("./util"),n=y.extend({init:function(l,a){y.call(this,l,a),this.addClass("prism-thumbnail")},createEl:function(){var l=y.prototype.createEl.call(this,"div");return l.innerHTML="<img></img><span></span>",l},bindEvent:function(){var l=this,a=(c.on(this._el,"mousemove",function(s){s.preventDefault()}),c.on(this._el,"touchmove",function(s){s.preventDefault()}),l._player.on(f.Private.ThumbnailLoaded,function(v){var _,T,m,v=v.paramData;v&&0<v.length&&(_=l._player._thumbnailService.makeUrl(v[0].text),l._player.log("THUMBNAILSTART",{tu:encodeURIComponent(_)}),T=new Date().getTime(),v[0].isBig?(u.css(l.el(),"background","url("+_+")"),u.css(l.el(),"width",v[0].w+"px"),u.css(l.el(),"height",v[0].h+"px"),l._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-T})):((m=document.querySelector("#"+l.id()+" img")).onload=function(){var S=m.width,x=m.height;u.css(l.el(),"width",S+"px"),u.css(l.el(),"height",x+"px"),l._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-T})},m.src=_))}),h.throttle(function(S){var _,T,m,S=S[0],v=document.querySelector("#"+l.id()+" span"),S=S.paramData;v.innerText=S.formatTime,S&&((_=l._player._thumbnailService.findAvailableCue(S.time))?_.isBig?(T=l._player._thumbnailService.makeUrl(_.text),u.css(l.el(),"background","url("+T+")"),_.w,_.h,m=-1*_.x+"px "+-1*_.y+"px",u.css(l.el(),"background-position",m)):(m=document.querySelector("#"+l.id()+" img"),T=l._player._thumbnailService.makeUrl(_.text),m.src!=T&&(m.src=T)):(u.css(l.el(),"border","none"),u.css(v,"left","0px")),u.css(l.el(),"display","block"),m=0,T=(_?l.el():v).offsetWidth,m=S.left+T>S.progressWidth?S.left-T:(m=S.left-T/2)<0?0:m,u.css(l.el(),"left",m+"px"))},30));l._player.on(f.Private.ThumbnailShow,a),l._player.on(f.Private.ThumbnailHide,function(s){u.css(l.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});t.exports=n},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../lib/ua":50,"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],162:[function(f,t,w){var y=f("../component"),u=f("../../lib/util"),c=f("../../player/base/event/eventtype"),f=y.extend({init:function(h,n){y.call(this,h,n),this.addClass("prism-time-display")},createEl:function(){var h=y.prototype.createEl.call(this,"div");return h.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',h},bindEvent:function(){var h=this;this._player.on(c.Video.DurationChange,function(){var n=u.formatTime(h._player.getDisplayDuration());n?(document.querySelector("#"+h.id()+" .time-bound").style.display="inline",document.querySelector("#"+h.id()+" .duration").style.display="inline",document.querySelector("#"+h.id()+" .duration").innerText=n):(document.querySelector("#"+h.id()+" .duration").style.display="none",document.querySelector("#"+h.id()+" .time-bound").style.display="none")}),this._player.on(c.Video.TimeUpdate,function(){var n=h._player.getCurrentTime(),n=u.formatTime(n);document.querySelector("#"+h.id()+" .current-time")&&(n?(document.querySelector("#"+h.id()+" .current-time").style.display="inline",document.querySelector("#"+h.id()+" .current-time").innerText=n):document.querySelector("#"+h.id()+" .current-time").style.display="none")})}});t.exports=f},{"../../lib/util":52,"../../player/base/event/eventtype":70,"../component":135}],163:[function(f,t,w){var y=f("../component"),u=f("../../lib/dom"),c=f("../../player/base/event/eventtype"),f=y.extend({init:function(h,n){y.call(this,h,n),this.addClass("prism-tooltip")},createEl:function(){var h=y.prototype.createEl.call(this,"p");return h.innerText="提示信息",h},bindEvent:function(){var h=this;h._player.on(c.Private.TooltipShow,function(a){var l=document.querySelector("#"+h.id()),a=a.paramData,s=(l.innerText=a.text,u.css(l,"display","block"),l.offsetWidth),_=document.querySelector("#"+h._player.id()+" .prism-controlbar");_&&(_=_.offsetWidth,a.left+s>_?u.css(l,"left",_-s+"px"):u.css(l,"left",a.left-(s-a.width)/2+"px"))}),h._player.on(c.Private.TooltipHide,function(n){var l=document.querySelector("#"+h.id());u.css(l,"display","none")})}});t.exports=f},{"../../lib/dom":34,"../../player/base/event/eventtype":70,"../component":135}],164:[function(n,t,w){var y=n("../component"),u=n("../../lib/dom"),c=n("../../lib/event"),f=n("../../lang/index"),h=n("../../player/base/event/eventtype"),n=y.extend({init:function(l,a){y.call(this,l,a),this.addClass("prism-unmute-btn")},createEl:function(){var l=y.prototype.createEl.call(this,"div");return l.innerText=f.get("Click_To_Unmute"),l},bindEvent:function(){var l=this;this._player.on(h.Private.MutedAutoplay,function(){var a;(a=l._player.getOptions().autoplayPolicy)!=null&&a.showUnmuteBtn&&l._show()}),c.on(this.el(),"click",function(){l._player.unMute(!0),l._hide()})},_show:function(){u.css(this.el(),"display","block")},_hide:function(){u.css(this.el(),"display","none")}});t.exports=n},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../component":135}],165:[function(e,t,w){var y=e("../../lib/event"),u=e("../../player/base/event/eventtype");t.exports.registerTooltipEvent=function(c,f){function h(){n._controlbarTooltipHandler&&(clearTimeout(n._controlbarTooltipHandler),n._controlbarTooltipHandler=null)}var n=this;y.on(this.el(),"mouseover",function(l){h(),n._controlbarTooltipHandler=setTimeout(function(){n._player.trigger(u.Private.TooltipHide)},4e3);var a=n.el().offsetLeft,s=n.el().offsetWidth,_=f;typeof f=="function"&&(_=f.call(this)),n._player.trigger(u.Private.TooltipShow,{left:a,width:s,text:_})}),y.on(this.el(),"mouseout",function(){h(),n._player.trigger(u.Private.TooltipHide)})},t.exports.throttle=function(c,f){var h=Date.now();return function(){var n=arguments,l=Date.now();f<=l-h&&(c(n),h=l)}},t.exports.debounce=function(c,f){var h;return function(){var n=this,l=arguments;clearTimeout(h),h=setTimeout(function(){c.apply(n,l)},f)}}},{"../../lib/event":35,"../../player/base/event/eventtype":70}],166:[function(a,t,w){var y=a("../component"),u=a("../../lib/dom"),c=a("../../lib/event"),f=a("../../player/base/event/eventtype"),h=a("./util"),n=a("../../lang/index"),l=a("./volumecontrol"),a=y.extend({init:function(s,_){y.call(this,s,_),this.addClass("prism-volume");var T=new l(s,_);s.addChild(T,_),this.volumeControl=T},createEl:function(){var s=y.prototype.createEl.call(this,"div");return s.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',s},bindEvent:function(){var s=this,_=s._player,T=(this.icon=document.querySelector("#"+s.id()+"  .volume-icon"),h.registerTooltipEvent.call(this,this.el(),function(){return s._player.muted()||s._player.getVolume()==0?n.get("Muted"):n.get("Volume")}),c.on(this.icon,"click",function(v){var S;s.volumeControl._shown?_.muted()?_.unMute():_.mute():(S=s.el().offsetLeft,s._player.trigger(f.Private.SettingListHide),s._player.trigger(f.Private.SelectorHide),s._player.trigger(f.Private.VolumeVisibilityChange,S),s._player.trigger(f.Private.MarkerTextHide))}),document.querySelector("#"+s.id()+"  .long-horizontal")),m=document.querySelector("#"+s.id()+"  .short-horizontal");c.on(this.el(),"mouseover",function(){u.removeClass(T,"volume-hover-animation"),setTimeout(function(){u.addClass(T,"volume-hover-animation")}),setTimeout(function(){u.removeClass(T,"volume-hover-animation"),u.addClass(m,"volume-hover-animation"),setTimeout(function(){u.removeClass(m,"volume-hover-animation"),u.addClass(T,"volume-hover-animation")},300)},300)}),c.on(window,"resize",function(){var v;s.volumeControl._shown&&(v=s.el().offsetLeft,s._player.trigger(f.Private.VolumeUpdatePosition,v))})}});t.exports=a},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../component":135,"./util":165,"./volumecontrol":167}],167:[function(h,t,w){var y=h("../component"),u=h("../../lib/dom"),c=h("../../lib/event"),f=h("../../player/base/event/eventtype"),h=(h("./util"),h("../../lang/index"),y.extend({init:function(n,l){y.call(this,n,l),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var n=y.prototype.createEl.call(this,"div");return n.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',n},bindEvent:function(){var n=this;this.icon=document.querySelector("#"+n._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+n.id()),this.volumnValue=document.querySelector("#"+n.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+n.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+n.id()+"  .volume-cursor"),this._player.on(f.Private.VolumeVisibilityChange,function(s){var a,s=s.paramData;!n._shown&&s?(a=n._player.getVolume(),n._setVolumnUI(a),u.css(n.control,"display","block"),s&&n._updatePosition(s),n._shown=!0):n._hide()}),this._player.on(f.Private.VolumeUpdatePosition,function(l){l=l.paramData,n._shown&&n._updatePosition(l)}),this._player.on(f.Private.ControlBarClick,function(l){u.hasClass(l.paramData.target,"prism-controlbar-bg")&&n._hide()}),c.on(this.volumnRange,"click",function(l){l=u.getPointerPosition(n.volumnRange,l).y,l<0||1<l||(n._setVolumnUI(l=1<(l=l<0?0:l)?1:l),n._setMuteUI(l),n._player.setVolume(l))}),c.on(this._player.tag,"click",function(l){l&&l.target==l.currentTarget&&n._hide()}),c.on(this._player.tag,"touchstart",function(l){l&&l.target==l.currentTarget&&n._hide()}),c.on(this.volumnCursor,"mousedown",function(l){n._onMouseDown(l)}),c.on(this.volumnCursor,"touchstart",function(l){n._onMouseDown(l)}),this._player.on(f.Private.VolumnChanged,function(l){l=l.paramData,-1<l&&n._setVolumnUI(l),n._setMuteUI(l)}),c.on(this.control,"mouseleave",function(){n._offEvent(),n._hide()}),c.on(this.control,"mouseover",function(){u.addClass(n.control,"hover")}),n._rangeBottom=n._getBottom()},_getBottom:function(){var n;return window.getComputedStyle?(n=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(n)):26},_onMouseDown:function(n){var l=this;n.preventDefault(),c.on(this.control,"mousemove",function(a){l._onMouseMove(a)}),c.on(this.control,"touchmove",function(a){l._onMouseMove(a)}),c.on(this._player.tag,"mouseup",function(a){l._onMouseUp(a)}),c.on(this._player.tag,"touchend",function(a){l._onMouseUp(a)}),c.on(this.control,"mouseup",function(a){l._onMouseUp(a)}),c.on(this.control,"touchend",function(a){l._onMouseUp(a)})},_onMouseUp:function(n){n.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(n=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(n),this._setMuteUI(n))},_onMouseMove:function(n){n.preventDefault(),n=u.getPointerPosition(this.volumnRange,n).y,n<0||1<n||this._setVolumnUI(n=1<(n=n<0?0:n)?1:n)},_getPosition:function(n){for(var l=this.volumnRange,a=0;l=l.offsetParent;)a+=l.offsetTop;var s=this.volumnRange.offsetHeight,_=this.volumnCursor.offsetHeight,T=(n.touches?n.touches[0]:n).pageY;return(s-((T=s<T-a?n.clientY:T)-a)+_)/this.volumnRange.offsetHeight},_offEvent:function(){c.off(this._player.tag,"mouseup"),c.off(this._player.tag,"touchend"),c.off(this.control,"mousemove"),c.off(this.control,"touchmove"),c.off(this.control,"mouseup"),c.off(this.control,"touchend")},_setMuteUI:function(n){isNaN(n)||(n==0||n==-1?u.addClass(this.icon,"mute"):u.removeClass(this.icon,"mute"))},_setVolumnUI:function(n){isNaN(n)||(u.css(this.volumnValue,"height",100*n+"%"),u.css(this.volumnCursor,"bottom",100*(n=n==1?.99:n)+"%"))},_hide:function(){u.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(n){u.css(this.control,"left",n-5+"px")}}));t.exports=h},{"../../lang/index":25,"../../lib/dom":34,"../../lib/event":35,"../../player/base/event/eventtype":70,"../component":135,"./util":165}],168:[function(e,t,w){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),unmuteButton:e("./component/unmute-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display"),liveShiftProgress:e("../commonui/liveshiftprogress"),liveShiftTimeDisplay:e("../commonui/livetimedisplay"),setting:e("./component/setting/button"),subtitle:e("./component/cc-button"),thumbnail:e("./component/thumbnail"),tooltip:e("./component/tooltip")}},{"../commonui/liveshiftprogress":12,"../commonui/livetimedisplay":13,"./component/big-play-button":136,"./component/cc-button":137,"./component/controlbar":138,"./component/error-display":140,"./component/fullscreen-button":141,"./component/h5-loading":142,"./component/info-display":143,"./component/live-display":145,"./component/play-button":147,"./component/progress":148,"./component/setting/button":151,"./component/snapshot":159,"./component/thumbnail":161,"./component/time-display":162,"./component/tooltip":163,"./component/unmute-button":164,"./component/volume":166}]},{},[15])(15)})})(aliplayerMin);var aliplayerMinExports=aliplayerMin.exports;const Aliplayer$1=getDefaultExportFromCjs(aliplayerMinExports),_hoisted_1={class:"main-content content-wrap"},_hoisted_2={class:"left-area"},_sfc_main=defineComponent({__name:"App",setup(e){const t=ref(null),w=ref(videoList[0]);onMounted(()=>{y(videoList[0].Source,videoList[0].CoverURL)});const y=(h,n)=>{t.value=new Aliplayer$1({id:"container",trackLog:!1,width:"100%",height:"600px",source:h,cover:n,components:[{name:"MemoryPlayComponent",type:window.AliPlayerComponent.MemoryPlayComponent,args:[!1,f,c]}]},l=>{l.on("ended",()=>{let a=videoList.findIndex(s=>s.VideoId===w.value.VideoId);a===-1||a===videoList.length-1||u(videoList[a+1])})})},u=h=>{w.value=h,t.value.dispose(),y(h.Source,h.CoverURL)},c=function(h,n){localStorage.setItem(h,n)},f=function(h){return localStorage.getItem(h)};return(h,n)=>(openBlock(),createElementBlock(Fragment,null,[n[0]||(n[0]=createBaseVNode("header",null,[createBaseVNode("div",{class:"main-content"},[createBaseVNode("div",null,"ZzzPlayer"),createBaseVNode("div",{class:"copyright"},"Copyright 2025-2100 By ChenGuangqi")])],-1)),createBaseVNode("main",null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createVNode(VideoPlayerInput,{onUpdate:u}),createVNode(ThePlayer,{playingVideo:w.value},null,8,["playingVideo"])])])])],64))}}),App=_export_sfc(_sfc_main,[["__scopeId","data-v-72851cb6"]]);createApp(App).mount("#app");
